;/*FB_PKG_DELIM*/

/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.2.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():typeof i==="function"&&i.amd?i(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(){b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return b.apply(this,arguments)};function c(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var d=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,e=Object.keys,f=Array.isArray;typeof Promise!=="undefined"&&!d.Promise&&(d.Promise=Promise);function g(a,b){if(typeof b!=="object")return a;e(b).forEach(function(c){a[c]=b[c]});return a}var h=Object.getPrototypeOf,i={}.hasOwnProperty;function j(a,b){return i.call(a,b)}function k(a,b){typeof b==="function"&&(b=b(h(a))),(typeof Reflect==="undefined"?e:Reflect.ownKeys)(b).forEach(function(c){m(a,c,b[c])})}var l=Object.defineProperty;function m(a,b,c,d){l(a,b,g(c&&j(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function n(a){return{from:function(b){a.prototype=Object.create(b.prototype);m(a.prototype,"constructor",a);return{extend:k.bind(null,a.prototype)}}}}var o=Object.getOwnPropertyDescriptor;function p(a,b){var c=o(a,b);return c||(c=h(a))&&p(c,b)}var q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw new Error("Assertion Failed")}function u(a){d.setImmediate?setImmediate(a):setTimeout(a,0)}function v(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function aa(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(j(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){t(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?f(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var g=a[e];(!g||!j(a,e))&&(g=a[e]={});x(g,d,c)}}else c===void 0?f(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ba(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ca(a){var b={};for(var c in a)j(a,c)&&(b[c]=a[c]);return b}var da=[].concat;function ea(a){return da.apply([],a)}var y="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ea([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return d[a]}),fa=y.map(function(a){return d[a]});v(y,function(a){return[a,!0]});var z=null;function ga(a){z=typeof WeakMap!=="undefined"&&new WeakMap();a=ha(a);z=null;return a}function ha(a){if(!a||typeof a!=="object")return a;var b=z&&z.get(a);if(b)return b;if(f(a)){b=[];z&&z.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ha(a[c]))}else if(fa.indexOf(a.constructor)>=0)b=a;else{c=h(a);b=c===Object.prototype?{}:Object.create(c);z&&z.set(a,b);for(d in a)j(a,d)&&(b[d]=ha(a[d]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",la=typeof ka==="symbol"?function(a){var b;return a!=null&&(b=a[ka])&&b.apply(a)}:function(){return null},ma={};function A(a){var b,c,d,e;if(arguments.length===1){if(f(a))return a.slice();if(this===ma&&typeof a==="string")return[a];if(e=la(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var na=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oa(a,b){B=a,pa=b}var pa=function(){return!0},qa=!new Error("").stack;function ra(){if(qa)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(pa).map(function(a){return"\n"+a}).join("")}y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var C=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(C);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ua(a,b){this._e=ra(),this.name=a,this.message=b}n(ua).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function va(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function wa(a,b,c,d){this._e=ra(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=va(a,b)}n(wa).from(ua);function xa(a,b){this._e=ra(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=va(a,b)}n(xa).from(ua);var ya=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),za=ua,D=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=ra(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}n(a).from(za);b[c]=a;return b},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Aa=C.reduce(function(a,b){a[b+"Error"]=D[b];return a},{});function Ba(a,b){if(!a||a instanceof ua||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Aa[a.name])return a;b=new Aa[a.name](b||a.message,a);"stack"in a&&m(b,"stack",{get:function(){return this.inner.stack}});return b}C=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=D[b]);return a},{});C.ModifyError=wa;C.DexieError=ua;C.BulkError=xa;function E(){}function Ca(a){return a}function Da(a,b){return a==null||a===Ca?b:function(c){return b(a(c))}}function F(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ea(a,b){return a===E?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?F(d,this.onsuccess):d);e&&(this.onerror=this.onerror?F(e,this.onerror):e);return f!==void 0?f:c}}function Fa(a,b){return a===E?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c);d&&(this.onerror=this.onerror?F(d,this.onerror):d)}}function Ga(a,b){return a===E?b:function(c){var d=a.apply(this,arguments);g(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var h=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?F(e,this.onsuccess):e);f&&(this.onerror=this.onerror?F(f,this.onerror):f);return d===void 0?h===void 0?void 0:h:g(d,h)}}function Ha(a,b){return a===E?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ia(a,b){return a===E?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ja={},Ka=100,La=20,Ma=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,h(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,h(b),a]}();var Na=y[0],Oa=y[1],Pa=y[2],Qa=Oa&&Oa.then,Ra=Na&&Na.constructor,Sa=!!Pa,Ta=!1,Ua=Pa?function(){Pa.then(mb)}:d.setImmediate?setImmediate.bind(null,mb):d.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){mb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(mb,0)},Va=function(a,b){bb.push([a,b]),Xa&&(Ua(),Xa=!1)},Wa=!0,Xa=!0,G=[],Ya=[],Za=null,$a=Ca,ab={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Jb(a[0],a[1])}catch(a){}})}},H=ab,bb=[],I=0,cb=[];function J(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=E;this._lib=!1;var b=this._PSD=H;B&&(this._stackHolder=ra(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ja)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&gb(this,this._value);return}this._state=null;this._value=null;++b.ref;fb(this,a)}var db={get:function(){var a=H,b=xb;function c(c,d){var e=this,f=!a.global&&(a!==H||b!==xb),g=f&&!N(),h=new J(function(b,h){ib(e,new eb(Gb(c,a,f,g),Gb(d,a,f,g),b,h,a))});B&&lb(h,this);return h}c.prototype=Ja;return c},set:function(a){m(this,"then",a&&a.prototype===Ja?db:{get:function(){return a},set:db.set})}};k(J.prototype,{then:db,_then:function(a,b){ib(this,new eb(null,null,a,b,H))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):tb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):tb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return tb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ta=!0;var a=kb(this,[],La);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Ta=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new J(function(d,e){var f=setTimeout(function(){return e(new D.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&m(J.prototype,Symbol.toStringTag,"Dexie.Promise");ab.env=Db();function eb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}k(J,{all:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return J.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof J)return a;if(a&&typeof a.then==="function")return new J(function(b,c){a.then(b,c)});var b=new J(Ja,!0,a);lb(b,Za);return b},reject:tb,race:function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.map(function(a){return J.resolve(a).then(b,c)})})},PSD:{get:function(){return H},set:function(a){return H=a}},totalEchoes:{get:function(){return xb}},newPSD:M,usePSD:Eb,scheduler:{get:function(){return Va},set:function(a){Va=a}},rejectionMapper:{get:function(){return $a},set:function(a){$a=a}},follow:function(a,b){return new J(function(c,d){return M(function(b,c){var d=H;d.unhandleds=[];d.onunhandled=c;d.finalize=F(function(){var a=this;qb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Ra&&(Ra.allSettled&&m(J,"allSettled",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return J.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Ra.any&&typeof AggregateError!=="undefined"&&m(J,"any",function(){var a=A.apply(null,arguments).map(Ab);return new J(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return J.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function fb(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&nb();b&&typeof b.then==="function"?fb(a,function(a,c){b instanceof J?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,hb(a));c&&ob()},gb.bind(null,a))}catch(b){gb(a,b)}}function gb(a,b){Ya.push(b);if(a._state!==null)return;var c=a._lib&&nb();b=$a(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&aa(function(){var c=p(b,"stack");b._promise=a;m(b,"stack",{get:function(){return Ta?c&&(c.get?c.get.apply(b):c.value):a.stack}})});rb(a);hb(a);c&&ob()}function hb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ib(a,b[c]);c=a._PSD;--c.ref||c.finalize();I===0&&(++I,Va(function(){--I===0&&pb()},[]))}function ib(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++I;Va(jb,[c,a,b])}function jb(a,b,c){try{Za=b;var d,e=b._value;b._state?d=a(e):(Ya.length&&(Ya=[]),d=a(e),Ya.indexOf(e)===-1&&sb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Za=null,--I===0&&pb(),--c.psd.ref||c.psd.finalize()}}function kb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&kb(a._prev,b,c));return b}function lb(a,b){var c=b?b._numPrev+1:0;c<Ka&&(a._prev=b,a._numPrev=c)}function mb(){nb()&&ob()}function nb(){var a=Wa;Wa=!1;Xa=!1;return a}function ob(){var a,b,c;do while(bb.length>0){a=bb;bb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(bb.length>0);Wa=!0;Xa=!0}function pb(){var a=G;G=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=cb.slice(0);var b=a.length;while(b)a[--b]()}function qb(a){function b(){a(),cb.splice(cb.indexOf(b),1)}cb.push(b);++I;Va(function(){--I===0&&pb()},[])}function rb(a){G.some(function(b){return b._value===a._value})||G.push(a)}function sb(a){var b=G.length;while(b)if(G[--b]._value===a._value){G.splice(b,1);return}}function tb(a){return new J(Ja,!1,a)}function K(a,b){var c=H;return function(){var d=nb(),e=H;try{O(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{O(e,!1),d&&ob()}}}var L={awaits:0,echoes:0,id:0},ub=0,vb=[],wb=0,xb=0,yb=0;function M(b,a,c,d){var e=H,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++yb;var h=ab.env;f.env=Sa?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:Hb(h.nthen,f),gthen:Hb(h.gthen,f)}:{};a&&g(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};h=Eb(f,b,c,d);f.ref===0&&f.finalize();return h}function zb(){L.id||(L.id=++ub);++L.awaits;L.echoes+=Ma;return L.id}function N(){if(!L.awaits)return!1;--L.awaits===0&&(L.id=0);L.echoes=L.awaits*Ma;return!0}(""+Qa).indexOf("[native code]")===-1&&(zb=N=E);function Ab(a){if(L.echoes&&a&&a.constructor===Ra){zb();return a.then(function(a){N();return a},function(a){N();return P(a)})}return a}function Bb(a){++xb,(!L.echoes||--L.echoes===0)&&(L.echoes=L.id=0),vb.push(H),O(a,!0)}function Cb(){var a=vb[vb.length-1];vb.pop();O(a,!1)}function O(a,b){var c=H;(b?L.echoes&&(!wb++||a!==H):wb&&(!--wb||a!==H))&&Fb(b?Bb.bind(null,a):Cb);if(a===H)return;H=a;c===ab&&(ab.env=Db());if(Sa){b=ab.env.Promise;var e=a.env;Oa.then=e.nthen;b.prototype.then=e.gthen;(c.global||a.global)&&(Object.defineProperty(d,"Promise",e.PromiseProp),b.all=e.all,b.race=e.race,b.resolve=e.resolve,b.reject=e.reject,e.allSettled&&(b.allSettled=e.allSettled),e.any&&(b.any=e.any))}}function Db(){var a=d.Promise;return Sa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Oa.then,gthen:a.prototype.then}:{}}function Eb(a,b,c,d,e){var f=H;try{O(a,!0);return b(c,d,e)}finally{O(f,!1)}}function Fb(a){Qa.call(Na,a)}function Gb(a,b,c,d){return typeof a!=="function"?a:function(){var e=H;c&&zb();O(b,!0);try{return a.apply(this,arguments)}finally{O(e,!1),d&&Fb(N)}}}function Hb(a,b){return function(c,d){return a.call(this,Gb(c,b),Gb(d,b))}}var Ib="unhandledrejection";function Jb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var e;b={promise:b,reason:a};d.document&&document.createEvent?(e=document.createEvent("Event"),e.initEvent(Ib,!0,!0),g(e,b)):d.CustomEvent&&(e=new CustomEvent(Ib,{detail:b}),g(e,b));if(e&&d.dispatchEvent){dispatchEvent(e);if(!d.PromiseRejectionEvent&&d.onunhandledrejection)try{d.onunhandledrejection(e)}catch(a){}}B&&e&&!e.defaultPrevented}catch(a){}}var P=J.reject;function Kb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!H.letThrough&&!a._vip){if(a._state.openComplete)return P(new D.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return P(new D.DatabaseClosed());a.open()["catch"](E)}return a._state.dbReadyPromise.then(function(){return Kb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Kb(a,b,c,d)})}return P(e)}return e._promise(b,function(a,b){return M(function(){H.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}y="3.2.2";var Q=String.fromCharCode(65535),Lb=-Infinity,R="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Mb="String expected.",Nb=[],Ob=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Pb=Ob,Qb=Ob,Rb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Sb="__dbnames",Tb="readonly",Ub="readwrite";function S(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Vb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=ga(b),delete b[a]);return b}:function(a){return a}}var Xb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||H.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new D.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=nb();try{return d&&d.db===this.db?d===H.trans?d._promise(a,f,c):M(function(){return d._promise(a,f,c)},{trans:d,transless:H.transless||H}):Kb(this.db,a,[this.name],f)}finally{g&&ob()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(f(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=e(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Q)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&B&&!1;var d=this.schema.idxByName,g=this.db._deps.indexedDB;function h(a,b){try{return g.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var e=b[0];b=b[1];var g=d[c],i=a[c];return[e||g,e||!g?S(b,g&&g.multi?function(a){a=w(a,c);return f(a)&&a.some(function(a){return h(i,a)})}:function(a){return h(i,w(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,f(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(j(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){g(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!f(a)){var c=w(a,this.schema.primKey.keyPath);if(c===void 0)return P(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof b!=="function"?e(b).forEach(function(c){x(a,c,b[c])}):b(a,{value:a,primKey:c})}catch(a){}return this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Wb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Vb})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkAdd(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Wb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkPut(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new xa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function Yb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=h;for(var d=1,g=arguments.length;d<g;++d)h(arguments[d]);return c;function h(a,d,e){if(typeof a==="object")return i(a);d||(d=Ha);e||(e=E);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){e(a).forEach(function(b){var c=a[b];if(f(c))h(b,a[b][0],a[b][1]);else if(c==="asap")var d=h(b,Ca,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){u(function(){a.apply(null,b)})})});else throw new D.InvalidArgument("Invalid event config")})}}function Zb(a,b){n(b).from({prototype:a});return b}function $b(a){return Zb(Xb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Yb(null,{creating:[Ea,E],reading:[Da,Ca],updating:[Ga,E],deleting:[Fa,E]})})}function ac(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bc(a,b){a.filter=S(a.filter,b)}function cc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return S(d(),b())}:b;a.justLimit=c&&!d}function dc(a,b){a.isMatch=S(a.isMatch,b)}function ec(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new D.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function fc(a,b,c){var d=ec(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function gc(a,b,c,d){var e=a.replayFilter?S(a.filter,a.replayFilter()):a.filter;if(!a.or)return hc(fc(a,d,c),S(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));j(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),hc(fc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function hc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=K(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=E},function(b){a.fail(b),c=E}))&&f(a.value,a,function(a){return c=a});c()})})}function T(a,b){try{var c=kc(a),d=kc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return jc(lc(a),lc(b));case"Array":return ic(a,b)}}catch(a){}return NaN}function ic(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function jc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function kc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ja(a);return b==="ArrayBuffer"?"binary":b}function lc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var mc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,P.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,P.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=S(b.algorithm,a)};a.prototype._iterate=function(a,b){return gc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&g(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return gc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ac(c,!0))return d.count({trans:a,query:{index:ec(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return gc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&ac(c,!0)&&c.limit>0){var d=c.valueMapper,e=ec(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return gc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ac(b)?cc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):cc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);cc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){bc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){bc(this._ctx,function(b){return a(b.value)});dc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&ac(b,!0)&&b.limit>0)return this._read(function(a){var c=ec(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};bc(this._ctx,function(a){a=a.primaryKey.toString();var c=j(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var f;if(typeof a==="function")f=a;else{var g=e(a),h=g.length;f=function(b){var c=!1;for(var d=0;d<h;++d){var e=g[d],f=a[e];w(b,e)!==f&&(x(b,e,f),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=e(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var e=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:ga(t),primKey:b[g+s]};f.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ac(c)&&c.limit===Infinity&&(typeof a!=="function"||a===nc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===nc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&e(g+m)})})};return e(0).then(function(){if(n.length>0)throw new wa("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return ac(a)&&(a.isPrimKey&&!Qb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new wa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(nc)};return a}(),nc=function(a,b){return b.value=null};function oc(a){return Zb(mc.prototype,function(b,c){this.db=a;var d=Vb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ca?f:null}})}function pc(a,b){return a<b?-1:a===b?0:1}function qc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof xc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function rc(a){return new a.Collection(a,function(){return wc("")}).limit(0)}function sc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function tc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function uc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function vc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Mb);function m(a){e=sc(a);f=tc(a);g=a==="next"?pc:qc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=uc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function wc(a){return{type:1,lower:a,upper:a}}var xc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?rc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,R)}};a.prototype.equals=function(a){return a==null?U(this,R):new this.Collection(this,function(){return wc(a)})};a.prototype.above=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,R):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Mb):this.between(a,a+Q,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):vc(this,function(a,b){return a.indexOf(b[0])===0},[a],Q)};a.prototype.equalsIgnoreCase=function(a){return vc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ma,arguments);return a.length===0?rc(this):vc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Q)};a.prototype.anyOf=function(){var a=this,b=A.apply(ma,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,R)}if(b.length===0)return rc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Lb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ma,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,R)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Lb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return rc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,R)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ma,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?rc(this):this.inAnyRange(a.map(function(a){return[a,a+Q]}))};return a}();function yc(a){return Zb(xc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new D.MissingAPI();this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function W(a){return K(function(b){zc(b);a(b.target.error);return!1})}function zc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ac="storagemutated",X="x-storagemutated-1",Y=Yb(null,Ac),Bc=function(){function a(){}a.prototype._lock=function(){t(!H.global);++this._reculock;this._reculock===1&&!H.global&&(H.lockOwnerFor=this);return this};a.prototype._unlock=function(){t(!H.global);if(--this._reculock===0){H.global||(H.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Eb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;t(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new D.DatabaseClosed(d);case"MissingAPIError":throw new D.MissingAPI(d.message,d);default:throw new D.OpenFailed(d)}if(!this.active)throw new D.TransactionInactive();t(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=K(function(c){zc(c),b._reject(a.error)});a.onabort=K(function(c){zc(c),b.active&&b._reject(new D.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=K(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return P(new D.ReadOnly("Transaction is readonly"));if(!this.active)return P(new D.TransactionInactive());if(this._locked())return new J(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},H])});else if(c)return M(function(){var a=new J(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new J(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=J.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new J(function(a,d){c.then(function(c){return b._waitingQueue.push(K(a.bind(null,c)))},function(a){return b._waitingQueue.push(K(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(j(b,a))return b[a];var c=this.schema[a];if(!c)throw new D.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Cc(a){return Zb(Bc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=Yb(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new J(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return P(a)})})}function Dc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Ec(b)}}function Ec(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Fc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:v(c,function(a){return[a.name,a]})}}function Gc(a){return a.length===1?a[0]:a}var Hc=function(a){try{a.only([[]]);Hc=function(){return[[]]};return[[]]}catch(a){Hc=function(){return Q};return Q}};function Ic(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Jc(a);else return function(b){return w(b,a)}}function Jc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Kc(a){return[].slice.call(a)}var Lc=0;function Mc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Nc(a,b,c){function d(a,b){var c=Kc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=f(b),e=b==null,g={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Ic(b)},indexes:Kc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=f(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Ic(b)};g[Mc(b)]=c;return c}),getIndexByKeyPath:function(a){return g[Mc(a)]}};g[":id"]=e.primaryKey;b!=null&&(g[Mc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function g(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=K(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,zc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=K(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=K(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Lc;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=K(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=K(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=K(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=K(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=K(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=K(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(h),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=K(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var h=d.hasGetAll;d=c.tables.map(function(a){return g(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '"+a+"' not found");return i[a]},MIN_KEY:-Infinity,MAX_KEY:Hc(b),schema:c}}function Oc(a,c){return c.reduce(function(a,c){c=c.create;return b(b({},a),c(a))},a)}function Pc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Oc(Nc(b,e,d),a.dbcore);return{dbcore:c}}function Qc(a,b){var c=a._novip;a=b.db;a=Pc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Rc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=p(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?m(b,a,{get:function(){return this.table(a)},set:function(b){l(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Sc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Tc(a,b){return a._cfg.version-b._cfg.version}function Uc(a,b,c,d){var f=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,f);g.create(c);g._completion["catch"](d);var h=g._reject.bind(g),i=H.transless||H;M(function(){H.trans=g,H.transless=i,b===0?(e(f).forEach(function(a){Xc(c,a,f[a].primKey,f[a].indexes)}),Qc(a,c),J.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Vc(a,b,g,c)["catch"](h)})}function Vc(a,b,c,d){var f=a._novip,g=[];a=f._versions;var h=f._dbSchema=ad(f,f.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){g.push(function(){var g=h,j=a._cfg.dbschema;dd(f,g,d);dd(f,j,d);h=f._dbSchema=j;var k=Wc(g,j);k.add.forEach(function(a){Xc(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new D.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return $c(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),$c(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Qc(f,d);c._memoizedTables={};i=!0;var m=ca(j);k.del.forEach(function(a){m[a]=g[a]});Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],e(m),m);c.schema=m;var n=na(l);n&&zb();var o;j=J.follow(function(){o=l(c);if(o&&n){var a=N.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?J.resolve(o):j.then(function(){return o})}}),g.push(function(b){if(!i||!Pb){var d=a._cfg.dbschema;Zc(d,b)}Sc(f,[f.Transaction.prototype]);Rc(f,[f.Transaction.prototype],f._storeNames,f._dbSchema);c.schema=f._dbSchema})});function j(){return g.length?J.resolve(g.shift()(c.idbtrans)).then(j):J.resolve()}return j().then(function(){Yc(h,d)})}function Wc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Ob)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Xc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return $c(e,a)});return e}function Yc(a,b){e(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Xc(b,c,a[c].primKey,a[c].indexes)})}function Zc(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function $c(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ad(a,b,c){var d={};a=r(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Dc(Ec(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Dc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Fc(a,f,g)});return d}function bd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=ad(a,b,c);a._storeNames=r(b.objectStoreNames,0);Rc(a,[a._allTables],e(c),c)}function cd(a,b){b=ad(a,a.idbdb,b);b=Wc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function dd(a,b,c){a=a._novip;var e=c.db.objectStoreNames;for(var f=0;f<e.length;++f){var g=e[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+r(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function ed(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Dc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),f(d),b===0)})}var fd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){e(a).forEach(function(c){if(a[c]!==null){var d=ed(a[c]),e=d.shift();if(e.multi)throw new D.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")});b[c]=Fc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){g(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Sc(b,[b._allTables,b,b.Transaction.prototype]);Rc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],e(d),d);b._storeNames=e(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ia(this._cfg.contentUpgrade||E,a);return this};return a}();function gd(a){return Zb(fd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hd(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Kd(Sb,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function id(a){return a&&typeof a.databases==="function"}function jd(a){var b=a.indexedDB;a=a.IDBKeyRange;return id(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Sb})}):hd(b,a).toCollection().primaryKeys()}function kd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a).put({name:b})["catch"](E)}function ld(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!id(c)&&b!==Sb&&hd(c,a)["delete"](b)["catch"](E)}function md(a){return M(function(){H.letThrough=!0;return a()})}function nd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function od(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?P(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=ra());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new D.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return J.race([d,(typeof navigator==="undefined"?J.resolve():nd()).then(function(){return new J(function(d,f){e();if(!c)throw new D.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new D.MissingAPI();j.onerror=W(f);j.onblocked=K(a._fireOnBlocked);j.onupgradeneeded=K(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=zc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=K(function(){f(new D.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Uc(a,e/10,g,f)}},f);j.onsuccess=K(function(){g=null;var c=a._novip.idbdb=j.result,e=r(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Gc(e),"readonly");b.autoSchema?bd(a,c,e):(dd(a,a._dbSchema,e),!cd(a,e));Qc(a,e)}catch(a){}Nb.push(a);c.onversionchange=K(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=K(function(b){a.on("close").fire(b)});h&&kd(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return J.resolve(md(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ia,E);b.onReadyBeingFired=[];return J.resolve(md(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return P(c)})["finally"](function(){b.openComplete=!0,f()})}function pd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=g(b),e=g(c);function g(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?f(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return g(b)()}function qd(a,b,c){var d=arguments.length;if(d<2)throw new D.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ea(e);return[a,f,c]}function rd(a,b,c,d,e){return J.resolve().then(function(){var f=H.transless||H,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return rd(a,b,c,null,e)})}return P(d)}var h=na(e);h&&zb();var i;f=J.follow(function(){i=e.call(g,g);if(i)if(h){var a=N.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=pd(i))},f);return(i&&typeof i.then==="function"?J.resolve(i).then(function(a){return g.active?a:P(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return P(a)})})}function sd(a,b,c){a=f(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function td(a){return b(b({},a),{table:function(c){var d=a.table(c);c=d.schema;var e={},f=[];function g(a,c,d){var h=Mc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=c>0;j=b(b({},d),{isVirtual:j,keyTail:c,keyLength:i,extractKey:Ic(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,c+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(c.primaryKey.keyPath,0,c.primaryKey);e[":id"]=[h];for(var i=0,j=c.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Mc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:sd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:sd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(c){var a=c.query.index;return a.isVirtual?b(b({},c),{query:{index:a,range:m(c.query.range,a.keyTail)}}):c}k=b(b({},d),{schema:b(b({},c),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](sd(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](b.key.slice(0,g).concat(c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(sd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var ud={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:td};function vd(a,b,c,d){c=c||{};d=d||"";e(a).forEach(function(e){if(!j(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h!==i?c[d+e]=b[e]:h==="Object"?vd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});e(b).forEach(function(e){j(a,e)||(c[d+e]=b[e])});return c}function wd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var xd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return b(b({},a),{table:function(d){var e=a.table(d),f=e.schema.primaryKey,g=b(b({},e),{mutate:function(a){var g=H.trans,h=g.table(d).hook,i=h.deleting,k=h.creating,l=h.updating;switch(a.type){case"add":if(k.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(k.fire===E&&l.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===E)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===E)break;return g._promise("readwrite",function(){return n(a)},!0)}return e.mutate(a);function m(d){var g=H.trans,a=d.keys||wd(f,d);if(!a)throw new Error("Keys missing");d=d.type==="add"||d.type==="put"?b(b({},d),{keys:a}):b({},d);d.type!=="delete"&&(d.values=c([],d.values,!0));d.keys&&(d.keys=c([],d.keys,!0));return yd(e,d,a).then(function(b){var c=a.map(function(a,c){var e=b[c],h={onerror:null,onsuccess:null};if(d.type==="delete")i.fire.call(h,a,e,g);else if(d.type==="add"||e===void 0){var m=k.fire.call(h,a,d.values[c],g);a==null&&m!=null&&(a=m,d.keys[c]=a,f.outbound||x(d.values[c],f.keyPath,a))}else{m=vd(e,d.values[c]);var n=l.fire.call(h,m,a,e,g);if(n){var o=d.values[c];Object.keys(n).forEach(function(a){j(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return e.mutate(d).then(function(e){var f=e.failures,g=e.results,h=e.numFailures;e=e.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=c[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(d.type==="put"&&b[i]?d.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:e}})["catch"](function(a){c.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,c,d){return e.query({trans:a,values:!1,query:{index:f,range:c},limit:d}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:a}).then(function(e){if(e.numFailures>0)return Promise.reject(e.failures[0]);if(f.length<d)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,b(b({},c),{lower:f[f.length-1],lowerOpen:!0}),d)})})}}});return g}})}};function yd(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function zd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?ga(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ad={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return b(b({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=zd(a.keys,a.trans._cache,a.cache==="clone");return b?J.resolve(b):d.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?ga(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return d.mutate(a)}})}}}};function Bd(a){return!("from"in a)}var Z=function(a,b){if(this)g(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&"d"in a&&g(c,a);return c}};k(Z.prototype,(td={add:function(a){Dd(this,a);return this},addKey:function(a){Cd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Cd(b,a,a)});return this}},td[ka]=function(){return Fd(this)},td));function Cd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Bd(a))return g(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Cd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Gd(a)}if(T(b,a.to)>0){e?Cd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Gd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Dd(a,d);e&&b&&Dd(a,e)}function Dd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Cd(a,d,e);f&&c(a,f);b&&c(a,b)}Bd(b)||c(a,b)}function Ed(a,b){b=Fd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Fd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Fd(a){var b=Bd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Gd(a){var c;c=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((c=a.l)===null||c===void 0?void 0:c.d)||0);c=c>1?"r":c<-1?"l":"";if(c){var d=c==="r"?"l":"r",e=b({},a),f=a[c];a.from=f.from;a.to=f.to;a[c]=f[c];e[c]=f[d];a[d]=e;e.d=Hd(e)}a.d=Hd(a)}function Hd(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}var Id={stack:"dbcore",level:0,create:function(a){var c=a.schema.name,d=new Z(a.MIN_KEY,a.MAX_KEY);return b(b({},a),{table:function(g){var h=a.table(g),i=h.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=b(b({},h),{mutate:function(e){var j=e.trans,k=j.mutatedParts||(j.mutatedParts={}),l=function(a){a="idb://"+c+"/"+g+"/"+a;return k[a]||(k[a]=new Z())},m=l(""),n=l(":dels"),b=e.type;j=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[[],e.values]:[];var a=j[0],o=j[1],p=e.trans._cache;return h.mutate(e).then(function(c){if(f(a)){b!=="delete"&&(a=c.results);m.addKeys(a);var e=zd(a,p);!e&&b!=="add"&&n.addKeys(a);(e||o)&&Jd(l,i,e,o)}else if(a){e={from:a.lower,to:a.upper};n.add(e);m.add(e)}else m.add(d),n.add(d),i.indexes.forEach(function(a){return l(a.name).add(d)});return c})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};e(o).forEach(function(a){m[a]=function(e){var f=H.subscr;if(f){var i=function(a){a="idb://"+c+"/"+g+"/"+a;return f[a]||(f[a]=new Z())},j=i(""),m=i(":dels"),n=o[a](e),p=n[0],q=n[1];i(p.name||"").add(q);if(!p.isPrimaryKey)if(a==="count")m.add(d);else{var r=a==="query"&&l&&e.values&&h.query(b(b({},e),{values:!1}));return h[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&e.values)return r.then(function(a){a=a.result;j.addKeys(a);return b});var c=e.values?b.result.map(k):b.result;e.values?j.addKeys(c):m.addKeys(c)}else if(a==="openCursor"){var d=b,f=e.values;return d&&Object.create(d,{key:{get:function(){m.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;m.addKey(a);return a}},value:{get:function(){f&&j.addKey(d.primaryKey);return d.value}}})}return b})}}return h[a].apply(this,arguments)}});return m}})}};function Jd(a,b,c,d){function e(b){var e=a(b.name||"");function g(a){return a!=null?b.extractKey(a):null}var h=function(a){return b.multiEntry&&f(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&g(c[b]);b=d&&g(d[b]);T(a,b)!==0&&(a!=null&&h(a),b!=null&&h(b))})}b.indexes.forEach(e)}var Kd=function(){function a(c,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=b({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new J(function(a){g.dbReadyResolve=a});g.openCanceller=new J(function(a,b){g.cancelOpen=b});this._state=g;this.name=c;this.on=Yb(this,"populate","blocked","versionchange","close",{ready:[Ia,E]});this.on.ready.subscribe=s(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||J.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=oc(this);this.Table=$b(this);this.Transaction=Cc(this);this.Version=gd(this);this.WhereClause=yc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Hc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Nb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(ud);this.use(xd);this.use(Id);this.use(Ad);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new D.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Tc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?a():new J(function(a,c){if(b._state.openComplete)return c(new D.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new D.DatabaseClosed());return}b.open()["catch"](E)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return od(this)};a.prototype._close=function(){var a=this._state,b=Nb.indexOf(this);b>=0&&Nb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new J(function(b){a.dbReadyResolve=b});a.openCanceller=new J(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new D.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new J(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=K(function(){ld(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new D.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return e(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=qd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=H.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Tb)g=Tb;else if(a=="rw"||a==Ub)g=Ub;else throw new D.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Tb&&g===Ub)if(f)e=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new D.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):P(a)}var i=rd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):H.trans?Eb(H.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!j(this._allTables,a))throw new D.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),Ld=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Md=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Ld]=function(){return this};return a}();function Nd(a,b){e(b).forEach(function(c){var d=a[c]||(a[c]=new Z());Dd(d,b[c])});return a}function Od(a){return new Md(function(b){var c=na(a);function d(b){c&&zb();var d=function(){return M(a,{subscr:b,trans:null})};d=H.trans?Eb(H.transless,d):d();c&&d.then(N,N);return d}var f=!1,g={},h={},i={get closed(){return f},unsubscribe:function(){f=!0,Y.storagemutated.unsubscribe(m)}};b.start&&b.start(i);var j=!1,k=!1;function l(){return e(h).some(function(a){return g[a]&&Ed(g[a],h[a])})}var m=function(a){Nd(g,a),l()&&n()},n=function(){if(j||f)return;g={};var a={},c=d(a);k||(Y(Ac,m),k=!0);j=!0;Promise.resolve(c).then(function(c){j=!1;if(f)return;l()?n():(g={},h=a,b.next&&b.next(c))},function(a){j=!1,b.error&&b.error(a),i.unsubscribe()})};n();return i})}try{td={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch(a){td={indexedDB:null,IDBKeyRange:null}}var Pd=Kd;k(Pd,b(b({},C),{"delete":function(a){a=new Pd(a,{addons:[]});return a["delete"]()},exists:function(a){return new Pd(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return jd(Pd.dependencies).then(a)}catch(a){return P(new D.MissingAPI())}},defineClass:function(){function a(a){g(this,a)}return a},ignoreTransaction:function(a){return H.trans?Eb(H.transless,a):a()},vip:md,async:function(a){return function(){try{var b=pd(a.apply(this,arguments));return!b||typeof b.then!=="function"?J.resolve(b):b}catch(a){return P(a)}}},spawn:function(a,b,c){try{a=pd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?J.resolve(a):a}catch(a){return P(a)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(a,b){a=J.resolve(typeof a==="function"?Pd.ignoreTransaction(a):a).timeout(b||6e4);return H.trans?H.trans.waitFor(a):a},Promise:J,debug:{get:function(){return B},set:function(a){oa(a,a==="dexie"?function(){return!0}:Rb)}},derive:n,extend:g,props:k,override:s,Events:Yb,on:Y,liveQuery:Od,extendObservabilitySet:Nd,getByKeyPath:w,setByKeyPath:x,delByKeyPath:ba,shallowClone:ca,deepClone:ga,getObjectDiff:vd,cmp:T,asap:u,minKey:Lb,addons:[],connections:Nb,errnames:ya,dependencies:td,semVer:y,version:y.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));Pd.maxKey=Hc(Pd.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Ac,function(a){if(!$){var b;Ob?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||Qd(a)}));function Qd(a){var b=$;try{$=!0,Y.storagemutated.fire(a)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var Rd=new BroadcastChannel(X);Y(Ac,function(a){$||Rd.postMessage(a)});Rd.onmessage=function(a){a.data&&Qd(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Ac,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&c([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&Qd(a.changedParts)}});C=self.document&&navigator.serviceWorker;C&&C.addEventListener("message",Sd)}function Sd(a){a=a.data;a&&a.type===X&&Qd(a.changedParts)}J.rejectionMapper=Ba;oa(B,Rb);ba=Object.freeze({__proto__:null,Dexie:Kd,liveQuery:Od,"default":Kd,RangeSet:Z,mergeRanges:Dd,rangesOverlap:Ed});b(Kd,ba,{"default":Kd});return Kd})}var k=!1;function l(){k||(k=!0,j());return h.exports}function b(a){switch(a){case void 0:return l()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/CCT5pM3qiNk/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("tweetnacl-1.0.3"));d={};var h={exports:d};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);