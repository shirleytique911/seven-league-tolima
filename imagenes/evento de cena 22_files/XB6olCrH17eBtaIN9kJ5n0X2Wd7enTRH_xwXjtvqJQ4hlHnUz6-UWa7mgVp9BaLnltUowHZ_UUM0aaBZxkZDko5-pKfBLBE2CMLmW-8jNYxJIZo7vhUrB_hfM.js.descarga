;/*FB_PKG_DELIM*/

__d("LSBumpE2EEMetadataThread",["LSCancelTaskByQueueName","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("bump_timestamp_ms",a[1]),d[0].set("thread_key",a[0]),d[0].set("bumped_by_local_device_send",a[2]),d[0].set("tam_thread_subtype",[0,0]),d[0].set("wa_jid",f),d[1]=d[0].get("thread_key"),d[0],c.sp(b("LSCancelTaskByQueueName"),c.i64.to_string(d[1]),[0,389])},function(e){return d[2]=new c.Map(),d[2].set("bump_timestamp_ms",a[1]),d[2].set("thread_key",a[0]),d[2].set("bumped_by_local_device_send",a[2]),d[2].set("tam_thread_subtype",[0,0]),d[2].set("wa_jid",f),d[3]=d[2].get("thread_key"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),[0,389],d[4],f,f,[0,0],[0,0],f,f,[0,0])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSCreateE2EEMetadataThread",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("offline_thread_key",a[1]),d[0].set("thread_type",a[2]),d[0].set("folder_type",a[3]),d[0].set("bump_timestamp_ms",a[4]),d[1]=d[0].get("offline_thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[1]),[0,388],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateE2EEMetadataParticipants",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[1]),[0,394],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MAWCatQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4877036382414550"}),null);
__d("MAWCatQuery.facebook.graphql",["MAWCatQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_facebookRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:11203")}),null);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWToast.react","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("BaseToasterStateManager").getInstance();function a(a){var b=a.body,d=a.icon,e=a.startAddOn;e=e===void 0?null:e;var f=a.supressCloseButton;f=f===void 0?!1:f;var g=a.title,j=a.toastId;if(j==null){c("err")("toastId or toasterStateManager is not provided");return}i.replace(j,h.jsx(c("MWToast.react"),{body:b,icon:d,onDismiss:function(){return i.expire(j)},startAddOn:e,supressCloseButton:f,title:g}))}g.mwReplaceToast=a}),98);
__d("MAWCryptoAuthToken",["MAWCatQuery","RelayHooks","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a==null||a.secure_message_over_wa_cat_query==null||a.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||a.secure_message_over_wa_cat_query.expiration_time_in_seconds==null?{error:"Crypto Auth Token was null or incomplete"}:{success:{encrypted_serialized_cat:a.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:a.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function a(a){return d("RelayHooks").fetchQuery(a,c("MAWCatQuery"),{}).toPromise().then(h).then(function(a){if(a.error!==null&&a.error!==void 0)throw c("err")("Unable to rotate Crypto Auth Token");return a.success})}g.processCatResponse=h;g.fetchFreshCAT=a}),98);
__d("WAFixedSizeMap",[],(function(a,b,c,d,e,f){a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=new Map();this.$3=0;this.$4=100;this.$4=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1.set(a,b);this.$2.set(this.$3,a);this.$3+=1;b=this.$2.get(this.$3-this.$4-1);b!=null&&(this.$1["delete"](b),this.$2["delete"](this.$3-this.$4-1))};b.clear=function(){this.$1.clear(),this.$2.clear(),this.$3=0};b.size=function(){return this.$1.size};return a}();f.FixedSizeMap=a}),66);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WAFixedSizeMap","WAHex","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b,c){a.onsuccess=b,a.onerror=c})}function i(a){return h(a).then(function(a){return a.target.result})}function j(a,c,e){return new(b("Promise"))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var k=new(d("WAFixedSizeMap").FixedSizeMap)({max:100});function a(a,c){var d=c.args,e=c.type,f=c.uniqKey;c=c.version;c=c===void 0?1:c;return f!=null&&k.has(f)?b("Promise").resolve({newlyCreated:"cached",result:k.get(f)}):l(a,{args:d,type:e,uniqKey:f,version:c})}function l(a,c){var e,f=c.args,g=c.scheduleConfig,h=c.type,k=c.uniqKey;c=c.version;c=c===void 0?1:c;e=JSON.stringify([h,(e=k)!=null?e:d("WAHex").randomHex(32)]);var l={backedOffCount:0,current:f,original:f,scheduleConfig:g,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:h,uniqKey:e,version:c,waitUntil:null},n=function(){var b,c=a().add(l),d=i(c);if(l.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(k!=null)return j(a,"uniqKey",k).then(function(c){if(c.length===0)return n();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return b("Promise").all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:n()})});else return n()}function m(a,b){return i(a()["delete"](b))}function c(a,b){return i(a().get(b))}function e(a,b){return i(a().put(b))}function f(a){return i(a().getAll())}function n(a){return h(a().clear()).then(function(){})}g.recentFinishedJobsCache=k;g.maybeCreateJobWithCache=a;g.maybeCreateJob=l;g.deletePersistedJob=m;g.readPersistedJob=c;g.updatePersistedJob=e;g.readAllPersistedJobs=f;g.clearJobs=n}),98);
__d("MessengerWaitForEvent",["Promise"],(function(a,b,c,d,e,f){function a(a,c,d){var e,f=d;return new(b("Promise"))(function(b){f?e=function(){f.apply(this,arguments)&&b.apply(this,arguments)}:e=b,a&&a.addEventListener&&a.addEventListener(c,e)})["finally"](function(){a&&a.removeEventListener&&a.removeEventListener(c,e)})}f.waitForEvent=a}),66);
__d("LocalStorageMutex",["MessengerWaitForEvent","Promise","QPLUserFlow","err","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=1e3;a=function(){function a(a){var b=this,d=a.mutexKey,e=a.localTakeoverKey,f=a.log,g=a.logError,h=a.getStorage,j=a.setItemGuarded,k=a.mutexTimeoutMs;k=k===void 0?i:k;a=a.mutexTimeoutCallback;this.mutexFilter=function(a){if(a.key!==b.$1)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};this.$1=d;this.$2=e;this.$5=h;this.$6=j;this.$3=f;this.$4=g;this.$7=k;this.$8=a}var e=a.prototype;e.init=function(){c("QPLUserFlow").start(c("qpl")._(1056847375,"584"));this.$3("APPMUTEX - this tab is "+c("pageID"));var a=this.getMutex();if(a!=null&&a===c("pageID")){this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT");c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}if(a!=null){this.$3("APPMUTEX - initiating localTAKEOVER");return this.localTakeover()}else{this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");a=this.$9(c("pageID"));var d=this.$10(c("pageID"));if(!a.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{bool:{setMutexResult:d.success,setTakeoverResult:a.success},string:{setMutexError:d.error,setTakeoverError:a.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"fail_to_set_takeover_or_mutex");return b("Promise").resolve(!1)}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return b("Promise").resolve(!0)}};e.localTakeover=function(){var a,e=this,f=this.$9(c("pageID"));if(!f.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{initTakeoverError:f.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_init_takeover_failure");return b("Promise").resolve(!1)}var g,h=function(){g!=null&&clearTimeout(g)};f=d("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter);var j=(a=this==null?void 0:this._mutexTimeoutMs)!=null?a:i;return b("Promise").race([f,new(b("Promise"))(function(a){g=setTimeout(function(){a()},j)}),this.$8?this.$8():new(b("Promise"))(function(a){})]).then(function(a){if(a==null){e.$3("AppMutex - Forcefully took the mutex and takeover lock");var b=e.$9(c("pageID")),d=e.$10(c("pageID"));if(!b.success||!d.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setMutexError:d.error,setTakeoverError:b.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_forcefully_takeover_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}e.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");d=e.$11(a.newValue);if(!d&&e.hasTakeoverPermission()){e.$3("APPMUTEX - setting mutex on localtakeover");b=e.$10(c("pageID"));if(!b.success){c("QPLUserFlow").addAnnotations(c("qpl")._(1056847375,"584"),{string:{setMutexError:b.error}});c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_set_mutex_failure");return!1}c("QPLUserFlow").endSuccess(c("qpl")._(1056847375,"584"));return!0}else{e.hasTakeoverPermission()&&e.$12();c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_no_takeover_permission");return!1}}).then(function(a){h();return a})["catch"](function(a){h();e.$4("AppMutex - localTakeover error no permission - "+a);c("QPLUserFlow").endFailure(c("qpl")._(1056847375,"584"),"local_takeover_general_failure");return!1})};e.onMutexDeath=function(){var a=this.getMutex();a!=null&&a==c("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())};e.takeoverFilter=function(a){if(a.key!==this.$2)return!1;a=a.newValue||"";if(!a.includes(c("pageID")))return!0;else return!1};e.$14=function(){if(!h){var a=this.$5();if(!a)throw c("err")("Could not get localStorage");h=a}return h};e.getMutex=function(){h=this.$14();return h.getItem(this.$1)};e.$10=function(a){h=this.$14();return this.$6(h,this.$1,a)};e.$13=function(){h=this.$14(),h.removeItem(this.$1)};e.getTakeover=function(){h=this.$14();return h.getItem(this.$2)};e.$9=function(a){h=this.$14();return this.$6(h,this.$2,a)};e.$12=function(){h=this.$14(),h.removeItem(this.$2)};e.$11=function(a){return a!=null?a:""};e.hasTakeoverPermission=function(){var a=this.getTakeover();return a!=null&&a==c("pageID")};return a}();g.THIS_TAB=c("pageID");g.LocalStorageMutex=a}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h="armadillo_msgr_mutex",i="armadillo_msgr_local_takeover",j=null;function a(){j==null&&(j=new(d("LocalStorageMutex").LocalStorageMutex)({mutexKey:h,localTakeoverKey:i,log:function(a){d("WALogger").LOG([a])},logError:function(a){d("WALogger").ERROR([a])},getStorage:d("MAWLocalStorage").getStorage,setItemGuarded:d("MAWLocalStorage").setItemGuarded}));return j}g.MAW_MUTEX_KEY=h;g.MAW_LOCALTAKEOVER_KEY=i;g.use=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWAdminMsgCTA.bs",["fbt","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType.bs","MAWTimeUtils","Promise","ReQL.bs","asyncToGeneratorRuntime","bs_caml_int64"],(function(a,b,c,d,e,f,g,h){"use strict";var i=h._("__JHASH__iw7A0LnsmaW__JHASH__").toString(),j=h._("__JHASH__jODYJ2eW1Pa__JHASH__").toString(),k=h._("__JHASH__xAOSvpC7vLN__JHASH__").toString();function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL.bs").first(d("ReQL.bs").fromIndexDescending(a.table("admin_message_ctas").index("ctaId"))));return a!=null?c("bs_caml_int64").add(a.ctaId,c("bs_caml_int64").one):c("bs_caml_int64").zero});return m.apply(this,arguments)}function n(a,b,c){return d("ReQL.bs").first(d("ReQL.bs").bounds(d("ReQL.bs").fromTableDescending(a.table("admin_message_ctas")),{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:b,tl:{hd:c,tl:0}}},{NAME:"lessThanOrEqual",VAL:{hd:b,tl:{hd:c,tl:0}}}]}))}function o(a){if(a==null)return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0};if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:i};switch(a){case d("MAWLocalizationType.bs").cutoverThreadAdminMessage:case d("MAWLocalizationType.bs").e2eeThreadAdminMessage:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:j};case d("MAWLocalizationType.bs").cutoverRollbackAdminMessage:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:k};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function p(a){if(a==null)return;if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";switch(a){case d("MAWLocalizationType.bs").cutoverThreadAdminMessage:return"admin_msg_thread_level_cutover";case d("MAWLocalizationType.bs").e2eeThreadAdminMessage:return"admin_msg_e2ee_thread";case d("MAWLocalizationType.bs").cutoverRollbackAdminMessage:return"admin_msg_cutover_rollback"}}function q(a,b,c,e,f){return a.table("admin_message_ctas").add({actionUrl:f.actionUrl,adClientToken:f.adClientToken,adHelpUrl:f.adHelpUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,adPreferenceUrl:f.adPreferenceUrl,ctaId:b,messageId:e.msgId,showAdChoiceIcon:f.showAdChoiceIcon,targetId:f.targetId,targetTitle:f.targetTitle,threadKey:c,timestampMs:d("MAWTimeUtils").toTimestamp(e.ts),title:f.title})}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield b("Promise").all([n(a,c,d.msgId),l(a)])),f=e[0];e=e[1];if(f!=null)return{ctaId:f.ctaId,ctaType:p(d.adminType),title:f.title};else{f=o(d.adminType);yield q(a,e,c,d,f);return{ctaId:e,ctaType:p(d.adminType),title:f.title}}});return s.apply(this,arguments)}function a(a,c,e){var f=e.adminType;return f!==void 0&&(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(f)||f===d("MAWLocalizationType.bs").cutoverThreadAdminMessage||f===d("MAWLocalizationType.bs").e2eeThreadAdminMessage||f===d("MAWLocalizationType.bs").cutoverRollbackAdminMessage)?r(a,c,e):b("Promise").resolve()}g.insertAdminMsgCta=q;g.createOrReturnExistingAdminMsgCta=r;g.getAdminMsgCtaStep=a}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};var b=a.split("/")[0];switch(b){case"image":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};default:throw c("err")("get a wrong media file with type "+a)}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("QPLUserCountEvent",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("QPLUserFlow").start(a),c("QPLUserFlow").endSuccess(a)}g.fireQplUserCount=a}),98);
__d("MNLSXMATemplateType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").neg_one;f.genericShare=a;f.default_=c}),null);
__d("MNXMAPreviewImageDecorationType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11];f.default_=a;f.collage=c;f.video=d;f.messengerIcon=e;f.instagramIcon=b;f.shopping=g;f.upcomingEvent=h;f.live=i;f.reel=j;f.igtv=k;f.youtubeVideo=l;f.youtubeShorts=m}),null);
__d("MAWBridgeNewXMAHandler.bs",["I64","MAWDbMsg","MAWThreadId.bs","MNLSXMALayoutType.bs","MNLSXMATemplateType.bs","MNXMAPreviewImageDecorationType.bs","MessagingAttachmentType.bs","Promise","ReQL.bs","WAArmadilloXMA.pb","bs_belt_Array","bs_belt_Option","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a===void 0)return;a=c("bs_belt_Array").get(a,b-1);if(a===void 0)return;return a.buttonType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE?"xma_open_native":void 0}function i(a,b){if(a===void 0)return;a=c("bs_belt_Array").get(a,b-1|0);if(a!==void 0)return a.title}function j(a){if(a===0||a!==3)return d("MNLSXMALayoutType.bs").single;else return d("MNLSXMALayoutType.bs").portrait}function a(a){return d("MNLSXMATemplateType.bs").default_}function k(a){switch(a){case 10:return d("MNXMAPreviewImageDecorationType.bs").collage;case 14:return d("MNXMAPreviewImageDecorationType.bs").reel;case 5:case 6:case 7:case 8:case 9:case 11:case 15:case 16:case 17:case 18:case 19:return d("MNXMAPreviewImageDecorationType.bs").default_;case 4:case 12:case 13:case 20:case 21:case 22:case 23:case 24:return d("MNXMAPreviewImageDecorationType.bs").instagramIcon;default:return d("MNXMAPreviewImageDecorationType.bs").default_}}function l(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=String(e.xmaId),l=e.msgId;if(l!==void 0)return d("ReQL.bs").first(d("ReQL.bs").fromTableDescending(a.table("attachment_ctas"))).then(function(h){var i=h!==void 0?c("bs_caml_int64").add(h.ctaId,c("bs_caml_int64").one):c("bs_caml_int64").one;h=e.defaultCTA;if(h===void 0)return b("Promise").resolve([void 0,i]);var j=h.actionUrl,k=h.nativeUrl,m="xma_web_url";switch(e.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:m="xma_rtc_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:m="xma_rtc_video";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:m="xma_rtc_missed_audio";break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:m="xma_rtc_missed_video";break}return a.table("attachment_ctas").add({actionContentBlob:void 0,actionUrl:j!==void 0?j:h.nativeUrl,attachmentFbid:g,attachmentIndex:c("bs_caml_int64").zero,ctaId:i,enableExtensions:!1,extensionHeightType:void 0,messageId:l,nativeUrl:k!==void 0?k:h.actionUrl,platformToken:void 0,targetId:void 0,threadKey:f,title:c("bs_belt_Option").getWithDefault(h.title,""),type_:m,urlWebviewType:void 0}).then(function(){return b("Promise").resolve([i,i])})}).then(function(d){var h=d[1],i=d[0],j=[];d=e.ctas;if(d===void 0)return b("Promise").resolve([i,[]]);d=d.map(function(b,d){d=c("bs_caml_int64").add(h,c("bs_caml_int64").of_int32(d+1|0));j.push(d);var e=b.actionUrl,i=b.nativeUrl;return a.table("attachment_ctas").add({actionContentBlob:void 0,actionUrl:e!==void 0?e:b.nativeUrl,attachmentFbid:g,attachmentIndex:c("bs_caml_int64").zero,ctaId:d,enableExtensions:!1,extensionHeightType:void 0,messageId:l,nativeUrl:i!==void 0?i:b.actionUrl,platformToken:void 0,targetId:void 0,threadKey:f,title:c("bs_belt_Option").getWithDefault(b.title,"Tap to view status update"),type_:"xma_web_url",urlWebviewType:void 0})});return b("Promise").all(d).then(function(){return b("Promise").resolve([i,j])})}).then(function(b){var m=b[1],n=c("bs_caml_int64").of_int32(d("MAWDbMsg").getInChatMsgIdFromMsgId(l)),o;switch(e.targetType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:o={height:d("I64").of_int32(108),width:d("I64").of_int32(72),xmaContentType:"xma_montage_share"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:o={xmaContentType:"xma_rtc_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:o={xmaContentType:"xma_rtc_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:o={xmaContentType:"xma_rtc_missed_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:o={xmaContentType:"xma_rtc_missed_video"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:o={xmaContentType:"xma_rtc_missed_group_audio"};break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:o={xmaContentType:"xma_rtc_missed_group_video"};break;default:o={height:e.previewHeight!=null?d("I64").of_int32(e.previewHeight):void 0,width:e.previewWidth!=null?d("I64").of_int32(e.previewWidth):void 0,xmaContentType:"xma_web_url"};break}return a.table("attachments").add({accessibilitySummaryText:void 0,actionUrl:void 0,attachmentCta1Id:m.length>0?m[0]:void 0,attachmentCta2Id:m.length>1?m[1]:void 0,attachmentCta3Id:m.length>2?m[2]:void 0,attachmentFbid:g,attachmentIndex:c("bs_caml_int64").zero,attachmentLoggingType:void 0,attachmentType:d("MessagingAttachmentType.bs").xma,attributionAppIcon:void 0,attributionAppIconFallback:void 0,attributionAppIconUrlExpirationTimestampMs:void 0,attributionAppId:void 0,attributionAppName:void 0,authorityLevel:c("bs_caml_int64").zero,avatarCount:void 0,avatarViewAccessibilityLabel:void 0,avatarViewSize:void 0,avatarViewTitleList:void 0,avatarViewUrlExpirationTimestampList:void 0,avatarViewUrlFallbackList:void 0,avatarViewUrlList:void 0,captionBodyText:void 0,cta1Title:i(e.ctas,1),cta1Type:h(e.ctas,1),cta2Title:i(e.ctas,2),cta2Type:h(e.ctas,2),cta3Title:i(e.ctas,3),cta3Type:h(e.ctas,3),dashManifest:void 0,decryptionKey:void 0,defaultCtaId:b[0],defaultCtaTitle:c("bs_belt_Option").getWithDefault(c("bs_belt_Option").map(e.defaultCTA,function(a){return a.title})),defaultCtaType:o.xmaContentType,descriptionText:void 0,ephemeralMediaState:void 0,faviconUrl:void 0,faviconUrlExpirationTimestampMs:void 0,faviconUrlFallback:void 0,filename:void 0,filesize:e.filesize!=null?d("I64").of_int32(e.filesize):void 0,gatingTitle:void 0,gatingType:e.overlayIconGlyph!=null?String(e.overlayIconGlyph):void 0,hasMedia:!1,hasXma:!0,headerImageUrl:void 0,headerImageUrlExpirationTimestampMs:void 0,headerImageUrlFallback:void 0,headerImageUrlMimeType:void 0,headerTitle:e.headerTitle,imageUrl:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlFallback:void 0,imageUrlMimeType:void 0,isBorderless:void 0,isPreviewImage:void 0,isSharable:!0,listItemAccessibilityText1:void 0,listItemAccessibilityText2:void 0,listItemAccessibilityText3:void 0,listItemContactUrlExpirationTimestampList1:void 0,listItemContactUrlExpirationTimestampList2:void 0,listItemContactUrlExpirationTimestampList3:void 0,listItemContactUrlFallbackList1:void 0,listItemContactUrlFallbackList2:void 0,listItemContactUrlFallbackList3:void 0,listItemContactUrlList1:void 0,listItemContactUrlList2:void 0,listItemContactUrlList3:void 0,listItemId1:void 0,listItemId2:void 0,listItemId3:void 0,listItemProfilePictureUrl1:void 0,listItemProfilePictureUrl2:void 0,listItemProfilePictureUrl3:void 0,listItemProfilePictureUrlExpirationTimestamp1:void 0,listItemProfilePictureUrlExpirationTimestamp2:void 0,listItemProfilePictureUrlExpirationTimestamp3:void 0,listItemProfilePictureUrlFallback1:void 0,listItemProfilePictureUrlFallback2:void 0,listItemProfilePictureUrlFallback3:void 0,listItemProgressBarFilledPercentage1:void 0,listItemProgressBarFilledPercentage2:void 0,listItemProgressBarFilledPercentage3:void 0,listItemsDescriptionSubtitleText:void 0,listItemsDescriptionText:void 0,listItemsId:void 0,listItemsSecondaryDescriptionText:void 0,listItemTitleText1:void 0,listItemTitleText2:void 0,listItemTitleText3:void 0,localPlayableUrl:void 0,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines!=null?d("I64").of_int32(e.maxSubtitleNumOfLines):void 0,maxTitleNumOfLines:e.maxTitleNumOfLines!=null?d("I64").of_int32(e.maxTitleNumOfLines):void 0,messageId:l,miniPreview:void 0,offlineAttachmentId:g,originalFileHash:void 0,originalPageSenderId:void 0,playableDurationMs:void 0,playableUrl:void 0,playableUrlExpirationTimestampMs:void 0,playableUrlFallback:void 0,playableUrlMimeType:void 0,preheaderText:void 0,previewHeight:o.height,previewHeightLarge:e.previewHeightLarge!=null?d("I64").of_int32(e.previewHeightLarge):void 0,previewImageDecorationType:k(e.targetType),previewUrl:void 0,previewUrlExpirationTimestampMs:void 0,previewUrlFallback:void 0,previewUrlLarge:void 0,previewUrlMimeType:void 0,previewWidth:o.width,previewWidthLarge:e.previewWidthLarge!=null?d("I64").of_int32(e.previewWidthLarge):void 0,samplingFrequencyHz:void 0,shouldAutoplayVideo:void 0,shouldHighlightHeaderTitleInTitle:void 0,shouldRespectServerPreviewSize:void 0,sourceText:void 0,subtitleIconUrl:void 0,subtitleText:e.subtitleText,targetId:void 0,threadKey:f,timestampMs:n,titleText:e.titleText,viewerSeenTimestampMs:void 0,waveformData:void 0,xmaLayoutType:e.xmaLayoutType!=null?j(e.xmaLayoutType):void 0,xmasTemplateType:e.xmaLayoutType!=null?j(e.xmaLayoutType):void 0})});else return b("Promise").resolve()})}function e(a,b){return l(a,b).then(function(){})}g.getCTAType=h;g.getCTATitle=i;g.getLSXMALayoutType=j;g.getLSXMATemplateType=a;g.getLSPreviewImageDecorationType=k;g.call=e}),98);
__d("MAWBridgeDeleteGroupInviteHandler",["MAWThreadId","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=(yield d("MAWThreadId").toThreadKeyMaybe(a,c.threadId));if(c==null)return;c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("group_invites")).getKeyRange(c)));return b("Promise").all(c.map(function(b){a.table("group_invites")["delete"]({hd:b.threadKey,tl:{hd:b.inviterId,tl:{hd:b.inviteeId,tl:0}}})}))});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeDeleteMessageRangesV2Handler",["I64","MAWThreadId","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWThreadId").toThreadKeyMaybe(a,b.threadId));if(c==null)return;return a.table("messages_ranges_v2__generated")["delete"]({hd:c,tl:{hd:d("I64").of_float(b.minTimestampMs),tl:{hd:b.minMsgId,tl:0}}})});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeDeleteMessagesHandler",["MAWThreadId","MAWTimeUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWThreadId").toThreadKeyMaybe(a,b.threadId));if(c!==void 0)for(b of b.messages)yield a.table("messages")["delete"](d("ReQL").key(c,d("MAWTimeUtils").toTimestamp(b.ts),b.msgId))});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeDeleteReactionHandler",["I64","MAWThreadId","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWThreadId").toThreadKeyMaybe(a,b.threadId));if(c!==void 0)return a.table("reactions")["delete"]({hd:c,tl:{hd:b.messageId,tl:{hd:d("I64").of_string(b.actorId),tl:0}}})});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeEphemeralSettingsUpdatedForUIHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve()}f.call=a}),66);
__d("MAWBridgeGroupInfoUpdatedHandler",["MAWThreadId","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWThreadId").toThreadKeyMaybe(a,b.threadId));if(c===void 0)return;b=(b=b.threadName)!=null?b:void 0;a=a.table("threads");c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(c)));if(c===void 0)return;return a.put(babelHelpers["extends"]({},c,{threadName:b}))});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeGroupInviteUpdateHandler",["I64","MAWThreadId","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("MAWThreadId").toThreadKeyMaybe(a,c.threadId));if(e===void 0)return b("Promise").resolve();var f=d("I64").of_string(c.inviterId),g=a.table("group_invites");g.put({caption:(g=c.caption)!=null?g:void 0,inviteCode:c.inviteCode,inviteeId:d("I64").of_string(c.inviteeId),inviteExpirationTimestampMs:d("MAWTimeUtils").toTimestamp(c.inviteExpireTs),inviterId:f,threadKey:e});d("MAWUpdateLSThreadCapabilities.bs").setGroupInviteTxn(a,e,f)});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";var h=[2328,1316134911];function i(a){return a.table("sync_groups").put({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:d("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,minTimeToSyncTimestampMs:h,priority:c("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSSyncChannel.bs").mqtt,syncParams:d("LSJson").stringify(new(c("LSDict"))([["locale",c("CurrentLocale").get()]])),syncStatus:d("LSSyncStatus.bs").complete})}function a(a){d("LSLogHistory").log("Init Offline Queue Sync Complete","debug");return i(a)}g.neverSyncTimestamp=h;g.finishOfflineArmadilloSyncCursor=i;g.call=a}),98);
__d("MAWBridgeInitOfflineQueueSyncProgressHandler.bs",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve()}f.call=a}),66);
__d("MAWBridgeInitOfflineQueueSyncStartHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";var h=[2328,1316134911];function i(a){return a.table("sync_groups").put({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:d("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,minTimeToSyncTimestampMs:h,priority:c("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSSyncChannel.bs").mqtt,syncParams:d("LSJson").stringify(new(c("LSDict"))([["locale",c("CurrentLocale").get()]])),syncStatus:d("LSSyncStatus.bs").paging})}function a(a,b){d("LSLogHistory").log("Init Offline Queue Sync Start","debug");return i(a)}g.neverSyncTimestamp=h;g.initOfflineArmadilloSyncCursor=i;g.call=a}),98);
__d("MWChatFetchThreadMessageCounts",["I64","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c={},e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("threads")).filter(function(a){return d("I64").to_int32(a.threadType)===16||d("I64").to_int32(a.threadType)===15}).map(function(a){return a.threadKey}))),f=(yield b("Promise").all(e.map(function(b){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("messages")).getKeyRange(b).filter(function(a){return!a.isAdminMessage}))})));e.forEach(function(a,b){c[d("I64").to_string(a)]=f[b].length});return c});return h.apply(this,arguments)}function c(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("messages")).getKeyRange(b).filter(function(a){return!a.isAdminMessage})));return a.length});return i.apply(this,arguments)}g.fetchArmadilloThreadMessageCounts=a;g.fetchArmadilloThreadMessageCount=c}),98);
__d("MWChatDataLossCheckerUtil",["Crypto.bs","FBLogger","I64","MAWBridgeSendAndReceive","MAWThreadId.bs","MWChatFetchThreadMessageCounts","Promise","QuickPerformanceLogger","WebStorage","asyncToGeneratorRuntime","gkx","promiseDone","qex","qpl","useDataLossStatisticsStorageListener"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=Array.from(new Uint8Array(a));return a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(c("qex")._("460"))return a;var b=new TextEncoder();b=b.encode(a).buffer;a=(yield d("Crypto.bs").digest("SHA-256",b));return h(a)}catch(a){return a}});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentIDBCnt,d=a.currentMsgCnt,e=a.logThreadId,f=a.prevMsgCnt,g=a.qplEvent;a=a.threadId;if(e!==void 0&&e){e=(yield i(a));b!==void 0?(c("QuickPerformanceLogger").markerStartFromNavStart(g),c("QuickPerformanceLogger").markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),c("QuickPerformanceLogger").markerEnd(g,2)):(c("QuickPerformanceLogger").markerStartFromNavStart(g),c("QuickPerformanceLogger").markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f},string:{encrypted_threadId:e}}),c("QuickPerformanceLogger").markerEnd(g,2))}else b!==void 0?(c("QuickPerformanceLogger").markerStartFromNavStart(g),c("QuickPerformanceLogger").markerAnnotate(g,{"int":{current_idb_count:b,current_msg_count:d,prev_msg_count:f}}),c("QuickPerformanceLogger").markerEnd(g,2)):(c("QuickPerformanceLogger").markerStartFromNavStart(g),c("QuickPerformanceLogger").markerAnnotate(g,{"int":{current_msg_count:d,prev_msg_count:f}}),c("QuickPerformanceLogger").markerEnd(g,2))});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.currentMsgCnt,e=a.db,f=a.logThreadId,g=a.prevMsgCnt,h=a.qplEvent,i=a.threadId;if(!c("gkx")("7965"))return k({currentMsgCnt:b,logThreadId:f,prevMsgCnt:g,qplEvent:h,threadId:i});a=-100;try{e=(yield d("MAWThreadId.bs").ofThreadKey(e,d("I64").of_string(i)));if(e.TAG!==0){c("FBLogger")("labyrinth").warn("Fetched Invalid IndexedDB thread id");return k({currentMsgCnt:b,logThreadId:f,prevMsgCnt:g,qplEvent:h,threadId:i})}a=e._0}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to fetch indexedDB thread Id");return k({currentMsgCnt:b,logThreadId:f,prevMsgCnt:g,qplEvent:h,threadId:i})}c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","fetchArmadilloThreadMessageCount",{threadId:a}).then(function(a){return k({currentIDBCnt:a,currentMsgCnt:b,logThreadId:f,prevMsgCnt:g,qplEvent:h,threadId:i})})["catch"](function(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to fetch IndexDB message count");return k({currentMsgCnt:b,logThreadId:f,prevMsgCnt:g,qplEvent:h,threadId:i})}))});return n.apply(this,arguments)}function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{a=(yield d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(a,b));var e=c("WebStorage").getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return{isThreadMissingMessages:!1};e=JSON.parse(e);b=(e=e[d("I64").to_string(b)])!=null?e:null;if(b==null)return{isThreadMissingMessages:!1};return b>0&&a===0?{currCount:a,isThreadMissingMessages:!0,prevCount:b}:{isThreadMissingMessages:!1}}catch(a){c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss");return{isThreadMissingMessages:!1}}});return o.apply(this,arguments)}function e(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){var e=c("WebStorage").getAllowlistedKeyFromLocalStorage(d("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(e==null)return b("Promise").resolve(null);e=JSON.parse(e);return b("Promise").resolve({current:a,previous:e})}).then(function(c){if(c==null)return b("Promise").resolve();var d=c.current;c=c.previous;return p(c,d,a)})["catch"](function(a){return c("FBLogger")("labyrinth").catching(a).warn("Failed to check for data loss")})}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e){var f=[];for(var g in a)Object.prototype.hasOwnProperty.call(d,g)&&f.push(g);g=[];for(var h=0;h<f.length;h++){var i=f[h],j={currentMsgCnt:d[i],db:e,prevMsgCnt:a[i],threadId:i};a[i]>0&&d[i]===0?(g.push(m(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553665,"1183")}))),g.push(m(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717562243,"1358")})))):(g.push(m(babelHelpers["extends"]({},j,{qplEvent:c("qpl")._(717553666,"1184")}))),g.push(m(babelHelpers["extends"]({},j,{logThreadId:!0,qplEvent:c("qpl")._(717556541,"1361")}))))}yield b("Promise").all(g)});return q.apply(this,arguments)}function f(a){var b=function(b){c("promiseDone")(i(b).then(function(d){c("QuickPerformanceLogger").markerStartFromNavStart(c("qpl")._(717567419,"1383")),c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(717567419,"1383"),{string:{encryptedThreadId:d,msg_count:a[b].toString()}}),c("QuickPerformanceLogger").markerEnd(c("qpl")._(717567419,"1383"),2)}))};for(var d in a)b(d)}g.qplLog=m;g.checkIsThreadMissingMessages=a;g.fetchCountsAndLogDataLoss=e;g.logThreadCompleteDataLoss=p;g.logLocalStatistics=f}),98);
__d("useDataLossStatisticsStorageListener",["LSDatabaseDeferred","MWChatDataLossCheckerUtil","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i="armadillo_msgr_data_loss_stats";function a(){h(function(){var a;window.setTimeout(function(){a=c("Visibility").addListener(c("Visibility").HIDDEN,function(){c("promiseDone")(d("LSDatabaseDeferred").db.then(function(a){return d("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(a).then(function(a){c("WebStorage").setItemGuarded(c("WebStorage").getLocalStorage(),i,JSON.stringify(a)),c("qex")._("1259")&&d("MWChatDataLossCheckerUtil").logLocalStatistics(a)})}))})},3e4);return function(){var b;(b=a)==null?void 0:b.remove()}},[])}g.DATA_LOSS_STATISTICS_STORAGE_KEY=i;g.useDataLossStatisticsStorageListener=a}),98);
__d("MAWBridgeInitSyncCompleteHandler.bs",["CurrentLocale","LSDict","LSJson","LSLogHistory","LSSyncChannel.bs","LSSyncStatus.bs","MAWInitSyncComplete.bs","MAWTTRC","MWChatDataLossCheckerUtil","Promise","QPLUserFlow","bs_caml_int64","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.table("sync_groups").add({canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:d("MAWInitSyncComplete.bs").id,initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,minTimeToSyncTimestampMs:[2328,1316134911],priority:c("bs_caml_int64").zero,regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSSyncChannel.bs").mqtt,syncParams:d("LSJson").stringify(new(c("LSDict"))([["locale",c("CurrentLocale").get()]])),syncStatus:d("LSSyncStatus.bs").complete})}function i(a){return a.table("network_requests").add({epochId:c("bs_caml_int64").neg_one,failureCount:c("bs_caml_int64").zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:c("bs_caml_int64").zero,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,networkTaskIdentifier:void 0,syncDatabaseId:d("MAWInitSyncComplete.bs").id,taskQueueName:""})}function a(a){d("LSLogHistory").log("Init Sync Complete","debug");d("MAWTTRC").markEvent("init_sync_received");c("QPLUserFlow").endSuccess(c("qpl")._(25300040,"1388"));return window.Promise.all([c("gkx")("4492")?d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a):b("Promise").resolve(),h(a),i(a)]).then(function(){return b("Promise").resolve()})}g.completeLocalArmadilloSyncCursor=h;g.completeLocalArmadilloNetworkRequest=i;g.call=a}),98);
__d("MAWBridgeMediaExpiredHandler.bs",["MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){var e=String(c.mediaId);return d("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("attachments")["delete"]({hd:d,tl:{hd:c.msgId,tl:{hd:e,tl:0}}});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeNewMsgHandler.bs",["LSAuthorityLevel.bs","LSMessageUnsendabilityStatus.bs","LSMessageViewFlag.bs","LSQuickReplyType.bs","MAWAckLevel","MAWAdminMsgCTA.bs","MAWBridgeBuildMsg","MAWBridgeMsg","MAWMsg.bs","MAWMsgReply","MAWMsgReply.bs","MAWThreadId","MAWTimeUtils","MAWUpdateMsg","Promise","ReQL.bs","asyncToGeneratorRuntime","bs_belt_Option","bs_caml_format","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e,f){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var i=d("MAWTimeUtils").toTimestamp(f.type_===d("MAWMsg.bs").unsent?c("bs_belt_Option").getWithDefault(f.originalTs,f.ts):f.ts);a=(yield d("MAWBridgeBuildMsg").buildMessage(a,b,f,i));return b.table("messages").add(babelHelpers["extends"]({},a,{adminMsgCtaId:g==null?void 0:g.ctaId,adminMsgCtaTitle:g==null?void 0:g.title,adminMsgCtaType:g==null?void 0:g.ctaType,authorityLevel:d("LSAuthorityLevel.bs").authoritative,cannotUnsendReason:f.type_===d("MAWMsg.bs").unsent||!f.isAuthorMe?d("LSMessageUnsendabilityStatus.bs").denyForNonSender:void 0,displayedContentTypes:d("MAWMsg.bs").getDisplayedContentTypes(f.type_,f.isForwarded,f.isExpiredXmaMsg),ephemeralDurationInSec:d("MAWBridgeBuildMsg").getEphemeralDurationInSec(f),ephemeralExpirationTs:void 0,forwardScore:void 0,hasQuickReplies:!1,hotEmojiSize:d("MAWBridgeMsg").getSpecialTextSize(f),isAdminMessage:f.isAdminMessage,isCollapsed:!1,isForwarded:void 0,isUnsent:f.type_===d("MAWMsg.bs").unsent,localDataId:void 0,messageId:f.msgId,msUntilExpirationTs:void 0,offlineThreadingId:f.msgId,primarySortKey:c("bs_caml_int64").of_float(f.sortOrderMs),quickReplyType:d("LSQuickReplyType.bs").none,replyAttachmentExtra:void 0,replyAttachmentId:d("MAWMsgReply.bs").getReplyAttachmentId(f),replyAttachmentType:d("MAWMsgReply.bs").getReplyAttachmentType(f),replyCtaId:void 0,replyCtaTitle:void 0,replyMediaExpirationTimestampMs:d("MAWMsgReply.bs").getReplyMediaExpirationTimestampMs(f),replyMediaPreviewHeight:d("MAWMsgReply.bs").getReplyMediaHeight(f),replyMediaPreviewWidth:d("MAWMsgReply.bs").getReplyMediaWidth(f),replyMediaUrl:void 0,replyMediaUrlFallback:void 0,replyMediaUrlMimeType:d("MAWMsgReply.bs").getReplyMediaMimeType(f),replySnippet:h,replySourceId:d("MAWMsgReply.bs").getReplySourceId(f),replySourceTimestampMs:void 0,replySourceType:d("MAWMsgReply.bs").getReplySourceType(f),replySourceTypeV2:d("MAWMsgReply.bs").getReplySourceTypeV2(f),replyStatus:d("MAWBridgeBuildMsg").getReplyStatus(f),replyToUserId:d("MAWMsgReply.bs").getReplyUserId(f),replyType:void 0,secondarySortKey:void 0,senderId:c("bs_caml_format").caml_int64_of_string(f.sender),sendStatus:d("MAWAckLevel").levelToMessagingSendStatus(f.ack),sendStatusV2:d("MAWAckLevel").levelToMessagingSendStatusV2(f.ack),stickerId:void 0,subscriptErrorMessage:void 0,takedownState:void 0,textHasLinks:!1,threadKey:e,timestampMs:i,unsentTimestampMs:d("MAWTimeUtils").toTimestamp(f.ts),viewedPluginContext:void 0,viewedPluginKey:void 0,viewFlags:d("LSMessageViewFlag.bs").uncalculated}))});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWThreadId").toThreadKeyMaybe(b,e.chatId));if(f==null)return;var g=(yield d("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(b,f,e)),i=(yield d("MAWMsgReply").getReplySnippet(a,b,e)),j=e.offlineMsg;if(j==null)return h(a,b,f,e,g,i);j=(yield d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(b.table("messages")),{hd:f,tl:{hd:c("bs_caml_int64").of_float(j.ts),tl:{hd:j.msgId,tl:0}}})));return j==null?h(a,b,f,e,g,i):d("MAWUpdateMsg").call(a,b,e,j,g,i)});return k.apply(this,arguments)}function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){yield b("Promise").all(d.filter(function(a){return!a.isDualSend}).map(function(b){return j(a,c,b)}))});return l.apply(this,arguments)}g.call=j;g.bulkCall=a}),98);
__d("MAWBridgeMsgUpdatedHandler.bs",["MAWAdminMsgCTA.bs","MAWMsgReply","MAWThreadId","MAWUpdateMsg","ReQL.bs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("MAWThreadId").toThreadKeyMaybe(b,c.chatId));if(e==null)return;var f=(yield d("ReQL.bs").first(d("ReQL.bs").filter(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(b.table("messages")),{hd:e,tl:0}),function(a){return a.messageId===c.msgId})));if(f==null)return;e=(yield d("MAWAdminMsgCTA.bs").getAdminMsgCtaStep(b,e,c));var g=(yield d("MAWMsgReply").getReplySnippet(a,b,c));return d("MAWUpdateMsg").call(a,b,c,f,e,g)});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeMsgsLoadedHandler.bs",["LSClearMessagePlaceholderRange","LSFactory","LSInsertNewMessageRange","MAWThreadId.bs","MAWTimeUtils.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f!==void 0)return c("LSClearMessagePlaceholderRange")(f,"",d("MAWTimeUtils.bs").maxTimestampMs,c("LSFactory")(a)).then(function(){var b=e.rangeExtensionType,g;switch(b.TAG){case 1:case 2:g=c("bs_caml_int64").of_float(b._0.minMsgTs);break;case 0:case 3:g=d("MAWTimeUtils.bs").minTimestampMs;break}b=e.rangeExtensionType;b=b.TAG===3?c("bs_caml_int64").of_float(b._0.maxMsgTs):d("MAWTimeUtils.bs").maxTimestampMs;var h=e.rangeExtensionType,i;switch(h.TAG){case 1:case 2:i=h._0.minMsgId;break;case 0:case 3:i="";break}h=e.rangeExtensionType;var j;switch(h.TAG){case 1:j=h._0.maxMsgId;break;case 0:case 2:j="";break;case 3:j=h._0.maxMsgId;break}h=e.rangeExtensionType;var k;switch(h.TAG){case 1:case 2:k=c("bs_caml_int64").of_float(h._0.minMsgTs);break;case 0:case 3:k=d("MAWTimeUtils.bs").minTimestampMs;break}h=e.rangeExtensionType;h=h.TAG===3?c("bs_caml_int64").of_float(h._0.maxMsgTs):d("MAWTimeUtils.bs").maxTimestampMs;var l=e.rangeExtensionType,m;switch(l.TAG){case 1:m=l._0.hasMoreBefore;break;case 2:m=l._0.hasMoreBefore;break;case 0:case 3:m=!1;break}l=e.rangeExtensionType;l=l.TAG===3?l._0.hasMoreAfter:!1;return c("LSInsertNewMessageRange")(f,g,b,i,j,k,h,m,l,void 0,c("LSFactory")(a))});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWEphemeralMessageExpirationStorage.bs",["MAWBridgeDeleteMessagesHandler","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function i(a,b,e){b.forEach(function(b){var e=b.ts,f=b.chatId,g=b.msgId;g={msgId:g,threadId:f,ts:e};f=b.chatId;e=[g];b={messages:e,threadId:f};c("promiseDone")(d("MAWBridgeDeleteMessagesHandler").call(a,b))});return h["delete"](e)}function j(a,b,d,e){return c("setTimeout")(function(){i(a,b,d)},e)}function a(a,b,d,e){var f=h.get(d);b=f==null?[b]:(c("clearTimeout")(f.timeoutId),f.msgs.map(function(a){return a.msgId}).indexOf(b.msgId)===-1?(f.msgs.push(b),void 0):void 0,f.msgs);f=j(a,b,d,e);h.set(d,{expirationTs:d,msgs:b,timeoutId:f})}function b(a){var b=a.msgId;a=h.get(a.countdownTs);if(a==null)return;b=a.msgs.map(function(a){return a.msgId}).indexOf(b);if(b>-1){a.msgs.splice(b,1);return}}e=a;f=b;g.setMessageForExpiration=e;g.clearMessageFromExpiration=f}),98);
__d("MAWBridgeMsgsStartCountdownHandler.bs",["MAWEphemeralMessageExpirationStorage.bs","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return e.msgs.reduce(function(e,f){return e.then(function(){d("MAWEphemeralMessageExpirationStorage.bs").setMessageForExpiration(a,f,f.countdownTs,f.millisecondsUntilCountdownTs);c("bs_caml_int64").of_int32(f.millisecondsUntilCountdownTs);return d("MAWThreadId.bs").toThreadKeyMaybe(a,f.chatId).then(function(e){if(e!==void 0)return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("messages")),{hd:e,tl:{hd:d("MAWTimeUtils").toTimestamp(f.ts),tl:{hd:f.msgId,tl:0}}})).then(function(d){if(d===void 0)return b("Promise").resolve();d=babelHelpers["extends"]({},d,{ephemeralExpirationTs:c("bs_caml_int64").of_float(f.countdownTs)});return a.table("messages").put(d)});else return b("Promise").resolve()})})},b("Promise").resolve())}g.call=a}),98);
__d("MAWBridgeNewMediaHandler",["I64","MAWDbMsg","MAWMedia.bs","MAWThreadId","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=c.duration,f=c.ephemeralMediaState,g=c.ephemeralMediaViewMode,h=c.filesize,i=c.hasMedia,j=c.mediaId,k=c.mediaType,l=c.msgIds,m=c.previewHeight,n=c.previewHeightLarge,o=c.previewWidth,p=c.previewWidthLarge;c=c.threadId;var q=(yield d("MAWThreadId").toThreadKeyMaybe(a,c));if(q==null)return;var r=j.toString();return b("Promise").all(l.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=a.table("attachments"),j=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(c).getKeyRange(q,b)));if(j!=null)return c.put(babelHelpers["extends"]({},j,{hasMedia:i}));j=d("I64").of_int32(d("MAWDbMsg").getInChatMsgIdFromMsgId(b));return c.add({attachmentFbid:r,attachmentIndex:d("I64").zero,attachmentType:d("MAWMedia.bs").mediaTypeToMessageAttachmentType(k,g),authorityLevel:d("I64").zero,ephemeralMediaState:f!=null?d("I64").of_int32(f):void 0,ephemeralMediaViewMode:g!=null?d("I64").of_int32(g):void 0,filesize:h==null?void 0:d("I64").of_int32(h),hasMedia:i,hasXma:!1,isSharable:!1,messageId:b,offlineAttachmentId:r,playableDurationMs:e==null?void 0:d("I64").of_int32(e),previewHeight:m==null?void 0:d("I64").of_int32(m),previewHeightLarge:n==null?void 0:d("I64").of_int32(n),previewWidth:o==null?void 0:d("I64").of_int32(o),previewWidthLarge:p==null?void 0:d("I64").of_int32(p),threadKey:q,timestampMs:j})});return function(a){return c.apply(this,arguments)}}()))});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield h(a,b)});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeNewMediaRangeHandler.bs",["LSFactory","LSThreadMediaGalleryGroup.bs","LSUpsertAttachmentRange","MAWThreadId.bs","Promise","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_int64").of_int32(e.minMsgRowId),h=e.hasMoreBefore;return c("LSUpsertAttachmentRange")(f,d("LSThreadMediaGalleryGroup.bs").photosAndVideos,g,h,c("LSFactory")(a))})}function a(a,b){return h(a,b).then(function(){})}g.call=a}),98);
__d("MAWBridgeOneToOneMessageRequestLoadedHandler.bs",["fbt","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","MAWContactRelationshipType","MAWDbContact","MAWMessageRequestUtil.bs","MAWThreadId.bs","Promise","ReQL.bs","bs_caml","bs_caml_format","bs_caml_int64","qex"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f!==void 0)return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:f,tl:0})).then(function(f){if(f===void 0)return b("Promise").resolve([void 0,void 0,void 0,!1]);var g=d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:c("bs_caml_format").caml_int64_of_string(e.fbid),tl:0}));return b("Promise").all([b("Promise").resolve(f),g,b("Promise").resolve(e.relationship),b("Promise").resolve(d("LSMessagingThreadTypeUtil.bs").isOneToOne(f.threadType))])}).then(function(e){var f=e[0];if(f===void 0)return b("Promise").resolve();var g=e[1];if(g===void 0)return b("Promise").resolve();var i=e[2];if(i===void 0)return b("Promise").resolve();if(!e[3])return b("Promise").resolve();e=c("bs_caml").i64_neq(g.authorityLevel,d("LSAuthorityLevel.bs").authoritative)?i:d("MAWContactRelationshipType").getContactRelationshipType(g);if(f.folderName==="pending"||f.folderName==="other"||f.folderName==="spam"||f.folderName==="inbox"&&e===d("MAWDbContact").REVERSED_ONE_WAY_CONTACT&&c("bs_caml").i64_neq(f.lastActivityTimestampMs,c("bs_caml_int64").zero)){i=d("LSThreadBitOffset.bs").clear(d("MAWMessageRequestUtil.bs").disabledThreadCapabilitiesForIncomingRequest,f.capabilities,f.capabilities2,f.capabilities3);g=c("qex")._("1364")&&f.folderName==="inbox"?h._("__JHASH__4F6x7gUU1-S__JHASH__").toString():void 0;e=[d("LSThreadBitOffset.bs").set(d("MAWMessageRequestUtil.bs").enabledThreadCapabilitiesForIncomingRequest,i[0],i[1],i[2]),g]}else e=[[f.capabilities,f.capabilities2,f.capabilities3],void 0];i=e[0];g=babelHelpers["extends"]({},f,{capabilities3:i[2],capabilities2:i[1],additionalThreadContext:e[1],capabilities:i[0]});return a.table("threads").put(g).then(function(){})});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeParticipantRemovedHandler.bs",["MAWThreadId.bs","Promise","bs_caml_format"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(d){if(d===void 0)return b("Promise").resolve();var f=c("bs_caml_format").caml_int64_of_string(e.userId);return a.table("participants")["delete"]({hd:d,tl:{hd:f,tl:0}}).then(function(){})})}g.call=a}),98);
__d("MAWBridgeParticipantUpdatedHandler.bs",["fbt","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSFactory","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("MAWCurrentUser").getID(),j=c("bs_caml_format").caml_int64_of_string(i);function a(a){return a.startsWith("shadow_")}function e(a,e){if(e.fbid.startsWith("shadow_"))return b("Promise").resolve();else return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_format").caml_int64_of_string(e.fbid),k=d("MAWTimeUtils").toTimestamp(e.readWatermarkTs),l=d("MAWTimeUtils").toTimestamp(e.deliveredWatermarkTs),m=d("MAWTimeUtils").toTimestamp(e.lastReadActionTs),n=e.isSuperAdmin?h._("__JHASH__-gVxfbL98KU__JHASH__").toString():void 0,o={contents:!1},p={contents:!1};return d("ReQLTable.bs").update(a.table("participants"),{hd:f,tl:{hd:g,tl:0}},function(a){if(a!==void 0){p.contents=!0;return{authorityLevel:a.authorityLevel,contactId:g,deliveredWatermarkTimestampMs:l,groupParticipantJoinState:e.isInvited?d("LSGroupParticipantJoinState.bs").invited:d("LSGroupParticipantJoinState.bs").member,isAdmin:e.isAdmin,isModerator:!1,isSuperAdmin:a.isSuperAdmin,nickname:a.nickname,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,readActionTimestampMs:m,readWatermarkTimestampMs:k,subscribeSource:n,threadKey:f}}else{p.contents=!0;o.contents=!0;return{authorityLevel:c("bs_caml_int64").zero,contactId:g,deliveredWatermarkTimestampMs:l,groupParticipantJoinState:e.isInvited?d("LSGroupParticipantJoinState.bs").invited:d("LSGroupParticipantJoinState.bs").member,isAdmin:e.isAdmin,isModerator:!1,isSuperAdmin:e.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:c("bs_caml_int64").zero,readWatermarkTimestampMs:k,subscribeSource:n,threadKey:f}}}).then(function(){if(p.contents)return d("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,f).then(function(){var b=c("bs_caml").i64_eq(j,g),h=e.isAdmin;if(b)if(h)return d("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,f);else return d("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,f);else return window.Promise.resolve()});else return b("Promise").resolve()}).then(function(){if(o.contents)return c("LSVerifyContactRowExists")(g,d("LSContactIdType.bs").fbid,void 0,void 0,d("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,d("LSContactBlockedByViewerStatus.bs").unblocked,void 0,c("bs_caml_obj").caml_equal(i,e.fbid),d("LSAuthorityLevel.bs").optimistic,void 0,void 0,d("LSContactWorkForeignEntityType.bs").unknown,d("LSContactGender.bs").unknown,d("LSContactViewerRelationship.bs").unknown,void 0,c("LSFactory")(a));else return b("Promise").resolve()})})}g.currentUserId=i;g.currentUserIdAsInt64=j;g.checkIfDualSendUser=a;g.call=e}),98);
__d("MAWBridgeParticipantsUpdatedHandler.bs",["fbt","I64","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSFactory","LSGroupParticipantJoinState.bs","LSVerifyContactRowExists","MAWCurrentUser","MAWThreadId.bs","MAWTimeUtils","MAWUpdateLSThreadCapabilities.bs","Promise","ReQLTable.bs","bs_caml","bs_caml_format","bs_caml_int64","bs_caml_obj"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("MAWCurrentUser").getID(),j=c("bs_caml_format").caml_int64_of_string(i);function a(a){return a.startsWith("shadow_")}function e(a,e){e=e.participants.filter(function(a){return!a.fbid.startsWith("shadow_")});return b("Promise").all(e.map(function(e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_format").caml_int64_of_string(e.fbid),k=d("MAWTimeUtils").toTimestamp(e.readWatermarkTs),l=d("MAWTimeUtils").toTimestamp(e.deliveredWatermarkTs),m=d("MAWTimeUtils").toTimestamp(e.lastReadActionTs),n=e.isSuperAdmin?h._("__JHASH__-gVxfbL98KU__JHASH__").toString():void 0,o={contents:!1},p={contents:!1};return d("ReQLTable.bs").update(a.table("participants"),{hd:f,tl:{hd:g,tl:0}},function(a){if(a!==void 0){p.contents=!0;return{authorityLevel:a.authorityLevel,contactId:g,deliveredWatermarkTimestampMs:d("I64").equal(l,d("I64").zero)?a.deliveredWatermarkTimestampMs:l,groupParticipantJoinState:e.isInvited?d("LSGroupParticipantJoinState.bs").invited:d("LSGroupParticipantJoinState.bs").member,isAdmin:e.isAdmin,isModerator:!1,isSuperAdmin:a.isSuperAdmin,nickname:a.nickname,normalizedSearchTerms:a.normalizedSearchTerms,participantCapabilities:a.participantCapabilities,readActionTimestampMs:d("I64").equal(m,d("I64").zero)?a.readActionTimestampMs:m,readWatermarkTimestampMs:d("I64").equal(k,d("I64").zero)?a.readWatermarkTimestampMs:k,subscribeSource:n,threadKey:f}}else{p.contents=!0;o.contents=!0;return{authorityLevel:c("bs_caml_int64").zero,contactId:g,deliveredWatermarkTimestampMs:l,groupParticipantJoinState:e.isInvited?d("LSGroupParticipantJoinState.bs").invited:d("LSGroupParticipantJoinState.bs").member,isAdmin:e.isAdmin,isModerator:!1,isSuperAdmin:e.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:c("bs_caml_int64").zero,readWatermarkTimestampMs:k,subscribeSource:n,threadKey:f}}}).then(function(){if(p.contents)return d("MAWUpdateLSThreadCapabilities.bs").disableBlockerCapabilitiesTxn(a,f).then(function(){var b=c("bs_caml").i64_eq(j,g),h=e.isAdmin;if(b)if(h)return d("MAWUpdateLSThreadCapabilities.bs").enableAddMembersTxn(a,f);else return d("MAWUpdateLSThreadCapabilities.bs").disableAddMembersTxn(a,f);else return window.Promise.resolve()});else return b("Promise").resolve()}).then(function(){if(o.contents)return c("LSVerifyContactRowExists")(g,d("LSContactIdType.bs").fbid,void 0,void 0,d("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,d("LSContactBlockedByViewerStatus.bs").unblocked,void 0,c("bs_caml_obj").caml_equal(i,e.fbid),d("LSAuthorityLevel.bs").optimistic,void 0,void 0,d("LSContactWorkForeignEntityType.bs").unknown,d("LSContactGender.bs").unknown,d("LSContactViewerRelationship.bs").unknown,void 0,c("LSFactory")(a));else return b("Promise").resolve()})})})).then(function(){})}g.currentUserId=i;g.currentUserIdAsInt64=j;g.checkIfDualSendUser=a;g.call=e}),98);
__d("MAWBridgeRavenActionMsgForUIHandler",["I64","MAWRavenUtils","MAWThreadId","Promise","ReQL","WAMsg","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("MAWThreadId").toThreadKeyMaybe(a,c.threadId));if(e==null)return b("Promise").resolve();a=a.table("attachments");e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a).getKeyRange(e,c.ravenMsgId)));if(e==null)return b("Promise").resolve();if(e.ephemeralMediaState==null)return b("Promise").resolve();c=d("I64").to_int32(e.ephemeralMediaState);if(e.ephemeralMediaViewMode==null)return b("Promise").resolve();var f=d("I64").to_int32(e.ephemeralMediaViewMode);c=d("WAMsg").WARavenMsgEphemeralMediaState.cast(c);f=d("WAMsg").WARavenMsgEphemeralType.cast(f);if(c==null||f==null)return b("Promise").resolve();c=d("MAWRavenUtils").getNextRavenMessageEphemeralState(c,f);if(c!=null){e.ephemeralMediaState;f=babelHelpers.objectWithoutPropertiesLoose(e,["ephemeralMediaState"]);e=babelHelpers["extends"]({ephemeralMediaState:d("I64").of_int32(c)},f);c={hd:f.threadKey,tl:{hd:f.messageId,tl:{hd:f.attachmentFbid,tl:0}}};return a.upsert(c,e)}});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeReactionUpsertHandler.bs",["LSAuthorityLevel.bs","MAWThreadId.bs","MAWTimeUtils","Promise","bs_caml_format"],(function(a,b,c,d,e,f,g){"use strict";function h(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f!==void 0)return a.table("reactions").upsert({hd:f,tl:{hd:e.messageId,tl:{hd:c("bs_caml_format").caml_int64_of_string(e.actorId),tl:0}}},{actorId:c("bs_caml_format").caml_int64_of_string(e.actorId),authorityLevel:d("LSAuthorityLevel.bs").authoritative,messageId:e.messageId,reaction:e.reaction,threadKey:f,timestampMs:d("MAWTimeUtils").toTimestamp(e.ts)});else return b("Promise").resolve()})}function a(a,b){return h(a,b).then(function(){})}g.call=a}),98);
__d("MAWBridgeReceivedChatStateHandler.bs",["MAWThreadId.bs","Promise","ServerTime","WAChatState","bs_caml_format","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_format").caml_int64_of_string(e.senderId),h=c("bs_caml_int64").of_float(3e3+d("ServerTime").getMillis());if(e.state===d("WAChatState").TYPING)return a.table("typing_indicator").upsert({hd:f,tl:{hd:g,tl:0}},{expirationTimestampMs:h,senderId:g,threadKey:f}).then(function(){});else if(e.state===d("WAChatState").IDLE)return a.table("typing_indicator")["delete"]({hd:f,tl:{hd:g,tl:0}}).then(function(){});else return window.Promise.resolve()})}g.call=a}),98);
__d("MAWBridgeReceivedReceiptHandler.bs",["I64","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_format").caml_int64_of_string(e.fbid),h=d("MAWTimeUtils").toTimestamp(e.lastReadWatermarkTs),i=d("MAWTimeUtils").toTimestamp(e.deliveredWatermarkTs),j=d("MAWTimeUtils").toTimestamp(e.lastReadActionTs);return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("participants")),{hd:f,tl:{hd:g,tl:0}})).then(function(c){if(c!==void 0)return a.table("participants").put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:d("I64").equal(i,d("I64").zero)?c.deliveredWatermarkTimestampMs:i,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:d("I64").equal(j,d("I64").zero)?c.readActionTimestampMs:j,readWatermarkTimestampMs:d("I64").equal(h,d("I64").zero)?c.readWatermarkTimestampMs:h,subscribeSource:c.subscribeSource,threadKey:c.threadKey});else return b("Promise").resolve()}).then(function(){})})}g.call=a}),98);
__d("MAWBridgeSyncContacts.bs",["CurrentUser","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSFactory","LSVerifyContactRowExists","Promise","bs_caml_format","bs_caml_obj"],(function(a,b,c,d,e,f,g){"use strict";var h=c("CurrentUser").getID();function a(a,e){return e.reduce(function(b,e){var f=c("bs_caml_format").caml_int64_of_string(e);return b.then(function(){return c("LSVerifyContactRowExists")(f,d("LSContactIdType.bs").fbid,void 0,void 0,d("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,d("LSContactBlockedByViewerStatus.bs").unblocked,void 0,c("bs_caml_obj").caml_equal(h,e),d("LSAuthorityLevel.bs").optimistic,void 0,void 0,d("LSContactWorkForeignEntityType.bs").unknown,d("LSContactGender.bs").unknown,d("LSContactViewerRelationship.bs").unknown,void 0,c("LSFactory")(a))}).then(function(){})},b("Promise").resolve())}g.currentUserFbid=h;g.call=a}),98);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWLocalizationType","MAWThreadId","MAWVault","ReQL","asyncToGeneratorRuntime","first"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!=null?d("MAWVault").unvault(a):void 0}function i(a,b,c){if(a==null)return b;b=[].concat(b);switch(c){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:b[0]=a;break}return b}function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=e.snippetContactIDs,j=e.snippetMentionJIDs,l=e.snippetParams,m=e.snippetType,n=e.threadId;if(l==null||m==null||g==null)return f;e=(yield d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(a,b,n,h(c("first")(l)),j,g,m,function(b){var c=b[0];b=b[1];c=d("MAWAdminMsg").buildLocalizedString(i(c,l,m),b,m);return k(a,n,c)}));f=e[0];b=e[1];return d("MAWAdminMsg").buildLocalizedString(i(f,l,m),b,m)});return j.apply(this,arguments)}function k(a,c,e){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f=(yield d("MAWThreadId").toThreadKeyMaybe(a,c));if(f==null)return;b=b.table("threads");f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b).getKeyRange(f)));f&&(yield b.put(babelHelpers["extends"]({},f,{snippet:e})))});return function(a){return f.apply(this,arguments)}}(),"readwrite")}g.buildBridgeThreadSnippet=a;g.mutateThreadSnippet=k}),98);
__d("MWV2DualSendMessageContent.bs",["MAWVault.bs"],(function(a,b,c,d,e,f,g){"use strict";var h="8031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d",i="9031ded1058446aa93ccf8dace0eaf876dd5e32771904d5eb0058a0afdc724ce120dcba542d84548ac3f4a2741c45c0d";function a(a){if(a===void 0)return!1;a=d("MAWVault.bs").unvault(a);if(a.endsWith(h))return!0;else return a.endsWith(i)}g.messageText=h;g.messageTextV2=i;g.isDualSend=a}),98);
__d("MAWBridgeThreadBumpedHandler.bs",["I64","MAWBridgeBuildThreadSnippet","MAWBumpThread.bs","MAWThreadId","MAWTimeUtils","MWV2DualSendMessageContent.bs","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("MAWThreadId").toThreadKeyMaybe(b,c.threadId));if(e==null)return;var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(e)));if(f==null)return;a=(yield d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,b,c,f.snippet));if(d("MWV2DualSendMessageContent.bs").isDualSend(a))return;f=c.snippetSenderContactId!=null?d("I64").of_string(c.snippetSenderContactId):void 0;return d("MAWBumpThread.bs").threadMutation(b,e,d("MAWTimeUtils").millisTimeToTimestamp(c.lastActivityTs),d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadTs),a,f)});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeThreadBumpedServerHandler",["I64","LSBumpE2EEMetadataThread","LSFactory","MAWGating","MAWThreadId","MAWTimeUtils","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Bumping thread on server. threadKey: ",", bumpTimestampMs: ",", isLocalDeviceSend: ",""]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("MAWGating").isOccamadillo()||b.isDualSend)return;return d("MAWThreadId").toThreadKeyMaybe(a,b.threadId).then(function(e){if(e==null)return;var f=b.lastActivityTs;f=d("MAWTimeUtils").millisTimeToTimestamp(f);c("promiseDone")(d("WALoggerDeferred").LOG(h(),d("I64").to_string(e),d("I64").to_string(f),b.isCurrentDeviceSendingMsg));return c("LSBumpE2EEMetadataThread")(e,f,b.isCurrentDeviceSendingMsg,c("LSFactory")(a))})});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeThreadHiddenHandler.bs",["LSFactory","LSOptimisticRemoveThread","LSThreadRemoveType.bs","MAWGating","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e).then(function(e){if(e===void 0)return b("Promise").resolve();if(!d("MAWGating").isOccamadillo())return a.table("threads")["delete"]({hd:e,tl:0}).then(function(){});var f=c("LSFactory")(a);return c("LSOptimisticRemoveThread")(e,d("LSThreadRemoveType.bs").deleteThread,f)})}g.call=a}),98);
__d("MAWBridgeThreadTimestampsHandler.bs",["CurrentUser","MAWThreadId.bs","MAWTimeUtils","Promise","ReQL.bs","bs_caml_format"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){return d("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(e){if(e!==void 0)return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:e,tl:0})).then(function(e){if(e===void 0)return b("Promise").resolve();e=babelHelpers["extends"]({},e,{lastReadWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.lastReadWatermarkTs)});return a.table("threads").put(e)});else return b("Promise").resolve()})}function a(a,e){return h(a,e).then(function(){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(f){if(f===void 0)return b("Promise").resolve();var g=c("bs_caml_format").caml_int64_of_string(c("CurrentUser").getID());return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("participants")),{hd:f,tl:{hd:g,tl:0}})).then(function(c){if(c!==void 0)return a.table("participants").put({authorityLevel:c.authorityLevel,contactId:c.contactId,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,groupParticipantJoinState:c.groupParticipantJoinState,isAdmin:c.isAdmin,isModerator:c.isModerator,isSuperAdmin:c.isSuperAdmin,nickname:c.nickname,normalizedSearchTerms:c.normalizedSearchTerms,participantCapabilities:c.participantCapabilities,readActionTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(e.lastActivityTimestampMs),readWatermarkTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(e.lastReadWatermarkTs),subscribeSource:c.subscribeSource,threadKey:c.threadKey});else return b("Promise").resolve()})})}).then(function(){})}g.call=a}),98);
__d("MAWBridgeThreadUpdatedHandler.bs",["I64","LSBitOffset.bs","MAWBridgeBuildThreadSnippet","MAWFolderTypes","MAWFolderUtils","MAWGating","MAWThreadId","MWV2DualSendMessageContent.bs","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return b===d("MAWFolderTypes").FOLDER_ID.ARCHIVED&&!c?d("LSBitOffset.bs").clear(d("I64").sub(d("I64").of_int32(64),[0,64]),d("LSBitOffset.bs").set(d("I64").sub(d("I64").of_int32(65),[0,64]),a)):a}function i(a,b,c){return b===d("MAWFolderTypes").FOLDER_ID.INBOX&&!c?d("LSBitOffset.bs").clear(d("I64").sub(d("I64").of_int32(65),[0,64]),d("LSBitOffset.bs").set(d("I64").sub(d("I64").of_int32(64),[0,64]),a)):a}function j(a,b){return b!==void 0&&b==="viewer_not_subscribed"?d("LSBitOffset.bs").clear(d("I64").sub(d("I64").of_int32(28),[0,64]),a):a}function k(a,b){var c=b.folder!=null?d("MAWFolderUtils").getMessagingFolderTag(b.folder):a.folderName;return(b=b.cannotReplyReason)!=null?b:c==="inbox"?void 0:a.cannotReplyReason}function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=c.folder,f=c.muteExpireTimeMs,g=c.snippetSenderContactId,l=c.threadId,m=d("MAWGating").isOccamadillo();l=(yield d("MAWThreadId").toThreadKeyMaybe(b,l));if(l==null)return;l=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(l)));if(l==null)return;a=(yield d("MAWBridgeBuildThreadSnippet").buildBridgeThreadSnippet(a,b,c,l.snippet));var n=e==null||m?l.folderName:d("MAWFolderUtils").getMessagingFolderTag(e);c=k(l,c);return b.table("threads").put(babelHelpers["extends"]({},l,{capabilities2:j(h(i(l.capabilities2,e,m),e,m),c),parentThreadKey:e!=null&&!m?d("MAWFolderUtils").getSystemFolder(e):l.parentThreadKey,cannotReplyReason:c,snippetSenderContactId:g==null?l.snippetSenderContactId:d("I64").of_string(g),snippet:d("MWV2DualSendMessageContent.bs").isDualSend(a)?l.snippet:a,muteExpireTimeMs:f==null||m?l.muteExpireTimeMs:d("I64").of_float(f),folderName:m?l.folderName:n}))});return l.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeThreadsLoadedHandler.bs",["MAWFolderUtils","MAWThreadId.bs","MAWTimeUtils","MAWTimeUtils.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f;switch(e.TAG){case 0:case 1:case 2:f=d("MAWFolderUtils").getClientSystemFolder(e._0.folderId);break}return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),{hd:f,tl:0})).then(function(g){if(g!==void 0)return a.table("threads_ranges_v2__generated")["delete"]({hd:g.parentThreadKey,tl:{hd:g.minThreadKey,tl:{hd:g.minLastActivityTimestampMs,tl:0}}}).then(function(){switch(e.TAG){case 0:case 1:break;case 2:var c=e._0;return d("MAWThreadId.bs").toThreadKeyMaybe(a,c.minThreadId).then(function(e){if(e!==void 0)return a.table("threads_ranges_v2__generated").put({hasMoreAfter:g.hasMoreAfter,hasMoreBefore:c.hasMore,isLoadingAfter:g.isLoadingAfter,isLoadingBefore:!1,maxLastActivityTimestampMs:g.maxLastActivityTimestampMs,maxThreadKey:g.maxThreadKey,minLastActivityTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(c.minLastActivityTs),minThreadKey:e,parentThreadKey:g.parentThreadKey});else return b("Promise").resolve()})}return a.table("threads_ranges_v2__generated").put({hasMoreAfter:g.hasMoreAfter,hasMoreBefore:g.hasMoreBefore,isLoadingAfter:g.isLoadingAfter,isLoadingBefore:!1,maxLastActivityTimestampMs:g.maxLastActivityTimestampMs,maxThreadKey:g.maxThreadKey,minLastActivityTimestampMs:g.minLastActivityTimestampMs,minThreadKey:g.minThreadKey,parentThreadKey:g.parentThreadKey})});switch(e.TAG){case 0:return a.table("threads_ranges_v2__generated").put({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:d("MAWTimeUtils.bs").maxTimestampMs,maxThreadKey:c("bs_caml_int64").zero,minLastActivityTimestampMs:d("MAWTimeUtils.bs").maxTimestampMs,minThreadKey:c("bs_caml_int64").zero,parentThreadKey:f});case 1:var h=e._0;return b("Promise").all([d("MAWThreadId.bs").toThreadKeyMaybe(a,h.minThreadId),d("MAWThreadId.bs").toThreadKeyMaybe(a,h.maxThreadId)]).then(function(c){var e=c[1];c=c[0];if(c!==void 0&&e!==void 0)return a.table("threads_ranges_v2__generated").add({hasMoreAfter:!1,hasMoreBefore:h.hasMore,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(h.maxLastActivityTs),maxThreadKey:e,minLastActivityTimestampMs:d("MAWTimeUtils").millisTimeToTimestamp(h.minLastActivityTs),minThreadKey:c,parentThreadKey:f});else return b("Promise").resolve()});case 2:return b("Promise").resolve()}})}g.call=a}),98);
__d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("Promise").resolve()}f.call=a}),66);
__d("MAWUpdateClientRestoreStatusOperationType.bs",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.removeClientRestoreStatus=b}),66);
__d("MAWBridgeUpdateClientRestoreStatus.bs",["MAWUpdateClientRestoreStatusOperationType.bs","Promise","ReQL.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){return d("ReQL.bs").first(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status")),function(a){return a.threadId===c})).then(function(c){if(c!==void 0)return a.table("encrypted_backups_client_restore_status")["delete"]({hd:c.threadId,tl:0}).then(function(){});else return b("Promise").resolve()})}function a(a){return d("ReQL.bs").toArray(d("ReQL.bs").fromTableAscending(a.table("encrypted_backups_client_restore_status"))).then(function(c){return c.reduce(function(b,c){return b.then(function(){return h(a,c.threadId)})},b("Promise").resolve())})}function e(a,b){var e=b.action;if(e===d("MAWUpdateClientRestoreStatusOperationType.bs").upsertClientRestoreStatus){e=b.threadId;return a.table("encrypted_backups_client_restore_status").put({lastUpdated:c("bs_caml_int64").of_float(Date.now()),threadId:e})}else return h(a,b.threadId)}g.truncateClientRestoreStatusTable=a;g.call=e}),98);
__d("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs",["LSFactory","LSUpdateE2EEMetadataParticipants","MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(d){if(d!==void 0)return c("LSUpdateE2EEMetadataParticipants")(d,c("LSFactory")(a));else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeUpdateMinMessageHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","ReQLTable.bs","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f=c("bs_caml_int64").of_float(e.minTimestampMs),g=e.minMessageId;return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(h){if(h!==void 0)return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("messages_ranges_v2__generated")),{hd:h,tl:0})).then(function(b){if(b===void 0)return;var i=e.hasMoreBefore,j=i!==void 0?i:b.hasMoreBefore;return d("ReQLTable.bs").update(a.table("messages_ranges_v2__generated"),{hd:h,tl:{hd:b.minTimestampMs,tl:{hd:b.minMessageId,tl:0}}},function(a){if(a!==void 0)return{hasMoreAfter:a.hasMoreAfter,hasMoreBefore:j,isLoadingAfter:a.isLoadingAfter,isLoadingBefore:a.isLoadingBefore,maxMessageId:a.maxMessageId,maxTimestampMs:a.maxTimestampMs,minMessageId:g,minTimestampMs:f,threadKey:a.threadKey};throw c("unrecoverableViolation")("Thread is missing in updating the min message in message range","messenger_e2ee_web")})});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeXMAShareExpiredHandler.bs",["MAWThreadId.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){var e=String(c.xmaId);return d("MAWThreadId.bs").toThreadKeyMaybe(a,c.threadId).then(function(d){if(d!==void 0)return a.table("attachments").get({hd:d,tl:{hd:c.msgId,tl:{hd:e,tl:0}}}).then(function(f){if(f===void 0)return b("Promise").resolve();f=[f.defaultCtaId,f.attachmentCta1Id,f.attachmentCta2Id,f.attachmentCta3Id].filter(Boolean);f=f.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(f).then(function(){return a.table("attachments")["delete"]({hd:d,tl:{hd:c.msgId,tl:{hd:e,tl:0}}})})});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeXMAShareTombstonedHandler.bs",["MAWThreadId.bs","Promise","ReQL.bs","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){var f=String(e.xmaId);return d("MAWThreadId.bs").toThreadKeyMaybe(a,e.threadId).then(function(g){if(g!==void 0)return a.table("attachments").get({hd:g,tl:{hd:e.msgId,tl:{hd:f,tl:0}}}).then(function(h){if(h===void 0)return b("Promise").resolve();h=[h.defaultCtaId,h.attachmentCta1Id,h.attachmentCta2Id,h.attachmentCta3Id].filter(Boolean);h=h.map(function(b){return a.table("attachment_ctas")["delete"]({hd:b,tl:0})});return b("Promise").all(h).then(function(){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:g,tl:{hd:e.msgId,tl:{hd:f,tl:0}}})).then(function(d){if(d!==void 0){d=babelHelpers["extends"]({},d,{previewHeightLarge:void 0,previewWidthLarge:void 0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,subtitleText:void 0,titleText:void 0,previewHeight:void 0,previewWidth:void 0,cta3Type:void 0,cta3Title:void 0,attachmentCta3Id:void 0,cta2Type:void 0,cta2Title:void 0,attachmentCta2Id:void 0,cta1Type:void 0,cta1Title:void 0,attachmentCta1Id:void 0,defaultCtaTitle:void 0,defaultCtaId:void 0});return a.table("attachments").put(d)}c("recoverableViolation")("Trying to tombstone a secure xma attachment but no existing attachment","messenger_e2ee_web");return b("Promise").resolve()})})});else return b("Promise").resolve()})}g.call=a}),98);
__d("MAWBridgeUIEventHandler.bs",["FBLogger","JSResourceForInteraction","MAWAbPropsClient","MAWBridgeDeleteGroupInviteHandler","MAWBridgeDeleteMessageRangesV2Handler","MAWBridgeDeleteMessagesHandler","MAWBridgeDeleteReactionHandler","MAWBridgeDropAllSecureThreadsHandler","MAWBridgeEphemeralSettingsUpdatedForUIHandler","MAWBridgeGroupInfoUpdatedHandler","MAWBridgeGroupInviteUpdateHandler","MAWBridgeInitOfflineQueueSyncCompleteHandler.bs","MAWBridgeInitOfflineQueueSyncProgressHandler.bs","MAWBridgeInitOfflineQueueSyncStartHandler.bs","MAWBridgeInitSyncCompleteHandler.bs","MAWBridgeMediaExpiredHandler.bs","MAWBridgeMsgUpdatedHandler.bs","MAWBridgeMsgsLoadedHandler.bs","MAWBridgeMsgsStartCountdownHandler.bs","MAWBridgeNewMediaHandler","MAWBridgeNewMediaRangeHandler.bs","MAWBridgeNewMsgHandler.bs","MAWBridgeNewXMAHandler.bs","MAWBridgeOneToOneMessageRequestLoadedHandler.bs","MAWBridgeParticipantRemovedHandler.bs","MAWBridgeParticipantUpdatedHandler.bs","MAWBridgeParticipantsUpdatedHandler.bs","MAWBridgeRavenActionMsgForUIHandler","MAWBridgeReactionUpsertHandler.bs","MAWBridgeReceivedChatStateHandler.bs","MAWBridgeReceivedReceiptHandler.bs","MAWBridgeSyncContacts.bs","MAWBridgeThreadBumpedHandler.bs","MAWBridgeThreadBumpedServerHandler","MAWBridgeThreadHiddenHandler.bs","MAWBridgeThreadTimestampsHandler.bs","MAWBridgeThreadUpdatedHandler.bs","MAWBridgeThreadsLoadedHandler.bs","MAWBridgeUIEventQPLLogger","MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler","MAWBridgeUpdateClientRestoreStatus.bs","MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs","MAWBridgeUpdateMinMessageHandler.bs","MAWBridgeXMAShareExpiredHandler.bs","MAWBridgeXMAShareTombstonedHandler.bs","MAWDualSendSimplePermissionsManager.bs","MAWEphemeralMessageExpirationStorage.bs","MAWGating","Promise","Promise.bs","WATimeUtils","bs_caml_option","bs_js_exn","cr:646","promiseDone","recoverableViolation","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWBridgeIssuePointQueryHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),i=c("requireDeferred")("MAWBridgeStartTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),j=c("requireDeferred")("MAWBridgeStartTraceWithTraceIdHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),k=c("requireDeferred")("MAWBridgeTraceRecordCheckpointHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),l=c("requireDeferred")("MAWBridgeUpdateDyiStatus.bs").__setRef("MAWBridgeUIEventHandler.bs"),m=c("requireDeferred")("MAWBridgeUpdateTraceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),n=c("requireDeferred")("MAWBridgeUploadMessageHandler.bs").__setRef("MAWBridgeUIEventHandler.bs"),o=c("requireDeferred")("MAWBridgeUploadThreadHandler.bs").__setRef("MAWBridgeUIEventHandler.bs");function a(a,e){a=a.then(function(a){return a.runInTransaction(function(f){var g=d("MAWGating").isArmadillo(),p=d("MAWDualSendSimplePermissionsManager.bs").isDualSendUser(),q=function(e){if(!g&&!p)return c("recoverableViolation")("User is neither part of armadillo QE and dual send QE but somehow loaded this handler","messenger_web_product");switch(e.TAG){case 0:var q=e._0;if(q.isDualSend)return b("Promise").resolve();else return d("MAWBridgeNewMsgHandler.bs").call(a,f,q);case 1:return d("MAWBridgeMsgsStartCountdownHandler.bs").call(f,e._0);case 2:return d("MAWEphemeralMessageExpirationStorage.bs").clearMessageFromExpiration(e._0);case 3:return d("MAWBridgeDropAllSecureThreadsHandler").call(f);case 4:q=e._0;return b("cr:646").call(f,q);case 5:q=e._0;if(q.isDualSend)return b("Promise").resolve();else return d("MAWBridgeMsgUpdatedHandler.bs").call(a,f,q);case 6:return d("MAWBridgeNewMediaHandler").call(f,e._0);case 7:return d("MAWBridgeNewMediaRangeHandler.bs").call(f,e._0);case 8:return d("MAWBridgeMediaExpiredHandler.bs").call(f,e._0);case 9:return d("MAWBridgeXMAShareExpiredHandler.bs").call(f,e._0);case 10:return d("MAWBridgeNewXMAHandler.bs").call(f,e._0);case 11:return d("MAWBridgeXMAShareTombstonedHandler.bs").call(f,e._0);case 12:return d("MAWBridgeParticipantUpdatedHandler.bs").call(f,e._0);case 13:return d("MAWBridgeParticipantRemovedHandler.bs").call(f,e._0);case 14:return d("MAWBridgeUpdateE2EEMetadataParticipantsHandler.bs").call(f,e._0);case 15:return d("MAWBridgeReceivedReceiptHandler.bs").call(f,e._0);case 16:return d("MAWBridgeThreadUpdatedHandler.bs").call(a,f,e._0);case 17:return d("MAWBridgeGroupInfoUpdatedHandler").call(f,e._0);case 18:return d("MAWBridgeThreadBumpedHandler.bs").call(a,f,e._0);case 19:return d("MAWBridgeThreadsLoadedHandler.bs").call(f,e._0);case 20:return d("MAWBridgeThreadTimestampsHandler.bs").call(f,e._0);case 21:return d("MAWBridgeMsgsLoadedHandler.bs").call(f,e._0);case 22:return d("MAWBridgeInitSyncCompleteHandler.bs").call(f);case 23:var r=e._0;return i.load().then(function(a){return a.call(f,r)});case 24:var s=e._0;return m.load().then(function(a){return a.call(f,s)});case 25:return d("MAWBridgeThreadHiddenHandler.bs").call(f,e._0);case 26:return d("MAWBridgeSyncContacts.bs").call(f,e._0);case 27:return d("MAWBridgeReceivedChatStateHandler.bs").call(f,e._0);case 28:return window.Promise.resolve((d("WATimeUtils").setClockSkew(e._0),void 0));case 29:return d("MAWAbPropsClient").rewrite(e._0);case 30:return d("MAWBridgeReactionUpsertHandler.bs").call(f,e._0);case 31:return d("MAWBridgeDeleteReactionHandler").call(f,e._0);case 32:var t=e._0;return n.load().then(function(a){return a.call(f,t)});case 33:var u=e._0;return o.load().then(function(a){return a.call(f,u)});case 34:var v=e._0;return c("JSResourceForInteraction")("MAWBridgeCallFinishAddDeviceHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return a.call(f,v)});case 35:var w=e._0;return c("JSResourceForInteraction")("MAWBridgeUploadAttachmentHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return a.call(f,w)});case 36:var x=e._0;return c("JSResourceForInteraction")("MAWBridgeResignAttachmentCDNUrlHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return a.call(f,x)});case 37:return d("MAWBridgeDeleteMessagesHandler").call(f,e._0);case 38:var y=e._0;return c("JSResourceForInteraction")("MAWBridgeRestoreMessageBatchHandler.bs").__setRef("MAWBridgeUIEventHandler.bs").load().then(function(a){return a.call(f,y)});case 39:return d("MAWBridgeOneToOneMessageRequestLoadedHandler.bs").call(f,e._0);case 40:return d("MAWBridgeGroupInviteUpdateHandler").call(f,e._0);case 41:return d("MAWBridgeInitOfflineQueueSyncStartHandler.bs").call(f,e._0);case 42:return d("MAWBridgeInitOfflineQueueSyncCompleteHandler.bs").call(f);case 43:return d("MAWBridgeInitOfflineQueueSyncProgressHandler.bs").call(f,e._0);case 44:var z=e._0;return l.load().then(function(a){return a.call(f,z)});case 45:return d("MAWBridgeDeleteGroupInviteHandler").call(f,e._0);case 46:var A=e._0;return k.load().then(function(a){return a.call(f,A)});case 47:return d("MAWBridgeDeleteMessageRangesV2Handler").call(f,e._0);case 48:return d("MAWBridgeUpdateMinMessageHandler.bs").call(f,e._0);case 49:var B=e._0;return h.load().then(function(a){return a.call(f,B)});case 50:return d("MAWBridgeThreadBumpedServerHandler").call(f,e._0);case 51:return d("MAWBridgeParticipantsUpdatedHandler.bs").call(f,e._0);case 52:var C=e._0;return j.load().then(function(a){return a.call(f,C)});case 53:return d("MAWBridgeUpdateClientRestoreStatus.bs").call(f,e._0);case 54:return d("MAWBridgeNewMsgHandler.bs").bulkCall(a,f,e._0.msgs);case 55:return d("MAWBridgeUnArchivedSelfDeviceChangeAlertsHandler").call(f,e._0);case 56:return d("MAWBridgeEphemeralSettingsUpdatedForUIHandler").call(f,e._0);case 57:return d("MAWBridgeRavenActionMsgForUIHandler").call(f,e._0)}};return e.reduce(function(a,b){var c=d("MAWBridgeUIEventQPLLogger").getInstanceKey();return a.then(function(){d("MAWBridgeUIEventQPLLogger").start(c,b);return q(b)}).then(function(a){d("MAWBridgeUIEventQPLLogger").endSuccess(c);return a})},b("Promise").resolve())},"readwrite")});c("promiseDone")(a,void 0,function(a){a=a.RE_EXN_ID===d("Promise.bs").JsError||a.RE_EXN_ID===c("bs_js_exn").$$Error?c("bs_caml_option").some(a._1):a;c("FBLogger")("messenger_e2ee_web").catching(a).warn("Error handling UI Event")})}g.handleEvents=a}),98);
__d("MAWThreadDefaults.bs",["fbt","LSBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWGating","bs_caml_int64","gkx","qex"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){if(d("MAWGating").isRepliesEnabled())return d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").messageReply,a);else return a}function b(a){if(c("gkx")("7045"))return d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").gif,a);else return a}function e(a){return c("qex")._("227")?d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").emojiCustomization,a):a}function f(a){return c("qex")._("229")?d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").colorCustomization,a):a}function i(a){return c("qex")._("231")?d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").nicknames,a):a}var j=d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").rtcVoiceCall,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").rtcVideoCall,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").reactions,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").filePicker,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").feedbackAndReport,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").audioClips,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").threadDetails,d("LSBitOffset.bs").empty))))))),k=a(b(e(f(i(d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").block,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").muteThread,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").createGroup,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").mentions,j))))))))),l=d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").feedbackAndReport,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").threadNameCustomization,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").blockGroupMember,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").memberList,d("LSBitOffset.bs").set(d("LSThreadCapabilityBitOffset.bs").leaveThread,d("LSBitOffset.bs").clear(d("LSThreadCapabilityBitOffset.bs").addMember,k))))));function m(a){return c("bs_caml_int64").sub(a,[0,64])}var n=d("LSBitOffset.bs").set(c("bs_caml_int64").sub(d("LSThreadCapabilityBitOffset.bs").messageForward,[0,64]),d("LSBitOffset.bs").set(c("bs_caml_int64").sub(d("LSThreadCapabilityBitOffset.bs").restrictContact,[0,64]),d("LSBitOffset.bs").set(c("bs_caml_int64").sub(d("LSThreadCapabilityBitOffset.bs").threadDetailsDeleteThread,[0,64]),d("LSBitOffset.bs").set(c("bs_caml_int64").sub(d("LSThreadCapabilityBitOffset.bs").unarchiveThread,[0,64]),d("LSBitOffset.bs").set(c("bs_caml_int64").sub(d("LSThreadCapabilityBitOffset.bs").archiveThread,[0,64]),d("LSBitOffset.bs").empty)))));h=h._("__JHASH__9ZFn8zMzjpf__JHASH__").toString();g.setReplyCapability=a;g.setGifCapability=b;g.setHotlikeCustomizationCapability=e;g.setThemeCustomizationCapability=f;g.setNicknameCapability=i;g.defaultOptimisticThreadCapabilities=j;g.defaultThreadCapabilities=k;g.defaultGroupThreadCapabilities=l;g.makeOffset=m;g.defaultThreadCapabilities_2=n;g.nullstateDescriptionText1=h;g.defaultThreadCapabilities_3=d("LSBitOffset.bs").empty}),98);
__d("LSCoreClientFolderType",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5,RESTRICTED:15});f["default"]=a}),66);
__d("MAWBridgeOccamadilloVerifyThreadExistsHandler",["I64","LSAuthorityLevel","LSCoreClientFolderType","LSCreateE2EEMetadataThread","LSCreateOfflineThreadingID","LSFactory","MAWFolderUtils","MAWJidUtils","MAWThreadDefaults.bs","MAWTimeUtils","MessagingThreadType.bs","Promise","ReQL","WALogger","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] 4. Authoritative thread, we have it in the miActMapping table already for chatId: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] 3. Authoritative thread, we have it in the mapping but and we are replacing the serverThreadKey for chatId: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] 2. Authoritative thread, we don't have it in miActMapping table yet for chatId: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] 1. Optimistic thread or backfill thread, we need to upgrade to authoritative thread for chatId: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Thread is missing in Occamadillo verify thread exists"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Creating e2ee metadata optimistic thread.\n  threadKey: ","\n  bumpTimestampMs: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Detected 0 for last activity timestamp from MI for thread: ",", using local state timestamp: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] no folder type was supplied to Occamadillo verify thread exists handler"]);o=function(){return a};return a}function p(a){return d("I64").of_string(d("MAWJidUtils").threadIdForChatJid(a))}function q(a){a=d("MAWFolderUtils").systemFolderToLSCoreClientFolder(a);a==null&&(d("WALogger").ERROR(o()),a=d("I64").of_int32(c("LSCoreClientFolderType").INBOX));return a}function r(a,e){return e==null?c("LSCreateOfflineThreadingID")(d("I64").of_float(Date.now()),a).then(function(a){return a[0]}):b("Promise").resolve(d("I64").of_string(e))}function s(a){a=d("MAWTimeUtils").millisTimeToTimestamp(a);return d("I64").equal(a,d("I64").of_int32(0))?d("MAWTimeUtils").millisTimeToTimestamp(d("WATimeUtils").millisTime()):a}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(e.isDualSend)return b("Promise").resolve();var f=c("LSFactory")(a),g=s(e.lastActivityTs),h=(yield r(f,e.clientThreadKey)),i=d("I64").of_int32(e.chatId),j=q(e.folder),k=p(e.jid);e=e.isGroup?d("MessagingThreadType.bs").secureMessageOverWaGroup:d("MessagingThreadType.bs").secureMessageOverWaOneToOne;yield a.table("mi_act_mapping_table").put({clientThreadPk:i,jid:k,serverThreadKey:h});d("WALogger").LOG(m(),d("I64").to_string(h),d("I64").to_string(g));return c("LSCreateE2EEMetadataThread")(k,i,e,j,g,f)});return u.apply(this,arguments)}function v(a,b,c){a=a;d("I64").equal(a,d("I64").of_int32(0))&&(d("WALogger").WARN(n(),d("I64").to_string(c),d("I64").to_string(b)),a=b);return a}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=(yield a.table("threads").get({hd:c,tl:0}));if(f==null){d("WALogger").ERROR(l());return b("Promise").resolve()}var g=e.clientThreadKey!=null?d("I64").of_string(e.clientThreadKey):f.clientThreadKey,h=v(f.lastActivityTimestampMs,d("MAWTimeUtils").millisTimeToTimestamp(e.lastActivityTs),c),i=d("MAWTimeUtils").millisTimeToTimestamp(e.lastReadTs);e=e.isGroup?d("MAWThreadDefaults.bs").defaultGroupThreadCapabilities:d("MAWThreadDefaults.bs").defaultThreadCapabilities;return a.table("threads").upsert({hd:c,tl:0},babelHelpers["extends"]({},f,{capabilities:e,capabilities2:d("MAWThreadDefaults.bs").defaultThreadCapabilities_2,clientThreadKey:g,lastActivityTimestampMs:h,lastReadWatermarkTimestampMs:i}))});return x.apply(this,arguments)}function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){yield a.table("mi_act_mapping_table").put({clientThreadPk:d("I64").of_int32(e.chatId),jid:p(e.jid),serverThreadKey:c}),yield b("Promise").all([w(a,c,e),A(a,c,e)])});return z.apply(this,arguments)}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(c.clientThreadKey!=null){c=d("I64").of_string(c.clientThreadKey);d("I64").equal(b,c)||(yield a.table("threads")["delete"]({hd:c,tl:0}))}});return B.apply(this,arguments)}function C(a,b,c){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield a.table("threads").get({hd:e,tl:0}));g!=null&&d("I64").to_int32(g.authorityLevel)===c("LSAuthorityLevel").AUTHORITATIVE&&(yield b("Promise").all([w(a,e,f),A(a,e,f)]))});return D.apply(this,arguments)}function a(a,b){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("mi_act_mapping_table").index("chat_id")).getKeyRange(d("I64").of_int32(b.chatId))));if(c==null)if(b.authoritativeThreadKey==null){d("WALogger").LOG(k(),b.chatId);return t(a,b)}else{d("WALogger").LOG(j(),b.chatId);return y(a,d("I64").of_string(b.authoritativeThreadKey),b)}if(b.authoritativeThreadKey!=null){var e=d("I64").of_string(b.authoritativeThreadKey),f=!d("I64").equal(c.serverThreadKey,e);if(f){d("WALogger").LOG(i(),b.chatId);return y(a,e,b)}}f=c.serverThreadKey;d("WALogger").LOG(h(),b.chatId);return C(a,f,b)});return E.apply(this,arguments)}g.call=a}),98);
__d("MAWOccamadilloOnMutexChange",["LSDatabaseType.bs","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","MAWGating","Promise","WALogger","bs_caml_int64","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]);h=function(){return a};return a}function i(a){var c=d("LSDefaultSyncGroups").e2eeMetadataSyncGroup;if(d("MAWGating").isOccamadillo()&&!d("MAWGating").isOccamadilloResumeSyncEnabled()&&c!=null)return a.table("sync_groups").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,{groupId:d("LSIntEnum").ofNumber(c.groupId)}));else return b("Promise").resolve()}function j(a){if(d("MAWGating").isOccamadillo()&&!d("MAWGating").isOccamadilloResumeSyncEnabled())return a.table("network_requests").put({epochId:void 0,failureCount:c("bs_caml_int64").zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:c("bs_caml_int64").zero,lastSyncRequestTimestampMs:c("bs_caml_int64").zero,networkTaskIdentifier:void 0,syncDatabaseId:d("LSDatabaseType.bs").e2eeMessagingMetadataMailbox,taskQueueName:""});else return b("Promise").resolve()}function a(a){d("WALogger").LOG(h()),c("promiseDone")(a.runInTransaction(function(a){return b("Promise").all([i(a),j(a)])},"readwrite"))}g.onOccamadilloMutexChange=a}),98);
__d("MAWReinitWorker",["MAWEncyptionIndexedDbV2","MAWGating","MAWIssueNewUserVisibleErrors","MAWKeychainInit","MAWOccamadilloOnMutexChange","MAWVaultMaterialsStorage","MWChatBadgeCountUpdates.bs","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Reinitializing"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Worker is permanently killed and refuses startup"]);i=function(){return a};return a}function j(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){g=g!=null?{instanceKey:g}:void 0;try{a=(yield a(b,e,f,c("emptyFunction")));a==null&&c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"worker_refused_startup",g);return a}catch(a){if((a==null?void 0:a.message)==="Worker is permanently killed."){d("WALoggerDeferred").WARN(i());return}throw a}});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("MAWEncyptionIndexedDbV2").makeEncryptionDB(a);d("MAWEncyptionIndexedDbV2").maybeSetEncryptionDbOnVersionChange(function(){d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)});return d("MAWKeychainInit").initSetupKeychain()});return m.apply(this,arguments)}function n(){return d("MAWVaultMaterialsStorage").setupVaultMaterials()}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.allTablesPersisted,e=a.db,f=a.dispatchClearEphemeralSettings,g=a.environment,i=a.fbId,k=a.getOrSetupWorker,m=a.instanceKey,o=a.logout,p=a.mutex;a=a.setupBridge;var q=m!=null?{instanceKey:m}:void 0;d("WALoggerDeferred").LOG(h());c("QPLUserFlow").start(c("qpl")._(25310984,"169"),q);c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{bool:{useSharedWorker:c("shouldUseMAWSharedWorker")()},"int":{version:2}},q);p=(yield p.init());if(!p){c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_no_premission_on_reinit",q);return}p=(yield l(i));if(!p.success){c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"mutex_keychain_setup_failure_on_reinit",q);return}var r=(yield n());c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"vaulting_setup",q);c("QPLUserFlow").addAnnotations(c("qpl")._(25310984,"169"),{bool:{will_vault:r!=null}},q);k=(yield j(k,i,p.value,r,m));if(k==null)return;c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"worker_setup",q);i=(yield a({environment:g,logout:o,worker:k}));c("QPLUserFlow").addPoint(c("qpl")._(25310984,"169"),"bridge_setup",q);!b&&d("MAWGating").isOccamadillo()?d("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(e):b||(yield i.sendAndReceive("backend","initSync",{numMsgsPerThread:10,numThreads:d("MWChatBadgeCountUpdates.bs").minSyncedThreads}));c("QPLUserFlow").endSuccess(c("qpl")._(25310984,"169"),{instanceKey:m});f()});return o.apply(this,arguments)}g["default"]=a}),98);
__d("LSMessagingThreadAttributionType.re",["LSMessagingThreadAttributionType.bs"],(function(a,b,c,d,e,f){c=(a=b("LSMessagingThreadAttributionType.bs")).unknown;f.unknown=c;d=a.unknownTest;f.unknownTest=d;e=a.unknownFailureRetry;f.unknownFailureRetry=e;b=a.messengerInbox;f.messengerInbox=b;c=a.messengerInboxInThread;f.messengerInboxInThread=c;d=a.messengerInboxThreadList;f.messengerInboxThreadList=d;e=a.messengerInboxNestedFolder;f.messengerInboxNestedFolder=e;b=a.messengerInboxRecentThreads;f.messengerInboxRecentThreads=b;c=a.messengerInboxRemainingThreads;f.messengerInboxRemainingThreads=c;d=a.messengerInboxMessageSearch;f.messengerInboxMessageSearch=d;e=a.messengerInboxImageSending;f.messengerInboxImageSending=e;b=a.messengerInboxForward;f.messengerInboxForward=b;c=a.messengerInboxArchivedThreads;f.messengerInboxArchivedThreads=c;d=a.messengerInboxPendingRequests;f.messengerInboxPendingRequests=d;e=a.messengerInboxActiveContacts;f.messengerInboxActiveContacts=e;b=a.messengerInboxThreadBannerBottomSheet;f.messengerInboxThreadBannerBottomSheet=b;c=a.messengerUniversalSearch;f.messengerUniversalSearch=c;d=a.messengerUniversalSearchNullState;f.messengerUniversalSearchNullState=d;e=a.messengerUniversalSearchKeyPressed;f.messengerUniversalSearchKeyPressed=e;b=a.messengerUniversalSearchMessageSearch;f.messengerUniversalSearchMessageSearch=b;c=a.messengerUniversalSearchAdvancedContentSearch;f.messengerUniversalSearchAdvancedContentSearch=c;d=a.montageAndActiveNow;f.montageAndActiveNow=d;e=a.montageAndActiveNowMontageInboxUnit;f.montageAndActiveNowMontageInboxUnit=e;b=a.montageAndActiveNowActiveNow;f.montageAndActiveNowActiveNow=b;c=a.montageAndActiveNowInboxComposer;f.montageAndActiveNowInboxComposer=c;d=a.montageAndActiveNowActiveAndHasStory;f.montageAndActiveNowActiveAndHasStory=d;e=a.montageAndActiveNowCustomStatus;f.montageAndActiveNowCustomStatus=e;b=a.messengerActiveNowFriendsTab;f.messengerActiveNowFriendsTab=b;c=a.messengerActiveNowFriendsTabFriendsTab;f.messengerActiveNowFriendsTabFriendsTab=c;d=a.messengerActiveNowFriendsTabPlaceHolder;f.messengerActiveNowFriendsTabPlaceHolder=d;e=a.messengerActiveNowFriendsTabRecentActive;f.messengerActiveNowFriendsTabRecentActive=e;b=a.messengerActiveNowFriendsTabRecentActiveAndStory;f.messengerActiveNowFriendsTabRecentActiveAndStory=b;c=a.messengerActiveNowFriendsTabContentDiscovery;f.messengerActiveNowFriendsTabContentDiscovery=c;d=a.messengerPendingRequests;f.messengerPendingRequests=d;e=a.messengerPendingRequestsInboxThreadList;f.messengerPendingRequestsInboxThreadList=e;b=a.messengerPendingRequestsPendingRequestsPage;f.messengerPendingRequestsPendingRequestsPage=b;c=a.messengerBroadcastFlow;f.messengerBroadcastFlow=c;d=a.messengerBroadcastFlowFromMessenger;f.messengerBroadcastFlowFromMessenger=d;e=a.messengerBroadcastFlowFromFb;f.messengerBroadcastFlowFromFb=e;b=a.messengerBroadcastFlowFromExternal;f.messengerBroadcastFlowFromExternal=b;c=a.messengerBroadcastFlowFromFbNewsfeedSharesheet;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=c;d=a.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=d;e=a.messengerBroadcastFlowFromFbShortsViewer;f.messengerBroadcastFlowFromFbShortsViewer=e;b=a.messengerBroadcastFlowForwardGutter;f.messengerBroadcastFlowForwardGutter=b;c=a.messengerBroadcastFlowForwardLongclick;f.messengerBroadcastFlowForwardLongclick=c;d=a.messengerBroadcastFlowMessengerPhotoView;f.messengerBroadcastFlowMessengerPhotoView=d;e=a.messengerOmnipicker;f.messengerOmnipicker=e;b=a.messengerOmnipickerNullState;f.messengerOmnipickerNullState=b;c=a.messengerOmnipickerKeyPressed;f.messengerOmnipickerKeyPressed=c;d=a.messengerNotification;f.messengerNotification=d;e=a.messengerNotificationInThreadReply;f.messengerNotificationInThreadReply=e;b=a.messengerNotificationLongpressReply;f.messengerNotificationLongpressReply=b;c=a.messengerNotificationLongpressReaction;f.messengerNotificationLongpressReaction=c;d=a.clickToMessengerAd;f.clickToMessengerAd=d;e=a.clickToMessengerAdFromNewsfeed;f.clickToMessengerAdFromNewsfeed=e;b=a.clickToMessengerAdSendMessageCta;f.clickToMessengerAdSendMessageCta=b;c=a.clickToMessengerAdViewAndMessage;f.clickToMessengerAdViewAndMessage=c;d=a.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=d;e=a.payments;f.payments=e;b=a.paymentsBubbleClick;f.paymentsBubbleClick=b;c=a.rtc;f.rtc=c;d=a.rtcVoipIncall;f.rtcVoipIncall=d;e=a.rtcDrawerPromotion;f.rtcDrawerPromotion=e;b=a.fbPage;f.fbPage=b;c=a.fbPageAboutCard;f.fbPageAboutCard=c;d=a.fbPageProfileHeaderMessageButton;f.fbPageProfileHeaderMessageButton=d;e=a.fbPageProfileFooterMessageButton;f.fbPageProfileFooterMessageButton=e;b=a.fbPageProfileMoreDrawer;f.fbPageProfileMoreDrawer=b;c=a.fbPageResponsivenessContextCard;f.fbPageResponsivenessContextCard=c;d=a.fbPagePymmRhc;f.fbPagePymmRhc=d;e=a.fbProfile;f.fbProfile=e;b=a.fbProfileTimelineMessageButton;f.fbProfileTimelineMessageButton=b;c=a.fbProfileFacebookProfile;f.fbProfileFacebookProfile=c;d=a.fbProfileMessageButton;f.fbProfileMessageButton=d;e=a.fbProfileMessageButtonBloksUrl;f.fbProfileMessageButtonBloksUrl=e;b=a.fbSearch;f.fbSearch=b;c=a.fbSearchContextualProfileActionBarFromSearch;f.fbSearchContextualProfileActionBarFromSearch=c;d=a.fbSearchSearchMessageButton;f.fbSearchSearchMessageButton=d;e=a.fbSearchFbMessageSearchResults;f.fbSearchFbMessageSearchResults=e;b=a.fbSearchHighConfidenceCard;f.fbSearchHighConfidenceCard=b;c=a.fbSearchMentions;f.fbSearchMentions=c;d=a.fbSearchNullstateCta;f.fbSearchNullstateCta=d;e=a.crypto;f.crypto=e;b=a.messengerMontageComposer;f.messengerMontageComposer=b;c=a.messengerMontageComposerFriendsTab;f.messengerMontageComposerFriendsTab=c;d=a.messengerMontageComposerFriendsTabStoryAndActiveNow;f.messengerMontageComposerFriendsTabStoryAndActiveNow=d;e=a.messengerMontageReply;f.messengerMontageReply=e;b=a.messengerMontageReplyInboxThreadListProfile;f.messengerMontageReplyInboxThreadListProfile=b;c=a.messengerMontageReplyReplyContext;f.messengerMontageReplyReplyContext=c;d=a.messengerMontageReplyThreadNavBar;f.messengerMontageReplyThreadNavBar=d;e=a.messengerMontageReplyInboxThreadListProfileAuthorProfile;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=e;b=a.messengerMontageReplyReplyContextAuthorProfile;f.messengerMontageReplyReplyContextAuthorProfile=b;c=a.messengerMontageReplyThreadNavBarAuthorProfile;f.messengerMontageReplyThreadNavBarAuthorProfile=c;d=a.messengerMontageReplyOneToOneChatThreadStoryBubble;f.messengerMontageReplyOneToOneChatThreadStoryBubble=d;e=a.messengerThreadMembersList;f.messengerThreadMembersList=e;b=a.marketplace;f.marketplace=b;c=a.marketplaceActivityBanner;f.marketplaceActivityBanner=c;d=a.marketplaceSendMessage;f.marketplaceSendMessage=d;e=a.fbStory;f.fbStory=e;b=a.fbStoryViewerSheetMenu;f.fbStoryViewerSheetMenu=b;c=a.fbStoryViewerSheetRow;f.fbStoryViewerSheetRow=c;d=a.fbStoryStoriesJewelNotification;f.fbStoryStoriesJewelNotification=d;e=a.fbStoryStoriesPushNotification;f.fbStoryStoriesPushNotification=e;b=a.fbStoryStoriesViewerConsumerReply;f.fbStoryStoriesViewerConsumerReply=b;c=a.fbStoryStoriesViewerConsumerArtifact;f.fbStoryStoriesViewerConsumerArtifact=c;d=a.fbStoryStoriesPageStoryConversations;f.fbStoryStoriesPageStoryConversations=d;e=a.fbStorySocialContextConversations;f.fbStorySocialContextConversations=e;b=a.workspeed;f.workspeed=b;c=a.workspeedComposerLikeButton;f.workspeedComposerLikeButton=c;d=a.workspeedComposerGifPicker;f.workspeedComposerGifPicker=d;e=a.mdotme;f.mdotme=e;b=a.mdotmeOrganicPost;f.mdotmeOrganicPost=b;c=a.mdotmeMarketingEmail;f.mdotmeMarketingEmail=c;d=a.mdotmeMbsOffsiteEmail;f.mdotmeMbsOffsiteEmail=d;e=a.customerChatPlugin;f.customerChatPlugin=e;b=a.customerChatPluginMobileRedirect;f.customerChatPluginMobileRedirect=b;c=a.customerChatPluginUpgradeFlow;f.customerChatPluginUpgradeFlow=c;d=a.customerChatPluginReEngagement;f.customerChatPluginReEngagement=d;e=a.fbFeed;f.fbFeed=e;b=a.fbFeedOrganicPost;f.fbFeedOrganicPost=b;c=a.fbFeedOrganicPostViewAndMessage;f.fbFeedOrganicPostViewAndMessage=c;d=a.fbFeedQuestionTriggeredConvo;f.fbFeedQuestionTriggeredConvo=d;e=a.fbFeedDynamicHoverCard;f.fbFeedDynamicHoverCard=e;b=a.fbFeedOrganicPostNewsfeedPagePostCta;f.fbFeedOrganicPostNewsfeedPagePostCta=b;c=a.fbFeedOrganicPostNewsfeedBumperSmcta;f.fbFeedOrganicPostNewsfeedBumperSmcta=c;d=a.fbFeedBcfOpenChatButton;f.fbFeedBcfOpenChatButton=d;e=a.fbFeedReactorsListMessageButton;f.fbFeedReactorsListMessageButton=e;b=a.fbFeedReplyToAuthor;f.fbFeedReplyToAuthor=b;c=a.fbFeedUfiSendSuggestions;f.fbFeedUfiSendSuggestions=c;d=a.fbFeedBcf;f.fbFeedBcf=d;e=a.fbFeedCommunityChatsFeedPost;f.fbFeedCommunityChatsFeedPost=e;b=a.fbNotification;f.fbNotification=b;c=a.fbNotificationJewelNotif;f.fbNotificationJewelNotif=c;d=a.fbNotificationPushNotif;f.fbNotificationPushNotif=d;e=a.fbEvent;f.fbEvent=e;b=a.fbEventMessageHost;f.fbEventMessageHost=b;c=a.fbEventShareClassMaterials;f.fbEventShareClassMaterials=c;d=a.supportResources;f.supportResources=d;e=a.supportResourcesFrxAction;f.supportResourcesFrxAction=e;b=a.leadGenMessaging;f.leadGenMessaging=b;c=a.leadGenMessagingPreSubmission;f.leadGenMessagingPreSubmission=c;d=a.leadGenMessagingPostSubmission;f.leadGenMessagingPostSubmission=d;e=a.leadGenMessagingCrossChannelVerticalPresentAndroid;f.leadGenMessagingCrossChannelVerticalPresentAndroid=e;b=a.leadGenMessagingCrossChannelHscrollAndroid;f.leadGenMessagingCrossChannelHscrollAndroid=b;c=a.messengerGraph;f.messengerGraph=c;d=a.messengerGraphSelectContact;f.messengerGraphSelectContact=d;e=a.messengerChat;f.messengerChat=e;b=a.messengerChatFromJewelThreadList;f.messengerChatFromJewelThreadList=b;c=a.messengerChatInThread;f.messengerChatInThread=c;d=a.messengerChatForward;f.messengerChatForward=d;e=a.messengerArchivedThreads;f.messengerArchivedThreads=e;b=a.messengerArchivedThreadsArchivedThreadsFolder;f.messengerArchivedThreadsArchivedThreadsFolder=b;c=a.jewel;f.jewel=c;d=a.jewelThreadList;f.jewelThreadList=d;e=a.jewelSearch;f.jewelSearch=e;b=a.jewelNewMessage;f.jewelNewMessage=b;c=a.jewelNestedFolder;f.jewelNestedFolder=c;d=a.chatheads;f.chatheads=d;e=a.chatheadsRecentThreads;f.chatheadsRecentThreads=e;b=a.chatheadsOverflow;f.chatheadsOverflow=b;c=a.chatheadsNewMessage;f.chatheadsNewMessage=c;d=a.sidebar;f.sidebar=d;e=a.sidebarContactsList;f.sidebarContactsList=e;b=a.sidebarContactsSearch;f.sidebarContactsSearch=b;c=a.sidebarContactsGroups;f.sidebarContactsGroups=c;d=a.messengerCommunityMessaging;f.messengerCommunityMessaging=d;e=a.messengerCommunityMessagingCommunityChannel;f.messengerCommunityMessagingCommunityChannel=e;b=a.messengerCommunityMessagingFullscreenChat;f.messengerCommunityMessagingFullscreenChat=b;c=a.fbPlatformLogin;f.fbPlatformLogin=c;d=a.fbPlatformLoginLoginConnectWithMessenger;f.fbPlatformLoginLoginConnectWithMessenger=d;e=a.contactManager;f.contactManager=e;b=a.contactManagerContactShare;f.contactManagerContactShare=b;c=a.contactManagerPeopleTabContactList;f.contactManagerPeopleTabContactList=c;d=a.contactManagerPeopleTabContactSearch;f.contactManagerPeopleTabContactSearch=d;e=a.contactManagerIconContactList;f.contactManagerIconContactList=e;b=a.contactManagerIconContactSearch;f.contactManagerIconContactSearch=b;c=a.messagingInboxInBlue;f.messagingInboxInBlue=c;d=a.messagingInboxInBlueThreadList;f.messagingInboxInBlueThreadList=d;e=a.messagingInboxInBluePeoplePicker;f.messagingInboxInBluePeoplePicker=e;b=a.messagingInboxInBlueInboxIcon;f.messagingInboxInBlueInboxIcon=b;c=a.messagingInboxInBlueSwipeFromRight;f.messagingInboxInBlueSwipeFromRight=c;d=a.messagingInboxInBlueMibNotification;f.messagingInboxInBlueMibNotification=d;e=a.messagingInboxInBlueActiveNow;f.messagingInboxInBlueActiveNow=e;b=a.messagingInboxInBlueSuggestedChats;f.messagingInboxInBlueSuggestedChats=b;c=a.messagingInboxInBlueChatPreviewBanner;f.messagingInboxInBlueChatPreviewBanner=c;d=a.messagingInboxInBlueThreadViewCoreNullState;f.messagingInboxInBlueThreadViewCoreNullState=d;e=a.messagingInboxInBlueMessageRequests;f.messagingInboxInBlueMessageRequests=e;b=a.messagingInboxInBlueSpam;f.messagingInboxInBlueSpam=b;c=a.messagingInboxInBlueFbGroups;f.messagingInboxInBlueFbGroups=c;d=a.messagingInboxInBlueMessengerPeekStateButton;f.messagingInboxInBlueMessengerPeekStateButton=d;e=a.messagingInboxInBlueMessengerPeekStateTooltip;f.messagingInboxInBlueMessengerPeekStateTooltip=e;b=a.messagingInboxInBlueBroadcastFlow;f.messagingInboxInBlueBroadcastFlow=b;c=a.messagingInboxInBlueThreadViewHeader;f.messagingInboxInBlueThreadViewHeader=c;d=a.messagingInboxInBluePrivacySettings;f.messagingInboxInBluePrivacySettings=d;e=a.messagingInboxInBlueArchivedChats;f.messagingInboxInBlueArchivedChats=e;b=a.mibNotification;f.mibNotification=b;c=a.mibNotificationPushNotification;f.mibNotificationPushNotification=c;d=a.mibNotificationJewelNotification;f.mibNotificationJewelNotification=d;e=a.mibNotificationDirectPushNotif;f.mibNotificationDirectPushNotif=e;b=a.mibNotificationDirectJewelNotif;f.mibNotificationDirectJewelNotif=b;c=a.messengerRestrictedAccounts;f.messengerRestrictedAccounts=c;d=a.armadilloCutoverThreadLinkingMessage;f.armadilloCutoverThreadLinkingMessage=d;e=a.callsTab;f.callsTab=e;b=a.miniShopViewMenuButton;f.miniShopViewMenuButton=b;c=a.sharesheet;f.sharesheet=c;d=a.sharesheetGeneralizedBroadcastFlow;f.sharesheetGeneralizedBroadcastFlow=d;e=a.sharesheetOffPlatformSharingHScroll;f.sharesheetOffPlatformSharingHScroll=e;b=a.ufi;f.ufi=b;c=a.ufiGeneralizedBroadcastFlow;f.ufiGeneralizedBroadcastFlow=c;d=a.chatheadClickCollapsed;f.chatheadClickCollapsed=d;e=a.timelineMessageButton;f.timelineMessageButton=e;b=a.directReplyIntent;f.directReplyIntent=b;c=a.fbGroups;f.fbGroups=c;d=a.fbGroupsInbox;f.fbGroupsInbox=d;e=a.fbGroupsPickerExistingChat;f.fbGroupsPickerExistingChat=e;b=a.fbGroupsPickerJoinChat;f.fbGroupsPickerJoinChat=b;c=a.fbGroupsMemberList;f.fbGroupsMemberList=c;d=a.devices;f.devices=d;e=a.devicesStella;f.devicesStella=e;b=a.fbWellbeing;f.fbWellbeing=b;c=a.fbWellbeingIncallUnblockingNotification;f.fbWellbeingIncallUnblockingNotification=c;d=a.messengerDeepLinking;f.messengerDeepLinking=d;e=a.readOnlyCutoverThread;f.readOnlyCutoverThread=e;b=a.readOnlyCutoverThreadArmadilloThread;f.readOnlyCutoverThreadArmadilloThread=b;c=a.armadilloThread;f.armadilloThread=c;d=a.armadilloThreadReadOnlyCutoverThread;f.armadilloThreadReadOnlyCutoverThread=d;e=a.armadilloThreadExternalLink;f.armadilloThreadExternalLink=e;b=a.fbShorts;f.fbShorts=b;c=a.fbShortsProfile;f.fbShortsProfile=c;d=a.fbShortsReactorsListMessageButton;f.fbShortsReactorsListMessageButton=d;e=a.sendPlugin;f.sendPlugin=e;b=a.sendAsMessageFromNt;f.sendAsMessageFromNt=b;c=a.messengerPublicChatsMessaging;f.messengerPublicChatsMessaging=c;d=a.messengerGrowth;f.messengerGrowth=d;e=a.messengerGrowthNotificationsEntrypoint;f.messengerGrowthNotificationsEntrypoint=e;b=a.friendsHome;f.friendsHome=b;c=a.friendsHomeActiveNow;f.friendsHomeActiveNow=c;d=a.friendsHomeMessageNewFriends;f.friendsHomeMessageNewFriends=d;e=a.friendsHomePostAcceptMessaging;f.friendsHomePostAcceptMessaging=e;b=a.externalLinkXma;f.externalLinkXma=b;c=a.externalLinkXmaFromComposer;f.externalLinkXmaFromComposer=c;d=a.externalLinkXmaFromDeepLinking;f.externalLinkXmaFromDeepLinking=d;e=a.externalLinkXmaFromShareExtension;f.externalLinkXmaFromShareExtension=e;b=a.fbNotifications;f.fbNotifications=b;c=a.quickPromotion;f.quickPromotion=c;d=a.quickPromotionCta;f.quickPromotionCta=d;e=a.quickPromotionInterstitial;f.quickPromotionInterstitial=e;b=a.quickPromotionTopBanner;f.quickPromotionTopBanner=b;c=a.fbmInAppNotifs;f.fbmInAppNotifs=c;d=a.creatorSupport;f.creatorSupport=d;e=a.creatorSupportMessengerToast;f.creatorSupportMessengerToast=e;b=a.fbInstantGame;f.fbInstantGame=b;c=a.communityChatsInFeed;f.communityChatsInFeed=c;d=a.communityChatsInFeedPermalink;f.communityChatsInFeedPermalink=d;e=a.unifiedBusinessInbox;f.unifiedBusinessInbox=e;b=a.rollcall;f.rollcall=b}),null);
__d("MAWDBUsageMetrics",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=30*1e3,i=0,j=null;function a(){if(Date.now()>i+h){var a=navigator.storage;a==null?void 0:a.estimate==null?void 0:a.estimate().then(function(a){j=a});i=Date.now()}return j}c("gkx")("5444")&&a();g.getMAWDBUsageMetrics=a}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return b("Promise").resolve(a.apply(c,e))}catch(a){return b("Promise").reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["WAPromiseCallSync"],(function(a,b,c,d,e,f,g){function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f["finally"](function(){return void c["delete"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WAErr","WALogger","WAPromiseManagement"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected non-result to call"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);q=function(){return a};return a}var r=function(){function a(a,b,c){var e=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();this.$1=a;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){e.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,e.$4(b))})}var e=a.prototype;e.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners["delete"](a)}};e.setPort=function(a){var b=this;d("WALogger").LOG(q());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(p()).devConsole(c.data);return}c=c.data;if(!c)return;c.forEach(function(c){b.$5(c,"incoming"),b.$6(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").LOG(o(),a.name);b.sendStream.addEvent({type:"request",content:a})})};e.getBridge=function(){return this.$1};e.$4=function(a){var b=this;return function(c,d,e,f){b.$7(a,c,d,e,f)}};e.$7=function(a,b,c,d,e){var f=this.$2++;a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:"request",content:a})};e.$8=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};e.$3=function(a){var b=this,c=this.port;if(!c){d("WALogger").LOG(n(),a.length);return}c.postMessage(a);a.forEach(function(a){return b.$5(a,"outgoing")})};e.$5=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};e.$6=function(a,e){var f=this;if(e.type==="request"){var g=e.content,h=g.namespace,n=g.name,o=g.requestId,p=g.arg,q=g.expectsResponse,r=g.silentLog;r||d("WALogger").LOG(m(),o,n);g=this.$1;if(q){q=g.sendAndReceive(h,n,p,r).then(function(b){f.$8(a,{requestId:o,type:"success",result:b,silentLog:r})},function(b){f.$8(a,{requestId:o,type:"error",result:String(b),silentLog:r})});d("WAPromiseManagement").preventGarbageCollection(q)}else{g.fireAndForget(h,n,p,r);q={type:"result",content:{requestId:o,type:"handled",silentLog:r}};this.$5(q,"outgoing");a.postMessage([q])}}else{e.type;g=e.content;h=g.requestId;n=g.type;p=g.result;q=g.silentLog;q||d("WALogger").LOG(l(),h,n);e=this.openRequests.get(h);if(!e){d("WALogger").WARN(k(),h);return}switch(n){case"success":case"error":this.openRequests["delete"](h);g=e.resolver;g?g(n==="success"?p:b("Promise").reject(c("WAErr")(p))):d("WALogger").ERROR(j());break;case"handled":e.resolver?d("WALogger").ERROR(i()):this.openRequests["delete"](h);break}}};return a}();function a(a,b,c){return new r(a,c,b)}function e(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,i=b.silentLog;d("WALogger").LOG(h(),b.requestId);a?a(c.sendAndReceive(e,f,g,i)):c.fireAndForget(e,f,g,i)})}g.CrossWorkerPortal=r;g.attachPortal=a;g.killPortalAndSendPendingToBridge=e}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){var g=new MessageChannel();a=function(){g=new MessageChannel();return g};b=function(){return g};f.createNewChannel=a;f.getMostRecentChannel=b}),66);
__d("MAWCommonSetupBridge",["CurrentUser","ErrorTransport","I64","LSDatabaseDeferred","LSMessagingThreadAttributionType.re","MAWBridge","MAWChatJid.bs","MAWCurrentUser","MAWDBUsageMetrics","MAWDbMedia","MAWEBSwitch","MAWFrontendMediaUtils","MAWGating","MAWJobActionsV2","MAWThreadCutover.bs","MWLogSend.bs","MessagingThreadType.re","ODS","Promise","QPLEvent","QPLUserFlow","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WADualSendMsgUtils","WAJids","cr:2036","err","gkx","promiseDone","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),i=c("gkx")("5444"),j=new Set([25312111,25311870]),k=new Map(),l=new Map([[d("MAWDbMedia").MEDIA_TYPE.IMAGE,8],[d("MAWDbMedia").MEDIA_TYPE.VIDEO,10],[d("MAWDbMedia").MEDIA_TYPE.GIF,6],[d("MAWDbMedia").MEDIA_TYPE.STICKER,4],[d("MAWDbMedia").MEDIA_TYPE.PTT,11]]),m=new Set([25312150,25313100,25304093,1056840931,25299294]);function n(a,b){return a+"_"+b}function o(a,b,e){return d("LSDatabaseDeferred").db.then(function(f){return d("MAWThreadCutover.bs").isCutoverSecureThreadFromChatJid(f,a).then(function(a){c("QPLUserFlow").addAnnotations(b,{bool:{isCutover:a}},{instanceKey:e})})})}var p={fbErrorProxy:function(a){d("ErrorTransport").log(a)},log:function(a){var b=a.logLevel,c=a.logString,d=a.tags;switch(b){case"log":h.onReadyImmediately(function(a){a=a.info;return a(c,d)});return;case"warn":h.onReadyImmediately(function(a){a=a.warn;return a(c,d)});return;case"logRestricted":h.onReadyImmediately(function(a){a=a.logRestricted;return a(c,d)});return;case"debug":break;case"error":break;default:break}},logError:function(a){var b=a.entriesToReport,c=a.framesToPop,d=a.logString,e=a.message,f=a.stack,g=a.tags;h.onReadyImmediately(function(a){a=a.logError;return a(d,g,e,f,c,b)})},odsBumpEntityKey:function(a){var b=a.amount,e=a.entity;a=a.key;d("ODS").bumpEntityKey(3185,e,a+"."+(c("CurrentUser").getAppID()||"unknown"),b)},onJobFinished:function(a){a.type==="createGroup"&&a.originalArgs.key!=null&&d("MAWJobActionsV2").recentFinishedJobsCache.set(a.originalArgs.key,a.result);switch(a.type){case"sendMsg":case"sendMediaMsg":case"sendReactionMsg":case"sendXMAShareMsg":var b=a.originalArgs.chatJid,e=a.type==="sendXMAShareMsg"?a.originalArgs.xmaMsgExternalId:a.originalArgs.externalId;k.set(n(b,e),a.originalArgs)}if(a.type==="sendWrittenMsg"){b=a.originalArgs.protocolMsgId;e=b.chat;var f=b.externalId;b=n(e,f);e=k.get(b);k["delete"](b);if(a.result.type==="success"&&e!=null){var g=e.args,h=e.chatJid;b=e.file;a=g.reactToAuthor!=null;var i;a&&(i=g.reaction!=null?20:27);e=g.specialTextSize!=null;b=b!=null?d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(b.type).mediaType:null;var j=(b=l.get(b))!=null?b:e?3:a?i:0,m=d("WAJids").switchOnMsgrChatJidType(h,{group:function(){return d("MessagingThreadType.re").secureMessageOverWaGroup},user:function(){return d("MessagingThreadType.re").secureMessageOverWaOneToOne}});c("promiseDone")(d("LSDatabaseDeferred").db.then(function(a){var b=g.source?g.source:d("LSMessagingThreadAttributionType.re").unknown;c("promiseDone")(d("MAWChatJid.bs").toThreadKey(a,h).then(function(c){d("MWLogSend.bs").log(a,c,m,f,[],d("I64").of_string(d("MAWCurrentUser").getID()),b,j,g.quote!=null,1,1,d("I64").to_string(c),g==null?void 0:(c=g.ephemeralSetting)==null?void 0:c.ephemeralExpirationInSec,d("WADualSendMsgUtils").isDualSendJid(h)?["dst:8"]:void 0,void 0)}))}))}}},qplEvent:function(a){var e=a.action,f=a.annotations,g=a.event,h=a.instanceKey,k=a.nonTrackableAnnotations,l=a.timestamp;if(!c("CurrentUser").isEmployee()&&j.has(d("QPLEvent").getMarkerId(g)))return;var n=h||0;h=k==null?void 0:(a=k.string)==null?void 0:a.jid;k=h!=null?d("WAJids").validateChatJid(h):void 0;a=m.has(d("QPLEvent").getMarkerId(g))&&k!=null?o(k,g,n):b("Promise").resolve();switch(e.type){case"start":c("QPLUserFlow").start(g,{annotations:babelHelpers["extends"]({},f||{},{bool:babelHelpers["extends"]({},(f==null?void 0:f.bool)||{},{enableHighNumberOfJobWorkers:c("gkx")("6043"),isBulkifyHIMEnabled:d("MAWGating").isBulkifyHIMEnabled(),isDev:0,isDeviceRegistrationDomainUniquenessEnabled:c("gkx")("7858"),isEBEnabled:c("MAWEBSwitch").isEnabled(),isGifSearchEnbled:c("gkx")("7045"),isOccamadillo:d("MAWGating").isOccamadillo(),isTlcPublicUser:d("MAWGating").isTlcPublicUser(),useSharedWorker:c("shouldUseMAWSharedWorker")(),waitForCommsConnection:c("gkx")("7503")})}),instanceKey:n,timestamp:l});break;case"success":if(i){h=d("MAWDBUsageMetrics").getMAWDBUsageMetrics();k=(k=h==null?void 0:(k=h.usageDetails)==null?void 0:k.indexedDB)!=null?k:h==null?void 0:h.usage;h=h==null?void 0:h.quota;k!=null&&h!=null&&c("QPLUserFlow").addAnnotations(g,{"int":{indexedDbSizeInBytes:k,quotaInBytes:h}},{instanceKey:n})}c("QPLUserFlow").addAnnotations(g,{bool:{isRelaxedDurability:!0}},{instanceKey:n});a["finally"](function(){c("QPLUserFlow").endSuccess(g,{annotations:f,instanceKey:n,timestamp:l})});break;case"point":c("QPLUserFlow").addPoint(g,e.name,{data:f,instanceKey:n,timestamp:l});break;case"failure":c("QPLUserFlow").addAnnotations(g,{bool:{isRelaxedDurability:!0}},{instanceKey:n});a["finally"](function(){c("QPLUserFlow").endFailure(g,e.name,{annotations:f,instanceKey:n,timestamp:l})});break;default:throw c("err")("Bridge sends unreachable qplEvent action type")}}},q=function(a,b){a.push(b);return a};a=function(a){var e=a.customizeEventHandlers;a=a.worker;var f=d("MAWBridge").getBridge();f.setHandlers("event",babelHelpers["extends"]({},p,e));e=d("WACrossWorkerPortal").attachPortal(f,["backend"],q);e.setPort(a);if(c("gkx")("5147")){var g=d("WADevToolsBridge").getDevToolBridge();a=new MessageChannel();var h=d("WACrossWorkerPortal").attachPortal(g,["backend"],q),i=d("WACrossWorkerPortal").attachPortal(g,["devtool"],q);h.setPort(d("WADevToolMessageChannel").getMostRecentChannel().port1);i.setPort(a.port1);b("cr:2036")==null?void 0:b("cr:2036").connectAddonPort(a.port2);e.addListener(function(a,b){return g.fireAndForget("devtool","bridgeMessage",{direction:b==="outgoing"?"toWorker":"toMain",msg:a,ts:Date.now()},!0)})}return b("Promise").resolve(f)};g.commonBridgeEventHandlers=p;g.initBridge=a}),98);
__d("MAWSetupBridge",["LSDatabaseDeferred","LSInitSyncCompleteSubscription.bs","MAWBridgeUIEventHandler.bs","MAWBridgeUIEventsWrapper","MAWCommonSetupBridge","MAWCryptoAuthToken","MAWMainThreadLogger","Run","asyncToGeneratorRuntime","cr:1265","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),i=c("requireDeferred")("MAWSetupBridgeOfflineConsumer").__setRef("MAWSetupBridge"),j=c("requireDeferred")("MAWSetupBridgeOfflineSnapshot").__setRef("MAWSetupBridge"),k=d("LSDatabaseDeferred").db.then(d("LSInitSyncCompleteSubscription.bs").use).then(function(){return d("LSDatabaseDeferred").db}),l=function(a){h.loadImmediately(function(b){b=b.log;return b(function(){return{armadillo_thread_id:a.armadilloThreadId,domain:a.domain,event:a.event,event_details:a.eventDetails,open_thread_id:a.openThreadId,success:a.success,trace_id:a.traceId}})})};function a(a){var c=a.dispatch,e=a.environment,f=a.logout,g=a.worker;function h(){g.postMessage({type:"force-flush-data"})}d("Run").onUnload(h);d("Run").onBeforeUnload(h,!1);return d("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{flushLogs:function(a){return d("MAWMainThreadLogger").logToHistoryInBulk(a.logs)},logCutoverEvent:l,logout:f,offlineConsumerProgress:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield i.load()).apply(void 0,arguments)});function c(){return a.apply(this,arguments)}return c}(),offlineSnapshot:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return(yield j.load()).apply(void 0,arguments)});function c(){return a.apply(this,arguments)}return c}(),rotateCryptoAuthToken:function(){return d("MAWCryptoAuthToken").fetchFreshCAT(e)},uiUpdate:function(a){a=a.events;c&&a.forEach(function(a){return c(a)});b("cr:1265")==null?void 0:b("cr:1265").recordBridgeUIEvent(a);d("MAWBridgeUIEventHandler.bs").handleEvents(k,a.map(d("MAWBridgeUIEventsWrapper").UIEventToRE))}},worker:g})}g.setupBridge=a}),98);
__d("MAWSetupMutex.react",["cr:2671","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a){var c=a.environment,d=a.fbId;a=a.platformSetupUtils;b("cr:2671").useMutex(c,d,a);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupWorker",["cr:4999"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:4999")}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;b=24*60*60*1e3;var i=5*b;function a(){h(function(){var a=c("setTimeout")(function(){d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)},i);return function(){return c("clearTimeout")(a)}})}g["default"]=a}),98);
__d("useMAWContactSync",["I64","JSScheduler","LSAuthorityLevel","LSContactBitOffset.bs","LSContactBlockedByViewerStatus.re","LSContactCapabilityBitOffset.re","LSDatabaseDeferred","MAWBridgeFireAndForget","MAWContactRelationshipType","MAWSyncState","Promise","ReQL","asyncToGeneratorRuntime","debounceCore","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){h(function(){var a=new(b("Promise"))(function(a){c("JSScheduler").scheduleSpeculativeCallback(function(){c("promiseDone")(d("LSDatabaseDeferred").db.then(function(b){return i(b).then(function(a){return l(a)}).then(function(){return j(b)}).then(function(b){return a(b)})}))})});return function(){c("promiseDone")(a.then(function(a){return a()}))}},[])}function i(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("contacts")))}function j(a){return d("ReQL").fromTableAscending(a.table("contacts")).subscribe(n)}var k=!1;function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(k===!0)return;k=!0;yield d("MAWSyncState").waitForInitialSync;yield d("MAWBridgeFireAndForget").fireAndForget("backend","updateContacts",{contacts:a.filter(function(a){return d("I64").to_int32(a.authorityLevel)!==c("LSAuthorityLevel").AUTHORITATIVE}).map(o)})});return m.apply(this,arguments)}function n(a,b){if(b.operation==="delete")return;b=b.value;p.set(a,b);q()}function o(a){var b;b=(b=d("LSContactBitOffset.bs").has(c("LSContactCapabilityBitOffset.re").restrictPlaced,a))!=null?b:!1;return{fbid:d("I64").to_string(a.id),isBlocked:a.blockedByViewerStatus!==d("LSContactBlockedByViewerStatus.re").unblocked,isRestricted:b,name:a.name,relationship:d("MAWContactRelationshipType").getContactRelationshipType(a)}}var p=new Map(),q=c("debounceCore")(function(){p.clear()},1e3);g.useMAWContactSync=a}),98);
__d("useMAWDeregisterDeviceUntilReload",["LSPersistedDbGating","MAWAppMutex","MAWBridgeSendAndReceive","MAWIssueNewUserVisibleErrors","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","ODS","WALogger","asyncToGeneratorRuntime","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker ",""]);h=function(){return a};return a}e=d("react");var i=e.useCallback,j=e.useMemo,k=!1;function l(){k=!0,c("MAWSetupWorker").terminateWorkerPermanently(),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}function a(a,e,f){var g=f.getOrSetupWorker,m=f.setupBridge,n=f.terminateWorker,o=j(function(){return d("MAWAppMutex").use()},[]),p=c("useReStore")(),q=d("MAWStateContext.react").useDispatchClearEphemeralSettings();return i(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(k)return;d("ODS").bumpEntityKey(3185,"armadillo_forced_deregister",window.location.hostname);yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","removeCurrentDevice");n();try{yield c("MAWReinitWorker")({allTablesPersisted:d("LSPersistedDbGating").allTablesPersisted,db:p,dispatchClearEphemeralSettings:q,environment:a,fbId:e,getOrSetupWorker:g,logout:l,mutex:o,setupBridge:m})}catch(a){d("WALogger").TAGS(["LogoutHandler"]).ERROR(h(),a),d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}),[n,p,q,a,e,g,o,m])}g["default"]=a}),98);
__d("MAWSetup.react",["BaseHeadingContext","CometPlaceholder.react","CometRelay","CurrentUser","MAWCommonSetup","MAWSetupBridge","MAWSetupMutex.react","MAWSetupWorker","cr:2072","cr:2573","cr:2808","cr:2809","cr:3487","deferredLoadComponent","promiseDone","react","requireDeferredForDisplay","shouldUseMAWSharedWorker","useLegacyUserWatchdog","useMAWContactSync","useMAWDeregisterDeviceUntilReload"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useMemo,k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react"));window.XPlatTesting=b("cr:2808");window.XPlatTestingGroups=b("cr:2809");var l=c("CurrentUser").getID();function m(a){var e=d("CometRelay").useRelayEnvironment(),f=c("useMAWDeregisterDeviceUntilReload")(e,l,{doesWorkerExist:c("MAWSetupWorker").doesWorkerExist,getOrSetupWorker:c("MAWSetupWorker").getOrSetupWorker,setupBridge:d("MAWSetupBridge").setupBridge,terminateWorker:c("MAWSetupWorker").terminateWorker}),g=j(function(){return{doesWorkerExist:c("MAWSetupWorker").doesWorkerExist,getOrSetupWorker:c("MAWSetupWorker").getOrSetupWorker,logout:function(){return c("promiseDone")(f())},setupBridge:d("MAWSetupBridge").setupBridge,terminateWorker:c("MAWSetupWorker").terminateWorker}},[f]);d("MAWCommonSetup").useArmadillo(l,g);d("useMAWContactSync").useMAWContactSync();c("useLegacyUserWatchdog")();b("cr:2573")();b("cr:2072")==null?void 0:b("cr:2072")();return h.jsxs(h.Fragment,{children:[a.children,c("shouldUseMAWSharedWorker")()?null:h.jsx(c("MAWSetupMutex.react"),{environment:e,fbId:l,platformSetupUtils:g})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var d=i(c("BaseHeadingContext"));return h.jsxs(c("BaseHeadingContext").Provider,{value:d+1,children:[h.jsx(m,babelHelpers["extends"]({},a)),h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(k,{})}),b("cr:3487")&&h.jsx(b("cr:3487"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSetupMutexV2",["FBLogger","LocalStorageMutex","MAWAppMutex","MAWBridge","MAWLocalStorage","MAWReinitWorker","MAWStateContext.react","QPLUserCountEvent","QPLUserFlow","Run","WALoggerDeferred","asyncToGeneratorRuntime","qex","qpl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["AppMutex - Shouldn't reinitialize, worker already exists"]);h=function(){return a};return a}a=d("react");var i=a.useCallback,j=a.useEffect,k=a.useMemo,l=c("FBLogger")("messenger_e2ee_web"),m=!1,n=0;function o(a){if(document.visibilityState!=="visible")return!1;a=a();var b=window.indexedDB!=null,e=d("MAWLocalStorage").isLocalStorageAvailable();if(a){d("WALoggerDeferred").DEV(h());return!1}if(!b){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25299354,"201"));return!1}if(!e){d("QPLUserCountEvent").fireQplUserCount(c("qpl")._(25309925,"203"));return!1}return!0}e=function(a,e,f){var g=f.doesWorkerExist,h=f.getOrSetupWorker,p=f.logout,q=f.setupBridge,r=f.terminateWorker,s=k(function(){return d("MAWAppMutex").use()},[]),t=c("useReStore")(),u=d("MAWStateContext.react").useDispatchClearEphemeralSettings(),v=t.persistenceTypes.includes("indexeddb"),w=i(function(a){var b=s.takeoverFilter(a);if(!b||a.newValue===d("LocalStorageMutex").THIS_TAB||a.newValue==="")return;v||d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]});r();s.onMutexDeath()},[s,v,r]),x=i(function(){r(),s.onMutexDeath()},[s,r]),y=i(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=o(g);if(!b||m||c("qex")._("215")===!0)return;m=!0;n++;try{yield c("MAWReinitWorker")({allTablesPersisted:v,db:t,dispatchClearEphemeralSettings:u,environment:a,fbId:e,getOrSetupWorker:h,instanceKey:n,logout:p,mutex:s,setupBridge:q})}catch(a){l.mustfix("AppMutex - failed to reinitialize worker"),l.catching(a),c("QPLUserFlow").endFailure(c("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{error:a,instanceKey:n})}finally{m=!1}}),[g,s,e,h,t,q,a,p,v,u]);j(function(){window.addEventListener("storage",w);var a=d("Run").onBeforeUnload(x,!1),b=d("Run").onUnload(x);window.addEventListener("visibilitychange",y);return function(){window.removeEventListener("storage",w),a.remove(),b.remove(),window.removeEventListener("visibilitychange",y)}},[w,x,y])};g.useMutex=e}),98);
__d("MAWCommonSetupUser",["CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{getAccountID:c("CurrentUser").getAccountID(),getAppID:c("CurrentUser").getAppID(),getEIMU:c("CurrentUser").getEIMU(),getEmployeeWorkUserID:c("CurrentUser").getEmployeeWorkUserID(),getID:c("CurrentUser").getID(),getName:c("CurrentUser").getName(),getPossiblyNonFacebookUserID:c("CurrentUser").getPossiblyNonFacebookUserID(),getShortName:c("CurrentUser").getShortName(),hasSecondaryBusinessPerson:c("CurrentUser").hasSecondaryBusinessPerson(),hasWorkUser:c("CurrentUser").hasWorkUser(),isBusinessPersonAccount:c("CurrentUser").isBusinessPersonAccount(),isDeactivatedAllowedOnMessenger:c("CurrentUser").isDeactivatedAllowedOnMessenger(),isEmployee:c("CurrentUser").isEmployee(),isFacebookWorkAccount:c("CurrentUser").isFacebookWorkAccount(),isGray:c("CurrentUser").isGray(),isLoggedIn:c("CurrentUser").isLoggedIn(),isLoggedInNow:c("CurrentUser").isLoggedInNow(),isMessengerCallGuestUser:c("CurrentUser").isMessengerCallGuestUser(),isMessengerOnlyUser:c("CurrentUser").isMessengerOnlyUser(),isTestUser:c("CurrentUser").isTestUser(),isUnderage:c("CurrentUser").isUnderage(),isWorkroomsUser:c("CurrentUser").isWorkroomsUser(),isWorkUser:c("CurrentUser").isWorkUser()}}g.getCurrentUserForArmadilloSetup_DO_NOT_USE=a}),98);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var d=this;this.$2=[];this.callMessageHandler=function(a){return new(b("Promise"))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods["+a.method+"] is not a functions");return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var e=this,f={},g=a(f);a=Object.keys(g);var h={};a.forEach(function(a){h[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return e.callMessageHandler(b)},f[a]=function(){var b=e.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend["+a+"] is not a functions");return}return b.apply(e.$1,arguments)},g[a]===null&&(g[a]=f[a])});this.$1=h;this.proxyMethods=g}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("MainPageUrl",["ExecutionEnvironment","FBLogger","SimpleHook"],(function(a,b,c,d,e,f,g){"use strict";var h=new URL("http://undefined"),i=new(d("SimpleHook").SimpleHook)();function j(){return c("ExecutionEnvironment").isInBrowser&&h.searchParams.get("workerlog")==="debug"}function a(a){try{j()&&c("FBLogger")("worker").debug("received url "+a);var b=new URL(a,h.href||"http://undefined");h.href!==b.href?(h.href=b.href,i.call(h)):j()&&c("FBLogger")("worker").debug("ignoring url: path didn't change in "+a)}catch(a){c("FBLogger")("worker").catching(a).warn("invalid url")}}typeof window==="object"&&typeof window.location==="object"&&typeof window.location.href==="string"&&a(window.location.href);g.mainPageUrl=h;g.onMainPageUrlChange=i;g.isWorkerLogEnabled=j;g.updateMainPageUrl=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,c("ExecutionEnvironment").isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")(b("Promise").resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new i(a),this.port2=new i(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=i;g.VirtualMessageChannel=a}),98);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("SimpleHook").SimpleHook)(),i=new(d("SimpleHook").SimpleHook)(),j="/";function k(a,b){return""+a+j+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?k(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=c("performanceAbsoluteNow")());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){h.call(this,a)};b.stop=function(a){a===void 0&&(a=c("performanceAbsoluteNow")());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){i.call(this,a)};return a}();function a(){c("performance").mark&&c("performance").measure&&(h.add(function(a,b){c("performance").mark(a.fullname()+"_start")}),i.add(function(a,b){c("performance").measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=h;g.OnRangeStop=i;g.TIME_RANGE_LEVEL_SEPARATOR=j;g.rangeFullName=k;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("DoubleKeyMap").DoubleKeyMap)(),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange1=c;h.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange1.point(this.fullname()+"_END",{timestamp:a}),h["delete"](this.$QPLRange1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=h.get(this.$QPLRange1,e))!=null?e:new a(b,this.$QPLRange1,this)};return a}(d("NestedTimeRange").NestedTimeRange),j=new(d("DoubleKeyMap").DoubleKeyMap)(),k=new(d("SimpleHook").SimpleHook)(),l=new(d("SimpleHook").SimpleHook)(),m=new(d("SimpleHook").SimpleHook)(),n=new(d("SimpleHook").SimpleHook)(),o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var h=d("QPLEvent").getMarkerId(a);g=b.call(this,"event_"+h)||this;g.event=a;g.instanceKey=c;g.$QPLEvent1=e;g.isUserFlow=f;j.set(h,c,babelHelpers.assertThisInitialized(g));return g}var e=a.prototype;e.action=function(a){this.$QPLEvent1=a;return this};e.getAction=function(){return this.$QPLEvent1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){k.call(this,a)};e.__onStop=function(a){l.call(this,a),h.deleteAll(this),j["delete"](d("QPLEvent").getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=h.get(this,a))!=null?b:new i(a,this)};e.point=function(a,b){b===void 0&&(b={});m.call(this,a,b);return this};e.annotate=function(a){n.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b){var c;b===void 0&&(b=0);return(c=j.get(d("QPLEvent").getMarkerId(a),b))!=null?c:new o(a,b)}g.OnEventStart=k;g.OnEventStop=l;g.OnEventPoint=m;g.OnEventAnnotate=n;g.QPLEvent=o;g.event=a}),98);
__d("WorkerMessagePort",["FBLogger","MainPageUrl","Promise","QLogEvent","SimpleHook","VirtualMessageChannel","performanceAbsoluteNow","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=100,j=50;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}var o=0;function p(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),o++)}var q=Math.random()<.1;function r(a,b,c){var d;if(b==null||!q)return;var e=b.sendDelayHighPrecision,f=b.sendTimestamp,g=b.sendDateTime,j=b.receiveTimestamp;b=b.receiveDateTime;d=(d=c)!=null?d:p();c==null&&d.startFromTime();var k=d.range("SEND_DELAY");k.start(f);k.stop(j);k=d.range("SEND_DELAY_LOW_PRECISION");k.start(g);k.stop(b);k=Math.abs(f-g);f=Math.abs(j-b);d.annotate({string:{port_name:a},"int":{send_delay:e,send_drift:k,receive_drift:f},bool:{send_delay_above_max:e!=null&&e>h,send_drift_above_max:k>i,receive_drift_above_max:f>i}});c==null&&d.stop()}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var d=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return d.onMessageHandler(k(a.data))});this.$2.addEventListener("error",function(a){return d.onError.call(a)});this.onPostMessage.add(function(a){m(a,{sendTimestamp:c("performanceAbsoluteNow")(),receiveTimestamp:-1,sendDelayHighPrecision:0,sendDateTime:Date.now(),receiveDateTime:-1,sendDelayLowPrecision:0})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendTimestamp,e=a.sendDateTime,f=c("performanceAbsoluteNow")(),g=Date.now();a.receiveTimestamp=f;a.receiveDateTime=g;a.sendDelayHighPrecision=f-b;a.sendDelayLowPrecision=g-e;r(d.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(b("Promise"))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function s(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(d,a);function d(d,e){var f;f=a.call(this,d,e)||this;var g=s(babelHelpers.assertThisInitialized(f));d=g.onMessageOnce("endpoint_started",function(){return!0});e=g.onMessageOnce("endpoint_started_received",function(){return!0});g.postMessage({type:"endpoint_started",endpoint:f.name});c("promiseDone")(d,function(a){var b=n(a);g.postMessage({type:"endpoint_started_received",endpoint:a.endpoint,targetEndpoint:f.name,startSendTimestamp:b==null?void 0:b.sendTimestamp});r(f.name,b)});c("promiseDone")(e,function(a){var b=n(a);if(b!=null){var c=p();c.startFromTime();r(f.name,b,c);var d=c.range("ROUND_TRIP");d.start(a.startSendTimestamp);d.stop(b.receiveTimestamp);d=b.receiveTimestamp-a.startSendTimestamp;c.annotate({"int":{round_trip:d},bool:{round_trip_above_max:d>j}}).stop()}});f.fullyConnected=b("Promise").race([d,e]).then(function(){return babelHelpers.assertThisInitialized(f)});return f}return d}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=s;g.WorkerSyncedMessagePort=e}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},j=1e4,k=0,l=5,m=l+1,n=function(){function a(a){self.WeakRef&&(this.$1=new self.WeakRef(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),o=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={"function":{serialize:function(a,b){b=m++;i.$WorkerFuncChannel1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new n(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1["delete"](a)})};var l=i.__remoteInternalFunc(k,a);typeof jest===typeof void 0&&c("ExecutionEnvironment").isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2["delete"](c))});a.length>0?l(a):i.$WorkerFuncChannel2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel2.size)},j);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>l||this.$WorkerFuncChannel1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(b("Promise"))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),i=e.__onPostOutMessage(d);i!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||v.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});v.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),p=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function q(a,b,d,e){v.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new p(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),v.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return q(c,function(){return new o(function(b){return a},c,null,d)},a,b)}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function s(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new p(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){v.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new r(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),v.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function t(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new o(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return s(t(a,c,d,e),b)}var u=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return b("Promise").resolve()};return a}(),v=new u();function f(a,b,c){v.activate(a,b,c)}g.TransferableTransformer=i;g.WorkerFuncChannel=o;g.exportChannelOnPort=q;g.exportChannel=a;g.importChannelOnPort=s;g.makeChannel=t;g.importChannel=e;g.activateChannels=f}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=c("performanceAbsoluteNow")());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:c("performanceAbsoluteNow")()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=c("performanceAbsoluteNow")());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){h.setMessagePort(a)}function b(a){h.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("MAWCommonSetupWorker",["Deferred","MAWCommonSetupUser","MAWMainThreadLogger","MAWSetupWorker","WADevToolMessageChannel","WALogger","WorkerClient","WorkerMessagePort","err","gkx","performanceNavigationStart","uuid"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Terminating worker and rebooting..."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker receive invalid message: ",""]);i=function(){return a};return a}var j=c("performanceNavigationStart")()+"__"+c("uuid")();b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.onmessage=null;e.$BridgeAdapter1=b;d("WorkerClient").init(babelHelpers.assertThisInitialized(e));e.onUnhandledMessage.add(function(a){e.onmessage&&e.onmessage({data:a})});return e}var c=b.prototype;c.getBridgePort=function(){return this};return b}(d("WorkerMessagePort").WorkerSyncedMessagePort);function a(a,b,e,f,g){var k=new(c("Deferred"))();a.addMessageListener("worker-setup",function(b){var e;if(b.setupHash!==j)return;b.status==="failure"&&((e=b.logs)==null?void 0:e.length)&&d("MAWMainThreadLogger").logToHistoryInBulk(b.logs);if(b==null||b.type!=="worker-setup"){d("WALogger").WARN(i(),b);return}if(b.status==="success")k.resolve(a.getBridgePort());else if(b.status==="failure"){k.reject(c("err")((e=b.msg)!=null?e:"Encountered an error setting up the armadillo web worker"))}else if(b.status==="already-setup")if(b.action==="no-action"){k.resolve(a.getBridgePort());return}else if(b.action==="reboot-required"&&b.setupHash===j){d("WALogger").DEV(h());c("MAWSetupWorker").terminateWorker();return g().then(function(a){return k.resolve(a)})["catch"](function(a){return k.reject(a)})}else throw c("err")("received invalid action for worker-setup:already-setup: "+b.action);else throw c("err")("received invalid message for worker")});var l=d("MAWCommonSetupUser").getCurrentUserForArmadilloSetup_DO_NOT_USE(),m=window.location.hostname;if(c("gkx")("5147")){var n=d("WADevToolMessageChannel").createNewChannel();a.postMessage({content:{currentUser:l,devToolMessageChannelPort2:n.port2,fbId:b,hostname:m,latestKeyVersionForEAR:e,vaultMaterials:f},setupHash:j,type:"worker-setup"},[n.port2])}else a.postMessage({content:{currentUser:l,fbId:b,hostname:m,latestKeyVersionForEAR:e,vaultMaterials:f},setupHash:j,type:"worker-setup"});return k.getPromise()}g.BridgeAdapter=b;g.initWorker=a}),98);
__d("SharedWorkerDevChangeManager",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=new Set();function a(a,b,c){return!h||i.has(a)||b===c}function b(a){h&&i.add(a)}g.shouldUseCurrentWorkerIfDev=a;g.trackCreatedWorker=b}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4266");b=d("FalcoLoggerInternal").create("shared_worker_init",a);e=b;g["default"]=e}),98);
__d("SharedWorkerLockManager",["Deferred","FBLogger","setImmediate","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h="shared_worker_mutex",i=15e3;function j(){var a;a=(a=window)==null?void 0:(a=a.navigator)==null?void 0:a.locks;if(a==null){c("FBLogger")("comet_infra").warn("User does not support Web Lock API");return{request:function(a,b){c("setImmediate")(function(){b()})}}}return a}function k(a){c("setTimeout")(function(){a.isSettled()||(c("FBLogger")("comet_infra").warn("[SharedWorkerLockManager]: lock timed out in %s ms",i),a.resolve())},i)}function a(a){var b=j(),d=new(c("Deferred"))();b.request(h,function(){k(d);a();return d.getPromise()});return function(){d.resolve()}}g.withLockForWorkerInit=a}),98);
__d("XSharedWorkerBundleControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/shared_worker_bundle/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("SharedWorkerBundleResource",["Deferred","FBLogger","SharedWorkerDevChangeManager","SharedWorkerInitFalcoEvent","SharedWorkerLockManager","SiteData","SpinConfigSitevarConfig","TrustedTypesWebWorkerScriptURLPolicy","WebStorage","XSharedWorkerBundleControllerRouteBuilder","emptyFunction","err","gkx","justknobx","performanceNavigationStart","uuid"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuid")(),i="__swbundle__",j=c("SpinConfigSitevarConfig").pin_time_window*1e3;function k(a){return a==null?null:JSON.parse(a)}function l(a){a=k(a.getItem(i));if(a==null)return null;var b=c("performanceNavigationStart")();return Object.fromEntries(Object.entries(a).filter(function(a){a[0];a=a[1];return b-a.spin_time*1e3<=j}))}function m(a,b,d,e){if(!c("gkx")("4873"))return;c("SharedWorkerInitFalcoEvent").log(function(){return{client_id:h,bundle_name:a,client_rev:String(c("SiteData").client_revision),local_shared_worker_ref:b!=null?{bundle_url:b.url,rev:String(b.rev),spin_time:String(b.spin_time)}:null,new_shared_worker_ref:{bundle_url:d},init_step:e}})}function n(a,b,c){var d=l(a);if(d==null){var e;a.setItem(i,JSON.stringify((e={},e[b]=c,e)));return}d[b]=c;a.setItem(i,JSON.stringify(d))}function o(a,b){var c=l(a);if(c!=null&&Object.prototype.hasOwnProperty.call(c,b)){delete c[b];a.setItem(i,JSON.stringify(c));return}}function p(a,b){a=k(a.getItem(i));return a==null?null:a[b]}function q(a){return c("justknobx")._("988")?c("XSharedWorkerBundleControllerRouteBuilder").buildURL({bundle_url:a,hash:c("uuid")()}):c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a)}function r(a,b,c){a=new SharedWorker(a,{name:b});a.port.start();a.port.postMessage({type:"execute-worker",args:[c]});return a}function s(a,b,d,e,f,g){b.port.addEventListener("message",function(b){var h;if(typeof b.data==="object"&&((h=b.data)==null?void 0:h.type)==="sw-get-rev"&&typeof b.data.response==="object"){h=(h=b.data)==null?void 0:(h=h.response)==null?void 0:h.workerRevision;b=(b=b.data)==null?void 0:(b=b.response)==null?void 0:b.spinTime;if(h==null||typeof h!=="number"){c("FBLogger")("comet_infra").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(h));return}if(b==null||typeof b!=="number"){c("FBLogger")("comet_infra").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(b));return}n(a,e,{url:d,rev:h,spin_time:b});m(e,p(a,e),g.url,"after_worker_reference_save");f()}}),b.port.postMessage({type:"sw-get-rev",args:[]})}function t(a,b,e,f,g){var h;a=(a=a)!=null?a:e.name;var i=p(b,a);m(a,i,e.url,"create_worker_start");if(i!=null)if(i.rev>=c("SiteData").client_revision&&d("SharedWorkerDevChangeManager").shouldUseCurrentWorkerIfDev(a,i.url,e.url))h=r(i.url,a,e),f();else{o(b,a);i=new SharedWorker(i.url,a);i.port.postMessage({type:"sw-shutdown",args:[]});i=q(e.url);h=r(i,a,e);s(b,h,i,a,f,e)}else{i=q(e.url);h=r(i,a,e);s(b,h,i,a,f,e)}h.port.addEventListener("message",function(a){var b;typeof a.data==="object"&&((b=a.data)==null?void 0:b.type)==="sw-shutdown"&&typeof a.data.response==="object"&&(g==null?void 0:g())});d("SharedWorkerDevChangeManager").trackCreatedWorker(a);return h}function a(a,b,d){var e=c("WebStorage").getLocalStorage();if(e==null)throw c("err")("Shared worker could not start, missing session storage");return t(d,e,a,c("emptyFunction"),b)}function b(a,b,e){var f=new(c("Deferred"))(),g=c("WebStorage").getLocalStorage();if(g==null)throw c("err")("Shared worker could not start, missing session storage");var h=d("SharedWorkerLockManager").withLockForWorkerInit(function(){f.resolve(t(e,g,a,h,b))});return f.getPromise()}g.createPushSafeSharedWebWorker=a;g.createPushSafeSharedWebWorkerAsync=b}),98);
__d("WorkerBundleResource",["TrustedTypesWebWorkerScriptURLPolicy"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d,e;for(var f=arguments.length,g=new Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];var i=(d=b)!=null?d:a.name,j=new window.URL(a.url,window.location.href).href;if(j==null){var k=new Error("Can't start up worker without a resource url.");k.stack;throw k}var l=new Blob(["__DEV__=false;","if (self.trustedTypes && self.trustedTypes.createPolicy) {","const escapeScriptURLPolicy = self.trustedTypes.createPolicy('workerPolicy', {\n  createScriptURL: url => url });","importScripts(escapeScriptURLPolicy.createScriptURL('"+j+"'));","} else {","importScripts('"+j+"');","}","StartBundle.apply(null, "+JSON.stringify([a].concat((e=g)!=null?e:[]))+")"],{type:"text/javascript"}),m=window.URL.createObjectURL(l),n=new Worker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(m),{name:i}),o=n.terminate;n.terminate=function(){window.URL.revokeObjectURL(this._objectURL),o.apply(this,arguments)};return n}function b(a,b){b=(b=b)!=null?b:a.name;b=new SharedWorker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a.url),{name:b});b.port.start();b.port.postMessage({type:"execute-worker",args:[a]});return b}g.createDedicatedWebWorker=a;g.createSharedWebWorker=b}),98);
__d("MAWWebWorkerSingletonAsync",["FBLogger","MAWMainWebWorkerResource","Promise","SharedWorkerBundleResource","WorkerBundleResource","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){if(!h){var e=c("shouldUseMAWSharedWorker")();i();e?h=d("SharedWorkerBundleResource").createPushSafeSharedWebWorkerAsync(c("MAWMainWebWorkerResource"),a).then(function(a){a.onerror=function(a){c("FBLogger")("messenger_e2ee_web").mustfix("[MAWWebWorkerSingletonAsync: Shared Worker]: %s:%s:%s",JSON.stringify(a==null?void 0:a.message),a==null?void 0:a.lineno,a==null?void 0:a.colno)};return a.port}):h=b("Promise").resolve(d("WorkerBundleResource").createDedicatedWebWorker(c("MAWMainWebWorkerResource"))).then(function(a){a.onerror=function(a){c("FBLogger")("messenger_e2ee_web").mustfix("[MAWWebWorkerSingletonAsync: Dedicated Worker]: %s:%s:%s",JSON.stringify(a==null?void 0:a.message),a==null?void 0:a.lineno,a==null?void 0:a.colno)};return a})}return h}function e(){h=null}function i(){}g.createWorkerIfNone=a;g.destroyWorkerInstance=e}),98);
__d("startMAWWorkerWatchdog",["MAWBridgeSendAndReceive","MAWIssueNewUserVisibleErrors","Promise","clearInterval","promiseDone","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=30*1e3,i=h/2;function a(){var a=c("setInterval")(function(){var e=new(b("Promise"))(function(a,b){c("setTimeout")(function(){b(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody)},i)});e=b("Promise").race([d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWorkerHeartbeat"),e]);c("promiseDone")(e.then(function(b){b||(d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER),c("clearInterval")(a))})["catch"](function(b){d("MAWIssueNewUserVisibleErrors").issueError(d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,d("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,d("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER);c("clearInterval")(a);throw b}))},h);return function(){return c("clearInterval")(a)}}g["default"]=a}),98);
__d("MAWSetupWorkerAsync",["Deferred","MAWCommonSetupWorker","MAWInit","MAWWebWorkerSingletonAsync","Promise","WALogger","asyncToGeneratorRuntime","err","promiseDone","setTimeout","startMAWWorkerWatchdog"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker terminating"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker doesn't exist, no need to terminate"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["worker setting up"]);j=function(){return a};return a}var k=null,l=null,m=null,n=!1;function o(a,b,e,f){if(n)throw c("err")("Worker is permanently killed.");var g=function(){return o(a,b,e,f)};d("MAWInit").logPoint("create_worker_start");var h=d("MAWWebWorkerSingletonAsync").createWorkerIfNone(function(){q(),c("setTimeout")(function(){c("promiseDone")(g(),f)},5e3)}),i=new(c("Deferred"))();k=i.getPromise();l=h;return l.then(function(f){d("MAWInit").logPoint("create_worker_end");if(f===null)throw c("err")("Client is starting bridge without a worker.");d("WALogger").LOG(j());var h=new(d("MAWCommonSetupWorker").BridgeAdapter)(f,"MAWMainWorker");i.resolve(h);return d("MAWInit").measurePerformance("maw_init_worker",function(){return d("MAWCommonSetupWorker").initWorker(h,a,b,e,g)})})}function a(a,b,d,e){if(!k){a=o(a,b,d,e);m=c("startMAWWorkerWatchdog")();return a}return k}function e(){return l!=null}function p(a,b){if(!k){b&&d("WALogger").LOG(i());return!1}b&&d("WALogger").LOG(h());l=null;c("promiseDone")(k.then(function(a){return a==null?void 0:a.close()}));k=null;d("MAWWebWorkerSingletonAsync").destroyWorkerInstance();a&&m!=null&&(m(),m=null);return!0}function q(){p(!0,!0)}function f(){p(!0,!0),n=!0}function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){p(!1,!1)&&(yield t(45e3))});return s.apply(this,arguments)}function t(a){return new(b("Promise"))(function(b){return c("setTimeout")(b,a)})}g.getOrSetupWorker=a;g.doesWorkerExist=e;g.terminateWorker=q;g.terminateWorkerPermanently=f;g.killWorkerForTest=r}),98);
__d("LSSyncStatus.re",["LSSyncStatus.bs"],(function(a,b,c,d,e,f){c=(a=b("LSSyncStatus.bs")).initializing;f.initializing=c;d=a.complete;f.complete=d;e=a.resnapshotting;f.resnapshotting=e;b=a.paging;f.paging=b}),null);
__d("useInitSyncCompleteTimeout",["I64","LSDatabaseDeferred","LSSyncStatus.re","MAWInitSyncComplete.bs","MWChatDataLossCheckerUtil","ReQL","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){h(function(){var a=window.setTimeout(function(){c("promiseDone")(d("LSDatabaseDeferred").db.then(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(d("MAWInitSyncComplete.bs").id)).then(function(b){((b==null?void 0:b.syncStatus)===void 0||!d("I64").equal(b.syncStatus,c("LSSyncStatus.re").complete))&&d("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(a)})}))},1e4);return function(){window.clearTimeout(a)}},[])}g["default"]=a}),98);
__d("useDataLossChecker",["useDataLossStatisticsStorageListener","useInitSyncCompleteTimeout"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("useInitSyncCompleteTimeout")(),d("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener()}g["default"]=a}),98);
__d("useDataLossCheckerNoop",[],(function(a,b,c,d,e,f){"use strict";function a(){}f["default"]=a}),66);
__d("MAWLoadingStateToastSelectors",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return a.offlineQueueCount};b=function(a){return a.offlineQueueProgressDownloaded};f.offlineQueueCountSelector=a;f.offlineQueueProgressCountSelector=b}),66);
__d("MAWLoadingStateSpinner.react",["fbt","ix","BaseToasterStateManager","CometIcon.react","CometProgressRingDeterminate.react","MAWLoadingStateToastSelectors","MAWStateContext.react","fbicon","mwPushToast","mwReplaceToast","react","useMAWOfflineQueueLoadingIndicator"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");e=b.memo;var k=b.useEffect,l=b.useMemo,m=b.useRef,n=h._("__JHASH__f9ft1Nb-b3f__JHASH__"),o=h._("__JHASH__laOwOEc4JeD__JHASH__"),p=function(a,b){return h._("__JHASH__-uoxDFsOMfK__JHASH__",[h._param("restoredMessage",a.toString()),h._param("count",b.toString())])},q=c("BaseToasterStateManager").getInstance();function r(a,b){var d=100*a/b;a=b>100?p(a,b):void 0;return{body:a,icon:{comet:j.jsx(c("CometProgressRingDeterminate.react"),{color:"light",percentage:d,size:20})},startAddOn:{source:d,type:"progressRing"},title:n}}function s(a){d("mwReplaceToast").mwReplaceToast({icon:{comet:j.jsx(c("CometIcon.react"),{icon:d("fbicon")._(i("498146"),20)}),mds:d("fbicon")._(i("477815"),24)},title:o,toastId:a})}function a(){var a=c("useMAWOfflineQueueLoadingIndicator")(!0),b=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueCountSelector),e=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),f=m();l(function(){if(a)f.current==null?f.current=d("mwPushToast").mwPushToast(r(e,b),Number.MAX_SAFE_INTEGER):d("mwReplaceToast").mwReplaceToast(babelHelpers["extends"]({},r(e,b),{toastId:f.current}));else if(f.current!=null){var c=f.current;s(c);window.setTimeout(function(){q.expire(c),f.current=void 0},2750)}},[e,a,b]);k(function(){return function(){f.current!=null&&q.expire(f.current)}},[]);return null}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e;return c.seq([function(d){return c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:[0,20]})},function(d){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],e,!1,c.i64.eq(a[5],[0,1]))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],[0,0])?c.loopAsync(d[0],function(e){return d[3]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[5],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[3])&&c.i64.eq(b.authorityLevel,[0,20])}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[4])})})}])}):c.resolve()},function(e){return c.i64.eq(f,[0,12])?d[1]=[0,10]:(a[9]?d[3]=[0,9]:d[3]=[0,3],d[1]=d[3]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return a[12]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[12],d[2],c.i64.to_string([0,46]),a[3])},function(d){return c.sp(b("LSAppendDataTraceAddon"),a[12],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.seq([function(d){return b.ftr(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,b.primarySortKey,b.secondarySortKey==null?[-1,4294967295]:b.secondarySortKey],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[10]=d[0],c[11]=d[1],c[12]=d[2],c[13]=d[3],c[14]=d[4],c[15]=d[5],c[16]=d[6],c[17]=d[7],c[18]=d[8],d)})},function(d){return b.sb(b.ftr(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?[-1,4294967295]:d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[[0,0],[0,0],[0,0],!1,"nonexistent",[0,20],e,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d):(b=a.item,d=[b.timestampMs,b.senderId,b.viewFlags,b.isAdminMessage,b.messageId,b.authorityLevel,b.stickerId,[-1,4294967295],[-1,4294967295]],c[20]=d[0],c[21]=d[1],c[22]=d[2],c[23]=d[3],c[24]=d[4],c[25]=d[5],c[26]=d[6],c[27]=d[7],c[28]=d[8],d)})},function(d){return c[32]=b.i64.or_([0,2],b.i64.or_(!c[3]&&!a[3]?[0,4]:[0,0],b.i64.or_(c[3]?[0,0]:[0,1],b.i64.or_(b.i64.eq(c[5],[0,60])||b.i64.eq(c[5],[0,80])?[0,1048576]:[0,0],b.i64.neq(c[6],[85970,924785702])&&b.i64.neq(c[6],[85970,1004785694])&&b.i64.neq(c[6],[85970,1044785690])?[0,0]:[0,2097152])))),c[14]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[12],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[32],[0,16]):c[32],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],[-1,4294967280]),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,2]:[0,0],b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5])?[0,8]:[0,0],b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),[0,6e5]))?[0,4]:[0,0],b.i64.and_(c[30],[0,1]))))),c[33]=b.i64.eq(b.i64.and_(c[35],[0,8]),[0,8]),c[34]=c[33]?b.i64.or_(c[22],[0,16]):c[22],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],[-1,4294967294]):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[7]=c.i64.of_float(Date.now()),f!==f?c.resolve(d[0]=f):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[0]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.seq([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float([0,1])).next().then(function(a,b){var c=a.done;a=a.value;return c?d[9]=[-1,4294967295]:(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],[0,1]),d[13]=c.i64.gt(d[7],d[11])?d[7]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,[0,40])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:[0,0],threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:[0,0],lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:[0,0],authorityLevel:[0,40]})},function(b){return c.i64.eq(a[2],[0,13])||c.i64.eq(a[2],[0,7])||c.i64.eq(a[2],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:[0,20],isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async([0,2285622730],f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async([0,1919524925],f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,[0,1545093],d[16],d[17],f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,[0,80])||c.i64.eq(b.authorityLevel,[0,60])||c.i64.eq(b.authorityLevel,[0,40]))}),0,c.i64.to_float([0,1])).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.of_float(Date.now()):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==f&&(c.i64.eq(a[9],[0,1])||c.i64.eq(a[10],[0,1]))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[a[8],f,f,[0,0],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=i[0],d[34]=i[1],d[35]=i[2],d[36]=i[3],d[37]=i[4],d[38]=i[5],d[39]=i[6],d[40]=i[7],d[41]=i[8],d[42]=i[9],d[43]=i[10],d[44]=i[11],d[45]=i[12],d[46]=i[13],d[47]=i[14],d[48]=i[15],i):(h=e.item,c.seq([function(e){return d[54]=h.senderId,d[53]=h.stickerId,c.i64.neq(d[53],f)?(e=[d[53],[0,4]],d[56]=e[0],d[57]=e[1],e):(e=[f,f],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[55]=h.replyType==null?[0,0]:h.replyType,c.seq([function(e){return c.sp(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[54],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(b){return d[52]=c.i64.eq(a[10],[0,1])?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],[0,1],d[52],d[54],h.text,d[50],d[51],f,f,f,f,f,f,d[55]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===f||c.i64.eq(a[9],[0,0])||c.i64.eq(a[10],[0,0])?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],[0,1],f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[f,f,f,f],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=[0,3]:d[32]=d[13],c.i64.eq([0,20],[0,20])?c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[9],secondarySortKey:d[7],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.seq([function(a){return c.db.table(12).fetch([[[d[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[7],f],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[0]]],"optimistic"]),function(a){return a.offlineThreadingId===d[0]&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[0],timestampMs:d[7],offlineThreadingId:d[0],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:[0,1],sendStatusV2:[0,1],authorityLevel:[0,20],localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[1]=c.createArray(),d[2]=(d[1].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[1]),d[3]=(d[1].push("localApplyOptimisticMessage"),d[1]),d[4]=(d[1].push(a[1]),d[1]),d[5]=(d[1].push(d[0]),d[1]),d[6]=c.toJSON(d[1]),function(a){c.logger(a).info(a)}(d[6]),a[14]?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[0],d[7],c.i64.eq(a[2],[0,1]))},function(e){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[7],a[3],!1,c.i64.neq(a[6],f))}]):c.resolve()},function(a){return a=[d[0],d[7]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,[0,20])}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:d,imageUrlFallback:d,imageUrlExpirationTimestampMs:d,imageUrlMimeType:d})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[1]=a[3]===""?f:a[3],d[1]!==f?c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],d[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===d[1]&&c.i64.eq(b.authorityLevel,[0,20])}),function(b){var d=b.update;b.item;return d({attachmentFbid:c.i64.to_string(a[7])})})},function(a){return d[0]=d[1]}]):c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],f,f,f,f,[0,3],f,f,f,!0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return c.ftr(c.db.table(16).fetch(),function(b){return b.attachmentFbid===c.i64.to_string(a[7])}).next().then(function(e,h){var i=e.done;e=e.value;return i?c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),[0,2],f,f,!0,!1):(h=e.item,c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[3],d[2],d[2],c.i64.to_string(a[7]),h.attachmentType,h.filename,h.attributionAppId,!0,!1)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[2],c.i64.to_string(a[7]),h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}]))})},function(a){return d[0]=d[2]}])},function(e){return c.seq([function(e){return d[2]=c.createArray(),d[4]=(d[2].push(a[7]),d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[8],sendType:[0,4],markThreadRead:!1,initiatingSource:a[9]})}])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[3],a[4],a[5]]]]),function(b){return c.i64.eq(b.threadKey,a[3])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.timestampMs,a[4])&&b.messageId===a[5]&&c.i64.eq(b.authorityLevel,[0,80])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[2]=c.createArray(),d[3]=(d[2].push("optimisticSendMessageForward msg not found"),d[2]),d[4]=(d[2].push(a[5]),d[2]),d[5]=c.toJSON(d[2]),function(a){c.logger(a).mustfix(a)}(d[5]),d[0]=""):(h=e.item,c.seq([function(e){return d[8]=h.forwardScore,d[2]=h.text,d[3]=d[8],c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],d[2],f,f,h.stickerId,h.hotEmojiSize,f,f,[0,3],f,d[3],f,!0).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(e){return c.fe(c.db.table(16).fetch([[[h.threadKey,h.messageId]]]),function(e){var h=e.item;return c.seq([function(e){return d[13]=h.attachmentFbid,d[9]=c.createArray(),d[10]=(d[9].push(d[13]),d[9]),d[11]=(d[9].push(d[4]),d[9]),d[12]=c.toJSON(d[9]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[5],d[4],d[13],d[12],h.attachmentType,h.filename,f,h.hasMedia,h.hasXma)},function(e){return c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[4],d[12],h.playableUrl,h.playableUrlFallback,h.playableUrlExpirationTimestampMs,h.playableUrlMimeType,h.previewUrl,h.previewUrlFallback,h.previewUrlExpirationTimestampMs,h.previewUrlMimeType,h.previewWidth,h.previewHeight)}])})},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return f!==f?c.sp(b("LSPredefineTraceForTask"),f,d[6],c.i64.to_string([0,46]),d[4]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[6],threadKey:a[1],offlineThreadingId:d[4],messageId:a[5],threadAttributionSource:a[6],sendType:[0,5],markThreadRead:!1,initiatingSource:a[7]})},function(b){return d[9]=new c.Map(),d[10]=d[9].set("optimisticSendMessageForward",a[1]),d[11]=d[9].set("fwdMsgID",a[5]),d[12]=c.toJSON(d[9]),d[7]=d[12],function(a){c.logger(a).info(a)}(d[7]),d[0]=d[4]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAppendDataTraceAddon.bs",["LSAppendDataTraceAddon","LSFactory","bs_belt_Option","killswitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h){if(c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return window.Promise.resolve();else return c("LSAppendDataTraceAddon")(d,e,f,c("bs_belt_Option").getWithDefault(g,""),c("bs_belt_Option").getWithDefault(h,""),c("LSFactory")(a))}b=a;g.call=b}),98);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddon.bs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f,g,h){return d("LSAppendDataTraceAddon.bs").call(a,b,c,e,f,g,h)};g["default"]=a}),98);
__d("LSOptimisticSendMessage",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskAndGetTaskID","LSLocalApplyOptimisticMessage","LSLogEventAnnotate.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[4],a[5],a[6],a[7],a[8],a[14],a[15],a[16],a[17],a[18],a[19],a[21]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[10]=a[9]===""?f:a[9],d[10]!==f?c.seq([function(e){return c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],d[0],d[0],[0,3],d[10],a[10],!0,!1)},function(e){return a[22]?d[11]=!1:d[11]=!0,d[11]?c.resolve():(d[12]=a[22].get("playable_url"),a[22],d[13]=a[22].get("playable_url_fallback"),a[22],d[14]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[15]=a[22].get("playable_url_mime_type"),a[22],d[16]=a[22].get("preview_url"),a[22],d[17]=a[22].get("preview_url_fallback"),a[22],d[18]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[19]=a[22].get("preview_url_mime_type"),a[22],d[20]=a[22].get("preview_width"),a[22],d[21]=a[22].get("preview_height"),a[22],d[22]=a[22].get("image_url"),a[22],d[23]=a[22].get("image_url_fallback"),a[22],d[24]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[25]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[0],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21]))},function(a){return d[2]=[0,7]}]):c.seq([function(e){return c.i64.neq(a[7],f)?c.seq([function(e){return c.i64.neq(a[7],[53057,267535043])&&c.i64.neq(a[7],[85970,924785702])&&c.i64.neq(a[7],[85970,1004785694])&&c.i64.neq(a[7],[85970,1044785690])?c.seq([function(e){return d[13]=c.i64.to_string(a[7]),c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],c.i64.to_string(a[7]),d[13],[0,1],f,f,!0,!1)},function(e){return a[22]?d[12]=!1:d[12]=!0,d[12]?c.resolve():(d[14]=a[22].get("playable_url"),a[22],d[15]=a[22].get("playable_url_fallback"),a[22],d[16]=a[22].get("playable_url_expiration_timestamp_ms"),a[22],d[17]=a[22].get("playable_url_mime_type"),a[22],d[18]=a[22].get("preview_url"),a[22],d[19]=a[22].get("preview_url_fallback"),a[22],d[20]=a[22].get("preview_url_expiration_timestamp_ms"),a[22],d[21]=a[22].get("preview_url_mime_type"),a[22],d[22]=a[22].get("preview_width"),a[22],d[23]=a[22].get("preview_height"),a[22],d[24]=a[22].get("image_url"),a[22],d[25]=a[22].get("image_url_fallback"),a[22],d[26]=a[22].get("image_url_expiration_timestamp_ms"),a[22],d[27]=a[22].get("image_url_mime_type"),a[22],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21],d[22],d[23]))}]):c.resolve()},function(a){return d[11]=[0,2]}]):c.resolve(d[11]=[0,1])},function(a){return d[2]=d[11]}])},function(e){return c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],[0,0],[0,1],f,[0,0]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return a[24]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[24],d[3],c.i64.to_string([0,46]),d[0])},function(d){return c.nop(b("LSAppendDataTraceAddon.nop"),a[24],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:a[11],externalAttachmentUrl:a[9],platformRef:a[12],platformToken:a[13],replySourceId:a[14],replySourceType:a[15],sendType:d[2],markThreadRead:a[20]==null?!1:a[20],initiatingSource:a[23],skipUrlPreviewGen:a[25],textHasLinks:a[26]})},function(e){return(a[20]==null?!1:a[20])?c.sp(b("LSOptimisticMarkThreadReadV2"),a[1],d[1]):c.resolve()},function(e){return d[4]=c.createArray(),d[5]=(d[4].push("optimisticSendMessage"),d[4]),d[6]=(d[4].push(a[1]),d[4]),d[7]=(d[4].push(d[0]),d[4]),d[8]=c.toJSON(d[4]),function(a){c.logger(a).info(a)}(d[8]),d[9]=new c.Map(),d[9].set("offline_threading_id",d[0]),d[9].set("task_id",d[3]),d[9].set("task_queue_name",c.i64.to_string(a[1])),d[9].set("task_label",c.i64.to_string([0,1])),c.nop(b("LSLogEventAnnotate.nop"),[0,16],[0,23],[0,0],d[9])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.ftr(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[e,e,e],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],e)?b.seq([function(d){return b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:b.i64.of_float(Date.now()),pluginType:a[1]})},function(a){return c[2]=e}]):b.resolve(c[2]=[0,1002])},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],[0,0])?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],[0,0]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],f)?a[2]!==f?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],f)?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSInsertPhase2PendingTask","LSSendPhase1MultiPhotoMessageV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",f),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],[-1,4294967293])?d[10]=!0:(c.i64.eq(d[11],[0,1])?d[14]=!0:(c.i64.eq(d[11],[0,3])?d[15]=!0:(c.i64.eq(d[11],[0,5])?d[16]=!0:(c.i64.eq(d[11],[0,13])?d[17]=!0:(c.i64.eq(d[11],[0,7])?d[18]=!0:(c.i64.eq(d[11],[0,9])?d[19]=!0:(c.i64.eq(d[11],[0,11])?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],[0,5])||c.i64.eq(d[11],[0,11])?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],[-1,4294967295])?d[14]=[0,5]:(c.i64.eq(d[11],[-1,4294967294])?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?[0,1]:[0,3]):(c.i64.eq(d[11],[0,2])?d[16]=[0,3]:(c.i64.eq(d[11],[0,4])?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?[0,13]:f:[0,5]):(c.i64.eq(d[11],[0,6])?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?[0,13]:f):(c.i64.eq(d[11],[0,14])?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?[0,7]:[0,9]:f):(c.i64.eq(d[11],[0,8])?d[20]=[0,9]:(c.i64.eq(d[11],[0,10])?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?f:[0,11]):(c.i64.eq(d[11],[0,12])?d[22]=f:d[22]=f,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],f)?c.seq([function(a){return c.fe(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],[0,5])||c.i64.eq(d[14],[0,11])?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=f:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],f)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],[0,10]):c.i64.eq(d[5],[0,4]):d[12]?c.i64.eq(d[5],[0,12]):c.i64.eq(d[5],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],[0,5])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],f)?(c.i64.neq(a.fbid,f)?d[16]=f:d[16]=[0,9],d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.seq([function(b){return d[16]=c.createArray(),d[17]=new c.Map(),d[18]=new c.Map(),d[19]=!1,d[20]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.fbid,d[20]=c.i64.add(d[20],[0,1]),c.i64.neq(d[25],f)?d[26]=(d[16].push(d[25]),d[16]):0})},function(b){return d[21]=c.createArray(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.metadata,d[25]!==f?d[26]=(d[21].push(d[25]),d[21]):0})},function(a){return d[22]=c.i64.of_int32(d[16].length),d[23]=c.i64.of_int32(d[21].length),c.i64.neq(d[22],d[20])||c.i64.neq(d[23],d[20])?d[24]=[0,11]:(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[24]=f),d[15]=d[24]}]):c.seq([function(e){return c.sp(b("LSSendPhase1MultiPhotoMessageV2"),a[0],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return c.i64.eq(d[16],f)?c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,6]})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],f)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq([0,6],[0,10]):c.i64.eq([0,6],[0,4]):d[18]?c.i64.eq([0,6],[0,12]):c.i64.eq([0,6],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq([0,6],[-1,4294967295])?d[19]=[0,5]:(c.i64.eq([0,6],[-1,4294967294])?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?[0,1]:[0,3]):(c.i64.eq([0,6],[0,2])?d[21]=[0,3]:(c.i64.eq([0,6],[0,4])?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?[0,13]:f:[0,5]):(c.i64.eq([0,6],[0,6])?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?[0,13]:f):(c.i64.eq([0,6],[0,14])?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?[0,7]:[0,9]:f):(c.i64.eq([0,6],[0,8])?d[25]=[0,9]:(c.i64.eq([0,6],[0,10])?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?f:[0,11]):(c.i64.eq([0,6],[0,12])?d[27]=f:d[27]=f,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],f)?c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],[0,11])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],f)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],[0,13])?c.seq([function(e){return c.sp(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,14]})})},function(b){return d[1].set("main_job_succeeded",!0),c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",[0,11])))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWBaseTheme.bs",[],(function(a,b,c,d,e,f){"use strict";a={};b={};c={dark:b,light:a,type:"VARIABLES"};d={};f.empty=c;f.Provider=d}),66);
__d("MWCombineThemeConfigs.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{dark:Object.assign(a.dark,b.dark),light:Object.assign(a.light,b.light),type:b.type}}f.combine=a}),66);
__d("MWSeparatorContainer.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,d=h.Children.toArray(a.children).filter(Boolean);return d.length===0?null:h.jsxs(h.Fragment,{children:[(b=a.beforeContent)!=null?b:null,h.jsx("div",{className:c("stylex")(a.xstyle),children:d.map(function(b,c){return h.jsxs(h.Fragment,{children:[c!==0&&a.separator,b]},"item-"+c)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWTextWithEntities.bs",["CometLink.react","MAWArmadilloLink.react","MWMessageCellFocusTable.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b,e,f,g){f===void 0&&(f=!1);return function(e,g){return h.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:h.jsx("span",{role:"gridcell",children:f?h.jsx(c("MAWArmadilloLink.react"),{bypassMDS_DO_NOT_USE:!0,href:g.uri,target:b,testid:void 0,xstyle:a,children:e}):h.jsx(c("CometLink.react"),{href:g.uri,target:b,testid:void 0,xstyle:a,children:e})})})}}g.linkPlugin=a}),98);
__d("LSMessagingThreadAttributionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,65536];b=[0,65537];var g=[0,65538],h=[0,65539],i=[0,65540],j=[0,65541],k=[0,65542],l=[0,65543],m=[0,65544],n=[0,65545],o=[0,65546],p=[0,65547],q=[0,65548],r=[0,131072],s=[0,131073],t=[0,131074],u=[0,131075],v=[0,131076],w=[0,196608],x=[0,196609],y=[0,196610],z=[0,196611],A=[0,196612],B=[0,196613],C=[0,262144],D=[0,262145],E=[0,262146],F=[0,262147],G=[0,262148],H=[0,262149],I=[0,327680],J=[0,327681],K=[0,327682],L=[0,393216],M=[0,393217],N=[0,393218],O=[0,393219],P=[0,393220],Q=[0,393221],R=[0,393222],S=[0,393223],T=[0,393224],U=[0,393225],V=[0,458752],W=[0,458753],X=[0,458754],Y=[0,524288],Z=[0,524289],$=[0,524290],aa=[0,524291],ba=[0,589824],ca=[0,589825],da=[0,589826],ea=[0,589827],fa=[0,589828],ga=[0,655360],ha=[0,655361],ia=[0,720896],ja=[0,720897],ka=[0,720898],la=[0,786432],ma=[0,786433],na=[0,786434],oa=[0,786435],pa=[0,786436],qa=[0,786437],ra=[0,786439],sa=[0,851968],ta=[0,851969],ua=[0,851970],va=[0,851971],wa=[0,851972],xa=[0,917504],ya=[0,917505],za=[0,917506],Aa=[0,917507],Ba=[0,917508],Ca=[0,917509],Da=[0,917510],Ea=[0,983040],Fa=[0,1048576],Ga=[0,1048577],Ha=[0,1048578],Ia=[0,1114112],Ja=[0,1114113],Ka=[0,1114114],La=[0,1114115],Ma=[0,1114116],Na=[0,1114117],Oa=[0,1114118],Pa=[0,1114119],Qa=[0,1179648],Ra=[0,1245184],Sa=[0,1245185],Ta=[0,1245186],Ua=[0,1310720],Va=[0,1310721],Wa=[0,1310722],Xa=[0,1310723],Ya=[0,1310724],Za=[0,1310725],$a=[0,1310726],ab=[0,1310727],bb=[0,1310728],cb=[0,1376256],db=[0,1376257],eb=[0,1376258],fb=[0,1441792],gb=[0,1441793],hb=[0,1441794],ib=[0,1441795],jb=[0,1507328],kb=[0,1507329],lb=[0,1507330],mb=[0,1507331],nb=[0,1572864],ob=[0,1572865],pb=[0,1572866],qb=[0,1572867],rb=[0,1572868],sb=[0,1572869],tb=[0,1572870],ub=[0,1572871],vb=[0,1572872],wb=[0,1572873],xb=[0,1572874],yb=[0,1572875],zb=[0,1572876],Ab=[0,1638400],Bb=[0,1638401],Cb=[0,1638402],Db=[0,1703936],Eb=[0,1703937],Fb=[0,1703938],Gb=[0,1769472],Hb=[0,1769473],Ib=[0,1835008],Jb=[0,1835009],Kb=[0,1835010],Lb=[0,1835011],Mb=[0,1835012],Nb=[0,1900544],Ob=[0,1900545],Pb=[0,1966080],Qb=[0,1966081],Rb=[0,1966082],Sb=[0,1966083],Tb=[0,2031616],Ub=[0,2031617],Vb=[0,2097152],Wb=[0,2097153],Xb=[0,2097154],Yb=[0,2097155],Zb=[0,2097156],$b=[0,2162688],ac=[0,2162689],bc=[0,2162690],cc=[0,2162691],dc=[0,2228224],ec=[0,2228225],fc=[0,2228226],gc=[0,2228227],hc=[0,2293760],ic=[0,2293761],jc=[0,2293762],kc=[0,2359296],lc=[0,2359297],mc=[0,2424832],nc=[0,2424833],oc=[0,2424834],pc=[0,2424835],qc=[0,2424836],rc=[0,2424837],sc=[0,2490368],tc=[0,2490369],uc=[0,2490370],vc=[0,2490371],wc=[0,2490372],xc=[0,2490373],yc=[0,2490374],zc=[0,2490375],Ac=[0,2490376],Bc=[0,2490377],Cc=[0,2490378],Dc=[0,2490379],Ec=[0,2490380],Fc=[0,2490381],Gc=[0,2490382],Hc=[0,2490383],Ic=[0,2490384],Jc=[0,2490385],Kc=[0,2490386],Lc=[0,2555904],Mc=[0,2555905],Nc=[0,2555906],Oc=[0,2555907],Pc=[0,2555908],Qc=[0,2621440],Rc=[0,2686976],Sc=[0,2752512],Tc=[0,2818048],Uc=[0,2883584],Vc=[0,2883585],Wc=[0,2883586],Xc=[0,2949120],Yc=[0,2949121],Zc=[0,3014656],$c=[0,3080192],ad=[0,3145728],bd=[0,3211264],cd=[0,3211265],dd=[0,3211266],ed=[0,3211267],fd=[0,3211268],gd=[0,3276800],hd=[0,3276801],id=[0,3342336],jd=[0,3342337],kd=[0,3407872],ld=[0,3473408],md=[0,3473409],nd=[0,3538944],od=[0,3538945],pd=[0,3538946],qd=[0,3604480],rd=[0,3604481],sd=[0,3604482],td=[0,3670016],ud=[0,3735552],vd=[0,3801088],wd=[0,3866624],xd=[0,3866625],yd=[0,3932160],zd=[0,3932161],Ad=[0,3932162],Bd=[0,3932163],Cd=[0,3997696],Dd=[0,3997697],Ed=[0,3997698],Fd=[0,3997699],Gd=[0,4063232],Hd=[0,4128768],Id=[0,4128769],Jd=[0,4128770],Kd=[0,4128771],Ld=[0,4194304],Md=[0,4259840],Nd=[0,4259841],Od=[0,4325376],Pd=[0,4390912],Qd=[0,4390913],Rd=[0,4456448],Sd=[0,4521984];f.unknown=a;f.unknownTest=c;f.unknownFailureRetry=d;f.messengerInbox=e;f.messengerInboxInThread=b;f.messengerInboxThreadList=g;f.messengerInboxNestedFolder=h;f.messengerInboxRecentThreads=i;f.messengerInboxRemainingThreads=j;f.messengerInboxMessageSearch=k;f.messengerInboxImageSending=l;f.messengerInboxForward=m;f.messengerInboxArchivedThreads=n;f.messengerInboxPendingRequests=o;f.messengerInboxActiveContacts=p;f.messengerInboxThreadBannerBottomSheet=q;f.messengerUniversalSearch=r;f.messengerUniversalSearchNullState=s;f.messengerUniversalSearchKeyPressed=t;f.messengerUniversalSearchMessageSearch=u;f.messengerUniversalSearchAdvancedContentSearch=v;f.montageAndActiveNow=w;f.montageAndActiveNowMontageInboxUnit=x;f.montageAndActiveNowActiveNow=y;f.montageAndActiveNowInboxComposer=z;f.montageAndActiveNowActiveAndHasStory=A;f.montageAndActiveNowCustomStatus=B;f.messengerActiveNowFriendsTab=C;f.messengerActiveNowFriendsTabFriendsTab=D;f.messengerActiveNowFriendsTabPlaceHolder=E;f.messengerActiveNowFriendsTabRecentActive=F;f.messengerActiveNowFriendsTabRecentActiveAndStory=G;f.messengerActiveNowFriendsTabContentDiscovery=H;f.messengerPendingRequests=I;f.messengerPendingRequestsInboxThreadList=J;f.messengerPendingRequestsPendingRequestsPage=K;f.messengerBroadcastFlow=L;f.messengerBroadcastFlowFromMessenger=M;f.messengerBroadcastFlowFromFb=N;f.messengerBroadcastFlowFromExternal=O;f.messengerBroadcastFlowFromFbNewsfeedSharesheet=P;f.messengerBroadcastFlowFromFbNewsfeedGoodwillComposer=Q;f.messengerBroadcastFlowFromFbShortsViewer=R;f.messengerBroadcastFlowForwardGutter=S;f.messengerBroadcastFlowForwardLongclick=T;f.messengerBroadcastFlowMessengerPhotoView=U;f.messengerOmnipicker=V;f.messengerOmnipickerNullState=W;f.messengerOmnipickerKeyPressed=X;f.messengerNotification=Y;f.messengerNotificationInThreadReply=Z;f.messengerNotificationLongpressReply=$;f.messengerNotificationLongpressReaction=aa;f.clickToMessengerAd=ba;f.clickToMessengerAdFromNewsfeed=ca;f.clickToMessengerAdSendMessageCta=da;f.clickToMessengerAdViewAndMessage=ea;f.clickToMessengerAdSendMessageCtaNewsfeedCtmAdsCta=fa;f.payments=ga;f.paymentsBubbleClick=ha;f.rtc=ia;f.rtcVoipIncall=ja;f.rtcDrawerPromotion=ka;f.fbPage=la;f.fbPageAboutCard=ma;f.fbPageProfileHeaderMessageButton=na;f.fbPageProfileFooterMessageButton=oa;f.fbPageProfileMoreDrawer=pa;f.fbPageResponsivenessContextCard=qa;f.fbPagePymmRhc=ra;f.fbProfile=sa;f.fbProfileTimelineMessageButton=ta;f.fbProfileFacebookProfile=ua;f.fbProfileMessageButton=va;f.fbProfileMessageButtonBloksUrl=wa;f.fbSearch=xa;f.fbSearchContextualProfileActionBarFromSearch=ya;f.fbSearchSearchMessageButton=za;f.fbSearchFbMessageSearchResults=Aa;f.fbSearchHighConfidenceCard=Ba;f.fbSearchMentions=Ca;f.fbSearchNullstateCta=Da;f.crypto=Ea;f.messengerMontageComposer=Fa;f.messengerMontageComposerFriendsTab=Ga;f.messengerMontageComposerFriendsTabStoryAndActiveNow=Ha;f.messengerMontageReply=Ia;f.messengerMontageReplyInboxThreadListProfile=Ja;f.messengerMontageReplyReplyContext=Ka;f.messengerMontageReplyThreadNavBar=La;f.messengerMontageReplyInboxThreadListProfileAuthorProfile=Ma;f.messengerMontageReplyReplyContextAuthorProfile=Na;f.messengerMontageReplyThreadNavBarAuthorProfile=Oa;f.messengerMontageReplyOneToOneChatThreadStoryBubble=Pa;f.messengerThreadMembersList=Qa;f.marketplace=Ra;f.marketplaceActivityBanner=Sa;f.marketplaceSendMessage=Ta;f.fbStory=Ua;f.fbStoryViewerSheetMenu=Va;f.fbStoryViewerSheetRow=Wa;f.fbStoryStoriesJewelNotification=Xa;f.fbStoryStoriesPushNotification=Ya;f.fbStoryStoriesViewerConsumerReply=Za;f.fbStoryStoriesViewerConsumerArtifact=$a;f.fbStoryStoriesPageStoryConversations=ab;f.fbStorySocialContextConversations=bb;f.workspeed=cb;f.workspeedComposerLikeButton=db;f.workspeedComposerGifPicker=eb;f.mdotme=fb;f.mdotmeOrganicPost=gb;f.mdotmeMarketingEmail=hb;f.mdotmeMbsOffsiteEmail=ib;f.customerChatPlugin=jb;f.customerChatPluginMobileRedirect=kb;f.customerChatPluginUpgradeFlow=lb;f.customerChatPluginReEngagement=mb;f.fbFeed=nb;f.fbFeedOrganicPost=ob;f.fbFeedOrganicPostViewAndMessage=pb;f.fbFeedQuestionTriggeredConvo=qb;f.fbFeedDynamicHoverCard=rb;f.fbFeedOrganicPostNewsfeedPagePostCta=sb;f.fbFeedOrganicPostNewsfeedBumperSmcta=tb;f.fbFeedBcfOpenChatButton=ub;f.fbFeedReactorsListMessageButton=vb;f.fbFeedReplyToAuthor=wb;f.fbFeedUfiSendSuggestions=xb;f.fbFeedBcf=yb;f.fbFeedCommunityChatsFeedPost=zb;f.fbNotification=Ab;f.fbNotificationJewelNotif=Bb;f.fbNotificationPushNotif=Cb;f.fbEvent=Db;f.fbEventMessageHost=Eb;f.fbEventShareClassMaterials=Fb;f.supportResources=Gb;f.supportResourcesFrxAction=Hb;f.leadGenMessaging=Ib;f.leadGenMessagingPreSubmission=Jb;f.leadGenMessagingPostSubmission=Kb;f.leadGenMessagingCrossChannelVerticalPresentAndroid=Lb;f.leadGenMessagingCrossChannelHscrollAndroid=Mb;f.messengerGraph=Nb;f.messengerGraphSelectContact=Ob;f.messengerChat=Pb;f.messengerChatFromJewelThreadList=Qb;f.messengerChatInThread=Rb;f.messengerChatForward=Sb;f.messengerArchivedThreads=Tb;f.messengerArchivedThreadsArchivedThreadsFolder=Ub;f.jewel=Vb;f.jewelThreadList=Wb;f.jewelSearch=Xb;f.jewelNewMessage=Yb;f.jewelNestedFolder=Zb;f.chatheads=$b;f.chatheadsRecentThreads=ac;f.chatheadsOverflow=bc;f.chatheadsNewMessage=cc;f.sidebar=dc;f.sidebarContactsList=ec;f.sidebarContactsSearch=fc;f.sidebarContactsGroups=gc;f.messengerCommunityMessaging=hc;f.messengerCommunityMessagingCommunityChannel=ic;f.messengerCommunityMessagingFullscreenChat=jc;f.fbPlatformLogin=kc;f.fbPlatformLoginLoginConnectWithMessenger=lc;f.contactManager=mc;f.contactManagerContactShare=nc;f.contactManagerPeopleTabContactList=oc;f.contactManagerPeopleTabContactSearch=pc;f.contactManagerIconContactList=qc;f.contactManagerIconContactSearch=rc;f.messagingInboxInBlue=sc;f.messagingInboxInBlueThreadList=tc;f.messagingInboxInBluePeoplePicker=uc;f.messagingInboxInBlueInboxIcon=vc;f.messagingInboxInBlueSwipeFromRight=wc;f.messagingInboxInBlueMibNotification=xc;f.messagingInboxInBlueActiveNow=yc;f.messagingInboxInBlueSuggestedChats=zc;f.messagingInboxInBlueChatPreviewBanner=Ac;f.messagingInboxInBlueThreadViewCoreNullState=Bc;f.messagingInboxInBlueMessageRequests=Cc;f.messagingInboxInBlueSpam=Dc;f.messagingInboxInBlueFbGroups=Ec;f.messagingInboxInBlueMessengerPeekStateButton=Fc;f.messagingInboxInBlueMessengerPeekStateTooltip=Gc;f.messagingInboxInBlueBroadcastFlow=Hc;f.messagingInboxInBlueThreadViewHeader=Ic;f.messagingInboxInBluePrivacySettings=Jc;f.messagingInboxInBlueArchivedChats=Kc;f.mibNotification=Lc;f.mibNotificationPushNotification=Mc;f.mibNotificationJewelNotification=Nc;f.mibNotificationDirectPushNotif=Oc;f.mibNotificationDirectJewelNotif=Pc;f.messengerRestrictedAccounts=Qc;f.armadilloCutoverThreadLinkingMessage=Rc;f.callsTab=Sc;f.miniShopViewMenuButton=Tc;f.sharesheet=Uc;f.sharesheetGeneralizedBroadcastFlow=Vc;f.sharesheetOffPlatformSharingHScroll=Wc;f.ufi=Xc;f.ufiGeneralizedBroadcastFlow=Yc;f.chatheadClickCollapsed=Zc;f.timelineMessageButton=$c;f.directReplyIntent=ad;f.fbGroups=bd;f.fbGroupsInbox=cd;f.fbGroupsPickerExistingChat=dd;f.fbGroupsPickerJoinChat=ed;f.fbGroupsMemberList=fd;f.devices=gd;f.devicesStella=hd;f.fbWellbeing=id;f.fbWellbeingIncallUnblockingNotification=jd;f.messengerDeepLinking=kd;f.readOnlyCutoverThread=ld;f.readOnlyCutoverThreadArmadilloThread=md;f.armadilloThread=nd;f.armadilloThreadReadOnlyCutoverThread=od;f.armadilloThreadExternalLink=pd;f.fbShorts=qd;f.fbShortsProfile=rd;f.fbShortsReactorsListMessageButton=sd;f.sendPlugin=td;f.sendAsMessageFromNt=ud;f.messengerPublicChatsMessaging=vd;f.messengerGrowth=wd;f.messengerGrowthNotificationsEntrypoint=xd;f.friendsHome=yd;f.friendsHomeActiveNow=zd;f.friendsHomeMessageNewFriends=Ad;f.friendsHomePostAcceptMessaging=Bd;f.externalLinkXma=Cd;f.externalLinkXmaFromComposer=Dd;f.externalLinkXmaFromDeepLinking=Ed;f.externalLinkXmaFromShareExtension=Fd;f.fbNotifications=Gd;f.quickPromotion=Hd;f.quickPromotionCta=Id;f.quickPromotionInterstitial=Jd;f.quickPromotionTopBanner=Kd;f.fbmInAppNotifs=Ld;f.creatorSupport=Md;f.creatorSupportMessengerToast=Nd;f.fbInstantGame=Od;f.communityChatsInFeed=Pd;f.communityChatsInFeedPermalink=Qd;f.unifiedBusinessInbox=Rd;f.rollcall=Sd}),null);
__d("LSThreadAttributionTypeUtil.bs",["LSMessagingThreadAttributionType.bs","LSThreadAttributionStore.bs","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=d("LSThreadAttributionStore.bs").getSource({_0:b,TAG:1},c("bs_int64").to_string(a));if(b.TAG===0)return b._0;a=b._0;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return d("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="inboxPendingRequests")return d("LSMessagingThreadAttributionType.bs").messengerInboxPendingRequests;else if(a==="fullscreenChat")return d("LSMessagingThreadAttributionType.bs").messengerCommunityMessagingFullscreenChat;else if(a==="sidebarGroupsList")return d("LSMessagingThreadAttributionType.bs").sidebarContactsGroups;else if(a==="jewel")return d("LSMessagingThreadAttributionType.bs").jewelThreadList;else if(a==="shop")return d("LSMessagingThreadAttributionType.bs").miniShopViewMenuButton;else if(a==="chatheadsOverflow")return d("LSMessagingThreadAttributionType.bs").chatheads;else if(a==="hovercard"||a==="feedDynamicHoverCard")return d("LSMessagingThreadAttributionType.bs").fbFeedDynamicHoverCard;else if(a==="search"||a==="messengerUniversalSearch")return d("LSMessagingThreadAttributionType.bs").messengerUniversalSearch;else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return d("LSMessagingThreadAttributionType.bs").fbStory;else if(a==="timeline"||a==="feedOrganicPost")return d("LSMessagingThreadAttributionType.bs").fbFeedOrganicPost;else if(a==="pageAboutCard")return d("LSMessagingThreadAttributionType.bs").fbPageAboutCard;else if(a==="inboxInThread")return d("LSMessagingThreadAttributionType.bs").messengerInboxInThread;else if(a==="notificationInThreadReply")return d("LSMessagingThreadAttributionType.bs").messengerNotificationInThreadReply;else if(a==="archieve")return d("LSMessagingThreadAttributionType.bs").messengerArchivedThreads;else if(a==="storyViewerSheetRow")return d("LSMessagingThreadAttributionType.bs").fbStoryViewerSheetRow;else if(a==="chatheadsNewMessage")return d("LSMessagingThreadAttributionType.bs").chatheadsNewMessage;else if(a==="event")return d("LSMessagingThreadAttributionType.bs").fbEvent;else if(a==="jewelSearch")return d("LSMessagingThreadAttributionType.bs").jewelSearch;else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return d("LSMessagingThreadAttributionType.bs").messengerInbox;else if(a==="jewelNewMessage")return d("LSMessagingThreadAttributionType.bs").jewelNewMessage;else if(a==="pendingRequests")return d("LSMessagingThreadAttributionType.bs").messengerPendingRequestsInboxThreadList;else if(a==="sidebarSearch")return d("LSMessagingThreadAttributionType.bs").sidebarContactsSearch;else if(a==="inboxRemainingThreads")return d("LSMessagingThreadAttributionType.bs").messengerInboxRemainingThreads;else if(a==="pagesHeader")return d("LSMessagingThreadAttributionType.bs").fbPageProfileHeaderMessageButton;else if(a==="inboxRecentThreads")return d("LSMessagingThreadAttributionType.bs").messengerInboxRecentThreads;else if(a==="chatheads")return d("LSMessagingThreadAttributionType.bs").chatheadsRecentThreads;else if(a==="pageResponsivenessCard")return d("LSMessagingThreadAttributionType.bs").fbPageResponsivenessContextCard;else if(a==="inboxSearch")return d("LSMessagingThreadAttributionType.bs").messengerInboxMessageSearch;else if(a==="jewelNestedFolder")return d("LSMessagingThreadAttributionType.bs").jewelNestedFolder;else if(a==="marketplace")return d("LSMessagingThreadAttributionType.bs").marketplaceSendMessage;else if(a==="feedOrganicPostViewAndMessage")return d("LSMessagingThreadAttributionType.bs").fbFeedOrganicPostViewAndMessage;else if(a==="adsCta")return d("LSMessagingThreadAttributionType.bs").clickToMessengerAdSendMessageCta;else if(a==="chatInThread")return d("LSMessagingThreadAttributionType.bs").messengerChatInThread;else if(a==="payments")return d("LSMessagingThreadAttributionType.bs").payments;else if(a==="inboxFolder")return d("LSMessagingThreadAttributionType.bs").messengerInboxNestedFolder;else if(a==="inboxArchived")return d("LSMessagingThreadAttributionType.bs").messengerInboxArchivedThreads;else if(a==="inboxActiveContacts")return d("LSMessagingThreadAttributionType.bs").messengerInboxActiveContacts;else if(a==="sidebarContactsList")return d("LSMessagingThreadAttributionType.bs").sidebarContactsList;else return d("LSMessagingThreadAttributionType.bs").unknown}g.getSource=a}),98);
__d("LSMessagingInitiatingSource.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.facebookChat=a;f.facebookInbox=c;f.roomsSideChat=d;f.facebookFullscreen=e}),null);
__d("LSMessagingInitiatingSourceHook.bs",["LSMessagingInitiatingSource.bs","MWLSThreadDisplayContext","bs_belt_Option"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("bs_belt_Option").map(d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),function(a){if(a==="Inbox")return d("LSMessagingInitiatingSource.bs").facebookInbox;else if(a==="FullscreenChat")return d("LSMessagingInitiatingSource.bs").facebookFullscreen;else if(a==="ChatTab")return d("LSMessagingInitiatingSource.bs").facebookChat;else return d("LSMessagingInitiatingSource.bs").roomsSideChat})}g.useHook=a}),98);
__d("MWChatEmojiUtil.bs",["LSHotEmojiSize.bs","bs_caml"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a!==void 0&&!c("bs_caml").i64_eq(a,d("LSHotEmojiSize.bs").small))if(c("bs_caml").i64_eq(a,d("LSHotEmojiSize.bs").medium))return 56;else if(c("bs_caml").i64_eq(a,d("LSHotEmojiSize.bs").large))return 96;else return 32;else return 32}g.transformHotEmojiSizeForWeb=a}),98);
__d("OfflineThreadingId.bs",["Crypto.bs","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("bs_caml_int64").of_float(Date.now()),b=d("Crypto.bs").getRandomValues(new Uint8Array(8));b=new DataView(b.buffer);b=c("bs_caml_int64").add(c("bs_caml_int64").lsl_(c("bs_caml_int64").of_int32(b.getUint32(0)),32),c("bs_caml_int64").of_int32(b.getUint32(4)));return c("bs_int64").to_string(c("bs_caml_int64").and_(c("bs_caml_int64").or_(c("bs_caml_int64").lsl_(a,22),c("bs_caml_int64").and_(b,[0,4194303])),c("bs_caml_int64").max_int))}g.make=a}),98);
__d("LSMessageReplySourceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,13];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.lightweightStatus=h;f.lightweightStatusReaction=i;f.fbFeedPost=j}),null);
__d("LSMessageReplySourceTypeV2.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13];f.none=a;f.message=c;f.story=d;f.forward=e;f.fbStoryShare=b;f.igStoryShare=g;f.storyBase64Encoded=h;f.lightweightStatus=i;f.closeFriends=j;f.xma=k;f.igNote=l;f.closeFriendsNoteReply=m;f.lightweightStatusReaction=n;f.fbFeedPost=o}),null);
__d("MWV2ForwardMessage.bs",["LSInt64.bs","LSMessagingThreadTypeUtil.bs","MAWDbMsg","MAWThreadId.bs","MAWVerifyThreadCutover.bs","MWChatMessageId.bs","MWLSDefaultThreadSource","MWLSForwardMessage.bs","MWPActor.bs","MWThread_DEPRECATED.bs","Promise","ReQL.bs","ReQLSubscription.bs","asyncToGeneratorRuntime","bs_caml","bs_int64","cr:11272","cr:1564","cr:1746","cr:4175","react","unrecoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a,b){return d("ReQLSubscription.bs").useFirstExn(h.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:b.threadKey,tl:0})},[a,JSON.stringify(b.threadKey)]))}function j(a,b){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:b,tl:0}))}function k(a,b,e){return d("ReQL.bs").first(d("ReQL.bs").filter(d("ReQL.bs").mergeJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("participants")),{hd:b,tl:0}),d("ReQL.bs").fromTableAscending(a.table("contacts"))),function(a){return c("bs_caml").i64_neq(a[1].id,e)}))}function l(a,b){return d("ReQLSubscription.bs").useFirst(h.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("attachments")),{hd:b.threadKey,tl:{hd:b.messageId,tl:0}})},[a,JSON.stringify(b.threadKey),b.messageId]))}function a(a){var e=c("useReStore")(),f=i(e,a),g=l(e,a),m=d("LSMessagingThreadTypeUtil.bs").isSecure(f.threadType),n=d("MWPActor.bs").useActor(),o=c("bs_caml").i64_neq(n,a.senderId),p=d("MWLSForwardMessage.bs").useForwardMessage(),q=d("MWLSDefaultThreadSource").useHook()(f.threadKey),r=d("MWChatMessageId.bs").makeSent(c("bs_int64").to_string(a.threadKey),a.messageId,c("bs_int64").to_string(a.timestampMs)),s=function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h){var i=d("MWThread_DEPRECATED.bs").toThreadKey(h),l=(yield b("Promise").all([d("MAWThreadId.bs").isSecureThreadId(e,i),j(e,i),k(e,i,n)])),m=l[0],p=l[1];l=l[2];i=(yield d("MAWVerifyThreadCutover.bs").verifyThreadCutover(b("Promise").resolve(e),i));m=m||i;if(b("cr:1746")!=null&&!m)return b("cr:1746").forwardMessage(e,h,f,a,o,g,n);i=d("MAWDbMsg").toMsgId(a.messageId);if(i==null)throw c("unrecoverableViolation")("Message does not have an id","messenger_web_product");if(b("cr:11272")!=null)if(b("cr:4175")!=null&&p!==void 0){b("cr:11272").forwardMessage(e,h,i);return b("cr:4175").call(e,n,p,l,d("LSMessagingThreadTypeUtil.bs").isOneToOne(p.threadType))}else return b("cr:11272").forwardMessage(e,h,i);throw c("unrecoverableViolation")("We won't reach to this step, if you are in QE, you should use secure forward","messenger_web_product")});return function(a){return h.apply(this,arguments)}}(),t=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var h=d("MWThread_DEPRECATED.bs").toThreadKey(c),i=(yield b("Promise").all([d("MAWThreadId.bs").isSecureThreadId(e,h),j(e,h),k(e,h,n)])),l=i[0],m=i[1];i=i[2];h=(yield d("MAWVerifyThreadCutover.bs").verifyThreadCutover(b("Promise").resolve(e),h));l=l||h;if(b("cr:1564")!=null&&l)if(b("cr:4175")!=null&&m!==void 0){b("cr:1564").forwardMessage(e,c,f,a,o,g,q);return b("cr:4175").call(e,n,m,i,d("LSMessagingThreadTypeUtil.bs").isOneToOne(m.threadType))}else return b("cr:1564").forwardMessage(e,c,f,a,o,g,q);else return p(c,r)});return function(a){return c.apply(this,arguments)}}();return h.useMemo(function(){if(m)return s;else return t},[m,s,t,d("LSInt64.bs").string(f.threadKey),a.messageId])}e=a;f=l;g.useForwardMessage=e;g.useAttachment=f}),98);
__d("MWChatColors.bs",[],(function(a,b,c,d,e,f,g){"use strict";a={incoming:{color:"xzsf02u",$$css:!0},incomingForwarded:{color:"x12scifz",$$css:!0},outgoing:{color:"x14ctfv",$$css:!0},outgoingForwarded:{color:"xkxfvhb",$$css:!0},replyToOriginal:{backgroundColor:"xmd5bsh",color:"xi81zsa",$$css:!0}};b={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},svgFill:{fill:"x148u3ch",$$css:!0},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3",$$css:!0}};c={styles:b};g.styles=a;g.MessageActions=c}),98);
__d("LsActionCategory.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9];f.unknown=a;f.impression=c;f.click=d;f.longClick=e;f.swipe=b;f.scroll=g;f.reactionPlus=h;f.doubleClick=i;f.lock=j;f.raiseDevice=k}),null);
__d("UseMWChatForward.re",["useMWChatForward"],(function(a,b,c,d,e,f,g){g.useMWChatForwardTypeChecked=c("useMWChatForward"),g.useMWChatForward=c("useMWChatForward")}),98);
__d("MWChatForwardAction.bs",["CometPressable.react","LsTargetType.bs","MWChatColors.bs","MWLSLogMessageClick.bs","MWTooltip.react","ODS","UseMWChatForward.re","bs_caml_option","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={icon:{opacity:"x1hc1fzr",$$css:!0}};function j(){}var k=h.jsx("svg",{height:"22px",viewBox:"0 0 36 36",width:"22px",children:h.jsxs("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:[h.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),h.jsx("path",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.svgFill),d:"M22.001,11.0081937 L19,11.0081937 L19,23.007676 C19,23.5599911 18.5525,24.0073413 18,24.0073413 C17.448,24.0073413 17,23.5599911 17,23.007676 L17,11.0081937 L13.998,11.0081937 C13.199,11.0081937 12.7225,10.1169921 13.166,9.45171483 L17.1675,3.44572576 C17.5635,2.85142475 18.436,2.85142475 18.832,3.44572576 L22.8335,9.45171483 C23.2765,10.1169921 22.8,11.0081937 22.001,11.0081937 M24,31 L12,31 C9.791,31 8,29.2105991 8,27.0028383 L8,18.0103492 C8,15.8030883 9.791,14.0131875 12,14.0131875 L14,14.0131875 C14.5525,14.0131875 15,14.4610376 15,15.0128528 C15,15.5646681 14.5525,16.0120183 14,16.0120183 L12,16.0120183 C10.8955,16.0120183 10,16.9067187 10,18.0103492 L10,27.0028383 C10,28.1064688 10.8955,29.0011693 12,29.0011693 L24,29.0011693 C25.1045,29.0011693 26,28.1064688 26,27.0028383 L26,18.0103492 C26,16.9067187 25.1045,16.0120183 24,16.0120183 L22,16.0120183 C21.448,16.0120183 21,15.5646681 21,15.0128528 C21,14.4610376 21.448,14.0131875 22,14.0131875 L24,14.0131875 C26.2095,14.0131875 28,15.8030883 28,18.0103492 L28,27.0028383 C28,29.2105991 26.2095,31 24,31"})]})});function l(a,b){d("ODS").bumpEntityKey(3185,"mwchat_actions","forward");d("MWLSLogMessageClick.bs").logMessageClicked(a,d("LsTargetType.bs").forwardIcon);if(b!==void 0)return c("bs_curry")._1(b.onClick)}function a(a){var b=a.label,e=a.messageID,f=a.onForward,g=a.forwardDialogType;a=a.dropToggle;g=g!==void 0?g:"open_";a=a!==void 0?a:!1;a=d("UseMWChatForward.re").useMWChatForward({dropToggle:a,forwardDialogType:g,messageID:e,onClose:j,onSend:c("bs_curry").__1(f)});var m=a==null?void 0:c("bs_caml_option").some(a);return h.jsx(c("MWTooltip.react"),{align:"middle",position:"above",tooltip:b,children:h.jsx("div",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.action),children:h.jsx(c("CometPressable.react"),{"aria-label":b,expanding:!0,onPress:function(){return l(e,m)},overlayDisabled:!0,role:c("gkx")("1224637")?"menuitem":"button",testid:void 0,children:h.jsx("div",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.icon,i.icon),children:k})})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.sharedStyles=d("MWChatColors.bs").MessageActions.styles;g.noop=j;g.icon=k;g.onOpenForwardDialog=l;g.make=b}),98);
__d("LsTargetType.re",["LsTargetType.bs"],(function(a,b,c,d,e,f){c=(a=b("LsTargetType.bs")).cymkAdd;f.cymkAdd=c;d=a.cymkViewProfile;f.cymkViewProfile=d;e=a.cymkWave;f.cymkWave=e;b=a.inboxleft;f.inboxleft=b;c=a.inboxleftCall;f.inboxleftCall=c;d=a.inboxleftCamera;f.inboxleftCamera=d;e=a.inboxleftRtc;f.inboxleftRtc=e;b=a.inboxright;f.inboxright=b;c=a.inboxrightDelete;f.inboxrightDelete=c;d=a.inboxrightMore;f.inboxrightMore=d;e=a.inboxrightMute;f.inboxrightMute=e;b=a.inboxrightUnmute;f.inboxrightUnmute=b;c=a.instantGamePlayGame;f.instantGamePlayGame=c;d=a.messageRequestAccept;f.messageRequestAccept=d;e=a.messageRequestDecline;f.messageRequestDecline=e;b=a.messengerAdsCta;f.messengerAdsCta=b;c=a.rtcCanonicalCallAgain;f.rtcCanonicalCallAgain=c;d=a.rtcCanonicalCallBack;f.rtcCanonicalCallBack=d;e=a.rtcGroupCallJoinCall;f.rtcGroupCallJoinCall=e;b=a.rtcGroupJoinVideoChat;f.rtcGroupJoinVideoChat=b;c=a.rtcScheduledCall;f.rtcScheduledCall=c;d=a.seeAll;f.seeAll=d;e=a.reaction;f.reaction=e;b=a.reactionPlus;f.reactionPlus=b;c=a.mention;f.mention=c;d=a.replyMessage;f.replyMessage=d;e=a.replyButton;f.replyButton=e;b=a.phoneNumber;f.phoneNumber=b;c=a.attachmentVideo;f.attachmentVideo=c;d=a.attachmentImage;f.attachmentImage=d;e=a.attachmentGif;f.attachmentGif=e;b=a.voiceClip;f.voiceClip=b;c=a.tombstoneView;f.tombstoneView=c;d=a.messageBubble;f.messageBubble=d;e=a.attachmentAudio;f.attachmentAudio=e;b=a.attachmentKeyframe;f.attachmentKeyframe=b;c=a.xmaWebUrl;f.xmaWebUrl=c;d=a.xmaRtcMissedVideo;f.xmaRtcMissedVideo=d;e=a.xmaRtcMissedAudio;f.xmaRtcMissedAudio=e;b=a.xmaLiveLocation;f.xmaLiveLocation=b;c=a.xmaLocationSharing;f.xmaLocationSharing=c;d=a.forwardIcon;f.forwardIcon=d;e=a.xmaOpenNative;f.xmaOpenNative=e;b=a.sticker;f.sticker=b;c=a.address;f.address=c;d=a.forwardButton;f.forwardButton=d;e=a.removeButton;f.removeButton=e;b=a.removeForYouself;f.removeForYouself=b;c=a.removeForEveryone;f.removeForEveryone=c;d=a.moreButton;f.moreButton=d;e=a.copyButton;f.copyButton=e;b=a.callPhoneNumber;f.callPhoneNumber=b;c=a.copyPhoneNumber;f.copyPhoneNumber=c;d=a.messageProfileIcon;f.messageProfileIcon=d;e=a.viewFacebookProfile;f.viewFacebookProfile=e;b=a.viewIgProfile;f.viewIgProfile=b;c=a.gotToChat;f.gotToChat=c;d=a.xmaRtcVideoEnded;f.xmaRtcVideoEnded=d;e=a.xmaRtxAudioEnded;f.xmaRtxAudioEnded=e;b=a.saveButton;f.saveButton=b;c=a.confirmRemove;f.confirmRemove=c;d=a.cancelRemove;f.cancelRemove=d;e=a.xmaShopsPdp;f.xmaShopsPdp=e;b=a.inboxrightArchive;f.inboxrightArchive=b;c=a.reactionIcon;f.reactionIcon=c;d=a.xmaContactShare;f.xmaContactShare=d;e=a.xmaCustomerInformationTemplate;f.xmaCustomerInformationTemplate=e;b=a.xmaRtcMissedGroupVideo;f.xmaRtcMissedGroupVideo=b;c=a.xmaRtcMissedGroupAudio;f.xmaRtcMissedGroupAudio=c;d=a.xmaRtcNewAudioDefault;f.xmaRtcNewAudioDefault=d;e=a.xmaAppointmentRequested;f.xmaAppointmentRequested=e;b=a.xmaAppointmentConfirmed;f.xmaAppointmentConfirmed=b;c=a.messengerThread;f.messengerThread=c;d=a.inboxrightFavorite;f.inboxrightFavorite=d;e=a.inboxrightUnfavorite;f.inboxrightUnfavorite=e;b=a.inboxrightUnbump;f.inboxrightUnbump=b;c=a.longpressinboxUnbump;f.longpressinboxUnbump=c;d=a.longpressinboxMute;f.longpressinboxMute=d;e=a.longpressinboxFavorite;f.longpressinboxFavorite=e;b=a.longpressinboxUnfavorite;f.longpressinboxUnfavorite=b;c=a.dismissMaxFavorite;f.dismissMaxFavorite=c;d=a.xmaPollPreview;f.xmaPollPreview=d;e=a.xmaFbVideoMediaViewer;f.xmaFbVideoMediaViewer=e;b=a.xmaMontageShare;f.xmaMontageShare=b;c=a.xmaYoutubePreview;f.xmaYoutubePreview=c;d=a.xmaAudioPlayer;f.xmaAudioPlayer=d}),null);
__d("MWV2MessageRowActionsContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b={current:function(){}};c={current:function(){}};e={current:function(){}};f={current:function(){}};d={forwardMessage:b,openReactionsMenu:c,removeMessage:e,replyToMessage:f};var i=h.createContext(d);function a(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{children:b,value:a})}b={make:a};g.emptyValue=d;g.context=i;g.Provider=b}),98);
__d("useCometRouterIsChatEntity",["getCometEntityKey","recoverableViolation","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterState")();if(a==null){c("recoverableViolation")("Router state is not defined in `useCometRouterIsChatEntity`","work_comet_core");return!1}var b=c("getCometEntityKey")(a.main.route);if(b==null){c("recoverableViolation")("Entity keys are not defined for "+a.main.route.url,"work_comet_core");return!1}a=b.entity_type==="chat";b=b.section==="WORK_CHAT";return a||b}g["default"]=a}),98);
__d("MWChatReactionsAction.react",["fbt","CometLazyPopoverTrigger.react","CometPopoverLoadingState.react","CometPressable.react","JSResourceForInteraction","LsTargetType.re","MWChatColors.bs","MWLSLogMessageClick.bs","MWTooltip.react","MWV2MessageRowActionsContext.bs","ODS","emptyFunction","gkx","react","stylex","useCometRouterIsChatEntity"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useState,n={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}},o=i.jsxs("svg",{height:"22px",viewBox:"0 0 22 22",width:"22px",children:[i.jsx("circle",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.svgStroke),cx:"11",cy:"11",r:"7",strokeWidth:"1.5px"}),i.jsx("path",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.svgStroke),d:"M8,13Q11,16,14,13",strokeWidth:"1.5px"}),i.jsx("circle",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.svgFill),cx:"9",cy:"10",r:"1.2"}),i.jsx("circle",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.svgFill),cx:"13",cy:"10",r:"1.2"})]});function a(a){var b=a.align;b=b===void 0?"middle":b;var e=a.closeActionsMenu,f=a.disableCustomReactions;f=f===void 0?!1:f;var g=a.hasReactionsV2,p=a.isBroadcastThread,q=a.isSecure;q=q===void 0?!1:q;var r=a.messageID,s=a.onVisibilityChange,t=a.selectedReaction,u=a.sendReaction,v=h._("__JHASH__czR8vxcW0mN__JHASH__");a=c("useCometRouterIsChatEntity")();a=c("gkx")("1224637")&&a;var w=m(function(){return!1}),x=w[0],y=w[1];w=k(d("MWV2MessageRowActionsContext.bs").context);var z=w.openReactionsMenu,A=j(function(a){if(c("gkx")("3417")){z.current=c("emptyFunction");return}},[z]);l(function(){return A},[A]);w=j(function(a){var b=t!==void 0&&g!==!0&&t===a;u(a,b);b||d("MWLSLogMessageClick.bs").logMessageClicked(r,d("LsTargetType.re").reaction);return e()},[t,g,u,e,r]);var B=j(function(a){return a?s(a):y(function(){return!1})},[y,s]);return i.jsx(c("CometLazyPopoverTrigger.react"),{align:b==="end_"?"end":b,fallback:i.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0,xstyle:n.popoverLoading}),onVisibilityChange:B,popoverProps:{closeActionsMenu:e,disableCustomReactions:f,isBroadcastThread:p,isSecure:q,messageID:r,onClose:c("emptyFunction"),onSelect:w,selectedReaction:t,setShowEmojiPicker:y,showEmojiPicker:x},popoverResource:a&&c("gkx")("4433")?c("JSResourceForInteraction")("ChatGeminiAnimatedReactionsMenu").__setRef("MWChatReactionsAction.react"):c("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsAction.react"),popoverType:x?"dialog":"menu",position:x?"below":"above",children:function(a,b,e,f,g,h){e=function(){b(),d("MWLSLogMessageClick.bs").logMessageClicked(r,d("LsTargetType.re").reactionIcon),d("ODS").bumpEntityKey(3185,"mwchat_actions","reaction")};z.current=e;return i.jsx(c("MWTooltip.react"),{align:"middle",position:"above",tooltip:v,children:i.jsx(c("CometPressable.react"),{"aria-label":v,expanding:!0,onHoverIn:f,onHoverOut:g,onPress:e,onPressIn:h,overlayDisabled:!0,ref:a,role:"button",testid:void 0,children:i.jsx("div",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.action),children:i.jsx("div",{className:c("stylex")(d("MWChatColors.bs").MessageActions.styles.icon),children:o})})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageCellKeyCommands.bs",["CometComponentWithKeyCommands.react","MWV2MessageRowActionsContext.bs","bs_curry","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;var b=h.useContext(d("MWV2MessageRowActionsContext.bs").context),e=b.openReactionsMenu,f=h.useCallback(function(){return c("bs_curry")._1(e.current)},[e]);b=h.useContext(d("MWV2MessageRowActionsContext.bs").context);var g=b.replyToMessage,i=h.useCallback(function(){return c("bs_curry")._1(g.current)},[g]);b=h.useContext(d("MWV2MessageRowActionsContext.bs").context);var j=b.forwardMessage,k=h.useCallback(function(){return c("bs_curry")._1(j.current)},[j]);b=h.useContext(d("MWV2MessageRowActionsContext.bs").context);var l=b.removeMessage,m=h.useCallback(function(){return c("bs_curry")._1(l.current)},[l]);b=h.useMemo(function(){var a=[],b=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","likeMessage",f);a.push(b);b=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","replyToMessage",i);a.push(b);b=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","forwardMessage",k);a.push(b);b=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","removeMessage",m);a.push(b);return a},[f,i,k,m]);return h.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:b,xstyle:!1,children:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.keyCommands=e}),98);
__d("LSMessageContentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];d=[0,4];e=[0,8];b=[0,16];var g=[0,32],h=[0,64],i=[0,128],j=[0,256],k=[0,512],l=[0,1024],m=[0,2048],n=[0,4096],o=[0,8192],p=[0,16384],q=[0,32768],r=[0,65536],s=[0,131072],t=[0,262144];f.text=a;f.mediaPreview=c;f.audioClip=d;f.xmaFallback=e;f.lwaWave=b;f.admin=g;f.fileAttachment=h;f.glyph=i;f.tombstone=j;f.storyReply=k;f.singleXma=l;f.hscrollXma=m;f.sticker=n;f.forwardIndicator=o;f.animatedImage=p;f.nullState=q;f.encryptionPlaceholder=r;f.futureproofPlaceholder=s;f.unavailablePlaceholder=t}),null);
__d("MWPBaseMessageListRowActions.bs",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.children;a=a.outgoing;return h.jsx("div",{className:"x6s0dn4 x78zum5 x1ll7btr"+(a?" x15zctf7":" x1q0g3np"),role:"none",children:b})}i.displayName=i.name+" [from "+f.id+"]";e={make:i};function a(a){a=a.children;return h.jsx("div",{children:a})}a.displayName=a.name+" [from "+f.id+"]";d={make:a};var j={incoming:{paddingStart:"x1t2a60a",$$css:!0},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1ll7btr",zIndex:"x1n327nk",$$css:!0}};function b(a){var b=a.children,d=a.hasReactions,e=a.outgoing;a=a.ariaHidden;a=a!==void 0?a:!1;return h.jsx("div",{"aria-hidden":a,className:c("stylex")(j.root,d?j.moveUpToAccountForReactions:!1,e?j.outgoing:j.incoming),children:h.jsx(i,{outgoing:e,children:b})})}b.displayName=b.name+" [from "+f.id+"]";a={make:b,styles:j};g.ActionsList=e;g.ActionsListItem=d;g.Container=a}),98);
__d("MDSContextualMenuIcon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsxs("svg",{height:"22px",viewBox:"0 0 22 22",width:"22px",children:[h.jsx("circle",{cx:"11",cy:"6",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"}),h.jsx("circle",{cx:"11",cy:"11",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"}),h.jsx("circle",{cx:"11",cy:"16",fill:"var(--placeholder-icon)",r:"2",strokeWidth:"1px"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPCanRemoveMessageGlobally.bs",["LSMessageThreadUnsendabilityStatus.bs","bs_belt_Option","bs_caml"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=c("bs_belt_Option").mapWithDefault(a.cannotUnsendReason,!0,function(a){return c("bs_caml").i64_eq(a,d("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});b=c("bs_belt_Option").mapWithDefault(b.cannotUnsendReason,!0,function(a){return c("bs_caml").i64_eq(a,d("LSMessageThreadUnsendabilityStatus.bs").canUnsend)});if(a)return b;else return!1}b=a;g.make=b}),98);
__d("MWV2LogMessageClick.bs",["I64","LSMessagingThreadTypeUtil.bs","Promise","ReQL.bs","UserAgentData","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick.bs");function a(a,e,f,g,i){i=e.threadKey;c("promiseDone")(d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("threads")),{hd:i,tl:0})).then(function(a){a!==void 0&&!d("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType)&&h.onReady(function(a){a.log(function(){var a={};g!==void 0&&(a.action=g);a.browserName=c("UserAgentData").browserName;return{click:{category:2},click_target:{type:f},extra:JSON.stringify(a),message:{id:e.messageId,sender_id:void 0,sent_time:d("I64").to_float(e.timestampMs)},thread:{id:d("I64").to_string(e.threadKey),key:void 0,type:void 0},xma:void 0}})});return b("Promise").resolve()}))}g.log=a}),98);
__d("MWV2MessageRowIsRowFocusedContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){}function b(){}e={isDialogOpened:!1,setFocused:a,setIsDialogOpened:b};var i=h.createContext(e);function c(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{children:b,value:a})}f={make:c};g.emptyValue=e;g.context=i;g.Provider=f}),98);
__d("MWV2ContextualActionsButton.bs",["fbt","CometDeferredPopoverTrigger.react","CometPressable.react","I64","JSResourceForInteraction","LSCommunityBitOffset.bs","LSCommunityCapabilityBitOffset.re","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWGating","MDSContextualMenuIcon.react","MWCMThreadTypes.react","MWLSFeatureLimitedStatus.bs","MWPActor.bs","MWPCanRemoveMessageGlobally.bs","MWTooltip.react","MWV2LogMessageClick.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","emptyFunction","gkx","qex","react","requireDeferred","useCometLazyDialog","useCommunityFolder","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=c("react"),j=c("requireDeferred")("MWV2ContextualActionsMenuDeferred.react").__setRef("MWV2ContextualActionsButton.bs");function a(a){var b=a.canRemoveMessageGlobally,e=a.closeActionsMenu,f=a.extraActions,g=a.message,k=a.setMoreMenuOpen,l=a.showForwardActionInContextualMenu,m=a.showReplyActionInContextualMenu,n=a.thread,o=c("useReStore")(),p=h._("__JHASH__I1DdCdLzOkz__JHASH__");a=c("useCommunityFolder")(n);var q=d("MWPCanRemoveMessageGlobally.bs").make(n,g),r=d("MWCMThreadTypes.react").isJoinedCMThread(n.threadType),s=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){if(r)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(o.table("participants")),{hd:n.threadKey,tl:{hd:g.senderId,tl:0}});else return d("SortedAsyncIterable.bs").empty()},[o,JSON.stringify(n.threadKey)])),t=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){if(r)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(o.table("contacts")),{hd:g.senderId,tl:0});else return d("SortedAsyncIterable.bs").empty()},[JSON.stringify(g.senderId),o])),u=d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.bs").adminRecallMessage,n);a=a!=null?d("LSCommunityBitOffset.bs").has(d("LSCommunityCapabilityBitOffset.re").adminActions,a):!1;var v=d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.bs").reportMessageToAdmin,n),w=d("LSMessagingThreadTypeUtil.bs").isSecure(n.threadType),x=(!w||d("MAWGating").isFeatureLimitEnabled())&&d("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(),y=!x&&c("gkx")("1840885"),z=d("MWPActor.bs").useActor();t=t!==void 0&&((t=d("LSContactBitOffset.bs").has(d("LSContactCapabilityBitOffset.bs").isCommunityBotPage,t))!=null?t:!1);var A=c("qex")._("898")===!0&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.bs").pinnedMessagesV2,n)&&!g.isUnsent,B=g.isUnsent;B=r?B?!1:q?!a&&t?!1:!0:u:w?!x&&(d("MAWGating").isUnsendGlobalEnabled()&&d("I64").equal(g.senderId,z)&&!g.isUnsent||d("MAWGating").isUnsendLocallyEnabled()):y;q=c("useCometLazyDialog")(c("JSResourceForInteraction")("MWV2RemoveMessageDialog.bs").__setRef("MWV2ContextualActionsButton.bs"));var C=q[0];u=(a=s==null?void 0:s.isAdmin)!=null?a:!1;w=g.unsentTimestampMs;x=w!==void 0;y=d("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&v&&!u&&!d("I64").equal(z,g.senderId)&&!x&&!t;q=d("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&!d("I64").equal(z,g.senderId)&&!x;s=i.useCallback(function(){var a={message:g,onClose:c("emptyFunction"),thread:n};return C(a,c("emptyFunction"))},[g,C]);a=i.useContext(d("MWV2MessageRowActionsContext.bs").context);var D=a.removeMessage;B?D.current=s:D.current=c("emptyFunction");var E=i.useCallback(function(){if(c("gkx")("3417")){D.current=c("emptyFunction");return}},[D]);i.useEffect(function(){return E},[E]);w=i.useContext(d("MWV2MessageRowIsRowFocusedContext.bs").context);if(!(l||m||A||B||q||f!=null))return null;var F=w.setFocused;return i.jsx(c("CometDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:function(a){k(function(){return a});return F(function(){return a})},popoverProps:{canRemoveMessageGlobally:b,closeActionsMenu:e,extraActions:f,message:g,showForwardActionInContextualMenu:l,showPinMessageActionInContextualMenu:A,showReplyActionInContextualMenu:m,showReportCommunityMessageToAdmin:y,showReportCommunityMessageToFacebook:q,showUnsendInContextualMenu:B},popoverResource:j,popoverType:"menu",position:"above",children:function(a,b){var e=function(){b();return d("MWV2LogMessageClick.bs").log(o,g,48)};return i.jsx(c("MWTooltip.react"),{align:"middle",position:"above",tooltip:p,children:i.jsx(c("CometPressable.react"),{"aria-label":p,expanding:!0,onPress:e,overlayDisabled:!0,ref:a,testid:void 0,children:i.jsx("div",{className:"xc26acl x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x78zum5 x2lah0s xxk0z11 xl56j7k x11i5rnm x1mh8g0r x1n2onr6 x2b8uid xvy4d1p x15vn3sj",children:i.jsx("div",{className:"x17rw0jw x197sbye x17z2i9w x4gyw5p x1o7uuvo",children:i.jsx(c("MDSContextualMenuIcon.react"),{})})})})})}})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2ForwardMessageButton.bs",["fbt","LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","MAWGating","MWChatForwardAction.bs","MWChatMessageId.bs","MWV2ForwardMessage.bs","ReQL.bs","ReQLSubscription.bs","bs_caml_format","bs_caml_obj","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a,b){var e=c("useReStore")();return d("ReQLSubscription.bs").useFirstExn(i.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("threads")),{hd:b.threadKey,tl:0})},[e,JSON.stringify(b.threadKey)]))}function a(a){var b=a.message,e=c("useReStore")();e=j(e,b);var f=d("MAWGating").isForwardEnabled()&&d("LSMessagingThreadTypeUtil.bs").isSecure(e.threadType),g=d("MAWGating").isCrossForwardEnabled();f=f?g?"cross_transport":"secure":g?"cross_transport":"open_";g=d("MWChatMessageId.bs").makeSent(c("bs_int64").to_string(b.threadKey),b.messageId,c("bs_int64").to_string(b.timestampMs));var k=d("MWV2ForwardMessage.bs").useForwardMessage(b);e=!d("LSMessagingThreadTypeUtil.bs").isSecure(e.threadType);b=d("LSBitFlag.bs").has(d("LSMessageContentType.bs").text,b.displayedContentTypes)&&!b.textHasLinks||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").animatedImage,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").mediaPreview,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").audioClip,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").storyReply,b.displayedContentTypes)||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239263222822"))||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239343222814"))||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239383222810"));e=e&&!b||a.dropForwardE2eeToggle===!0;return i.jsx(d("MWChatForwardAction.bs").make,{dropToggle:e,forwardDialogType:f,label:h._("__JHASH__GvPr2MwluxY__JHASH__"),messageID:g,onForward:k})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MWV2MessageReactionHooks",["I64","MWPActor.bs","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";a={useSelectedReaction:function(a){var b=c("useReStore")(),e=d("MWPActor.bs").useActor(),f=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions")).getKeyRange(a.threadKey,a.messageId,e)},[e,b,a.messageId,a.threadKey]);if(f!==void 0)return f.reaction},useSelectedReactionV2:function(a){var b=c("useReStore")(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor})},[b,a.messageId,a.threadKey]);return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("reaction_v2_types")).filter(function(a){return e?d("I64").equal(a.reactionFbid,e.reactionFbid):!1}).map(function(a){return a.reactionLiteral})},[b,e])}};g.MWV2MessageReactionHooks=a}),98);
__d("MWV2MessageReactionButton.react",["I64","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.re","MAWGating","MAWPSendOrRemoveReaction.bs","MWCMIsAnyCMThread","MWCMThreadTypes.react","MWChatMessageId.bs","MWChatReactionsAction.react","MWLSFeatureLimitedStatus.bs","MWV2MessageReactionHooks","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useMemo;function a(a){var b=a.closeActionsMenu,e=a.message,f=a.setReactionsMenuOpen;a=a.thread;var g=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(e),k=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionV2(e),l=d("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType),m=d("MAWPSendOrRemoveReaction.bs").useSendOrRemoveReaction(e,l,"reaction_tray"),n=d("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited();n=(!l||d("MAWGating").isFeatureLimitEnabled())&&n;var o=d("I64").to_string(a.threadKey),p=d("I64").to_string(e.timestampMs),q=j(function(){return d("MWChatMessageId.bs").makeSent(o,e.messageId,p)},[o,e.messageId,p]),r=i(function(a,b){return m(e.messageId,b?void 0:a,b?"remove_reaction":"reaction")},[m,e.messageId]),s=i(function(a){return f(function(){return a})},[f]),t=d("MWCMThreadTypes.react").isBroadcastThread(a.threadType),u=t&&c("gkx")("8026")&&d("LSThreadBitOffset.bs").has(c("LSThreadCapabilityBitOffset.re").reactionsV2,a),v=c("MWCMIsAnyCMThread")(a.threadType)&&!t&&c("gkx")("2640")&&d("LSThreadBitOffset.bs").has(c("LSThreadCapabilityBitOffset.re").reactionsV2,a);a=d("LSMessagingThreadTypeUtil.bs").isJoinedSocialChannelV2(a.threadType)&&c("gkx")("6661");v=u||v||a;if(n)return null;else return h.jsx(c("MWChatReactionsAction.react"),{closeActionsMenu:b,disableCustomReactions:u,hasReactionsV2:v,isBroadcastThread:t,isSecure:l,messageID:q,onVisibilityChange:s,selectedReaction:v?k:g,sendReaction:r})}g["default"]=a}),98);
__d("MWV2OneToOneThreadBlockedContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.createContext(!1);function a(){return h.useContext(i)}function b(a){var b=a.blocked;a=a.children;return h.createElement(i.Provider,{children:a,value:b})}c=b;g.context=i;g.useIsBlocked=a;g.make=c}),98);
__d("MDSReplyActionSvgIcon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx("svg",{height:"22px",viewBox:"1 1 21 21",width:"22px",children:h.jsx("g",{className:"x148u3ch",fillRule:"evenodd",strokeWidth:"1",children:h.jsx("path",{d:"M10.8932368,14.7625445 C10.8932368,15.535432 10.0849567,15.996442 9.48116675,15.5677995 L4.03193175,11.696707 C3.49257425,11.313742 3.49287675,10.4694645 4.03193175,10.0864995 L9.48116675,6.2157095 C10.0849567,5.7867645 10.8932368,6.248077 10.8932368,7.020662 L10.8938418,9.0755445 C15.2129368,9.0755445 18.1517243,11.027577 18.1523293,15.7226795 C18.1523293,16.0820495 17.9036743,16.3349395 17.5273643,16.3349395 C17.2487618,16.3349395 17.0164418,16.1746145 16.8527893,15.680027 C16.1588543,13.584307 14.1063918,12.7049395 10.8938418,12.7049395 L10.8932368,14.7625445 Z"})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageListIsRowModalContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){}var i=h.createContext(a);function b(a){var b=a.children;a=a.value;return h.createElement(i.Provider,{children:b,value:a})}c={make:b};e=a;g.context=i;g.Provider=c;g.emptyValue=e}),98);
__d("MWV2ReplyButton.bs",["fbt","CometPressable.react","MDSReplyActionSvgIcon.react","MWPReplyContext.bs","MWTooltip.react","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","bs_curry","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(){}function a(a){var b=a.message;a=h._("__JHASH__xFCj85w6vra__JHASH__");var e=i.useContext(d("MWPReplyContext.bs").context),f=e.setReply,g=i.useContext(d("MWV2MessageListIsRowModalContext.bs").context),k=function(){c("bs_curry")._2(f,{messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,timestampMs:b.timestampMs},b.threadKey);return c("bs_curry")._1(g,function(){return""})};e=i.useContext(d("MWV2MessageRowActionsContext.bs").context);var l=e.replyToMessage;l.current=k;var m=i.useCallback(function(){if(c("gkx")("3417")){l.current=j;return}},[l]);i.useEffect(function(){return m},[m]);return i.jsx(c("MWTooltip.react"),{align:"middle",position:"above",tooltip:a,children:i.jsx("div",{className:"xc26acl x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x78zum5 x2lah0s xxk0z11 xl56j7k x11i5rnm x1mh8g0r x1n2onr6 x2b8uid xvy4d1p x15vn3sj",children:i.jsx(c("CometPressable.react"),{"aria-label":a,expanding:!0,onPress:function(){return k()},overlayDisabled:!0,testid:void 0,children:i.jsx("div",{className:"x17rw0jw x197sbye x17z2i9w x4gyw5p x1o7uuvo",children:i.jsx(c("MDSReplyActionSvgIcon.react"),{})})})})})}a.displayName=a.name+" [from "+f.id+"]";b=24;e=a;f=b;a=j;b=e;g.minMessageHeight=f;g.noop=a;g.make=b}),98);
__d("MWV2UseMessageForwardAction.bs",["LSBitFlag.bs","LSMessageContentType.bs","LSMessagingThreadTypeUtil.bs","MAWGating","MWChatMessageId.bs","MWV2ForwardMessage.bs","MWV2LogMessageClick.bs","MWV2MessageRowIsRowFocusedContext.bs","UseMWChatForward.re","bs_caml_format","bs_caml_obj","bs_curry","bs_int64","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b){var e=c("useReStore")(),f=c("gkx")("1224637"),g=!f&&d("MAWGating").isForwardEnabled()&&d("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);f=!f&&d("MAWGating").isCrossForwardEnabled();g=g?f?"cross_transport":"secure":f?"cross_transport":"open_";f=d("MWChatMessageId.bs").makeSent(c("bs_int64").to_string(b.threadKey),b.messageId,c("bs_int64").to_string(b.timestampMs));var i=d("MWV2ForwardMessage.bs").useForwardMessage(b),j=h.useContext(d("MWV2MessageRowIsRowFocusedContext.bs").context),k=j.setIsDialogOpened,l=j.setFocused;j=!d("LSMessagingThreadTypeUtil.bs").isSecure(a.threadType);a=d("LSBitFlag.bs").has(d("LSMessageContentType.bs").text,b.displayedContentTypes)&&!b.textHasLinks||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").animatedImage,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").mediaPreview,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").audioClip,b.displayedContentTypes)||d("LSBitFlag.bs").has(d("LSMessageContentType.bs").storyReply,b.displayedContentTypes)||c("gkx")("2016")&&d("LSBitFlag.bs").has(d("LSMessageContentType.bs").singleXma,b.displayedContentTypes)||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239263222822"))||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239343222814"))||c("bs_caml_obj").caml_equal(b.stickerId,c("bs_caml_format").caml_int64_of_string("369239383222810"));var m=d("UseMWChatForward.re").useMWChatForward({dropToggle:j&&!a,forwardDialogType:g,messageID:f,onClose:function(){c("bs_curry")._1(k,function(){return!1});return c("bs_curry")._1(l,function(){return!0})},onSend:i});return function(){d("MWV2LogMessageClick.bs").log(e,b,44);if(!(m==null)){c("bs_curry")._1(k,function(){return!0});return c("bs_curry")._1(m.onClick)}}}b=a;g.useHook=b}),98);
__d("MessagingAttachmentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,12];f.none=a;f.sticker=c;f.image=d;f.animatedImage=e;f.video=b;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k;f.selfieSticker=l;f.soundBite=m}),null);
__d("MWMessageRowActions.bs",["I64","LSAuthorityLevel.re","LSBitFlag.bs","LSContactBitOffset.bs","LSContactCapabilityBitOffset.re","LSMessageContentType.re","LSMessageSendStatusV2.re","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.re","MAWGating","MAWMsg.bs","MWCMIsAnyCMThread","MWCMThreadTypes.react","MWLSFeatureLimitedStatus.bs","MWPBaseMessageListRowActions.bs","MWTooltipGroup.react","MWV2ContextualActionsButton.bs","MWV2ForwardMessageButton.bs","MWV2MessageReactionButton.react","MWV2MessageRowActionsContext.bs","MWV2OneToOneThreadBlockedContext.bs","MWV2ReplyButton.bs","MWV2UseMessageForwardAction.bs","MessagingAttachmentType.re","ReQL","ReQLSuspense","cr:10871","emptyFunction","gkx","qex","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useContext,k=e.useEffect,l=e.useState;function m(a){var b=c("useReStore")();return d("ReQLSuspense").useFirstExn(function(){return d("ReQL").fromTableAscending(b.table("threads")).getKeyRange(a.threadKey)},[b,a.threadKey])}function n(a){var e=a.alwaysShowForwardForMediaMessages,f=a.canRemoveMessageGlobally,g=a.closeActionsMenu,l=a.dropForwardE2eeToggle,n=a.extraActions,o=a.interactedWith,p=a.message,q=a.outgoing,r=a.setMoreMenuOpen;a=a.setReactionsMenuOpen;var s=m(p),t=d("MWV2OneToOneThreadBlockedContext.bs").useIsBlocked(),u=c("useReStore")(),v=s.threadKey,w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(u.table("contacts")).getKeyRange(v)},[v,u]);w=w!==void 0?(w=d("LSContactBitOffset.bs").has(d("LSContactCapabilityBitOffset.re").restrictPlaced,w))!=null?w:!1:!1;var x=p.ephemeralDurationInSec;x=x!==void 0?d("I64").gt(x,d("I64").zero):!1;var y=d("LSMessagingThreadTypeUtil.bs").isSecure(s.threadType),z=d("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited()&&(!y||d("MAWGating").isFeatureLimitEnabled()),A=d("I64").equal(p.displayedContentTypes,d("LSMessageContentType.re").sticker),B=d("I64").equal(p.displayedContentTypes,d("LSMessageContentType.re").singleXma),C=!d("I64").equal(p.displayedContentTypes,d("LSMessageContentType.re").text),D=c("MWCMIsAnyCMThread")(s.threadType)&&d("I64").equal(p.sendStatusV2,d("LSMessageSendStatusV2.re").nonRetriableError),E=d("ReQLSuspense").useFirst(function(){return C?d("ReQL").fromTableAscending(u.table("attachments")).getKeyRange(p.threadKey,p.messageId):d("ReQL").empty()},[u,p.messageId,p.threadKey,C]);x=(y?d("MAWGating").isForwardEnabled()&&!x&&!A&&!B:!0)&&c("gkx")("1844772")&&!t&&!w&&!z&&!p.isUnsent&&!D&&!d("MAWMsg.bs").isPlaceholder(p)&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").messageForward,s)&&d("I64").gt(p.authorityLevel,d("LSAuthorityLevel.re").optimistic)&&(E!==void 0&&d("I64").equal(E.attachmentType,d("MessagingAttachmentType.re").xma)&&(E.attachmentCta1Id!==void 0||E.attachmentCta2Id!==void 0||E.attachmentCta3Id!==void 0||E.defaultCtaId!==void 0)?E.isSharable:!0);A=!t&&!w&&!D&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").messageReply,s)&&!p.isUnsent;B=d("MWCMThreadTypes.react").isBroadcastThread(s.threadType)&&c("gkx")("8026")&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").reactionsV2,s);z=c("MWCMIsAnyCMThread")(s.threadType)&&!d("MWCMThreadTypes.react").isBroadcastThread(s.threadType)&&c("gkx")("2551")&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").reactionsV2,s);E=d("LSMessagingThreadTypeUtil.bs").isJoinedSocialChannelV2(s.threadType)&&c("gkx")("6661")&&d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").reactionsV2,s);B=B||z||E;z=!t&&!w&&!p.isUnsent&&!D&&(d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.re").reactions,s)||B)&&(y?c("qex")._("1525")===!0:!0);E=A&&!e&&o;t=e&&x;w=o&&z;D=y&&d("I64").equal(p.sendStatusV2,d("LSMessageSendStatusV2.re").retriableError);B=d("MWV2UseMessageForwardAction.bs").useHook(s,p);e=j(d("MWV2MessageRowActionsContext.bs").context);var F=e.forwardMessage;x&&(F.current=B);var G=i(function(){if(c("gkx")("3417")){F.current=c("emptyFunction");return}},[F]);k(function(){return G},[G]);return h.jsxs(d("MWPBaseMessageListRowActions.bs").ActionsList.make,{outgoing:q,children:[t?h.jsx(d("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(d("MWV2ForwardMessageButton.bs").make,{dropForwardE2eeToggle:l,message:p})}):null,w?h.jsx(d("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(c("MWV2MessageReactionButton.react"),{closeActionsMenu:g,message:p,setReactionsMenuOpen:a,thread:s})}):null,b("cr:10871")!=null&&D?h.jsx(d("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(b("cr:10871").make,{message:p})}):null,E?h.jsx(d("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(d("MWV2ReplyButton.bs").make,{message:p})}):null,o?h.jsx(d("MWPBaseMessageListRowActions.bs").ActionsListItem.make,{children:h.jsx(d("MWV2ContextualActionsButton.bs").make,{canRemoveMessageGlobally:f,closeActionsMenu:g,extraActions:n,message:p,setMoreMenuOpen:r,showForwardActionInContextualMenu:!t&&x,showReplyActionInContextualMenu:!E&&A,thread:s})}):null]})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.ariaHidden,e=a.canRemoveMessageGlobally,f=a.dropForwardE2eeToggle,g=a.extraActions,i=a.focused,j=a.hasReactions,k=a.hovered,m=a.message;a=a.outgoing;var o=l(function(){return!1}),p=o[0];o=o[1];var q=l(function(){return!1}),r=q[0];q=q[1];var s=d("LSBitFlag.bs").has(d("LSMessageContentType.re").mediaPreview,m.displayedContentTypes);k=k||i||r||p;return h.jsx(c("MWTooltipGroup.react"),{children:h.jsx(d("MWPBaseMessageListRowActions.bs").Container.make,{ariaHidden:(i=b)!=null?i:!1,hasReactions:j,outgoing:a,children:k||s?h.jsx(n,{alwaysShowForwardForMediaMessages:s,canRemoveMessageGlobally:(r=e)!=null?r:!0,closeActionsMenu:c("emptyFunction"),dropForwardE2eeToggle:f,extraActions:(p=g)!=null?p:null,interactedWith:k,message:m,outgoing:a,setMoreMenuOpen:q,setReactionsMenuOpen:o}):null})})}a.displayName=a.name+" [from "+f.id+"]";e=a;g.make=e}),98);
__d("MWPTransparentMessageBubble.bs",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=36;e=b+6|0;d=e+14|0;var i={bubble:{maxWidth:"x1okitfd",overflowX:"x6ikm8r",overflowY:"x10wlt62",overflowWrap:"x1mzt3pk",paddingTop:"xm7lytj",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",position:"x1n2onr6",wordBreak:"x13faqbe",":after_borderTopColor":"xzackxk",":after_borderEndColor":"x1vvs6jl",":after_borderBottomColor":"x1p8yz0e",":after_borderStartColor":"x1e72984",":after_borderTopStartRadius":"x1qxsuse",":after_borderTopEndRadius":"x1pwr4jm",":after_borderBottomEndRadius":"xgt0i0e",":after_borderBottomStartRadius":"xhiudvi",":after_borderTopStyle":"x1ikrcl6",":after_borderEndStyle":"xrlr1mf",":after_borderBottomStyle":"x13m8g0b",":after_borderStartStyle":"x1wea3ti",":after_borderTopWidth":"x1pdxsal",":after_borderEndWidth":"xgyc039",":after_borderBottomWidth":"xza5l1d",":after_borderStartWidth":"xcavrb8",":after_bottom":"x1p4c0ny",":after_content":"x5l10my",":after_display":"xieozyd",":after_end":"x14rr3af",":after_pointerEvents":"x1kx6eu5",":after_position":"x1x824oc",":after_start":"x1fefmpr",":after_top":"x1a3valx",$$css:!0},incoming_connect_bot:{":after_borderBottomStartRadius":"x1fyu3th",$$css:!0},incoming_connect_top:{":after_borderTopStartRadius":"xe80118",$$css:!0},outgoing_connect_bot:{":after_borderBottomEndRadius":"x7yvbyb",$$css:!0},outgoing_connect_top:{":after_borderTopEndRadius":"x1chp5k1",$$css:!0},precedes_xma:{boxSizing:"x9f619",maxWidth:"xw5ewwj",width:"xh8yej3",":after_borderBottomEndRadius":"x1bxxhgu",":after_borderBottomStartRadius":"x1yn7maq",$$css:!0}};function a(a){var b=a.children,d=a.connectBottom,e=a.connectTop,f=a.outgoing;a=a.precedesXMA;return h.jsx("div",{className:c("stylex")(i.bubble,e?f?i.outgoing_connect_top:i.incoming_connect_top:!1,!a&&d?f?i.outgoing_connect_bot:i.incoming_connect_bot:!1,a?i.precedes_xma:!1),role:"none",children:b})}a.displayName=a.name+" [from "+f.id+"]";f=18;a=a;g.borderWidth=b;g.smallRadius=e;g.largeRadius=d;g.baseSize=f;g.make=a}),98);
__d("MWV2ChatBubble.bs",["MWPColorUtils.bs","MWPMessageIsReply.bs","MWPSolidMessageBubble.bs","MWPThreadTheme.bs","MWPTransparentMessageBubble.bs","MWUseInlineStyleforReply","bs_caml_splice_call","react","stylex","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={emphasis_ring:{backgroundColor:"xjbqb8w",borderTop:"xkaxx8j",borderEnd:"xif9i9b",borderBottom:"x1ueo1nx",borderStart:"x1jawzb3",display:"x78zum5",maxWidth:"x1hvl878",position:"x1n2onr6",":after_borderTopColor":"x18gol9d",":after_borderEndColor":"x1fy2a9x",":after_borderBottomColor":"xx8rwve",":after_borderStartColor":"xcgf5qo",":after_borderTopStartRadius":"x1re2sdf",":after_borderTopEndRadius":"x153aelg",":after_borderBottomEndRadius":"xmcu26r",":after_borderBottomStartRadius":"x1egkzb1",":after_borderTopStyle":"x1ikrcl6",":after_borderEndStyle":"xrlr1mf",":after_borderBottomStyle":"x13m8g0b",":after_borderStartStyle":"x1wea3ti",":after_borderTopWidth":"xmm20zi",":after_borderEndWidth":"x1e2mm14",":after_borderBottomWidth":"xozjuat",":after_borderStartWidth":"x19hdz91",":after_bottom":"x1zht7t",":after_content":"x5l10my",":after_display":"xieozyd",":after_end":"x8tsall",":after_pointerEvents":"x1kx6eu5",":after_position":"x1x824oc",":after_start":"xdkcqcq",":after_top":"xaic3fe",":after_zIndex":"x1ai82m1",":before_borderTopColor":"x1qr7w4a",":before_borderEndColor":"x1ncy427",":before_borderBottomColor":"x1rhx1n7",":before_borderStartColor":"xmqa6l6",":before_borderTopStartRadius":"xn7tiao",":before_borderTopEndRadius":"x14kh6e",":before_borderBottomEndRadius":"xlhwqg6",":before_borderBottomStartRadius":"x1ue140e",":before_borderTopStyle":"x183k7y4",":before_borderEndStyle":"x1uj30e5",":before_borderBottomStyle":"x1ud4nwh",":before_borderStartStyle":"x1i2jaea",":before_borderTopWidth":"x1rcj5n0",":before_borderEndWidth":"x1repur9",":before_borderBottomWidth":"x16kf9eg",":before_borderStartWidth":"x13qqqgl",":before_bottom":"x1k7te01",":before_content":"x1gftdam",":before_display":"x1m8qh1o",":before_end":"x1tqfvzf",":before_opacity":"x2e9uc7",":before_pointerEvents":"xob360l",":before_position":"x1te0kx0",":before_start":"xx38qm5",":before_top":"x1nfgzt4",":before_zIndex":"x1wl4osp",$$css:!0},emphasis_ring_before_xma:{borderBottom:"x112ta8",":after_borderBottom":"xc1oo7v",":after_borderBottomEndRadius":"x1bxxhgu",":after_borderBottomStartRadius":"x1yn7maq",":before_borderBottom":"x31l8rw",":before_borderBottomEndRadius":"xe8dl21",":before_borderBottomStartRadius":"xv9yadz",$$css:!0},emphasis_ring_connect_bottom_incoming:{":after_borderBottomStartRadius":"xdjm15t",":before_borderBottomStartRadius":"xgdbwlz",$$css:!0},emphasis_ring_connect_bottom_outgoing:{":after_borderBottomEndRadius":"x1dmanbz",":before_borderBottomEndRadius":"ximmp30",$$css:!0},emphasis_ring_connect_top_incoming:{":after_borderTopStartRadius":"xh4u4d4",":before_borderTopStartRadius":"x66tqvc",$$css:!0},emphasis_ring_connect_top_outgoing:{":after_borderTopEndRadius":"xlhwsbn",":before_borderTopEndRadius":"xvpvy2v",$$css:!0},emphasis_ring_xma:{borderTop:"x76ihet",width:"x1o2z316",":after_borderTop":"xmeydad",":after_borderTopEndRadius":"x9k7ksk",":after_borderTopStartRadius":"x15jwe59",":before_borderTop":"xw0djt0",":before_borderTopEndRadius":"x1quqxg3",":before_borderTopStartRadius":"xgdrrmm",$$css:!0}};function j(a,b){if(b)return{backgroundColor:d("MWPColorUtils.bs").int64ToHex(a.fallbackColor)};else return{backgroundColor:"var(--wash)"}}function k(a){var b=a.children,c=a.connectBottom,e=a.connectTop,f=a.outgoing,g=a.precedesXMA,i=a.threadTheme;a=a.xmaLayout;i=j(i,f);return h.jsx(d("MWPSolidMessageBubble.bs").make,{connectBottom:c,connectTop:e,outgoing:f,precedesXMA:g,style:i,xmaLayout:a,children:b})}k.displayName=k.name+" [from "+f.id+"]";b={make:k,useInlineStyles:j};function l(a){var b=a.children,e=a.connectBottom,f=a.connectTop,g=a.gradientColors,i=a.outgoing,j=a.precedesXMA;a=a.threadTheme;a=c("MWUseInlineStyleforReply")(a,g,i);return h.jsx(d("MWPSolidMessageBubble.bs").make,{connectBottom:e,connectTop:f,outgoing:i,precedesXMA:j,style:a,children:b})}l.displayName=l.name+" [from "+f.id+"]";e={make:l,useInlineStyles:c("MWUseInlineStyleforReply")};function m(a){var b=a.children,c=a.connectBottom,e=a.connectTop,f=a.outgoing;a=a.precedesXMA;return h.jsx(d("MWPTransparentMessageBubble.bs").make,{connectBottom:c,connectTop:e,outgoing:f,precedesXMA:a,children:b})}m.displayName=m.name+" [from "+f.id+"]";var n={make:m};function o(a){var b=a.children,d=a.hasXMA,e=a.isBeforeXMA,f=a.isOutgoing,g=a.shouldConnectBottom;a=a.shouldConnectTop;e=[i.emphasis_ring,e?i.emphasis_ring_before_xma:g?f?i.emphasis_ring_connect_bottom_outgoing:i.emphasis_ring_connect_bottom_incoming:!1,d?a?i.emphasis_ring_xma:!1:a?f?i.emphasis_ring_connect_top_outgoing:i.emphasis_ring_connect_top_incoming:!1];return h.jsx("div",{className:c("bs_caml_splice_call").spliceApply(c("stylex"),[e]),"data-testid":void 0,children:b})}o.displayName=o.name+" [from "+f.id+"]";f={make:o};function a(a){var b=a.children,e=a.connectBottom,f=a.connectTop,g=a.message,i=a.outgoing,j=a.precedesXMA,n=a.xmaLayout;n=n===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:n;a=a.hasEmphasisRing;a=a!==void 0?a:!1;var p=d("MWPThreadTheme.bs").useHook(),q=p.gradientColors;p=p.threadTheme;g=c("MWPMessageIsReply.bs")(g);g=g?h.jsx(l,{connectBottom:e,connectTop:f,gradientColors:q,outgoing:i,precedesXMA:j,threadTheme:p,children:b}):i&&q.length>1?h.jsx(m,{connectBottom:e,connectTop:f,outgoing:i,precedesXMA:j,children:b}):h.jsx(k,{connectBottom:e,connectTop:f,outgoing:i,precedesXMA:j,threadTheme:p,xmaLayout:n,children:b});if(a)return h.jsx(o,{hasXMA:!1,isBeforeXMA:j,isOutgoing:i,shouldConnectBottom:e,shouldConnectTop:f,children:g});else return g}a=a;b=b;e=e;n=n;f=f;a=a;g.Solid=b;g.Reply=e;g.Transparent=n;g.EmphasisRing=f;g.make=a}),98);
__d("MWV2ChatErrorBubble.bs",["fbt","MWV2TombstonedMessage.bs","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={vr:{height:"x36qwtl",width:"xh8yej3",$$css:!0},withBackground:{backgroundColor:"xcrg951",$$css:!0},withRepliedMessage:{zIndex:"x1vjfegm",$$css:!0}};function a(a){a=a.isReply;return i.jsxs("div",{className:""+(a?" x1vjfegm":" xcrg951"),children:[a?null:i.jsx("div",{className:"x36qwtl xh8yej3 xcrg951"}),i.jsx(d("MWV2TombstonedMessage.bs").make,{xstyle:j.withBackground,children:h._("__JHASH__i7dsmazT6Cf__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2ChatSeenHeadsRow.bs",["fbt","CometGlimmer.react","CometLazyDialogTrigger.react","CometPressable.react","JSResourceForInteraction","MWLSThreadDisplayContext","MWPThreadTheme.bs","MWTooltip.react","MWTooltipGroup.react","MWV2MessageRowIsRowFocusedContext.bs","MercuryTimestamp","bs_array","bs_caml_obj","bs_curry","getFBTSafeGenderFromGenderConst","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={heads:{display:"x78zum5",flexShrink:"x2lah0s",marginTop:"x1gslohp",marginEnd:"xw3qccf",marginBottom:"xjpr12u",marginStart:"x1mh8g0r",$$css:!0},img:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x1v9usgg",paddingEnd:"x19um543",paddingStart:"x1m6msm",verticalAlign:"xxymvpz",width:"x6jxa94",$$css:!0},mask:{backgroundColor:"xcrg951",$$css:!0},overflow:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",color:"xi81zsa",fontSize:"x1ncwhqj",fontWeight:"x117nqv4",lineHeight:"x1hkbg2g",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x150jy0e",paddingBottom:"x18d9i69",paddingStart:"x1e558r4",textAlign:"x2b8uid",$$css:!0},root:{display:"x78zum5",paddingBottom:"x1120s5i",$$css:!0},spacer:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0}};function k(a,b){var e=a.length,f=e>5;e=Math.max(e-(f?4:5)|0,0);var g=a.slice(e);if(f){f=Math.max(e-9|0,0);a=a.slice(f,e);var k="\n"+h._("__JHASH__8_D_WS90lqj__JHASH__",[h._param("Number of additional views",f,[0])]);a=i.jsxs("ul",{children:[a.reverse().map(function(a,b){return i.jsx("li",{children:a.name},String(b))}),f>0?i.jsx("li",{children:k},"overflow"):null]});f=i.jsx(c("MWTooltip.react"),{align:function(){switch(c("bs_caml_obj").caml_equal(b,"Inbox")?"middle":"end_"){case"start":return"start";case"middle":return"middle";case"end_":return"end";case"stretch":return"stretch"}}(),forceInlineDisplay:!0,position:"above",tooltip:a,children:i.jsx("span",{className:"x1qhmfi1 x1lq5wgf xgqcy7u x30kzoy x9jhf4c xi81zsa x1ncwhqj x117nqv4 x1hkbg2g xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x150jy0e x18d9i69 x1e558r4 x2b8uid",children:h._("__JHASH__hpZlVXKj1CE__JHASH__",[h._param("the number of additional viewers",e,[0])])})},"overflow")}else f=null;return c("bs_array").append([f],g.map(function(a,e){var f=a.timestamp>0?h._("__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",d("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]):h._("__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))]);return i.jsx(c("MWTooltip.react"),{align:function(){switch(c("bs_caml_obj").caml_equal(b,"Inbox")?"middle":"end_"){case"start":return"start";case"middle":return"middle";case"end_":return"end";case"stretch":return"stretch"}}(),forceInlineDisplay:!0,position:"above",tooltip:f,children:a.imageSrc===""?i.jsx(c("CometGlimmer.react"),{index:e,xstyle:j.img}):i.jsx("img",{alt:f,className:"x14yjl9h xudhj91 x18nykt9 xww2gxu x1v9usgg x19um543 x1m6msm xxymvpz x6jxa94",src:a.imageSrc})},a.id)}))}function a(a){var b=a.messageSeenBy;a=d("MWPThreadTheme.bs").useHook();var e=i.useContext(d("MWV2MessageRowIsRowFocusedContext.bs").context),f=e.setIsDialogOpened,g=e.setFocused,l=b.length,m=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),n=i.useRef(null);return i.jsxs("div",{className:c("stylex")(j.root,d("MWPThreadTheme.bs").isGradient(a)?j.mask:!1),role:"none",children:[i.jsx("div",{className:"x1r8uery x1iyjqo2"}),i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{messageSeenBy:b,onClose:function(){}},dialogResource:c("JSResourceForInteraction")("MWV2ChatSeenHeadsDialog",{"class":"fluid",name:"MWV2ChatSeenHeadsDialog"}).__setRef("MWV2ChatSeenHeadsRow.bs"),onHide:function(){c("bs_curry")._1(f,function(){return!1});return c("bs_curry")._1(g,function(){return!0})},children:function(a){return i.jsx(c("CometPressable.react"),{"aria-label":h._("__JHASH__JhvMDLpCFuF__JHASH__",[h._param("number of participants who have seen this message",String(l))]).toString(),onPress:function(){c("bs_curry")._1(f,function(){return!0});return c("bs_curry")._1(a)},overlayDisabled:!0,ref:n,xstyle:function(){return[j.heads]},children:i.jsx(c("MWTooltipGroup.react"),{children:k(b,m)})})}})]})}a.displayName=a.name+" [from "+f.id+"]";b=5;e=a;g.getImageRow=k;g.maxNumberOfHeads=b;g.make=e}),98);
__d("MWV2MessageEndOfGroupContentTextOnly.react",["fbt","MWMessageDeliveryStatus","MWStatusText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={statusText:{paddingBottom:"xwib8y2",$$css:!0}};function k(a){var b=a.alignLeft;a=a.num;return i.jsx(c("MWStatusText.react"),{alignLeft:b,text:h._("__JHASH__SlWkB_YFGR6__JHASH__",[h._param("seenByNumber",String(a))]).toString(),xstyle:j.statusText})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=a.alignLeft;a=a.status;var e=d("MWMessageDeliveryStatus").getBroadcastStatusTitle(a);switch(a.type){case"NoneStatus":return null;case"Error":return i.jsx(c("MWStatusText.react"),{error:!0,text:e.toString(),xstyle:j.statusText});case"SingleSeenHead":return i.jsx(k,{num:1});case"MultipleSeenHeads":case"DeliveredAndRead":break;case"SeenCount":return i.jsx(k,{alignLeft:b,num:a.count});case"Loading":return i.jsx(c("MWStatusText.react"),{alignLeft:b,text:e.toString(),xstyle:j.statusText});case"RetriableError":return i.jsx(c("MWStatusText.react"),{alignLeft:b,error:!0,text:e.toString(),xstyle:j.statusText});default:return i.jsx(c("MWStatusText.react"),{text:e.toString(),xstyle:j.statusText})}return i.jsx(k,{num:a.heads.length})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageEndOfGroupContent.react",["MWMessageDeliveryStatus","MWPMessageListColumn.bs","MWV2ChatSeenHeadsRow.bs","MWV2MessageEndOfGroupContentTextOnly.react","cr:415","cr:976","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var e=a.alignLeft,f=a.isOutgoing,g=a.isTextOnly,i=a.message,j=a.status;a=a.useTextBasedMessageReceipts;if(g===!0)return h.jsx(c("MWV2MessageEndOfGroupContentTextOnly.react"),{alignLeft:e,status:j});if(j.type==="MultipleSeenHeads")return h.jsx(d("MWPMessageListColumn.bs").Shrinkwrap,{children:h.jsx(d("MWV2ChatSeenHeadsRow.bs").make,{messageSeenBy:j.heads})});if(a&&j.type==="SingleSeenHead"&&b("cr:415")!=null)return h.jsx(b("cr:415"),{head:j.head,isOutgoing:f,text:d("MWMessageDeliveryStatus").getSingleSeenHead(j.head)});return f&&a&&b("cr:976")!=null?h.jsx(b("cr:976"),{alignLeft:e,message:i,status:j}):null}a.displayName=a.name+" [from "+f.id+"]";g.MWV2MessageEndOfGroupContent=a}),98);
__d("MWV2MessageRowSimple.bs",["FocusWithinHandler.react","MWMessageTableFocusTable.bs","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={row:{position:"x1n2onr6",$$css:!0},rowFocusVisible:{zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=a.children;a=a.domElementRef;return h.jsx(d("MWMessageTableFocusTable.bs").FocusTable[1],{children:h.jsx("div",{ref:a,role:"row",children:h.jsx(d("MWMessageTableFocusTable.bs").FocusTable[2],{children:h.jsx(c("FocusWithinHandler.react"),{children:function(a,e){return h.jsx("div",{className:c("stylex")(i.row,e?i.rowFocusVisible:!1),"data-release-focus-from":"CLICK","data-scope":d("MWMessageTableFocusTable.bs").scopeID,role:"gridcell",tabIndex:0,children:b})}})})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWPDateBreak.react",["BaseHeading.react","CometTimestamp.react","MWText.react","MWTheme.bs","formatDate","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.timestamp;var b=d("MWTheme.bs").useTheme();return h.jsxs(c("BaseHeading.react"),{testid:void 0,children:[h.jsx("div",{className:"xzpqnlu x1hyvwdk xqtp20y x6ikm8r x10wlt62 xnalus7",children:h.jsx(c("CometTimestamp.react"),{date:new Date(a)})}),h.jsx("div",{"aria-hidden":!0,className:"xjpr12u xr9ek0c x2b8uid"+(d("MWTheme.bs").isGradient(b)?" xcrg951":""),"data-scope":"date_break",children:h.jsx(c("MWText.react"),{color:"tertiary",type:"meta4",children:h.jsx("span",{className:"xk50ysn",children:c("formatDate")(new Date(a),{future:"g:ia",older:"m/d/Y g:ia",thisYear:"M jS, g:ia",today:"g:ia",withinWeek:"D g:ia"})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWAdminTextLayout.bs",["CometTextWithEntities.react","MWChatTextTransform.bs","bs_caml_option","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.cta;a=a.message;a=a.text;if(a!==void 0)if(b!==void 0)return h.jsxs(h.Fragment,{children:[h.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform.bs").epdTextTransforms})," ",c("bs_caml_option").valFromOption(b)]});else return h.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform.bs").epdTextTransforms});else if(b!==void 0)return c("bs_caml_option").valFromOption(b);else return null}b=a;e=b;g.make=e}),98);
__d("MWAdminMsgCtaLink.react",["CometLink.react","MWPColorUtils.bs","MWPThreadTheme.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","xstyle"]);var f=d("MWPThreadTheme.bs").useHook();f=f.threadTheme.fallbackColor;return h.jsx(c("CometLink.react"),babelHelpers["extends"]({style:{color:d("MWPColorUtils.bs").int64ToHex(f)},weight:"bold",xstyle:e},a,{children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstantGameCustomUpdateMuteManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.mute=a;f.unmute=c}),null);
__d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs",["CometLink.react","InstantGameCustomUpdateMuteManagementUserActionType.bs","LSCustomUpdateMuteManagement","LSFactory","MWAdminTextLayout.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.message,e=a.shouldMute,f=c("useReStore")();a=h.useMemo(function(){return d("ReQL.bs").take(d("ReQL.bs").filter(d("ReQL.bs").fromTableAscending(f.table("admin_message_ctas")),function(a){return a.messageId===b.messageId}),1)},[f,b.messageId]);var g=d("ReQLSubscription.bs").useArray(a)[0].targetId;a=function(){var a=c("bs_int64").to_string(b.threadKey),i=c("bs_int64").to_string(c("bs_belt_Option").getExn(g)),j=e?d("InstantGameCustomUpdateMuteManagementUserActionType.bs").mute:d("InstantGameCustomUpdateMuteManagementUserActionType.bs").unmute;return h.useCallback(function(){f.runInTransaction(function(b){return c("LSCustomUpdateMuteManagement")(c("bs_caml_format").caml_int64_of_string(a),c("bs_caml_format").caml_int64_of_string(i),j,c("LSFactory")(b))},"readwrite")},[f,a,j])};var i=b.adminMsgCtaTitle,j={message:b};a=i!==void 0?c("bs_caml_option").some(h.jsx(c("CometLink.react"),{color:"blueLink",onClick:a(),target:"_blank",children:i})):void 0;a!==void 0&&(j.cta=c("bs_caml_option").valFromOption(a));return h.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},j))}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("InstantGameBotMessageSubscriptionManagementUserActionType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.subscribe=a;f.unsubscribe=c}),null);
__d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs",["CometLink.react","InstantGameBotMessageSubscriptionManagementUserActionType.bs","LSFactory","LSUpdateBotSubscription","MWAdminTextLayout.bs","bs_caml_format","bs_caml_option","bs_int64","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.message,e=a.shouldSubscribe,f=c("useReStore")();a=function(){var a=c("bs_int64").to_string(b.threadKey),g=e?d("InstantGameBotMessageSubscriptionManagementUserActionType.bs").subscribe:d("InstantGameBotMessageSubscriptionManagementUserActionType.bs").unsubscribe;return h.useCallback(function(){f.runInTransaction(function(b){return c("LSUpdateBotSubscription")(c("bs_caml_format").caml_int64_of_string(a),g,c("LSFactory")(b))},"readwrite")},[f,a,g])};var g=b.adminMsgCtaTitle,i={message:b};a=g!==void 0?c("bs_caml_option").some(h.jsx(c("CometLink.react"),{color:"blueLink",onClick:a(),target:"_blank",children:g})):void 0;a!==void 0&&(i.cta=c("bs_caml_option").valFromOption(a));return h.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},i))}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs",["CometLazyDialogTrigger.react","JSResourceForInteraction","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.isOptOut,d=a.renderer,e=a.targetId;a=a.threadKey;var f=h.useRef(null);return h.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{isOptOut:b,targetId:e,threadKey:a},dialogResource:c("JSResourceForInteraction")("MWNotificationMessagesManageNotificationsDialog.react",{"class":"fluid",name:"MWNotificationMessagesManageNotificationsDialog"}).__setRef("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs"),children:function(a){return c("bs_curry")._2(d,a,f)}})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWNotificationMessageManageNotificationsAdminMsgCta.bs",["CometPressable.react","CometTextWithEntities.react","MWNotificationMessageManageNotificationsLazyDialogTrigger.bs","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.isOptOut,e=a.targetId,f=a.threadKey,g=a.title;a=function(a,b){return h.jsx(c("CometPressable.react"),{onPress:function(){return c("bs_curry")._1(a)},children:h.jsx(c("CometTextWithEntities.react"),{text:g})})};return h.jsx(d("MWNotificationMessageManageNotificationsLazyDialogTrigger.bs").make,{isOptOut:b,renderer:a,targetId:e,threadKey:f})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3008");b=d("FalcoLoggerInternal").create("p2b_differentiation_privacy_disclosure_open_click_web",a);e=b;g["default"]=e}),98);
__d("XPolarisDirectInboxControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/direct/inbox/",Object.freeze({initial_e2ee_toggle_position:!1,recurring_notification:!1}),["/direct/t/{?thread_key}/","/direct/{?subpage}/{?folder}/"],void 0);b=a;g["default"]=b}),98);
__d("MWV2AdminMsgCta.bs",["CometLazyDialogTrigger.react","CometLink.react","CurrentEnvironment","JSResource","JSResourceForInteraction","MDSLockSvgIcon.bs","MWAdminMsgCtaLink.react","MWAdminTextLayout.bs","MWInboxRouteBuilder.bs","MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs","MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs","MWNotificationMessageManageNotificationsAdminMsgCta.bs","MWPBumpEntityKey","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","WALoggerDeferred","XPolarisDirectInboxControllerRouteBuilder","bs_caml_option","bs_int64","cr:4069","react","useCometLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate the url, thread is missing in mi_act_mapping table for threadKey ",""]);h=function(){return a};return a}var i=d("react"),j=c("JSResourceForInteraction")("MAWLearnMoreCutoverDialog.react").__setRef("MWV2AdminMsgCta.bs"),k=b("cr:4069")==null?void 0:c("bs_caml_option").some(b("cr:4069")),l={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xo1l8bm",$$css:!0}};function a(a){a=a.message;var e=a.adminMsgCtaTitle,f={message:a};a=e!==void 0&&!(b("cr:4069")==null)?c("bs_caml_option").some(i.jsx("div",{className:"xz94kzr x1rg5ohu xo1l8bm",children:i.jsx(k.make,{threadKey:a.threadKey,title:e})})):void 0;a!==void 0&&(f.cta=c("bs_caml_option").valFromOption(a));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}a.displayName=a.name+" [from "+f.id+"]";a={make:a,styles:l};l={adminTextCta:{display:"x1rg5ohu",fontWeight:"x1s688f",$$css:!0}};function e(a){var b=a.isOptOut,e=a.message,f=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=e.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(f.table("admin_message_ctas")),{hd:e.threadKey,tl:{hd:e.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[f,e]));var g=e.adminMsgCtaTitle,h={message:e};b=g!==void 0&&a!==void 0?c("bs_caml_option").some(i.jsx("div",{className:"x1rg5ohu x1s688f",children:i.jsx(d("MWNotificationMessageManageNotificationsAdminMsgCta.bs").make,{isOptOut:b,targetId:a.targetId,threadKey:e.threadKey,title:g})})):void 0;b!==void 0&&(h.cta=c("bs_caml_option").valFromOption(b));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},h))}e.displayName=e.name+" [from "+f.id+"]";e={make:e,styles:l};function m(a){var b=a.message,e=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));if(a!==void 0){var f=a.title;if(f!==void 0){a=a.actionUrl;a=a!==void 0?c("bs_caml_option").some(i.jsx(c("CometLink.react"),{color:"blueLink",href:a,target:"_blank",children:f})):void 0}else a=void 0}else a=void 0;f={message:b};a!==void 0&&(f.cta=c("bs_caml_option").valFromOption(a));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}m.displayName=m.name+" [from "+f.id+"]";l={make:m};function n(a){var b=a.message,e=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));var f=c("useCometLazyDialog")(c("JSResource")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgCta.bs")),g=f[0];if(a!==void 0){f=a.title;a=f!==void 0?c("bs_caml_option").some(i.jsx(c("CometLink.react"),{color:"blueLink",onClick:function(){g({entryPoint:"ADMIN_TEXT",onClose:function(){},threadKey:b.threadKey},function(){}),c("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(){return{consumer_id:"0",entry_point:"ADMIN_TEXT",page_id:c("bs_int64").to_string(b.threadKey)}})},children:f})):void 0}else a=void 0;f={message:b};a!==void 0&&(f.cta=c("bs_caml_option").valFromOption(a));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}n.displayName=n.name+" [from "+f.id+"]";m={make:n};function o(a){var b=a.message,e=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));var f=c("useCometLazyDialog")(c("JSResource")("MWServicesLegalLiabilityDisclaimer.react").__setRef("MWV2AdminMsgCta.bs")),g=f[0];if(a!==void 0){f=a.title;a=f!==void 0?c("bs_caml_option").some(i.jsx(c("CometLink.react"),{color:"blueLink",onClick:function(){return g({entryPoint:"ADMIN_TEXT",onClose:function(){},threadKey:b.threadKey},function(){})},children:f})):void 0}else a=void 0;f={message:b};a!==void 0&&(f.cta=c("bs_caml_option").valFromOption(a));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}o.displayName=o.name+" [from "+f.id+"]";n={make:o};o={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn",$$css:!0},lockIcon:{bottom:"x1o583il",display:"x1rg5ohu",position:"x1n2onr6",end:"x177n6bx",$$css:!0}};function p(a){var b=a.message,e=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));if(a!==void 0){var f=a.title;a=f!==void 0?c("bs_caml_option").some(i.jsx("div",{className:"xz94kzr x1rg5ohu xk50ysn",children:i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{},dialogResource:j,children:function(a,b){return i.jsx(c("CometLink.react"),{onClick:a,ref:b,target:"_blank",children:f})}})})):void 0}else a=void 0;var g={message:b};a!==void 0&&(g.cta=c("bs_caml_option").valFromOption(a));return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"x1o583il x1rg5ohu x1n2onr6 x177n6bx",children:i.jsx(c("MDSLockSvgIcon.bs"),{color:"tertiary",size:16})}),i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},g))]})}p={make:p,styles:o};o={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn",$$css:!0},lockIcon:{bottom:"x1o583il",display:"x1rg5ohu",position:"x1n2onr6",end:"x177n6bx",$$css:!0}};function q(a){var b=a.message,e=c("useReStore")();a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){return d("ReQL.bs").map(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("mi_act_mapping_table")),{hd:b.threadKey,tl:0}),function(a){return c("bs_int64").to_string(a.jid)})},[e,JSON.stringify(b.threadKey)]));a=a!==void 0?c("CurrentEnvironment").instagramdotcom?c("XPolarisDirectInboxControllerRouteBuilder").buildExtraURL("/direct/t/{?thread_key}/",{thread_key:a}):d("MWInboxRouteBuilder.bs").buildURL({thread_key:a}):(d("WALoggerDeferred").LOG(h(),c("bs_int64").to_string(b.threadKey)),d("MWInboxRouteBuilder.bs").buildHomeURL({}));var f=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));if(f!==void 0){f=f.title;a=f!==void 0?c("bs_caml_option").some(i.jsx("div",{className:"xz94kzr x1rg5ohu xk50ysn",children:i.jsx(c("CometLink.react"),{href:a,target:"_self",children:f})})):void 0}else a=void 0;f={message:b};a!==void 0&&(f.cta=c("bs_caml_option").valFromOption(a));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},f))}q.displayName=q.name+" [from "+f.id+"]";q={make:q,styles:o};function r(a){var b=a.message;a=a.shouldSubscribe;return i.jsx(d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.bs").make,{message:b,shouldSubscribe:a})}r.displayName=r.name+" [from "+f.id+"]";o={make:r};function s(a){var b=a.message;a=a.shouldMute;return i.jsx(d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.bs").make,{message:b,shouldMute:a})}s.displayName=s.name+" [from "+f.id+"]";r={make:s};function t(a){var b=a.message,e=c("useReStore")();a=c("useCometLazyDialog")(c("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWV2AdminMsgCta.bs"));var f=a[0];a=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=b.adminMsgCtaId;if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("admin_message_ctas")),{hd:b.threadKey,tl:{hd:b.messageId,tl:{hd:a,tl:0}}});else return d("SortedAsyncIterable.bs").empty()},[e,b]));var g=function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","see_all_admin_msg_cta");return f({onClose:function(){},threadKey:b.threadKey},function(){})};if(a!==void 0){a=a.title;g=a!==void 0?c("bs_caml_option").some(i.jsx(c("MWAdminMsgCtaLink.react"),{onClick:g,children:a})):void 0}else g=void 0;a={message:b};g!==void 0&&(a.cta=c("bs_caml_option").valFromOption(g));return i.jsx(d("MWAdminTextLayout.bs").make,babelHelpers["extends"]({},a))}t.displayName=t.name+" [from "+f.id+"]";s={make:t};f=a;t=e;a=l;e=m;l=n;m=p;n=q;p=o;q=r;o=s;g.AdminMsgArmadilloEphemeralChangeDuration=f;g.AdminMsgNotificationMessageManageNotifications=t;g.AdminMsgWebUrl=a;g.AdminMsgP2bPrivacyDisclosure=e;g.AdminMsgServiceBookingLegalDisclaimer=l;g.AdminMsgE2EEDescription=m;g.AdminMsgCutoverRollback=n;g.AdminMsgInstantGameBotMessageSubscriptionManagement=p;g.AdminMsgInstantGameCustomUpdateMuteManagement=q;g.AdminMsgShowPinnedMessages=o}),98);
__d("MWV2ChatAdminMessage.bs",["MWAdminTextLayout.bs","MWText.react","MWV2AdminMsgCta.bs","bs_curry","cr:4082","cr:4084","cr:4093","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){if(a!==void 0)return a.isAdminMessage;else return!1}var j={container:{paddingStart:"x5ib6vp",paddingEnd:"xc73u3c",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},containerThatPrecedesAdminMessage:{paddingBottom:"x1a8lsjc",$$css:!0},containerThatProceedsAdminMessage:{paddingTop:"x889kno",$$css:!0},content:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1ekjcvx",textAlign:"x2b8uid",wordBreak:"x13faqbe",$$css:!0}};function k(a){var b=a.children,d=a.nextMessage;a=a.prevMessage;return h.jsx("div",{className:c("stylex")(j.container,i(a)?j.containerThatProceedsAdminMessage:!1,i(d)?j.containerThatPrecedesAdminMessage:!1),children:h.jsx("div",{className:"xr1yuqi xkrivgy x4ii5y1 x1gryazu x1ekjcvx x2b8uid x13faqbe",children:b})})}k.displayName=k.name+" [from "+f.id+"]";e={make:k,styles:j};function a(a){var e=a.message,f=a.nextMessage;a=a.prevMessage;var g=!(b("cr:4082")==null)&&!(b("cr:4093")==null)?c("bs_curry")._3(b("cr:4082").buildLocalizedString,[],[],b("cr:4093").currentUserAddedDevice):"";g=e.text===g&&!(b("cr:4084")==null)?h.jsx(b("cr:4084").make,{}):null;var i=e.adminMsgCtaType,j,l=0;i!==void 0?i==="admin_msg_armadillo_ephemeral_change_duration"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgArmadilloEphemeralChangeDuration.make,{message:e}):i==="admin_msg_web_url"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgWebUrl.make,{message:e}):i==="admin_msg_p2b_privacy_disclosure"&&c("gkx")("2386")?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgP2bPrivacyDisclosure.make,{message:e}):i==="admin_notification_messages_opt_out"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{isOptOut:!0,message:e}):i==="admin_notification_messages_opt_in"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgNotificationMessageManageNotifications.make,{isOptOut:!1,message:e}):i==="admin_msg_thread_level_cutover"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:e}):i==="admin_msg_e2ee_thread"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgE2EEDescription.make,{message:e}):i==="admin_msg_cutover_rollback"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgCutoverRollback.make,{message:e}):i==="xmat_instant_game_bot_message_subscribe"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:e,shouldSubscribe:!0}):i==="xmat_instant_game_bot_message_unsubscribe"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgInstantGameBotMessageSubscriptionManagement.make,{message:e,shouldSubscribe:!1}):i==="admin_msg_view_pin_msgs_v2"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgShowPinnedMessages.make,{message:e}):i==="xmat_instant_game_custom_update_message_mute"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:e,shouldMute:!0}):i==="xmat_instant_game_custom_update_message_unmute"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgInstantGameCustomUpdateMuteManagement.make,{message:e,shouldMute:!1}):i==="admin_message_service_booking_legal_disclaimer"?j=h.jsx(d("MWV2AdminMsgCta.bs").AdminMsgServiceBookingLegalDisclaimer.make,{message:e}):l=1:l=1;l===1&&(j=h.jsxs("div",{children:[h.jsx(d("MWAdminTextLayout.bs").make,{message:e}),g]}));return h.jsx(k,{nextMessage:f,prevMessage:a,children:h.jsx(c("MWText.react"),{color:"tertiary",type:"meta4",children:j})})}a.displayName=a.name+" [from "+f.id+"]";f=a;a=e;e=f;g.Container=a;g.make=e}),98);
__d("MWV2MessageStartOfGroupContent.bs",["MWPDateBreak.react","MWPMessageListColumn.bs","MWV2ChatAdminMessage.bs","MWV2MessageRowSimple.bs","bs_caml_int64","bs_int64","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a,b){if(b!==void 0)return c("bs_int64").compare(c("bs_int64").abs(c("bs_caml_int64").sub(a.timestampMs,b.timestampMs)),[0,9e5])>0;else return!0}function j(a){var b=a.domElementRef,e=a.message;a=a.prevMessage;if(i(e,a))return h.jsx(d("MWV2MessageRowSimple.bs").make,{domElementRef:b,children:h.jsx(d("MWPMessageListColumn.bs").Shrinkwrap,{children:h.jsx(d("MWV2ChatAdminMessage.bs").Container.make,{nextMessage:e,prevMessage:a,children:h.jsx(c("MWPDateBreak.react"),{timestamp:c("bs_caml_int64").to_float(e.timestampMs)})})})});else return null}b={make:j};function a(a){var b=a.domElementRef,c=a.message;a=a.prevMessage;return h.jsx(j,{domElementRef:b,message:c,prevMessage:a})}a.displayName=a.name+" [from "+f.id+"]";e=a;f=b;a=e;g.Datebreak=f;g.make=a}),98);
__d("MWChatGutterItem.bs",["MWChatSingleSeenHead.react","MWLSThreadDisplayContext","MWMessageDeliveryStatus","MWMessageDeliveryStatusIcons","MWTheme.bs","MWTooltip.react","bs_caml_obj","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={icon:{display:"x78zum5",flexShrink:"x2lah0s",height:"x1v9usgg",marginEnd:"xw3qccf",marginStart:"xsgj6o6",userSelect:"x87ps6o",verticalAlign:"x11njtxf",width:"x6jxa94",$$css:!0},incoming:{flexDirection:"x15zctf7",$$css:!0},mask:{backgroundColor:"xcrg951",$$css:!0},noneStatus:{flexShrink:"x2lah0s",width:"x17z2i9w",$$css:!0},root:{alignItems:"xuk3077",display:"x78zum5",$$css:!0},singleSeenHead:{marginEnd:"xw3qccf",marginStart:"xsgj6o6",$$css:!0}};function a(a){var b=a.errorMessage,e=a.status,f=a.incoming,g=a.hasRepliedToMessage,j=a.xstyle;a=a.id;f=f!==void 0?f:!1;g=g!==void 0?g:!1;j=j!==void 0?c("bs_caml_option").valFromOption(j):!1;a=a!==void 0?a:"";var k=d("MWTheme.bs").useTheme();k=d("MWTheme.bs").isGradient(k);var l=d("MWMessageDeliveryStatus").getStatusTitle(e),m=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b=e.type==="Error"&&b!==void 0?b:l;var n;switch(e.type){case"NoneStatus":n=h.jsx("div",{className:"x2lah0s x17z2i9w"});break;case"SingleSeenHead":n=h.jsx(c("MWChatSingleSeenHead.react"),{altText:l,head:e.head,xstyle:i.singleSeenHead});break;case"DeliveredAndRead":n=h.jsx(c("MWMessageDeliveryStatusIcons").DeliveredAndReadIcon,{size:12,xstyle:i.icon});break;case"MultipleSeenHeads":case"SeenCount":case"Loading":case"RetriableError":n=null;break;default:var o;switch(e.type){case"Sending":o=h.jsx(c("MWMessageDeliveryStatusIcons").SendingIcon,{size:12,xstyle:i.icon});break;case"Sent":o=h.jsx(c("MWMessageDeliveryStatusIcons").SentIcon,{size:12,xstyle:i.icon});break;case"Delivered":o=h.jsx(c("MWMessageDeliveryStatusIcons").DeliveredIcon,{size:12,xstyle:i.icon});break;case"Error":o=h.jsx(c("MWMessageDeliveryStatusIcons").ErrorIcon,{size:12,title:b.toString(),xstyle:i.icon});break;default:o=null}n=h.jsx("div",{children:o})}l=b!==""?h.jsx(c("MWTooltip.react"),{align:function(){switch(c("bs_caml_obj").caml_equal(m,"Inbox")?"middle":"end_"){case"start":return"start";case"middle":return"middle";case"end_":return"end";case"stretch":return"stretch"}}(),position:"above",tooltip:b,children:n}):n;return h.jsx("div",{className:c("stylex")(i.root,k&&!g?i.mask:!1,f?i.incoming:!1,j),"data-testid":void 0,id:a,role:"none",children:l})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2MessageActionsVisibility.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.useRef(function(){})}g.useStopHoveringRef=a}),98);
__d("MWV2MessageTimestampTooltip.bs",["fbt","MWTooltip.react","MercuryTimestamp","bs_caml_int64","cr:1654","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var e=a.children,f=a.message,g=b("cr:1654")==null?void 0:b("cr:1654")(f.messageId);a=i.useMemo(function(){var a=f.unsentTimestampMs,b=f.isUnsent;return a!==void 0&&b?i.jsxs("div",{children:[i.jsx("div",{children:h._("__JHASH__L93MxMH-RPL__JHASH__",[h._param("time",d("MercuryTimestamp").getPreciseTimestamp(c("bs_caml_int64").to_float(f.timestampMs)))])}),i.jsx("div",{children:c("gkx")("1531920")?h._("__JHASH__6L85PWgp0uQ__JHASH__",[h._param("time",d("MercuryTimestamp").getPreciseTimestamp(c("bs_caml_int64").to_float(a)))]):h._("__JHASH__exEcskNfDMO__JHASH__",[h._param("time",d("MercuryTimestamp").getPreciseTimestamp(c("bs_caml_int64").to_float(a)))])})]}):i.jsxs("div",{children:[i.jsx("div",{children:!(g==null)&&g>0?"Send Latency: "+g.toString()+"ms":null}),i.jsx("div",{children:h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",d("MercuryTimestamp").getPreciseTimestamp(c("bs_caml_int64").to_float(f.timestampMs)))])})]})},[f]);return i.jsx(c("MWTooltip.react"),{align:"middle",position:"start",tooltip:a,children:e})}a.displayName=a.name+" [from "+f.id+"]";e=a;f=e;g.make=f}),98);
__d("MAWEphemeralMessageTimer.bs",["fbt","CometScreenReaderText.react","MAWEphemeralConsts.bs","MWText.react","WATimeUtils","bs_caml_int32","bs_caml_int64","bs_curry","react","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){if(a<d("MAWEphemeralConsts.bs").oneMinuteInSeconds)return h._("__JHASH__hRyyGvVfwlZ__JHASH__",[h._param("seconds",String(a).concat("s"))]);else if(a<d("MAWEphemeralConsts.bs").oneHourInSeconds)return h._("__JHASH__ObtD_ZW4dqo__JHASH__",[h._param("minutes",String(c("bs_caml_int32").div(a,d("MAWEphemeralConsts.bs").oneMinuteInSeconds)).concat("m"))]);else if(a<d("MAWEphemeralConsts.bs").oneDayInSeconds)return h._("__JHASH__kfAHv6U0oM7__JHASH__",[h._param("hours",String(c("bs_caml_int32").div(a,d("MAWEphemeralConsts.bs").oneHourInSeconds)).concat("h"))]);else return h._("__JHASH__pQj617aM9Jj__JHASH__",[h._param("days",String(c("bs_caml_int32").div(a,d("MAWEphemeralConsts.bs").oneDayInSeconds)).concat("d"))])}function k(a){return h._("__JHASH__y-wqFg4O-A0__JHASH__",[h._param("time",a)])}function l(a,b){a=c("bs_caml_int64").to_int32(c("bs_caml_int64").sub(a,c("bs_caml_int64").of_float(d("WATimeUtils").unixTime())));if(b!==void 0&&a>c("bs_caml_int64").to_int32(b))return c("bs_caml_int64").to_int32(b);else return a}function a(a){var b=a.ephemeralDurationInSec,e=a.expirationTimestamp;a=i.useState(function(){return l(e,b)});var f=a[0],g=a[1];a=j(f);var h=k(a);i.useEffect(function(){f>0&&c("setTimeout")(function(){return c("bs_curry")._1(g,function(){return f-1|0})},d("MAWEphemeralConsts.bs").msPerSec)},[f,e]);return f>0?i.jsxs("div",{className:"x2b8uid xbkr7qi",children:[i.jsx(c("CometScreenReaderText.react"),{text:h}),i.jsx("div",{"aria-hidden":!0,children:i.jsx(c("MWText.react"),{type:"meta1",children:a})})]}):null}b=a;g.getScreenReaderText=k;g.getRemainingTimeInSec=l;g.make=b}),98);
__d("MWPUseLinkRendererFactory.bs",["LSThreadCapabilityBitOffset.bs","MWPThreadCapabilitiesContext","MWTextWithEntities.bs","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=!1);var b=d("MWPThreadCapabilitiesContext").useHook(),e=c("gkx")("1886144")&&b(d("LSThreadCapabilityBitOffset.bs").disableLinks);return function(b,c,f,g){return e?void 0:[f,d("MWTextWithEntities.bs").linkPlugin(b,g,c,a)]}}g.useHook=a}),98);
__d("useMWPCombineTextRenderers",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={};a.forEach(function(a){if(a===void 0)return;var c=a[0];a=a[1];var d=b[c];b[c]=d!=null?d.concat([a]):[a]});return b}f["default"]=a}),66);
__d("MWUseTextRenderers.bs",["CometCardedDialogLoadingState.re","CometEntryPointDialogTrigger.react","CometErrorBoundary.react","CometLink.react","GroupsCometJoinChatDialog.entrypoint","MWCMThreadTypes.react","MWChatTextFormatting","MWInboxCommunityThreadsRouteBuilder.bs","MWLSThread.bs","MWMessageCellFocusTable.bs","MWNavigation.bs","MWPUseLinkRendererFactory.bs","bs_belt_Option","bs_curry","bs_int64","qex","react","useCommunityFolder","useMWCMShouldGoToFullScreenChatHook","useMWPCombineTextRenderers"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={bold:{fontWeight:"x1s688f",$$css:!0},highlight:{backgroundColor:"xacajkf",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd",$$css:!0},underline:{color:"x1heor9g",textDecoration:"x1bvjpef",$$css:!0}};function j(a){var b,e=a.folder,f=a.node,g=a.thread;a=d("MWNavigation.bs").useHook();var i=c("bs_curry")._1(a.openTabOrInbox,!0);a=c("bs_belt_Option").getWithDefault(g.hasPendingInvitation,!1);var j=c("useMWCMShouldGoToFullScreenChatHook")();b=(b=c("qex")._("873"))!=null?b:!1;return h.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:h.jsx(c("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:c("GroupsCometJoinChatDialog.entrypoint"),fallback:function(){return h.jsx(d("CometCardedDialogLoadingState.re").make,{})},otherProps:{invited:a,shouldGoToMessenger:j,shouldAutojoin:b},preloadParams:{groupID:c("bs_int64").to_string(e.fbGroupId),threadID:c("bs_int64").to_string(g.threadKey)},children:function(a){return h.jsx("span",{className:"x1s688f",role:"gridcell",children:h.jsx(c("CometLink.react"),{onClick:function(){if(d("MWCMThreadTypes.react").isUnjoinedCMThread(g.threadType))return c("bs_curry")._1(a);else return c("bs_curry")._2(i,{clientThreadKey:g.clientThreadKey,threadKey:g.threadKey,threadType:g.threadType},"mention")},children:f})})}},c("bs_int64").to_string(g.threadKey))})}j.displayName=j.name+" [from "+f.id+"]";b={make:j};function k(a){a.children;var b=a.folder,e=a.thread,f=c("bs_int64").to_string(b.folderId),g=c("bs_int64").to_string(e.threadKey);b=h.useCallback(function(a){return d("MWInboxCommunityThreadsRouteBuilder.bs").buildURL({folder_id:f,thread_key:g})},[f,g]);return h.jsx(d("MWNavigation.bs").Provider,{children:a.children,value:b})}k.displayName=k.name+" [from "+f.id+"]";function l(a){var b=a.communityLinkFallback,e=a.node;a=a.threadKey;a=d("MWLSThread.bs").useThreadExn(a);var f=c("useCommunityFolder")(a);return f!=null?h.jsx(k,{folder:f,thread:a,children:h.jsx(j,{folder:f,node:e,thread:a})}):b}e={make:l};var m=["Command",function(a,b){return h.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:h.jsx("span",{className:"x1s688f",role:"gridcell",children:a})})}],n=["CommunityChannel",function(a,b){var e=h.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:h.jsx("span",{className:"x1s688f",role:"gridcell",children:a})});return h.jsx(c("CometErrorBoundary.react"),{fallback:function(){return e},children:h.jsx(l,{communityLinkFallback:e,node:a,threadKey:b.threadKey})})}];function a(a,b){b=a!==void 0?a:!1;b;a=d("MWPUseLinkRendererFactory.bs").useHook();return c("useMWPCombineTextRenderers")([a([i.underline],"chat_message_regular_link","Link"),a([i.bold],"profile_link","Profile"),a([i.highlight],"highlight","Highlight"),m,n,["MessengerTextFormatting",d("MWChatTextFormatting").messageRenderer]])}f=b;b=e;e=m;var o=n;a=a;g.CommunityChannelLink=f;g.CommunityChannelLinkContainer=b;g.commandRenderer=e;g.communityChannelRenderer=o;g.useHook=a}),98);
__d("MWV2ChatEmoji.bs",["CometTextWithEntities.react","MWChatEmojiUtil.bs","MWChatTextTransform.bs","MWV2ChatBubble.bs","bs_curry","cr:2382","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var e=a.message;a=a.hasEmphasisRing;a=a!==void 0?a:!1;var f=h.useMemo(function(){var a=c("qex")._("1546");a=a==null||a!=="dynamic"?32:d("MWChatEmojiUtil.bs").transformHotEmojiSizeForWeb(e.hotEmojiSize);return d("MWChatTextTransform.bs").epdTextTransformsWithOptions({size:a})},[e.hotEmojiSize]),g=e.text;if(g===void 0)return null;g=b("cr:2382")==null?g:c("bs_curry")._1(b("cr:2382").unvault,g);g=h.jsx(c("CometTextWithEntities.react"),{text:g,transforms:f,withParagraphs:!0});if(a)return h.jsx(d("MWV2ChatBubble.bs").EmphasisRing.make,{hasXMA:!1,isBeforeXMA:!1,isOutgoing:!1,shouldConnectBottom:!1,shouldConnectTop:!1,children:g});else return g}e=a;f=e;g.make=f}),98);
__d("MessageProfileRangeType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:"n",COMMUNITY_CHANNEL:"cc",PROFILE:"p",THREAD:"t",THREAD_ACTIVE:"a",SILENT:"s",THREAD_SHOUT:"ts"});f["default"]=a}),66);
__d("MessageProfileRangeType.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return"p";else if(a==="thread"||a==="t")return"t";else if(a==="thread_active"||a==="a")return"a";else if(a==="s")return"s";else if(a==="c")return"cc";else return"n"}f.ofString=a}),66);
__d("MWV2ChatTextParserUtils.bs",["EmojiRenderer","EmoticonRenderer","LSContactTypeExact.bs","MWChatTextFormatting","MWLSContactTypeExactUtils.bs","MessageProfileRangeType.bs","ReQL.bs","ReQLSuspense","XCometVanityURLControllerRouteBuilder","bs_caml","bs_caml_format","getURLRanges","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new RegExp("/^[ \\r\\n\\s]*$/");function a(a){var b=d("EmojiRenderer").parse(a).map(function(a){return{length:a.length,offset:a.offset}}),e=c("gkx")("1839834")?d("EmoticonRenderer").parse(a).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];b=b.concat(e).sort(function(a,b){return a.offset-b.offset|0});if(b.length===0)return!1;var f={contents:0},g={contents:0};e=b.some(function(b){f.contents===b.offset?(f.contents=f.contents+b.length|0,g.contents=f.contents):g.contents=b.offset;var c=a.substring(f.contents,g.contents);f.contents=b.offset+b.length|0;return h.test(c)===!1});b=f.contents!==a.length&&!h.test(a.substring(g.contents));if(e)return!1;else return!b}function b(a){var b=c("getURLRanges")(a),e=[];a=d("MWChatTextFormatting").getFormattingRanges(a);b.forEach(function(a){a={entity:{__typename:"Link",uri:a.entity.url},length:a.length,offset:a.offset};e.push(a)});return e.concat(a)}function i(a){if(c("gkx")("1968579"))return"/t/"+a;else return"/messages/t/"+a}function j(a,b){try{a=d("ReQLSuspense").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:c("bs_caml_format").caml_int64_of_string(b),tl:0}))}catch(b){a=void 0}if(a===void 0)return i(b);var e=a.contactTypeExact;if(c("bs_caml").i64_eq(e,d("LSContactTypeExact.bs").fbUser))return"https://www.facebook.com"+c("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b});if(!d("MWLSContactTypeExactUtils.bs").isIgContact(a))return i(b);e=a.secondaryName;if(e!==void 0)return"https://www.instagram.com/"+e+"/";else return i(b)}function e(a,b,e,f,g){b=b.split(",");var h=e.split(","),k=f.split(","),l=g.split(",");return b.reduce(function(b,e,f){var g=d("MessageProfileRangeType.bs").ofString(l[f]);g==="t"||g==="a"?b.push({entity:{__typename:"Profile",id:e,uri:i(e)},length:c("bs_caml_format").caml_int_of_string(h[f]),offset:c("bs_caml_format").caml_int_of_string(k[f])}):g==="p"?b.push({entity:{__typename:"Profile",id:e,uri:j(a,e)},length:c("bs_caml_format").caml_int_of_string(h[f]),offset:c("bs_caml_format").caml_int_of_string(k[f])}):g==="cc"?b.push({entity:{__typename:"CommunityChannel",threadKey:c("bs_caml_format").caml_int64_of_string(e)},length:c("bs_caml_format").caml_int_of_string(h[f]),offset:c("bs_caml_format").caml_int_of_string(k[f])}):g==="s"&&b.push({entity:{__typename:"Command"},length:c("bs_caml_format").caml_int_of_string(h[f]),offset:c("bs_caml_format").caml_int_of_string(k[f])});return b},[])}g.utf16RegexSpaces=h;g.isEmojiOnlyMessage=a;g.findRanges=b;g.createURIForThread=i;g.createProfileURIForMention=j;g.findRangesForMentions=e}),98);
__d("MWV2ChatUnsentMessage.bs",["fbt","CometPressable.react","MWCMIsAnyCMThread","MWLSThread.bs","MWText.react","MWV2TombstonedMessage.bs","ReQL.bs","ReQLSubscription.bs","XCometGroupAdminActivitiesControllerRouteBuilder","bs_curry","bs_int64","cr:4898","react","useCommunityFolder","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={linkText:{paddingStart:"x16hj40l",paddingEnd:"xsyo7zv",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0}};function k(a){var e=a.attachment,f=a.isSecureMessage;a=a.message;var g=h._("__JHASH__I-2GRtvMpnJ__JHASH__");a=b("cr:4898")==null?g:c("bs_curry")._1(b("cr:4898").useUnsendContentInSecureThread,a);if(f)f=a;else if(e!==void 0){a=e.descriptionText;f=a!==void 0?a:g}else f=g;return i.jsx(d("MWV2TombstonedMessage.bs").make,{ariaLabel:f,children:f})}k.displayName=k.name+" [from "+f.id+"]";e={make:k};function l(a){a=a.attachment;if(a!==void 0){a=a.descriptionText;a=a!==void 0?a:h._("__JHASH__HdJ22izQlT7__JHASH__")}else a=h._("__JHASH__HdJ22izQlT7__JHASH__");return i.jsx(d("MWV2TombstonedMessage.bs").make,{ariaLabel:a,children:a})}l.displayName=l.name+" [from "+f.id+"]";f={make:l};function m(a){var b=a.attachment;a=a.thread;a=c("useCommunityFolder")(a);if(b!==void 0){b=b.cta1Title;b=b!==void 0?b:h._("__JHASH__8jyfQXNgswL__JHASH__")}else b=h._("__JHASH__8jyfQXNgswL__JHASH__");if(a!==void 0)return i.jsx(c("CometPressable.react"),{linkProps:{url:"https://www.facebook.com"+c("XCometGroupAdminActivitiesControllerRouteBuilder").buildURL({idorvanity:c("bs_int64").to_string(a.fbGroupId)})},overlayDisabled:!0,xstyle:function(){return[j.linkText]},children:i.jsx(c("MWText.react"),{color:"blueLink",type:"meta2",children:b})});else return null}var n={make:m};function a(a){var b=a.isSecureMessage,e=a.message;a=a.outgoing;var f=c("useReStore")(),g=e.messageId,h=e.threadKey,j=d("MWLSThread.bs").useThread(h),n=d("ReQLSubscription.bs").useFirst(i.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(f.table("attachments")),{hd:h,tl:{hd:g,tl:0}})},[f,g,JSON.stringify(h)]));if(n!==void 0){var o=n.cta1Type;o=o!==void 0?o==="xma_view_activity_log":!1}else o=!1;return i.jsxs(i.Fragment,{children:[a?i.jsx(l,{attachment:n}):i.jsx(k,{attachment:n,isSecureMessage:b,message:e}),j!==void 0&&o&&c("MWCMIsAnyCMThread")(j.threadType)?i.jsx(m,{attachment:n,thread:j}):null]})}a=a;e=e;f=f;n=n;a=a;g.IncomingUnsentMessage=e;g.OutgoingUnsentMessage=f;g.ActivityLogDetails=n;g.make=a}),98);
__d("MWPGating.bs",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("105")===!0}g.isDualColumnMessageListEnabled=a}),98);
__d("MWPOpenComposerUtils.bs",["LSRemoveMediaSendJobs","LSResumeMediaSendJob","MWConsole","Promise","bs_caml_int64","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return a.table("media_staging").get({hd:c,tl:0}).then(function(d){if(d!==void 0)return a.table("media_staging")["delete"]({hd:c,tl:0});else return b("Promise").resolve()})}function d(a,d,e){return a.table("media_staging").get({hd:d,tl:0}).then(function(d){if(d!==void 0)return a.table("media_staging").put(c("bs_curry")._1(e,d));else return b("Promise").resolve()})}function e(a,d,e,f,g){return a.table("attachments").get({hd:d,tl:{hd:e,tl:{hd:f,tl:0}}}).then(function(h){if(h!==void 0)return a.table("attachments").upsert({hd:d,tl:{hd:e,tl:{hd:f,tl:0}}},c("bs_curry")._1(g,h));else return b("Promise").resolve()})}function f(a,d,e){return c("LSResumeMediaSendJob")(d,c("bs_caml_int64").zero,e!==void 0?c("bs_caml_option").valFromOption(e):void 0,a).then(function(e){e=e[0];if(e)return c("LSRemoveMediaSendJobs")(d,a);else return b("Promise").resolve()})}a=a;d=d;e=e;f=f;g.deleteMediaStaging=a;g.updateMediaStaging=d;g.updateAttachment=e;g.resumeSendJob=f}),98);
__d("MWPComposerMediaUploadUtil.bs",["FBLogger","MessagingAttachmentType.bs","XComposerPhotoUploader","bs_belt_Array","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h){var i="/ajax/mercury/upload.php";h&&(i="/ajax/mercury/chatsupportuser/upload.php");h=a!==void 0?a:function(a,b){};var j=d!==void 0?d:function(a,b){};a=e!==void 0?e:!1;d=new(c("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,b){c("bs_curry")._2(j,a,b);return!0},onUploadProgress:c("bs_curry").__2(h),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=d.response.payload.metadata;var e;if(d==null)c("FBLogger")("messenger_browser_clients").warn("Empty payload"),e={};else{d=c("bs_belt_Array").get(d,0);d!==void 0?e=c("bs_caml_option").valFromOption(d):(c("FBLogger")("messenger_browser_clients").warn("Empty metadata"),e={})}d=e.fbid;var f=e.video_id,g=e.audio_id,h=e.gif_id;e=e.file_id;d=d!==void 0?c("bs_caml_option").some(c("bs_caml_option").valFromOption(d)):f!==void 0?c("bs_caml_option").some(c("bs_caml_option").valFromOption(f)):g!==void 0?c("bs_caml_option").some(c("bs_caml_option").valFromOption(g)):h!==void 0?c("bs_caml_option").some(c("bs_caml_option").valFromOption(h)):e!==void 0?c("bs_caml_option").some(c("bs_caml_option").valFromOption(e)):void 0;d!==void 0?c("bs_curry")._2(b,a,d):c("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:i});e=a?{data:{voice_clip:!0}}:void 0;d.getAsyncFileUploadRequest(f,g,e).send()}function b(a){a=a.type;if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return d("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return d("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return d("MessagingAttachmentType.bs").animatedImage;else if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return d("MessagingAttachmentType.bs").video;else return d("MessagingAttachmentType.bs").file}function e(a,b,e){return{action_url:void 0,attachment_fbid:a,attachment_index:c("bs_caml_int64").zero,attachment_type:d("MessagingAttachmentType.bs").audio,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a,original_file_hash:void 0,playable_duration_ms:c("bs_caml_int64").of_float(e*1e3),playable_url:URL.createObjectURL(b),playable_url_mime_type:b.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}function f(a,b){a=a.map(function(a){return{action_url:void 0,attachment_fbid:a.offlineAttachmentId,attachment_index:c("bs_caml_int64").zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,preview_height:[0,200],preview_url:a.previewUrl,preview_url_mime_type:void 0,preview_width:[0,200],source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}});var e=[],f=[];a.forEach(function(a){c("bs_caml").i64_eq(a.attachment_type,d("MessagingAttachmentType.bs").image)&&!b?f.push(a):e.push([a])});f.length>0&&e.unshift(f);return e.map(function(a){return a.map(function(a,b){return babelHelpers["extends"]({},a,{attachment_index:c("bs_caml_int64").of_int32(b)})})})}a=a;b=b;e=e;f=f;g.startUpload=a;g.getAttachmentType=b;g.getAudioAttachment=e;g.createPartitionedAttachments=f}),98);
__d("MWPBaseMessageListRowCountdown.bs",["MAWEphemeralMessageTimer.bs","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",justifyContent:"xl56j7k",paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",zIndex:"x1vjfegm",marginTop:"xr1yuqi",marginBottom:"x4ii5y1",$$css:!0}};function a(a){var b=a.ephemeralDurationInSec,e=a.expirationTimestamp,f=a.hasReactions;a=a.ariaHidden;a=a!==void 0?a:!1;return h.jsx("div",{"aria-hidden":a,className:c("stylex")(i.root,f?i.moveUpToAccountForReactions:!1),children:h.jsx(d("MAWEphemeralMessageTimer.bs").make,{ephemeralDurationInSec:b,expirationTimestamp:e})})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWPBaseMessageListRow.bs",["BaseThemeProvider.react","LSMessageContentType.bs","MWCombineThemeConfigs.bs","MWMessageDeliveryStatus","MWPBaseMessageListRowCountdown.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","MWPMessageParsingUtils.bs","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=c("react");function a(a){var b=a.children,e=a.message;a=a.prevMessage;e=d("MWPMessageParsingUtils.bs").isStartOfGroup(e,a);if(e)return c("bs_curry")._1(b);else return null}a={make:a};function i(a){return c("bs_caml").i64_eq(c("bs_caml_int64").and_(a.displayedContentTypes,c("LSMessageContentType.bs").hscrollXma),c("bs_caml_int64").zero)}var j={container:{display:"x78zum5",$$css:!0},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"xeuugli",$$css:!0},innerOutgoing:{flexDirection:"x15zctf7",$$css:!0}};function b(a){var b=a.children,e=a.hasReactions,f=a.message,g=a.outgoing,k=a.renderGutterItem,l=a.renderMessageActions;a=a.renderProfile;var m=c("MWPMessageIsReply.bs")(f),n=f.ephemeralExpirationTs,o=f.ephemeralDurationInSec,p=f.isUnsent,q=d("MWMessageDeliveryStatus").getFromSendStatus(f.sendStatusV2);q=q.type==="Sending"?!0:!1;return h.jsxs("div",{className:"x78zum5",role:"none",children:[h.jsxs(c("MWPMessageListColumn.bs").Profile.make,{children:[g?null:c("bs_curry")._1(a),e?h.jsx(c("MWPMessageListColumn.bs").VerticalRhythm,{height:18}):null]}),h.jsxs("div",{className:c("stylex")(j.inner,g?j.innerOutgoing:!1),"data-testid":void 0,role:"none",children:[h.jsx(c("MWPMessageListColumn.bs").Bubble.make,{makeSpaceForActions:i(f),paint:!g||m,children:b}),n!==void 0&&!p?h.jsx(c("MWPMessageListColumn.bs").Shrinkwrap,{children:h.jsx(d("MWPBaseMessageListRowCountdown.bs").make,{ephemeralDurationInSec:o,expirationTimestamp:n,hasReactions:e})}):null,i(f)?h.jsx(c("MWPMessageListColumn.bs").Shrinkwrap,{children:q?null:c("bs_curry")._1(l)}):null,h.jsx(c("MWPMessageListColumn.bs").Grow.make,{children:h.jsx(c("MWPMessageListColumn.bs").HorizontalSpacer.make,{})})]}),h.jsxs(c("MWPMessageListColumn.bs").Shrinkwrap,{children:[c("bs_curry")._1(k),e?h.jsx(c("MWPMessageListColumn.bs").VerticalRhythm,{height:18}):null]})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.children,e=a.message,f=a.nextMessage;a=a.showContent;a=a!==void 0?a:!1;e=d("MWPMessageParsingUtils.bs").isEndOfGroup(e,f);if(e||a)return c("bs_curry")._1(b);else return null}var k={"mwp-reply-background-color":"var(--comment-footer-background)"},l={"mwp-reply-background-color":"var(--comment-footer-background)"},m={dark:l,light:k,type:"VARIABLES"};function n(a){var b=a.xstyle,e=a.children,f=a.domElementRef,g=a.role,i=a.setHovered,j=a.stopHoveringRef;a=a.theme;var k=b!==void 0?c("bs_caml_option").valFromOption(b):!1,l=a!==void 0?a:m,n=h.useCallback(function(){return c("bs_curry")._1(i,function(){return!1})},[i]);return h.jsx(c("BaseThemeProvider.react"),{config:h.useMemo(function(){return d("MWCombineThemeConfigs.bs").combine(m,l)},[l]),children:function(a,b){return h.jsx("div",{className:c("stylex")(a,k),onMouseLeave:function(){if(j.current===n){c("bs_curry")._1(n);j.current=function(){};return}},onMouseOver:function(){c("bs_curry")._1(j.current),c("bs_curry")._1(i,function(){return!0}),j.current=n},ref:f,role:g,style:b,children:e})}})}n.displayName=n.name+" [from "+f.id+"]";l=n;g.BeforeContent=a;g.Body=b;g.Footer=e;g.defaultTheme=m;g.make=l}),34);
__d("MWPBaseMessageRowHeader.react",["BaseHeading.react","LSIntEnum","LSMessageReplySourceTypeV2","MWPAccessibleEyebrowsText.react","MWPMessageAuthor.bs","MWPMessageIsReply.bs","MWPMessageListColumn.bs","cr:1597","cr:4725","qex","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={alignEnd:{alignItems:"xuk3077",$$css:!0},header:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},spaceBetween:{display:"x78zum5",justifyContent:"x1qughib",$$css:!0},timestamp:{marginTop:"x1anpbxc",paddingEnd:"x11eofan",$$css:!0},timestampWithSnippet:{marginTop:"x1ok221b",paddingEnd:"x11eofan",$$css:!0}};function k(a,b,e,f){var g=a.replySnippet;g=g!=null?g!=="":!1;var h=a.replySourceTypeV2!=null&&d("LSIntEnum").toNumber(a.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD;if(g)return e(a,f);return!h?null:b(a,f)}function a(a){var e=a.alwaysRenderSenderName;e=e===void 0?!1:e;var f=a.isAnyCMThread;f=f===void 0?!1:f;var g=a.isFirstMessageInGroup,l=a.isGroupThread,m=a.message,n=a.outgoing,o=a.renderForwardSnippet,p=a.renderPinnedText,q=a.renderReplySnippet,r=a.renderSenderName,s=a.renderTextWrapper;a=a.renderTimestamp;var t=c("MWPMessageIsReply.bs")(m);o=k(m,o,q,n);q=i(d("MWPMessageAuthor.bs").ctx);q=q.nickname;q=g&&q!=null&&f&&c("qex")._("424")===!0;f=e||l&&g&&!n&&!t||q;e=a!=null?j.spaceBetween:!1;o!=null?l=h.jsx("div",{className:c("stylex")(j.header,n?j.alignEnd:!1),role:"none",children:h.jsx(c("MWPMessageListColumn.bs").WithGutters,{shrinkwrap:!0,children:o})}):b("cr:1597")==null?l=f?r(m):h.jsx(c("MWPAccessibleEyebrowsText.react"),{message:m,outgoing:n}):l=h.jsx(b("cr:1597"),{message:m,outgoing:n,renderPinnedText:p,renderTextWrapper:s,shouldRenderSenderName:f});t=o!=null?j.timestampWithSnippet:j.timestamp;q=h.jsx(h.Fragment,{children:b("cr:4725")!=null&&a!=null?h.jsx(b("cr:4725"),{message:m,renderText:s,renderTimestamp:a,xstyle:t}):null});if(g)return h.jsxs(c("BaseHeading.react"),{xstyle:e,children:[l,q]});else return l}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageListRowWithKeyboardInteractions.bs",["fbt","BaseHeadingContextWrapper.react","CometPressable.react","CometScreenReaderText.react","CometTimestamp.react","FocusInertRegion.react","FocusRegion.react","FocusWithinHandler.react","KeyCommandHandler.react","MDSTextPairing.react","MWMessageCellFocusTable.bs","MWMessageCellKeyCommands.bs","MWMessageTableFocusTable.bs","MWPBaseMessageListRow.bs","MWPGating.bs","MWPMessageAuthor.bs","MWV2MessageListIsRowModalContext.bs","MWV2MessageRowActionsContext.bs","MWV2MessageRowIsRowFocusedContext.bs","ReactDOMComet","StylexHelpers.bs","bs_caml_int64","bs_caml_option","bs_curry","focusScopeQueries","gkx","react","setTimeout","stylex","useCometTheme","useCometUniqueID","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={cell:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6",$$css:!0},cellFocusVisible:{zIndex:"x1vjfegm",$$css:!0},cellModal:{outline:"x1k66dxp",outlineOffset:"x1g40iwv","@media (-webkit-min-device-pixel-ratio: 0)_outline":"x1bkw7pg",$$css:!0},enterModalButton:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x152obne",end:"xlr8s2x",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x10l6tqk",top:"x1qiirwl",transform:"x105ttfm",zIndex:"x1vjfegm",$$css:!0},enterModalButtonVisible:{opacity:"x1hc1fzr",$$css:!0},row:{position:"x1n2onr6",$$css:!0}};function k(){}function l(a){var b=a.key;if(b==="ArrowUp"||b==="ArrowDown"||b==="ArrowLeft"||b==="ArrowRight"||b==="PageUp"||b==="PageDown"||b==="Home"||b==="End"){a.preventDefault();return}}var m=h._("__JHASH__U5V4JiyTDSI__JHASH__"),n=h._("__JHASH__GoIrDg5lzef__JHASH__"),o=h._("__JHASH__ctLNxPXr8we__JHASH__"),p=i.forwardRef(function(a,b){var d=a.text,e=a.xstyle,f=a.focusable,g=a.ariaLabel,h=a.onPress;a=c("useCometTheme")("invert");var k=a[1];g={"aria-label":g,children:i.jsx(c("MDSTextPairing.react"),{body:d,bodyColor:"primary",level:4}),focusable:f,onPress:function(){return h()},xstyle:function(){return[k,j.enterModalButton,e]}};d=b==null?void 0:c("bs_caml_option").some(b);d!==void 0&&(g.ref=c("bs_caml_option").valFromOption(d));return c("bs_curry")._1(a[0],{children:i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},g))})});b={make:p};function a(a){var b=a.children,e=a.domElementRef,f=a.isDialogOpened,g=a.isFocused,q=a.isModal,r=a.message,s=a.messageDomID,t=a.nextMessage,u=a.outgoing,v=a.prevMessage,w=a.setFocused,x=a.setHovered,y=a.setIsDialogOpened,z=a.stopHoveringRef;a=a.theme;var A=i.useContext(d("MWV2MessageListIsRowModalContext.bs").context),B=i.useRef(null),C=c("useCometUniqueID")(),D=i.useCallback(function(){c("bs_curry")._1(A,function(){return r.messageId}),c("setTimeout")(function(){d("FocusRegion.react").focusRegionById(C,d("focusScopeQueries").tabbableScopeQuery)},0)},[A,r.messageId,C]),E=function(){c("bs_curry")._1(A,function(){return""});var a=B.current;if(!(a==null))return a.focus()},F=c("CometTimestamp.react").getTimestamp(c("useServerTime")(),new Date(c("bs_caml_int64").to_float(r.timestampMs))),G=d("MWPMessageAuthor.bs").useAuthorName(r);G=G[0];u=u?h._("__JHASH__g90cYI08lR4__JHASH__"):G!==void 0?G:h._("__JHASH__I4KHPAQ-RAf__JHASH__");var H=c("useCometUniqueID")(),I=i.jsx(c("CometScreenReaderText.react"),{id:H,text:h._("__JHASH__BGN2Md9i0L4__JHASH__",[h._param("Stringified timestamp of the incoming message",F),h._param("Name of the author of the incoming message",u)])}),J=c("useCometUniqueID")(),K=i.useRef(null),L=d("MWPGating.bs").isDualColumnMessageListEnabled()||c("gkx")("5093"),M=c("gkx")("3598"),N=i.useRef(k),O=i.useRef(k),P=i.useRef(k),Q=i.useRef(k);G=i.useMemo(function(){return{isDialogOpened:f,setFocused:w,setIsDialogOpened:y}},[w,y,f]);F=i.useMemo(function(){return{forwardMessage:P,openReactionsMenu:N,removeMessage:Q,replyToMessage:O}},[N,O]);u={children:i.jsx(d("MWMessageTableFocusTable.bs").FocusTable[1],{children:i.jsx(c("FocusWithinHandler.react"),{onFocusChange:function(a){if(g!==a){c("bs_curry")._1(w,function(){return a});return c("bs_curry")._1(A,function(){if((a||f)&&q)return r.messageId;else return""})}},onFocusVisibleChange:function(b){g!==b&&c("bs_curry")._1(w,function(){return b});var a=K.current;if(b&&!(a==null)){c("setTimeout")(function(){try{return a.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(b){return a.scrollIntoView(!1)}},0);return}},children:function(a,e){a=i.jsx(d("MWMessageTableFocusTable.bs").FocusTable[2],{children:i.jsx("div",{className:c("stylex")(j.cell,q?j.cellModal:!1,e?j.cellFocusVisible:!1),"data-release-focus-from":"CLICK","data-scope":d("MWMessageTableFocusTable.bs").scopeID,ref:B,role:"gridcell",tabIndex:0,children:i.jsx(c("FocusInertRegion.react"),{disabled:q,focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:q?i.jsxs(i.Fragment,{children:[i.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:C,recoverFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:i.jsx(c("KeyCommandHandler.react"),{onKeyDown:l,children:i.jsxs("div",{"aria-describedby":s,"aria-labelledby":H,id:J,role:"dialog",children:[b,q?I:null,i.jsx(p,{ariaLabel:n,focusable:!0,onPress:E,text:h._("__JHASH__PEyi9JodUw1__JHASH__"),xstyle:j.enterModalButtonVisible})]})})}),d("ReactDOMComet").createPortal(i.jsx("div",{"aria-owns":J}),document.body)]}):i.jsxs(i.Fragment,{children:[b,L?null:i.jsx(p,{ariaLabel:m,focusable:!0,onPress:D,ref:K,text:o,xstyle:e?j.enterModalButtonVisible:d("StylexHelpers.bs").styles.visuallyHidden})]})})})});return i.jsxs(i.Fragment,{children:[i.jsx(d("MWMessageCellFocusTable.bs").keyCommands,{onEnter:q?void 0:D,onEscape:q?E:void 0,onSpace:q?void 0:D,children:M?i.jsx(d("MWMessageCellKeyCommands.bs").keyCommands,{message:r,children:a}):a}),L?i.jsx("div",{role:"gridcell",children:i.jsx(p,{ariaLabel:q?h._("__JHASH__C-7ahaHTUI7__JHASH__"):m,focusable:q,onPress:D,ref:K,text:q?h._("__JHASH__C-7ahaHTUI7__JHASH__"):o,xstyle:e&&!q?j.enterModalButtonVisible:d("StylexHelpers.bs").styles.visuallyHidden})}):null]})}})}),message:r,nextMessage:t,prevMessage:v,role:"row",setHovered:x,stopHoveringRef:z,xstyle:j.row};e!==void 0&&(u.domElementRef=c("bs_caml_option").valFromOption(e));a!==void 0&&(u.theme=c("bs_caml_option").valFromOption(a));return i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsx(d("MWV2MessageRowIsRowFocusedContext.bs").Provider.make,{value:G,children:i.jsx(d("MWV2MessageRowActionsContext.bs").Provider.make,{value:F,children:i.jsx(d("MWPBaseMessageListRow.bs").make,babelHelpers["extends"]({},u))})})})}a.displayName=a.name+" [from "+f.id+"]";e=a;f=k;a=l;var q=m,r=n,s=o;b=b;e=e;g.noop=f;g.onKeyDown=a;g.enterModalLabel=q;g.exitModalLabel=r;g.enterLabel=s;g.ModalButton=b;g.make=e}),98);
__d("MWPMessageListText.bs",["BaseTheme.react","CometTextWithEntities.react","LSMessageReplySourceTypeV2.bs","MWBaseTheme.bs","MWChatTextTransform.bs","bs_caml_obj","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={forwarded:{borderStartStyle:"x26u7qi",borderStartWidth:"x7g060r",fontSize:"x1nxh6w3",lineHeight:"x1sibtaa",marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",whiteSpace:"x126k92a",wordWrap:"x1vvkbs",$$css:!0},forwardedIncoming:{borderStartColor:"xa7jiu",color:"x12scifz",$$css:!0},forwardedOutgoing:{borderStartColor:"x16b4vue",color:"xkxfvhb",$$css:!0},regular:{fontSize:"x6prxxf",lineHeight:"x1fc57z9",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0},regularIncoming:{color:"xzsf02u",$$css:!0},regularOutgoing:{color:"x14ctfv",$$css:!0}};e={"mw-blockquote-border-start-color":"var(--placeholder-text)"};var j={"mw-blockquote-border-start-color":"var(--placeholder-text)"},k={dark:j,light:e,type:"VARIABLES"};function a(a){if(a)return d("MWBaseTheme.bs").empty;else return k}function b(a){var b=a.message,e=a.outgoing,f=a.ranges,g=a.renderers,j=a.text,l=a.transforms,m=a.xstyleForText;a=a.xstyleForForwarded;l=l!==void 0?l:d("MWChatTextTransform.bs").epdTextTransforms;m=m!==void 0?c("bs_caml_option").valFromOption(m):!1;a=a!==void 0?c("bs_caml_option").valFromOption(a):!1;b=c("bs_caml_obj").caml_equal(b.replySourceTypeV2,d("LSMessageReplySourceTypeV2.bs").forward);var n=e?d("MWBaseTheme.bs").empty:k;if(j!==void 0)if(b){b={ranges:f,text:j,transforms:l,withParagraphs:!1};g!==void 0&&(b.renderers=c("bs_caml_option").valFromOption(g));a=h.jsx("blockquote",{className:c("stylex")(i.forwarded,e?i.forwardedOutgoing:i.forwardedIncoming,a),dir:"auto",children:h.jsx(c("CometTextWithEntities.react"),babelHelpers["extends"]({},b))})}else{b={ranges:f,text:j,transforms:l,withParagraphs:!1};g!==void 0&&(b.renderers=c("bs_caml_option").valFromOption(g));a=h.jsx("div",{className:c("stylex")(i.regular,e?i.regularOutgoing:i.regularIncoming,m),dir:"auto",role:"none",children:h.jsx(c("CometTextWithEntities.react"),babelHelpers["extends"]({},b))})}else a=null;return h.jsx(c("BaseTheme.react"),{config:n,role:"none",children:a})}b.displayName=b.name+" [from "+f.id+"]";j=b;e=k;f=a;b=j;g.ougtoingTheme=d("MWBaseTheme.bs").empty;g.incomingTheme=e;g.getTheme=f;g.make=b}),98);
__d("MWPMessageSenderNameGroupHeading.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children;a=a.isOutgoingMessage;a=a===void 0?!1:a;return h.jsx("div",{className:"xi81zsa x1ncwhqj x15smj1u x1k70j0n x1120s5i x53iox2"+(a?" x78zum5 x13a6bvl xe53cfu":""),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("MAWDbDeviceChangeAlerts",[],(function(a,b,c,d,e,f){"use strict";b="add";c="keyChange";d="remove";function a(a){return a}f.ADD=b;f.KEY_CHANGE=c;f.REMOVE=d;f.unsafeCoerceToDeviceChangeAlertsID=a}),66);
__d("MAWDbPendingStanza",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";var h="revoked",i="deleteForMe",j="deleteThread";b="Revoked";d="DeleteForMe";e="DeleteThread";f={DELETE_FOR_ME:d,DELETE_THREAD:e,REVOKED:b};function a(a){switch(a){case"Revoked":return h;case"DeleteForMe":return i;case"DeleteThread":return j;default:return c("WAAssertUnreachable")(a)}}g.PENDING_REVOKED=h;g.PENDING_DELETE_FOR_ME=i;g.PENDING_DELETE_THREAD=j;g.REVOKED=b;g.DELETE_FOR_ME=d;g.DELETE_THREAD=e;g.PENDING_TYPE=f;g.getPendingSuffix=a}),98);
__d("MAWDbXMA",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.convertNumbersToXMAIds=a}),66);
__d("MAWLocalizationUtils",["MAWAckLevel","MAWDbMsg","MAWGlobals","MAWLocalizationType","WAJids","WAMsgType","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g){return{ack:d("MAWAckLevel").ACK.sent,altIndex:(g=g)!=null?g:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWGlobals").getDependencies().generateExternalId(),msgContent:a,msgId:e,thread:b,threadJid:c,ts:(g=f)!=null?g:d("WATimeUtils").unixTime(),type:d("WAMsgType").MSG_TYPE.ADMIN}}function b(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:return!0}return!1}function c(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function e(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:return!0}return!1}g.buildUnstoredDbAdminMsg=a;g.isAdminMsgNormalized=b;g.isDeviceChangeAdminMsg=c;g.isParticipantChangeAdminMsg=e}),98);
__d("MAWAdminMsgBuildTxns",["MAWDbMsg","MAWDbThreadTxns","MAWLocalizationType","MAWLocalizationUtils","MAWWriteMsgTxns","WALogger","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeReachabilityErrorAdminMsg failed to create or get 1:1 thread"]);h=function(){return a};return a}function a(a,b){return d("MAWDbThreadTxns").getThreadByJid(a,b).then(function(b){if(!b.success){d("WALogger").WARN(h());return}b=b.value;var c=d("MAWDbMsg").craftMsgId(b.chatId,b.nextInChatMsgId);c=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR,version:0},b.chatId,b.jid,c,d("WATimeUtils").castMillisTimeToUnixTime(b.lastReadMsgTs));return d("MAWWriteMsgTxns").writeMsg(a,c,b).then(function(){})})}function b(a,b){return d("MAWDbThreadTxns").getThread(a,b).then(function(e){if(!e.success)throw c("err")("missing thread when write e2ee thread description");e=e.value;var f=i(e);return d("MAWWriteMsgTxns").writeMsg(a,f,e,{sortOrderMs:0}).then(function(){return d("MAWDbThreadTxns").getThread(a,b).then(function(a){if(!a.success)throw c("err")("missing thread when write e2ee thread description");return a.value})})})}function i(a){var b=d("MAWDbMsg").craftMsgId(a.chatId,a.nextInChatMsgId),c=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.chatId);return d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION,version:0},a.chatId,a.jid,b,d("WATimeUtils").castToUnixTime(0),c)}g.writeReachabilityErrorAdminMsg=a;g.writeE2EEThreadDescriptionMsg=b;g.buildE2EEThreadDescriptionMsg=i}),98);
__d("MAWBridgeThread",["MAWTimeUtils.bs","WADualSendMsgUtils","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(a){return!0},user:function(a){return!1}});return{authoritativeThreadKey:c,cannotReplyReason:a.cannotReplyReason,chatId:a.chatId,clientThreadKey:b,folder:a.folder,isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.jid),isGroup:e,jid:a.jid,lastActivityTs:d("MAWTimeUtils.bs").getMillisTime(a.newestMsgTs)||d("WATimeUtils").castToMillisTime(0),lastReadTs:d("MAWTimeUtils.bs").getMillisTime(a.lastReadMsgTs)||d("WATimeUtils").castToMillisTime(0),muteCallsExpireTimeMs:(c=a.muteCallsExpireTimeMs)!=null?c:0,muteExpireTimeMs:(b=a.muteExpireTimeMs)!=null?b:0}}function b(a,b,c){return{lastActivityTimestampMs:c,lastReadWatermarkTs:b,threadId:a}}g.createBridgeThread=a;g.createBridgeThreadTimestampsUpdated=b}),98);
__d("MAWGetOrCreateThreadTxns",["MAWAdminMsgBuildTxns","MAWBridgeThread","MAWBridgeTypes","MAWDbThread","MAWDexieTable","MAWFolderTypes","MAWGating","MAWIndexedDb","WADualSendMsgUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a!=null&&b!=null){var c=d("WATimeUtils").fromMillisTime(a),e=d("WATimeUtils").fromMillisTime(b);return d("WATimeUtils").castToMillisTime(Math.max(c,e))}return(c=a)!=null?c:b}function a(a,b){var c=b.authoritativeThreadKey,e=b.clientThreadKey,f=b.createTs,g=b.deduplicationKey,i=b.folder,j=b.jid,k=b.lastActivityTimestamp,l=b.lastReadWatermarkTimestamp,m=function(){return a.threads.get({jid:j}).then(function(b){if(b==null){var m,n;m=(m=(m=k)!=null?m:f)!=null?m:d("WATimeUtils").millisTime();var o=m!=null?d("WATimeUtils").castToMillisTime(m-1):null;n=(n=l)!=null?n:o;var p={authoritativeThreadKey:c!=null?c:void 0,deduplicationKey:g,folder:i!=null?i:d("MAWFolderTypes").FOLDER_ID.INBOX,jid:j,lastReadMsg:null,lastReadMsgReceiptSent:null,lastReadMsgTs:n,newestMsg:null,newestMsgTs:m,nextInChatMsgId:1,oldestMsg:null,optimisticThreadKey:(o=e)!=null?o:void 0,threadOrder:d("MAWDbThread").craftThreadOrder(m,j)};return a.threads.add(p).then(function(a){return{created:!0,thread:babelHelpers["extends"]({},p,{chatId:a})}})}else{var q=babelHelpers["extends"]({},b,{authoritativeThreadKey:(n=c)!=null?n:b.authoritativeThreadKey,cannotReplyReason:i!=null||e!=null?null:b.cannotReplyReason,deduplicationKey:i!=null||e!=null?g:b.deduplicationKey,folder:(o=i)!=null?o:b.folder,lastReadMsgTs:h(b.lastReadMsgTs,l),newestMsgTs:h(b.newestMsgTs,k),optimisticThreadKey:(m=e)!=null?m:b.optimisticThreadKey});return a.threads.update(b.chatId,q).then(function(){return{created:!1,thread:q}})}}).then(function(b){var e=b.created,f=b.thread;d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(f,f.optimisticThreadKey,c)});var g=e&&d("MAWGating").isOccamadillo()?d("MAWAdminMsgBuildTxns").writeE2EEThreadDescriptionMsg(a,f.chatId):d("MAWDexieTable").dexieResolve(f);if(!e){d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({folder:(e=f==null?void 0:f.folder)!=null?e:d("MAWFolderTypes").FOLDER_ID.INBOX,isDualSend:d("WADualSendMsgUtils").isDualSendJid(f.jid),threadId:f.chatId})})}return g.then(function(a){return{created:b.created,thread:a}})})};if(g!=null)return a.threads.get({deduplicationKey:g}).then(function(a){if(a!=null)return{created:!1,thread:a};else return m()});else return m()}g.getOrCreateThread=a}),98);
__d("MAWBridgeParticipants",["WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=a.deliveredWatermarkTs,e=a.lastReadActionTs,f=a.lastReadWatermarkTs,g=a.threadId,h=a.type;a=a.userJid;return{deliveredWatermarkTs:c||d("WATimeUtils").castToUnixTime(0),fbid:d("WAJids").extractUserId(a),isAdmin:h==="superadmin"||h==="admin",isDualSend:b,isInvited:h==="invitedParticipant",isSuperAdmin:h==="superadmin",lastReadActionTs:(c=e)!=null?c:d("WATimeUtils").castToUnixTime(0),readWatermarkTs:f||d("WATimeUtils").castToUnixTime(0),threadId:g}}function a(a){return{participants:a.map(function(a){var b=a.isDualSend;a=babelHelpers.objectWithoutPropertiesLoose(a,["isDualSend"]);return h(a,b)})}}g.createBridgeParticipant=h;g.createBridgeParticipants=a}),98);
__d("MAWDbParticipantTxns",["MAWBridgeParticipants","MAWBridgeTypes","MAWDbParticipant","MAWDexieTable","MAWIndexedDb","WAJids","WAResultOrError","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d,e){d===void 0&&(d="participant");return h(a,b,[{addressable:e,type:d,userJid:c}]).then(function(a){return a[0]})}function h(a,b,c,d){return i(a,c.map(function(a){return babelHelpers["extends"]({},a,{threadId:b})}),d)}function i(a,b,c){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);var e=[];b.forEach(function(a){var b=a.addressable,c=a.threadId,f=a.type;a=a.userJid;e.push({addressable:b,deliveredWatermarkTs:d("WATimeUtils").castToUnixTime(0),id:d("MAWDbParticipant").craftParticipantId(c,a),lastReadWatermarkTs:d("WATimeUtils").castToUnixTime(0),threadId:c,type:f,userJid:a})});return a.participants.bulkPut(e).then(function(){d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(e.map(function(a){return babelHelpers["extends"]({},a,{isDualSend:!!c})}))});return e})}function b(a,b,c){return a.participants.bulkPut(b).then(function(){b.length>0&&d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(b.map(function(a){return babelHelpers["extends"]({},a,{isDualSend:!!c})}))});return b})}function j(a,b,c){if(c.length===0)return d("MAWDexieTable").dexieResolve();c=c.map(function(a){return d("MAWDbParticipant").craftParticipantId(b,a)});return k(a,c)}function e(a,b,c){if(b.length===0)return d("MAWDexieTable").dexieResolve();b=b.map(function(a){return d("MAWDbParticipant").craftParticipantId(a,c)});return k(a,b)}function k(a,b){return a.participants.bulkDelete(b).then(function(){b.forEach(function(a){a=d("MAWDbParticipant").getThreadIdAndUserJidFromParticipantId(a);var b=a.threadId;a=a.userJid;d("MAWIndexedDb").afterTransaction({tag:"ParticipantRemoved",value:{threadId:b,userId:d("WAJids").extractUserId(a)}})})})}function f(a,b){return a.participants.where("threadId").equals(b)["delete"]()}function l(a,b,c,d,e,f){return m(a,[{deliveredWatermarkTs:c,isDualSend:f,lastReadActionTs:e,lastReadWatermarkTs:d,participantId:b}]).then(function(a){return a[0]})}function m(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);var c=new Map(),e=[];b.forEach(function(a){e.push(a.participantId),c.set(a.participantId,a)});return u(a,e).then(function(b){b=b.filter(Boolean);var e=[],f=[];b.forEach(function(a){var b=c.get(a.id);if(b==null)return;var d=b.deliveredWatermarkTs,g=b.isDualSend,h=b.lastReadActionTs;b=b.lastReadWatermarkTs;var i=a.deliveredWatermarkTs,j=a.lastReadWatermarkTs,k=a.lastReadActionTs,l=d>i,m=b>j,n=k==null||h>k;if(!l&&!m&&!n){f.push(a);return}e.push(babelHelpers["extends"]({},a,{deliveredWatermarkTs:l?d:i,isDualSend:g,lastReadActionTs:n?h:k,lastReadWatermarkTs:m?b:j}))});return a.participants.bulkPut(e.map(function(a){a.isDualSend;a=babelHelpers.objectWithoutPropertiesLoose(a,["isDualSend"]);return a})).then(function(){e.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"ReceivedReceipt",value:d("MAWBridgeTypes").createBridgeReceivedReceipt(a.threadId,d("WAJids").extractUserId(a.userJid),a.deliveredWatermarkTs,a.lastReadWatermarkTs,a.lastReadActionTs,a.isDualSend)})});return[].concat(e,f)})})}function n(a,b){return a.participants.where("threadId").equals(b).toArray()}function o(a,b){return a.participants.where("threadId").anyOf(b).toArray()}function p(a,b){return n(a,b).then(function(a){return a.filter(function(a){return a.type==="invitedParticipant"})})}function q(a,b,c){return a.participants.get(d("MAWDbParticipant").craftParticipantId(b,c)).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function r(a,b,c){return n(a,b).then(function(e){var f=e.map(function(a){return a.userJid});e=e.map(function(a){return{addressable:a.addressable,type:a.type,userJid:a.userJid}});return d("MAWDexieTable").dexieAll([j(a,b,f),h(a,c,e)]).then(function(){})})}function s(a,b){var e=Array.from(b.keys());return o(a,e).then(function(e){var f=e.map(function(a){return d("MAWDbParticipant").craftParticipantId(a.threadId,a.userJid)});e=e.map(function(a){var d=b.get(a.threadId);if(d==null)throw c("err")("New Thread Id is null - should not happen flow");return{addressable:a.addressable,threadId:d,type:a.type,userJid:a.userJid}});return d("MAWDexieTable").dexieAll([k(a,f),i(a,e)]).then(function(){})})}function t(a,b,c,e){c=c.map(function(a){return d("MAWDbParticipant").craftParticipantId(b,a)});return c.length===0?d("MAWDexieTable").dexieResolve([]):u(a,c).then(function(b){var c=[];b.forEach(function(a){a!=null&&a.type!==e&&c.push(babelHelpers["extends"]({},a,{type:e}))});return c.length===0?[]:a.participants.bulkPut(c).then(function(){d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(c.map(function(a){return babelHelpers["extends"]({},a,{isDualSend:!1})}))});return c})})}function u(a,b){return a.participants.bulkGet(b)}g.addParticipant=a;g.bulkAddParticipants=h;g.bulkAddParticipantsInThreads=i;g.bulkUpdateParticipants=b;g.bulkDeleteParticipantsInThread=j;g.bulkDeleteParticipantAcrossThreads=e;g.bulkDeleteParticipants=k;g.deleteAllParticipantsForThread=f;g.updateParticipantTimestamps=l;g.bulkUpdateParticipantTimestamps=m;g.getParticipantsInThread=n;g.getParticipantsInThreads=o;g.getInvitedParticipantsInThread=p;g.getParticipant=q;g.migrateParticipantsToNewThread=r;g.bulkMigrateParticipantsToNewThreads=s;g.setParticipantTypesForUsers=t;g.bulkGetParticipants=u}),98);
__d("MAWAuthor",["MAWGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return a==null||a===d("WAJids").AUTHOR_SYSTEM?null:d("WAJids").isAuthorMe(a)?d("MAWGlobals").getMyUserJid():d("WAJids").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);
__d("MAWDbGroupInfoTxns",["MAWBridgeTypes","MAWIndexedDb","WADualSendMsgUtils","WAJids","WAResultOrError","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return i(a,c.jid).then(function(e){var f=c.participantVersion;e.success&&e.value.participantVersion!=null&&c.participantVersion==null&&(f=e.value.participantVersion);e=c.subject.content;e!=null&&e.length===0&&(e=void 0);var g={correspondingOpenThreadKey:d,creationTs:c.creationTs,creator:c.creator,groupJid:c.jid,inviter:c.inviter,name:e,nameOwner:c.subject.user,nameTs:c.subject.ts,participantVersion:f,threadId:b};return j(a,g).then(function(){return g})})}function h(a,b){return a.groupInfo.get({groupJid:b}).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function i(a,b){return h(a,b).then(function(c){return c.success?c:h(a,d("WAJids").unsafeCoerceToGroupJid(d("WADualSendMsgUtils").prependDualSendPrefix(b)))})}function b(a,b){return k(a,b).then(function(e){var f=new Map(),g=new Map();e.forEach(function(a,c){if(a==null){c=b[c];var e=d("WAJids").unsafeCoerceToGroupJid(d("WADualSendMsgUtils").prependDualSendPrefix(c));g.set(e,c)}else f.set(a.groupJid,d("WAResultOrError").makeResult(a))});var h=Array.from(g.keys());return k(a,h).then(function(a){a.forEach(function(a,b){b=g.get(h[b]);if(b==null)throw c("err")("originalGroupJid is null - should never happen for flow");a==null?f.set(b,d("WAResultOrError").makeError("missing")):f.set(b,d("WAResultOrError").makeResult(a))});return f})})}function j(a,b){return a.groupInfo.put(b).then(function(){d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedGroupInfo(b)})})}function e(a,b){return a.groupInfo.bulkPut(b).then(function(){b.forEach(function(a){return d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedGroupInfo(a)})})})}function k(a,b){return a.groupInfo.bulkGet(b)}function f(a,b){return a.groupInfo.get({threadId:b}).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function l(a,b){return a.groupInfo["delete"](b)}g.putGroupInfo=a;g.getGroupInfo=i;g.bulkGetGroupInfo=b;g.updateGroupInfo=j;g.bulkUpdateGroupInfo=e;g.getGroupInfos=k;g.getGroupInfoByThreadId=f;g.deleteGroupInfo=l}),98);
__d("MAWThreadSnippetForAdminOrEphemeralMsg",["MAWAdminMsgNormalized","MAWLocalizationUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.msgContent.adminType;a=d("MAWLocalizationUtils").isAdminMsgNormalized(c)?d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(c,a.msgContent.adminMsgContent):{contactIds:[],contents:a.msgContent.adminMsgContent};var e=a.contactIds;a=a.contents;return{snippetParams:{contactIDs:[].concat(e),strings:[].concat(a)},snippetSenderContactId:b,snippetType:c}}g["default"]=a}),98);
__d("MAWThreadSnippetForGifMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForImageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Image message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForPttMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ptt message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForRevokedMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Revoked message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForStickerMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForTextMsg",["MAWGating","MAWLocalizationType","MAWVault","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Text message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b,c){var e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,f={contactIDs:[],mentionJIDs:a.msgContent.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=c?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,f.contactIDs.push(b));if((a.specialTextSize===1||a.specialTextSize===2||a.specialTextSize===3)&&d("MAWGating").isHotLikeEnabled()){c=d("MAWVault").unvault(a.msgContent.content);f.strings.push(c==="\ud83d\udc4d"?"(Y)":a.msgContent.content)}else f.strings.push(a.msgContent.content);return{snippetParams:f,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForVideoMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Video message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForXMAMsg",["MAWJids","MAWLocalizationType","WAArmadilloXMA.pb","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected XMAMessageType when building a thread snippet"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA story mentions must have a target Jid"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message does not have xmaMessageType"]);u=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};a.xmaMessageType==null&&d("WALogger").ERROR(u());switch(a.xmaMessageType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(t()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(s()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(r()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(q()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(d("WAJids").isAuthorMe(a.author)){e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;var f=a.threadJid,g;f!=null&&(g=d("WAJids").interpretAsUserJid(f));if(g!=null){f=d("MAWJids").userIdFromJid(g);c.contactIDs.push(f)}else d("WALogger").ERROR(p())}else d("WAJids").isAuthorSystem(a.author)?d("WALogger").ERROR(o()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(n()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(m()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(l()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(k()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(j()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(i()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,c.contactIDs.push(b));break;default:d("WALogger").ERROR(h())}return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWEphemeralMsgUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){return!a.has(b.msgId)&&b.ephemeralMsgDisappeared!==!0}}f.filterNonExpiredMsg=a}),66);
__d("MAWThreadSnippetUtils",["MAWEphemeralMsgUtils","MAWGating","MAWLocalizationType","MAWLocalizationUtils","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(!d("MAWGating").isDeviceAdminMessagesSnippetDisabled())return!1;if(a.type===d("WAMsgType").MSG_TYPE.REVOKED)return!0;if(a.type!==d("WAMsgType").MSG_TYPE.ADMIN)return!1;a=a.msgContent.adminType;return a===d("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG?!0:d("MAWLocalizationUtils").isDeviceChangeAdminMsg(a)}function i(a){return a.find(function(a){return!h(a)})}function a(a,b,c){return c==null?a.messages.where("thread").equals(b.chatId).reverse().limit(10).toArray().then(i):a.messages.where("thread").equals(b.chatId).filter(function(a){return d("MAWEphemeralMsgUtils").filterNonExpiredMsg(c)(a)&&!h(a)}).reverse().first()}g.isDbMsgDisabledForThreadSnippet=h;g.findMostRecentSnippet=i;g.findMostRecentSnippetMsgFromThread=a}),98);
__d("MAWThreadSnippetBuildTxns",["MAWBridgeTypes","MAWDbGroupInfoTxns","MAWDexieTable","MAWGlobals","MAWIndexedDb","MAWJids","MAWLocalizationType","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetForGifMsg","MAWThreadSnippetForImageMsg","MAWThreadSnippetForPttMsg","MAWThreadSnippetForRevokedMsg","MAWThreadSnippetForStickerMsg","MAWThreadSnippetForTextMsg","MAWThreadSnippetForVideoMsg","MAWThreadSnippetForXMAMsg","MAWThreadSnippetUtils","WADualSendMsgUtils","WAJids","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b;d("WAJids").isAuthorMe(a)?b=d("MAWJids").userIdFromJid(d("MAWGlobals").getMyUserJid()):d("WAJids").isAuthorSystem(a)||(b=d("MAWJids").userIdFromJid(a));return b}function i(a,b,e){var f=h(b.author);return d("MAWDexieTable").dexieAll([d("MAWDbGroupInfoTxns").getGroupInfoByThreadId(a,e.chatId)]).then(function(a){a=a[0];a=a.success;switch(b.type){case d("WAMsgType").MSG_TYPE.TEXT:return c("MAWThreadSnippetForTextMsg")(b,f,a);case d("WAMsgType").MSG_TYPE.IMAGE:return c("MAWThreadSnippetForImageMsg")(b,f);case d("WAMsgType").MSG_TYPE.VIDEO:return c("MAWThreadSnippetForVideoMsg")(b,f);case d("WAMsgType").MSG_TYPE.PTT:return c("MAWThreadSnippetForPttMsg")(b,f);case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return c("MAWThreadSnippetForAdminOrEphemeralMsg")(b,f);case d("WAMsgType").MSG_TYPE.GIF:return c("MAWThreadSnippetForGifMsg")(b,f);case d("WAMsgType").MSG_TYPE.STICKER:return c("MAWThreadSnippetForStickerMsg")(b,f);case d("WAMsgType").MSG_TYPE.REVOKED:return c("MAWThreadSnippetForRevokedMsg")(b,f);case d("WAMsgType").MSG_TYPE.XMA:return c("MAWThreadSnippetForXMAMsg")(b,f);default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:f,snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}})}function a(a,b,c,e){return d("MAWDexieTable").dexieAll([d("MAWDbGroupInfoTxns").getGroupInfoByThreadId(a,e)]).then(function(a){a=a[0];a=a.success;return j(b,c,a)})}function j(a,b,c){a=d("MAWJids").userIdFromJid(a);var e={contactIDs:[],strings:[]};c=c?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;e.contactIDs.push(a);e.strings.push(b);return{snippetParams:e,snippetSenderContactId:a,snippetType:c}}function k(a){d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.jid),snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:"0",snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET,threadId:a.chatId})});return null}function b(a,b){var c=function(c){return function(e){var f=e.snippetParams,g=e.snippetSenderContactId,h=e.snippetType;return a.threads.update(b.chatId,{snippetMsg:c.msgId}).then(function(){d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(b.jid),snippetParams:f,snippetSenderContactId:g,snippetType:h,threadId:b.chatId})});return c})}};return a.messages.where("thread").equals(b.chatId).last().then(function(e){if(e==null)return k(b);else if(d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(e))return d("MAWThreadSnippetUtils").findMostRecentSnippetMsgFromThread(a,b).then(function(d){return d==null?k(b):i(a,d,b).then(c(d))});return i(a,e,b).then(c(e))})}g.getSnippetContactId=h;g.buildThreadSnippet=i;g.buildReactionThreadSnippet=a;g.getReactionSnippetParams=j;g.updateThreadSnippet=b}),98);
__d("MAWDbReactionsTxns",["MAWAuthor","MAWBridgeTypes","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","MAWGK","MAWIndexedDb","MAWThreadSnippetBuildTxns","WADualSendMsgUtils","WALogger","WAMsgMap"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Deleted "," reactions"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted: "," reactions rows."]);i=function(){return a};return a}var j=function(a){return a};function a(a,b,c){var e=babelHelpers["extends"]({},b,{nextInChatMsgId:b.nextInChatMsgId+1}),f=d("MAWDexieTable").dexieResolve();k(c)&&(f=d("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(a,c.author,c.reaction,b.chatId).then(function(a){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(b.jid),snippetParams:c,snippetSenderContactId:e,snippetType:a,threadId:b.chatId})})}));return d("MAWDexieTable").dexieAll([a.threads.put(e),a.reactions.put(j(c)),f]).then(function(a){a=a[1];return a})}function b(a,b){return a.reactions.where("externalId").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).first()}function k(a){return a.author!=="@me"&&a.author!=="@system"&&a.reactToAuthor==="@me"&&a.reaction!=null&&c("MAWGK").msgr_reaction_thread_bump_dogfooding}function l(a,b){return a.reactions.where("reactToMsgId").anyOf(b).toArray()}function e(a,b){return l(a,[b])}function f(a,b){var c=b.author,d=b.chat;b=b.externalId;return a.reactions.where("externalId").equals(b).filter(function(a){return a.author===c&&a.threadJid===d}).first()}function m(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.reactions.where("externalId").anyOf(c).toArray().then(function(a){var c=d("MAWDbMsgUtil").convertMsgArrayToMap(a),e=new(d("WAMsgMap").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function n(a,b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.author,e=b.chatId;b=b.externalId;var f=d("MAWAuthor").getAuthorUserJid(c);return a.reactions.where("reactToExternalId").equals(b).filter(function(a){return d("MAWAuthor").getAuthorUserJid(a.reactToAuthor)===f&&d("MAWDbMsg").getThreadIdFromMsgId(a.reactionId)===e}).toArray()})).then(function(b){b=b.reduce(function(a,b){return a.concat(b)},[]);d("WALogger").LOG(i(),b.length);return a.reactions.bulkDelete(b.map(function(a){return a.rowId}))})}function o(a,b){return a.reactions.where("reactToMsgId").anyOf(b.map(function(a){return a.msgId}))["delete"]().then(function(a){d("WALogger").LOG(h(),a)})}g.coerceToReaction=j;g.putReaction=a;g.getReaction=b;g.isIncomingReaction=k;g.getReactionsFromMessages=l;g.getReactionsFromMessage=e;g.maybeGetReactionByProtocolMsgId=f;g.getReactionMapByProtocolMsgId=m;g.deleteReactionsByUniqueMsgIdentifiers=n;g.deleteAllReactionsForMessages=o}),98);
__d("MAWDbGroupInviteTxns",["MAWDbParticipant","MAWDexieTable","MAWGlobals","WAJids","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.groupInvites.put(b).then(function(){return b})}function b(a,b,c){return a.groupInvites["delete"]([c,b])}function c(a,b){return a.groupInvites.where(["invitedParticipantId","inviterJid"]).between([b,d("MAWDexieTable").DEXIE_MIN_KEY],[b,d("MAWDexieTable").DEXIE_MAX_KEY])["delete"]()}function h(a,b,c){return a.groupInvites.get([c,b])}function e(a,b){return a.groupInvites.where(["invitedParticipantId","inviterJid"]).between([b,d("MAWDexieTable").DEXIE_MIN_KEY],[b,d("MAWDexieTable").DEXIE_MAX_KEY]).toArray()}function f(a,b){if(b.type===d("WAMsgType").MSG_TYPE.GROUP_INVITE){var c=b.author;b=d("MAWDbParticipant").craftParticipantId(b.thread,b.invitedParticipantUserJid);c=c===d("WAJids").AUTHOR_ME?d("MAWGlobals").getMyUserJid():d("WAJids").authorAsUserJid(c);return!c?d("MAWDexieTable").dexieResolve():h(a,c,b)}else return d("MAWDexieTable").dexieResolve()}g.putGroupInvite=a;g.deleteGroupInvite=b;g.deleteGroupInvitesByInvitedParticipantId=c;g.maybeGetGroupInvite=h;g.getGroupInvitesByInvitedParticipantId=e;g.getAndCheckGroupInviteFromMsg=f}),98);
__d("MAWLoadGroupInvitesTxns",["MAWBridgeTypes","MAWDbGroupInviteTxns","MAWDbParticipant","MAWDexieTable","MAWIndexedDb","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=[],e=d("WAGlobals").getMyUserJid();b.forEach(function(b){return d("WAJids").switchOnMsgrChatJidType(b.jid,{group:function(){var f=d("MAWDbParticipant").craftParticipantId(b.chatId,e);c.push(d("MAWDbGroupInviteTxns").getGroupInvitesByInvitedParticipantId(a,f))},user:function(){}})});return d("MAWDexieTable").dexieAll(c).then(function(a){a.forEach(function(a,b){a.forEach(function(b,a){d("MAWIndexedDb").afterTransaction({tag:"GroupInviteUpdate",value:d("MAWBridgeTypes").createBridgeGroupInvite(b)})})})})}g.loadGroupInvites=a}),98);
__d("MAWDbContactsTxns",["LSDataTraceCheckPoint.re","MAWDexieTable","MAWTraceUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.contacts.where("contactJid").anyOf(b).toArray()}function b(a,b){return a.contacts.get({contactJid:b})}function h(a,b){b?d("MAWTraceUtils").recordCheckpointForTrace(a,c("LSDataTraceCheckPoint.re").labyrinthWebUploadContactNameNull,[],!1):d("MAWTraceUtils").recordCheckpointForTrace(a,c("LSDataTraceCheckPoint.re").labyrinthWebUploadContactNameNotNull,[],!1)}function e(a,b,c){if(b==null){c!=null&&h(c,!0);return d("MAWDexieTable").dexieResolve()}return a.contacts.get({contactJid:b}).then(function(a){if(a==null){c!=null&&h(c,!0);return null}c!=null&&h(c,!1);return a.nameForSearch})}g.getContacts=a;g.getContact=b;g.maybeGetContactName=e}),98);
__d("MAWLoadMessageRequestCapabilitiesTxns",["MAWBridgeTypes","MAWDbContactsTxns","MAWIndexedDb","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=b.map(function(a){return d("WAJids").interpretAsUserJid(a.jid)}).filter(Boolean);return d("MAWDbContactsTxns").getContacts(a,c).then(function(a){a.forEach(function(a,c){c=b[c];d("MAWIndexedDb").afterTransaction({tag:"OneToOneMessageRequestLoaded",value:d("MAWBridgeTypes").createBridgeOneToOneMessageRequestLoadedData(c.chatId,a)})})})}g.loadMessageRequestDataForThreads=a}),98);
__d("MAWBridgeMsgCountdown",["MAWDbMsg","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["createBridgeMsgsStartCountdown: msg ",", expiration ",", ms until countdown ",", duration ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling the messages starting countdown bridge event with remaning time less or equal to 0"]);i=function(){return a};return a}function a(a){return{msgs:a.map(function(a){var b,c=a.messageExpirationTs;b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(c==null||b==null)return;var e=d("WATimeUtils").cappedMillisecondsUntil(c);if(e<=0){d("WALogger").LOG(i());return}var f=b*1e3;e>f&&(e=f);d("WALogger").LOG(h(),a.msgId,c,e,b);return{chatId:a.thread,countdownTs:c,millisecondsUntilCountdownTs:e,msgId:a.msgId,ts:d("MAWDbMsg").getCanonicalTsFromMsg(a)}}).filter(Boolean)}}function b(a,b){return{countdownTs:b,msgId:a}}g.createBridgeMsgsStartCountdown=a;g.createBridgeMsgClearCountdown=b}),98);
__d("MAWBridgeXMA",["MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""]);h=function(){return a};return a}function i(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function a(a,b,c){var e=c.ctas,f=c.defaultCTA,g=c.defaultPreviewMediaId,j=c.faviconMediaId,k=c.headerMediaId,l=c.headerTitle,m=c.maxSubtitleNumOfLines,n=c.maxTitleNumOfLines,o=c.msgId,p=c.overlayIconGlyph,q=c.subtitleText,r=c.targetId,s=c.targetType,t=c.targetUsername,u=c.titleText,v=c.xmaId;c=c.xmaLayoutType;b!=null&&b.mediaType!==d("MAWDbMedia").IMAGE&&d("WALogger").WARN(h(),b.mediaType);return{ctas:e,defaultCTA:f,defaultPreviewMediaId:g,duration:null,faviconMediaId:j,filesize:b==null?void 0:b.size,headerMediaId:k,headerTitle:l,maxSubtitleNumOfLines:m,maxTitleNumOfLines:n,mediaType:b==null?void 0:b.mediaType,msgId:o,overlayIconGlyph:p,playableUrlMimeType:i(b==null?void 0:b.mediaType),previewHeight:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:b==null?void 0:(f=b.validatedImageInfo)==null?void 0:f.height,previewUrlMimeType:i(b==null?void 0:b.mediaType),previewWidth:b==null?void 0:(g=b.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,previewWidthLarge:b==null?void 0:(j=b.validatedImageInfo)==null?void 0:j.width,subtitleText:q,targetId:r,targetType:s,targetUsername:t,threadId:a,titleText:u,ts:b==null?void 0:b.ts,xmaId:v,xmaLayoutType:c}}function b(a,b){var c=a.msgId;a=a.thread;return{msgId:c,threadId:a,xmaId:b}}function c(a,b){var c=a.msgId;a=a.thread;return{msgId:c,threadId:a,xmaId:b}}g.createBridgeXMA=a;g.createBridgeXMAShareExpired=b;g.createBridgeXMAShareTombstoned=c}),98);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","RavenMessagingState","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("WAMsg").WARavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("WAMsg").WARavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("WAMsg").WARavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("WAMsg").WARavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("WAMsg").WARavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}};b=function(a){switch(a){case d("WAMsg").WARavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("WAMsg").WARavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("WAMsg").WARavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};function a(a,b){switch(b){case d("WAMsg").WARavenMsgEphemeralType.VIEW_ONCE:return a===d("WAMsg").WARavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("WAMsg").WARavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("WAMsg").WARavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("WAMsg").WARavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("WAMsg").WARavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWMediaAfterTxns",["MAWBridgeTypes","MAWIndexedDb","MAWRavenUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:d("MAWRavenUtils").getEphemeralMediaViewMode(a)}};function a(a,b,c){a=a.ravenEphemeralType!=null&&a.ravenEphemeralMediaState!=null?d("MAWBridgeTypes").createBridgeMedia(a.thread,b,c,h(a.ravenEphemeralType,a.ravenEphemeralMediaState)):d("MAWBridgeTypes").createBridgeMedia(a.thread,b,c);d("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:a})}g.handleNewMediaAfterTxn=a}),98);
__d("MAWLoadMsgsTxns",["MAWBridgeMsg","MAWBridgeMsgCountdown","MAWBridgeTypes","MAWBridgeXMA","MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsgTxns","MAWDbReactionsTxns","MAWDbXMATxns","MAWDexieTable","MAWGating","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWMediaAfterTxns","MAWXMAUtils","WADualSendMsgUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["EphemeralCounter: Showing UI counter for ",""]);h=function(){return a};return a}function i(a,b){return d("MAWDbMediaTxns").getMsgMediaPairFromMsgs(a,b).then(function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b[0],e=b[1];return d("MAWDbChunkTxns").hasMediaChunk(a,e.hashedPlaintextHash).then(function(a){d("MAWMediaAfterTxns").handleNewMediaAfterTxn(c,e,a)})}))})}function j(a,b,c){return!d("MAWGating").isXMAFeedPostShareEnabled()?d("MAWDexieTable").dexieResolve([]):d("MAWDbXMATxns").getXMAFromMsgs(a,b).then(function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){if(d("MAWXMAUtils").isXMAStoryReply(b.targetType))return;return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,b.defaultPreviewMediaId).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"NewXMA",value:d("MAWBridgeXMA").createBridgeXMA(c,a,b)})})}))})}function k(a,b){var c=b.author,e=b.reaction,f=b.reactToMsgId;b=b.ts;if(f==null||e==null)return;d("MAWIndexedDb").afterTransaction({tag:"UpsertReaction",value:d("MAWBridgeTypes").createBridgeUpsertReaction({author:c,chatId:a,reaction:e,reactToMsgId:f,ts:b})})}function l(a,b,c){b=b.map(function(a){a=a.msgId;return a});return d("MAWDbReactionsTxns").getReactionsFromMessages(a,b).then(function(a){a.forEach(function(a){return k(c,a)});return a})}function a(a,b,c,e,f){f===void 0&&(f=!1);return d("MAWDbMsgTxns").getMsgsFromOffset(a,b,c,e,f,!1).then(function(b){var c=b.msgs,e=babelHelpers.objectWithoutPropertiesLoose(b,["msgs"]);return d("MAWDexieTable").dexieAll(c.map(function(b){return d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,b)})).then(function(a){return babelHelpers["extends"]({msgs:c,replyMediaInfo:a},e)})}).then(function(c){var e=c.hasMore,g=c.msgs,k=c.replyMediaInfo;if(g.length>0){c=g.filter(function(a){return a.ephemeralCounterStarted});var m=g.map(function(a,b){if(d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType))return;return d("MAWBridgeMsg").createBridgeMsg(a,void 0,(k||[])[b])}).filter(Boolean);m.length>0&&d("MAWIndexedDb").afterTransaction({tag:"NewMsgs",value:{msgs:m}});c.length>0&&(d("WALogger").LOG(h(),c.map(function(a){return a.msgId})),d("MAWIndexedDb").afterTransaction({tag:"MsgsStartCountdown",value:d("MAWBridgeMsgCountdown").createBridgeMsgsStartCountdown(c)}));d("MAWIndexedDb").afterTransaction({tag:"MsgsLoaded",value:d("MAWBridgeTypes").createBridgeMsgsLoadedInfo(b,g,f,e,d("WADualSendMsgUtils").isDualSendJid((m=g[0])==null?void 0:m.threadJid))})}return d("MAWDexieTable").dexieAll([l(a,g,b),i(a,g),j(a,g,b)]).then(function(a){a=a[0];return{hasMore:e,msgs:g,reactions:a}})})}g.afterLoadReaction=k;g.loadMsgsAndMediaFromOffset=a}),98);
__d("MAWLoadThreadsTxns",["MAWBridgeParticipants","MAWBridgeThread","MAWBridgeTypes","MAWDbParticipantTxns","MAWDbReactionsTxns","MAWDexieTable","MAWGlobals","MAWIndexedDb","MAWLoadGroupInvitesTxns","MAWLoadMessageRequestCapabilitiesTxns","MAWLoadMsgsTxns","MAWThreadSnippetBuildTxns","WADualSendMsgUtils","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){b.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(a,e==null?void 0:e.get(a.jid))})});return d("MAWDexieTable").dexieAll([].concat(b.map(function(b){return j(a,b,c)}),[h(a,b),l(a,b),d("MAWLoadMessageRequestCapabilitiesTxns").loadMessageRequestDataForThreads(a,b),d("MAWLoadGroupInvitesTxns").loadGroupInvites(a,b)])).then(function(){return b})}function b(a,b,c){return d("MAWDexieTable").dexieAll([h(a,[b]),j(a,b,c),i(a,b)]).then(function(){m(a,b.chatId,d("WADualSendMsgUtils").isDualSendJid(b.jid))})}function h(a,b){if(b.length===0)return;return d("MAWDbParticipantTxns").getParticipantsInThreads(a,b.map(function(a){return a.chatId})).then(function(a){var c=new Map(b.map(function(a){return[a.chatId,a.jid]}));a=a.map(function(a){return babelHelpers["extends"]({},a,{isDualSend:(a=d("WADualSendMsgUtils").isDualSendJid(c.get(a.threadId)))!=null?a:!1})});d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(a)})})}function i(a,b){var c=b.chatId,e=b.newestMsg,f=b.snippetMsg;f=(f=f)!=null?f:e;return f==null?d("MAWDexieTable").dexieResolve():d("MAWDexieTable").dexieAll([a.messages.get({msgId:f}),d("MAWDbReactionsTxns").getReactionsFromMessages(a,[f])]).then(function(e){var f=e[0];e=e[1];if(f==null)return;e=e==null?void 0:e.slice().reverse().find(function(a){return d("MAWDbReactionsTxns").isIncomingReaction(a)&&(f==null?void 0:f.ts)<a.ts});e!=null&&d("MAWLoadMsgsTxns").afterLoadReaction(c,e);return k(a,f,b,e).then(function(a){if(a!=null){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(b.jid),snippetParams:c,snippetSenderContactId:e,snippetType:a,threadId:b.chatId})})}})})}function j(a,b,c){var e=b.chatId;b=b.newestMsg;return b==null?d("MAWDexieTable").dexieResolve():d("MAWLoadMsgsTxns").loadMsgsAndMediaFromOffset(a,e,b,c,!0)}function k(a,b,c,e){return e!=null?d("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(a,e==null?void 0:e.author,e==null?void 0:e.reaction,c.chatId):b==null?d("MAWDexieTable").dexieResolve(null):d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,b,c)}function l(a,b){var c=[];b.forEach(function(a){return d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(a){return c.push(a)},user:function(){}})});return a.groupInfo.bulkGet(c).then(function(a){a.forEach(function(a){a!=null&&d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedGroupInfo(a)})})})}function m(a,b,c){var e=d("MAWGlobals").getMyUserJid();return d("MAWDbParticipantTxns").getParticipant(a,b,e).then(function(a){if(!a.success){d("WALogger").LOG(["[Occamadillo] User is not a participant of thread\n        "+b.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]);a={cannotReplyReason:"viewer_not_subscribed",isDualSend:c,threadId:b};d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread(a)})}})}g.loadContentsForThreads=a;g.loadParticipantsAndMsgs=b}),98);
__d("MAWThreadFetchAndEmitTxns",["MAWDexieTable","MAWGetOrCreateThreadTxns","MAWLoadThreadsTxns","MAWThreadManagementTxns","WAJids","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected create thread for 1-1 thread in missing_thread case for ",""]);h=function(){return a};return a}function a(a,b,c,e){return i(a,b,c,e).then(function(b){return b==null||b.thread==null?null:d("MAWLoadThreadsTxns").loadContentsForThreads(a,[b.thread],1).then(function(){return b})})}function i(a,b,c,e){return d("WAJids").switchOnMsgrChatJidType(b,{group:function(b){return d("MAWThreadManagementTxns").getOrRepairGroupThreadByJid(a,b,c)},user:function(b){var f;return d("MAWThreadManagementTxns").getOrSetupOneToOneThread(a,{createTs:e==null?void 0:d("WATimeUtils").castUnixTimeToMillisTime(e),folder:(f=c)!=null?f:void 0,userJid:b})}})}function b(a,b,c,e,f){return d("WAJids").switchOnMsgrChatJidType(b,{group:function(b){return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:f==null?void 0:d("WATimeUtils").castUnixTimeToMillisTime(f),folder:e,jid:b})},user:function(a){d("WALogger").ERROR(h(),c);return d("MAWDexieTable").dexieResolve()}})}function c(a,b,c,e){return d("WAJids").switchOnMsgrChatJidType(b,{group:function(b){return d("MAWThreadManagementTxns").getGroupThreadByJidForIncomingMsg(a,b,c)},user:function(b){var f;return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:e==null?void 0:d("WATimeUtils").castUnixTimeToMillisTime(e),folder:(f=c)!=null?f:void 0,jid:b})}})}function e(a,b){b=Array.from(b);return a.threads.where("jid").anyOf(b).toArray().then(function(b){return d("MAWLoadThreadsTxns").loadContentsForThreads(a,b.filter(Boolean),1).then(function(){})})}g.fetchAndEmitThread=a;g.fetchOrSetupThread=i;g.setupMissingGroupThread=b;g.fetchThreadForIncomingMsgs=c;g.emitThreadContents=e}),98);
__d("MAWBridgeUpload",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e,f){return{actionType:e,echoDocument:d,messageId:a,sortOrderMs:c,threadId:b,traceId:f}}function b(a,b,c,d,e,f){return{actionType:f,echoDocument:e,folderType:b,threadId:a,transportKey:c,ts:d}}function c(a,b,c,d,e,f){return{deliveryObjectId:a,mediaType:b,messageId:c,productType:d,threadId:e,traceId:f}}f.createBridgeUploadMessage=a;f.createBridgeUploadThread=b;f.createBridgeUploadAttachment=c}),66);
__d("EchoThread",["invariant","$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils"],(function(a,b,c,d,e,f,g,h){"use strict";var i="Thread-ID",j="Display-Name",k="Display-Image-URL",l="Sort-Order",m="Display-Timestamp",n="Is-Group-Thread",o="Needs-Admin-Approval-For-New-Participant",p="Custom-Emoji",q="Mute-Expiration-Timestamp",r="Folder-Type",s="Ephemeral-Options-Duration",t="Ephemeral-Options-Last-Updated",u="Participants",v="Admin-Type",w="X-Thread-Type",x="X-Thread-ID",y=1,z=b("$InternalEnum")({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5}),A=b("$InternalEnum")({NONE:"none",ADMIN:"admin",SUPER_ADMIN:"super_admin"}),B=b("$InternalEnum")({UNKNOWN:0,ONE_TO_ONE:1,GROUP_THREAD:2,ROOM:3,MONTAGE:4,MARKETPLACE:5,FOLDER:6,ENCRYPTED_ONE_TO_ONE:7,ENCRYPTED_GROUP_DISAPPEARING:8,CARRIER_MESSAGING_ONE_TO_ONE:10,CARRIER_MESSAGING_GROUP:11,ENCRYPTED_ONE_TO_ONE_DISAPPEARING:13,ENCRYPTED_OVER_WA_ONE_TO_ONE:15,ENCRYPTED_OVER_WA_GROUP:16,COMMUNITY_GROUP:18});function C(a){a=z.cast(a);return(a=a)!=null?a:z.OTHER}function D(a){a=B.cast(a);return(a=a)!=null?a:B.UNKNOWN}function E(a,b){d("EchoEncodingUtils").echoSetStringField(a,i,b.threadId),d("EchoEncodingUtils").echoSetStringField(a,j,b.displayName),d("EchoEncodingUtils").echoSetStringField(a,k,b.displayImageUrl),d("EchoEncodingUtils").echoSetIntField(a,l,b.sortOrder),d("EchoEncodingUtils").echoSetIntField(a,m,b.displayTimestamp),d("EchoEncodingUtils").echoSetBooleanField(a,n,b.isGroupThread),d("EchoEncodingUtils").echoSetBooleanField(a,o,b.needsAdminApprovalForNewParticipant),d("EchoEncodingUtils").echoSetStringField(a,p,b.customEmoji),d("EchoEncodingUtils").echoSetIntField(a,q,b.muteExpirationTimestamp),d("EchoEncodingUtils").echoSetIntField(a,r,b.folderType),d("EchoEncodingUtils").echoSetIntField(a,s,b.ephemeralOptionsDurationInSec),d("EchoEncodingUtils").echoSetIntField(a,t,b.ephemeralOptionsLastUpdatedAuthoritativeTimestamp),d("EchoEncodingUtils").echoSetAddressListField(a,u,b.participantsList),F(a,b.adminList),b.xThreadType!=null&&d("EchoEncodingUtils").echoSetIntField(a,w,b.xThreadType),d("EchoEncodingUtils").echoSetStringField(a,x,b.xThreadId),d("EchoEncodingUtils").echoSetIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION,b.version)}function F(a,b){if(b==null||b.length===0)return;b.forEach(function(b){var c=b.adminType;c!==A.NONE&&d("EchoEncodingUtils").echoSetStringField(a,d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b.address,v),c)})}function G(a,b){var c=[];b.forEach(function(b){var e=d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b,v);e=d("EchoDecodingUtils").echoDecodeStringField(a,e);if(e.success){e=(e=A.cast(e.result))!=null?e:A.NONE;c.push({address:b,adminType:e})}});return c}function a(a){var b=new Map();E(b,a);return d("EchoEncodingUtils").echoEncodeFields(b)}function c(a){a=d("EchoDecodingUtils").echoDecodeFields(a);if(a.size===0)return null;var b=d("EchoDecodingUtils").echoDecodeStringField(a,i),c=d("EchoDecodingUtils").echoDecodeIntField(a,l),e=d("EchoDecodingUtils").echoDecodeIntField(a,r),f=d("EchoDecodingUtils").echoDecodeAddressListField(a,u),g=d("EchoDecodingUtils").echoDecodeBooleanField(a,n),v=d("EchoDecodingUtils").echoDecodeIntField(a,m),z=d("EchoDecodingUtils").echoDecodeIntField(a,w),A;z.success&&z.result!=null&&(A=D(z.result));if(b.success&&c.success&&e.success&&f.success&&g.success&&v.success&&A!=null){b.result!=null||h(0,47884);z=f.result;z!=null||h(0,47911);f={threadId:b.result,sortOrder:c.result,displayTimestamp:v.result,isGroupThread:g.result,folderType:C(e.result),participantsList:z,xThreadType:A};b=d("EchoDecodingUtils").echoDecodeStringField(a,j);b.success&&b.result!=null&&(f.displayName=b.result);c=d("EchoDecodingUtils").echoDecodeStringField(a,k);c.success&&c.result!=null&&(f.displayImageUrl=c.result);v=d("EchoDecodingUtils").echoDecodeNullableBooleanField(a,o);v.success&&v.result!=null&&(f.needsAdminApprovalForNewParticipant=v.result);g=d("EchoDecodingUtils").echoDecodeStringField(a,p);g.success&&g.result!=null&&(f.customEmoji=g.result);e=d("EchoDecodingUtils").echoDecodeNullableIntField(a,q);e.success&&e.result!=null&&(f.muteExpirationTimestamp=e.result);b=d("EchoDecodingUtils").echoDecodeNullableIntField(a,s);b.success&&b.result!=null&&(f.ephemeralOptionsDurationInSec=b.result);c=d("EchoDecodingUtils").echoDecodeNullableIntField(a,t);c.success&&c.result!=null&&(f.ephemeralOptionsLastUpdatedAuthoritativeTimestamp=c.result);v=G(a,z);v.length>0&&(f.adminList=v);g=d("EchoDecodingUtils").echoDecodeStringField(a,x);g.success&&g.result!=null&&(f.xThreadId=g.result);e=d("EchoDecodingUtils").echoDecodeNullableIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION);f.version=e.success&&e.result!=null?e.result:y;return f}else return null}g.ECHO_THREAD_MIGRATION_DOCUMENT_VERSION=y;g.FolderType=z;g.AdminType=A;g.XThreadType=B;g.encodeEchoThread=a;g.decodeEchoThread=c}),98);
__d("MAWUploadThreadTxns",["EchoCommonUtils","EchoThread","MAWDbContactsTxns","MAWDexieTable","MAWFolderTypes","MAWTimeUtils.bs","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("MAWFolderTypes").FOLDER_ID.INBOX:return d("EchoThread").FolderType.INBOX;case d("MAWFolderTypes").FOLDER_ID.PENDING:return d("EchoThread").FolderType.PENDING;case d("MAWFolderTypes").FOLDER_ID.ARCHIVED:return d("EchoThread").FolderType.ARCHIVED;default:return d("EchoThread").FolderType.INBOX}}function a(a){return h(a).toString()}function i(a,b){return a.participants.where("threadId").equals(b).toArray().then(function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){return d("MAWDbContactsTxns").maybeGetContactName(a,b.userJid).then(function(a){return d("EchoCommonUtils").craftEchoAddress(a,d("WAJids").userIdFromJid(b.userJid),"AdvancedCrypto")})}))})}function b(a,b){var c=d("WAJids").switchOnMsgrChatJidType(b.jid,{group:function(a){return!0},user:function(a){return!1}}),e=d("WAJids").switchOnMsgrChatJidType(b.jid,{group:function(a){return d("WAJids").groupIdFromJid(a)},user:function(a){return d("WAJids").userIdFromJid(a)}});a=i(a,b.chatId);return a.then(function(a){return{displayImageUrl:"",displayName:"",displayTimestamp:d("MAWTimeUtils.bs").getMillisTime(b.newestMsgTs)||0,folderType:h(b.folder),isGroupThread:c,participantsList:a,sortOrder:0,threadId:e,version:d("EchoThread").ECHO_THREAD_MIGRATION_DOCUMENT_VERSION,xThreadId:e,xThreadType:c?d("EchoThread").XThreadType.ENCRYPTED_OVER_WA_GROUP:d("EchoThread").XThreadType.ENCRYPTED_OVER_WA_ONE_TO_ONE}})}g.getFolderTypeAsText=a;g.constructEchoThread=b}),98);
__d("MAWBridgeEventTransmitter",["MAWBridge","MAWBridgeMsg","MAWBridgeTrace","MAWBridgeTypes","MAWBridgeUpload","MAWIndexedDb","MAWJidUtils","MAWTimeUtils.bs","MAWUploadThreadTxns","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"IssuePointQuery",value:{messageId:a,startSortKey:c,threadId:b}}]})}function b(a){d("MAWIndexedDb").afterTransaction({tag:"UploadThread",value:d("MAWBridgeUpload").createBridgeUploadThread(d("MAWJidUtils").threadIdForChatJid(a.jid),d("MAWUploadThreadTxns").getFolderTypeAsText(a.folder),"AdvancedCrypto",(a=d("MAWTimeUtils.bs").getMillisTime(a.newestMsgTs))!=null?a:d("WATimeUtils").castToMillisTime(1),null,2)})}function c(a,b,c,e,f){d("MAWIndexedDb").afterTransaction({tag:"MsgsLoaded",value:d("MAWBridgeTypes").createBridgeMsgsLoadedInfo(a,b,c,e,f)})}function e(a,b,c){d("MAWIndexedDb").afterTransaction({tag:"StartTrace",value:d("MAWBridgeTrace").createBridgeStartTraceData(a,b,c)})}function f(a,b,c){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTrace",value:d("MAWBridgeTrace").createBridgeStartTraceData(a,b,c)}]})}function h(a){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(a)}]})}function i(a,b,c,e,f,g,h){d("MAWIndexedDb").afterTransaction({tag:"ThreadBumped",value:d("MAWBridgeTypes").createBridgeBumpedThread(a,b,c,e,f,g,h)})}function j(a,b,c,e){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({cannotReplyReason:a,folder:b,isDualSend:c,threadId:e})}]})}function k(a,b,c){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessageRangesV2",value:{minMsgId:a,minTimestampMs:b,threadId:c}})}g.issuePointQueryOutsideTxn=a;g.uploadThreadAfterTxn=b;g.issueMsgLoadedEventAfterTxn=c;g.startTraceAfterTxn=e;g.startTraceOutsideTxn=f;g.issueNewMsgUiEventOutsideTxn=h;g.bumpThreadAfterTxn=i;g.updateThreadOutsideTxn=j;g.deleteMessageRangesV2AfterTxn=k}),98);
__d("MAWDbReceiptTxns",["WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpectedly fetched null data from a msgIdToReceiptData map"]);h=function(){return a};return a}function a(a,b,c,d){return i(a,[{deliveryReceipts:c==="delivered"?d:[],msgId:b,readReceipts:c==="read"?d:[],senderReceipts:c==="sender"?d:[]}]).then(function(a){return a[0]||{type:"missing"}})}function i(a,b){var c=b.map(function(a){return a.msgId}),e=new Map();b.forEach(function(a){e.set(a.msgId,a)});return a.receipts.where("msgId").anyOf(c).toArray().then(function(b){var c=b.map(function(a){var b=e.get(a.msgId);if(b==null){d("WALogger").ERROR(h());return null}var c=new Set(),f=a.statusTsPerUser,g=a.permittedIdentitiesPerDevice,i=b.deliveryReceipts,m=b.readReceipts;b=b.senderReceipts;[{receiptType:"delivered",receivers:i},{receiptType:"read",receivers:m},{receiptType:"sender",receivers:b}].forEach(function(a){var b=a.receiptType;a=a.receivers;a.forEach(function(a){var e=a.device;a=a.ts;var h=d("WAJids").extractUserJid(e),i=!1;if(b!=="sender"){var l=f.get(h);if(l==null)return;a=j(l,b,a);f.set(h,a);i=k(l,a)}l=g!=null?g["delete"](e):!1;(l||i)&&c.add(h)})});i=babelHelpers["extends"]({},a,{permittedIdentitiesPerDevice:l(g),statusTsPerUser:f});return{affectedUserJids:c,receipt:i,type:c.size>0?"updated":"unchanged"}}).filter(Boolean);return a.receipts.bulkPut(c.map(function(a){return a.receipt})).then(function(){return c})})}function j(a,b,c){var d=(a==null?void 0:a.deliveredTs)||c;a=a==null?void 0:a.readTs;b==="read"&&a==null&&(a=c);return{deliveredTs:d,readTs:a}}function k(a,b){return((b==null?void 0:b.deliveredTs)||0)>((a==null?void 0:a.deliveredTs)||0)||((b==null?void 0:b.readTs)||0)>((a==null?void 0:a.readTs)||0)}function l(a){if(a==null||a.size===0)return;return a}function b(a,b){b=b.map(function(a){return a.msgId});return a.receipts.bulkDelete(b)}function c(a,b){return a.receipts.bulkGet(b)}function e(a,b){return a.receipts.add(b)}function f(a,b){return a.receipts.bulkPut(b)}g.writeReceiptsForDevices=a;g.bulkWriteReceiptsForDevices=i;g.bulkDeleteAllReceiptsForMessages=b;g.getReceipts=c;g.addReceipt=e;g.bulkPutReceipt=f}),98);
__d("MAWGroupInviteManagementTxns",["MAWDbGroupInviteTxns","MAWDbParticipant","MAWDbParticipantTxns","MAWDexieTable","MAWGlobals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=!1;return d("MAWDbParticipantTxns").getInvitedParticipantsInThread(a,b).then(function(e){if(e.length===0){c=!0;var f=d("MAWGlobals").getMyUserJid();f=d("MAWDbParticipant").craftParticipantId(b,f);return d("MAWDbGroupInviteTxns").deleteGroupInvitesByInvitedParticipantId(a,f).then(function(){return c})}else{var g=[];e.forEach(function(c){c=d("MAWDbParticipant").craftParticipantId(b,c.userJid);g.push(d("MAWDbGroupInviteTxns").deleteGroupInvitesByInvitedParticipantId(a,c))});return d("MAWDexieTable").dexieAll(g).then(function(){return c})}})}g.deleteGroupInvitesByThread=a}),98);
__d("MAWThreadManagementTxns",["MAWBridgeEventTransmitter","MAWBridgeParticipants","MAWBridgeTypes","MAWDbGroupInfoTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbParticipant","MAWDbParticipantTxns","MAWDbReactionsTxns","MAWDbReceiptTxns","MAWDbThreadTxns","MAWDexieTable","MAWFolderTypes","MAWGetOrCreateThreadTxns","MAWGlobals","MAWGroupInviteManagementTxns","MAWIndexedDb","MAWJids","MAWLoadMessageRequestCapabilitiesTxns","MAWThreadFetchAndEmitTxns","WADualSendMsgUtils","WAJids","WALogger","WAMsgType","WASortedLists","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted "," media rows and "," chunk rows"]);h=function(){return a};return a}var i=30*d("WATimeUtils").DAY_SECONDS;function j(a,b){var c=b.authoritativeThreadKey,e=b.createTs,f=b.folder,g=b.lastActivityTimestamp,h=b.lastReadWatermarkTimestamp,i=b.offlineThreadingId,j=b.userJid;return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{authoritativeThreadKey:c,clientThreadKey:i,createTs:e,folder:f,jid:j,lastActivityTimestamp:g,lastReadWatermarkTimestamp:h}).then(function(b){var c=b.created,e=b.thread;b=[d("MAWLoadMessageRequestCapabilitiesTxns").loadMessageRequestDataForThreads(a,[e])];if(c){b.push(d("MAWDbParticipantTxns").addParticipant(a,e.chatId,d("WADualSendMsgUtils").isDualSendJid(j)?d("WADualSendMsgUtils").removeDualSendPrefixForUser(j):j));var f=d("MAWGlobals").getMyUserJid();f!==e.jid&&b.push(d("MAWDbParticipantTxns").addParticipant(a,e.chatId,f))}else b.push(d("MAWDbParticipantTxns").getParticipantsInThread(a,e.chatId).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(a.map(function(a){return babelHelpers["extends"]({},a,{isDualSend:d("WADualSendMsgUtils").isDualSendJid(e.jid)})}))})}));return d("MAWDexieTable").dexieAll(b).then(function(){return{created:c,thread:e}})})}function a(a,b){var c;c=(c=b.xThreadId)!=null?c:b.threadId;if(b.isGroupThread){b=d("MAWJids").toGroupJid(c);return m(a,b,d("MAWFolderTypes").FOLDER_ID.INBOX)}else{b=d("MAWJids").toUserJid(c);return j(a,{folder:d("MAWFolderTypes").FOLDER_ID.INBOX,userJid:b})}}function k(a,b,c){return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:d("WATimeUtils").castUnixTimeToMillisTime(b.creationTs),folder:c,jid:b.groupJid}).then(function(c){var e=c.created,f=c.thread;c=f.chatId;if(e){var g=b.threadId,h=babelHelpers["extends"]({},b,{threadId:c});return d("MAWDexieTable").dexieAll([d("MAWDbParticipantTxns").migrateParticipantsToNewThread(a,g,c),d("MAWDbGroupInfoTxns").updateGroupInfo(a,h)]).then(function(){return{created:e,groupInfo:h,thread:f}})}return{created:e,groupInfo:b,thread:f}})}function l(a,b,c){return d("MAWGetOrCreateThreadTxns").getOrCreateThread(a,{createTs:d("WATimeUtils").castUnixTimeToMillisTime(b.creationTs),folder:c,jid:b.groupJid}).then(function(a){var c=a.created;a=a.thread;return{created:c,groupInfo:b,thread:a}})}function m(a,b,c){return d("MAWDbGroupInfoTxns").getGroupInfo(a,b).then(function(b){return b.success?k(a,b.value,c):null})}function b(a,b,c){return d("MAWDbGroupInfoTxns").getGroupInfo(a,b).then(function(b){return b.success?l(a,b.value,c):null})}function n(a,b){var c=[];b.forEach(function(a){d("MAWDbMsg").isMediaMsg(a)&&c.push(a)});var e=[],f=[];c.forEach(function(a){a.mediaId!=null&&(e.push(a.mediaId),f.push(a.msgId))});return a.media.bulkGet(e).then(function(b){var c=[],e=[];b.forEach(function(a,b){if(a!=null){var g=f[b];a.msgIds=d("WASortedLists").filter(a.msgIds,function(a){return a!==g});a.mediaEntries["delete"](g);a.msgIds.length===0&&a.mediaEntries.size===0&&(a.plaintextHash!=null&&c.push(a.hashedPlaintextHash),e.push(a.mediaId))}});b=a.media.bulkDelete(e);var g=a.chunk.where("hashedPlaintextHash").anyOf(c)["delete"]();return d("MAWDexieTable").dexieAll([b,g]).then(function(){d("WALogger").LOG(h(),e.length,c.length)})})}function o(a,b){return a.messages.where("thread").equals(b.chatId).toArray().then(function(c){return p(a,b,c,!0)})}function e(a,b,c){var e=c==null?void 0:c.lastMessageTimestamp;if(c==null)return o(a,b);var f=a.messages.where("thread").equals(b.chatId).toArray();return f.then(function(f){var g=[],h=new Set();e!=null&&f.forEach(function(a){a.ts<=e+1&&(h.add(a.msgId),g.push(a))});if((c==null?void 0:c.messages.length)!==0){var i=new Set();c.messages.forEach(function(a){i.add((a=a.key)==null?void 0:a.id)});f.forEach(function(a){i.has(a.externalId)&&!h.has(a.msgId)&&(h.add(a.msgId),g.push(a))})}if(g.length!==f.length)for(var j of f)if(!h.has(j.msgId)&&j.type!==d("WAMsgType").ADMIN)return p(a,b,g,!1);return p(a,b,f,!0)})}function p(a,b,c,e){var f=d("WAJids").interpretAsGroupJid(b.jid),g=e?d("MAWDbThreadTxns").deleteThreadRow(a,b.chatId):d("MAWDexieTable").dexieResolve(),h=f==null&&e?d("MAWDbParticipantTxns").deleteAllParticipantsForThread(a,b.chatId):d("MAWDexieTable").dexieResolve(),i=d("MAWDexieTable").dexieResolve(!1),j=d("MAWDexieTable").dexieResolve();f!=null&&e&&(i=d("MAWGroupInviteManagementTxns").deleteGroupInvitesByThread(a,b.chatId),j=d("MAWDbGroupInfoTxns").deleteGroupInfo(a,f));return d("MAWDexieTable").dexieAll([n(a,c),d("MAWDbReceiptTxns").bulkDeleteAllReceiptsForMessages(a,c),d("MAWDbReactionsTxns").deleteAllReactionsForMessages(a,c),d("MAWDbMsgTxns").deleteMessages(a,c),g,h,j,i]).then(function(a){a[0];a[1];a[2];a[3];a[4];a[5];a[6];a=a[7];if(e){d("MAWBridgeEventTransmitter").uploadThreadAfterTxn(b);if(f!=null&&a){a=d("MAWGlobals").getMyUserJid();a=d("MAWDbParticipant").craftParticipantId(b.chatId,a);d("MAWIndexedDb").afterTransaction({tag:"DeleteGroupInvite",value:d("MAWBridgeTypes").createBridgeDeleteGroupInvite(a)})}d("MAWIndexedDb").afterTransaction({tag:"ThreadHidden",value:b.chatId})}else d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypes").createBridgeDeleteMessages(b.chatId,c)})})}function f(a,b,e,f,g,h){return!c("gkx")("1928")||h!=null?d("MAWDexieTable").dexieResolve():d("MAWThreadFetchAndEmitTxns").setupMissingGroupThread(a,b,e,f,g)}g.PENDING_DELETE_THREAD_EXPIRATION_IN_SEC=i;g.getOrSetupOneToOneThread=j;g.getOrCreateThreadFromEchoThread=a;g.getOrRepairGroupThread=k;g.getGroupThreadForIncomingMsg=l;g.getOrRepairGroupThreadByJid=m;g.getGroupThreadByJidForIncomingMsg=b;g.deleteAllThreadData=o;g.metaSyncChatDeleteThread=e;g.createMissingGroupThread=f}),98);
__d("MAWMsgCleaner",["Promise","WAAssertUnreachable","WALogger","WAShiftTimer","WATimeUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow "," msgs' content cleaned"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::update ",""]);j=function(){return a};return a}a="Unsend";e="Ephemeral";f="DeleteForMe";var k="PendingStanza",l="Xma",m={UNSEND:a,EPHEMERAL:e,DELETE_FOR_ME:f,PENDING_STANZA:k,XMA:l},n=function(){function a(a,b){var c=this;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){c.$2()});this.getNextTs=a.getNextTs;this.removeExpired=a.removeExpired;this.cleanerType=b;this.purgeEnabled=a.purgeEnabled;this.$1.forceRunNow()}var c=a.prototype;c.update=function(a){var b=o(this.cleanerType);d("WALogger").LOG(j(),b,a);this.$1.onOrBefore(d("WATimeUtils").cappedMillisecondsUntil(a))};c.$2=function(){var a=this;if(!this.purgeEnabled())return b("Promise").resolve();var c=o(this.cleanerType);d("WALogger").LOG(i(),c);return this.removeExpired().then(function(b){b>0&&d("WALogger").LOG(h(),c,b);return a.getNextTs()}).then(function(b){b!=null&&a.update(b)})};return a}();function o(a){switch(a){case"Unsend":return"UnsendMsgCleaner";case"Ephemeral":return"EphemeralCleaner";case"DeleteForMe":return"DeleteForMeCleaner";case"PendingStanza":return"PendingStanzaCleaner";case"Xma":return"XmaCleaner";default:return c("WAAssertUnreachable")(a)}}var p=n;g.UNSEND=a;g.EPHEMERAL=e;g.DELETE_FOR_ME=f;g.PENDING_STANZA=k;g.XMA=l;g.CLEANER_TYPE=m;g.MsgCleaner=n;g.MSG_CLEANER_FOR_TESTING_ONLY=p}),98);
__d("MAWPendingStanzaCleaner",["MAWGating","MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["PendingStanzaCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}var j=null,k=d("MAWGating").isUnsendGlobalEnabled()||d("MAWGating").isUnsendLocallyEnabled();function a(a){k&&(j==null&&(j=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.PENDING_STANZA)))}function b(a){if(k)if(j==null){var b="Trying to add new PendingStanzaCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),j.update(a)}function e(){return j}function f(){j=null}g.startPendingStanzaCleaner=a;g.addNewPendingStanzaCleanerTimestamp=b;g.getPendingStanzaCleaner_FOR_TESTING_ONLY=e;g.resetPendingStanzaCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWDbPendingStanzaTxns",["MAWDbPendingStanza","MAWPendingStanzaCleaner","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){var g=d("MAWDbPendingStanza").getPendingSuffix(f);return a.pendingStanzas.where("externalIdWithType").equals(b+"_"+g).filter(function(a){a=a.pendingContent;return a.type===f&&a.content.author===c&&a.content.thread!=null&&a.content.thread===e}).first()}function b(a,b,c,e,f){f=d("MAWDbPendingStanza").getPendingSuffix(f);var g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+c);c={deleteTs:g,externalIdWithType:e+"_"+f,pendingContent:b};return a.pendingStanzas.add(c).then(function(){d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(g)})}function c(a,b){var c=d("MAWDbPendingStanza").getPendingSuffix(d("MAWDbPendingStanza").PENDING_TYPE.DELETE_THREAD);return a.pendingStanzas.where("externalIdWithType").equals(b+"_"+c).toArray().then(function(a){var b=[];a.forEach(function(a){if(a.pendingContent.type==="DeleteThread"){a=a.pendingContent.content.metaSyncMessageRange.lastMessageTimestamp;a!=null&&b.push(a)}});if(b.length===0)return null;b.sort(function(a,b){return b-a});a=b[0];return{lastMessageTimestamp:a}})}function e(a){return a.pendingStanzas.toArray()}function f(a,b){b=b.map(function(a){return a.rowId});return a.pendingStanzas.bulkDelete(b)}g.maybeGetPendingStanzaByExternalId=a;g.putPendingStanza=b;g.maybeGetDeleteThreadFromPendingStanza=c;g.getAllPendingStanzas=e;g.deletePendingStanzas=f}),98);
__d("MAWDeleteForMeMsgContentCleaner",["MAWGating","MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["DeleteForMeMsgContentCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startDeleteForMeMsgContentCleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){d("MAWGating").isUnsendLocallyEnabled()&&(d("WALogger").LOG(j()),k==null&&(k=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.DELETE_FOR_ME)))}function b(a){if(d("MAWGating").isUnsendLocallyEnabled())if(k==null){var b="Trying to add new DeleteForMeContentCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startDeleteForMeMsgContentCleaner=a;g.addNewDeleteForMeMsgContentCleanerTimestamp=b;g.getDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWEphemeralUtil",["MAWAckLevel","MAWBridgeMsgCountdown","MAWDbMsg","MAWGlobals","MAWIndexedDb","MAWLocalizationType","WAArmadilloApplication.pb","WAJids","WALogger","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["The new ephemeral setting timestamp should be greater than the existing timestamp"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["New ephemeral duration should be different from the existing duration"]);i=function(){return a};return a}function a(a,b,c,d,e,f){d=d!==b&&c===a&&f<=e;return d||a>c}function b(a,b,c){if(a==null)return!0;a=a.ephemeralSetting;if(a!=null&&a.ephemeralExpirationInSec===b){d("WALogger").ERROR(i());return!1}if(a!=null&&a.ephemeralLastUpdatedOrSetTimestamp>c){d("WALogger").ERROR(h());return!1}return!0}function e(a){a={ack:d("MAWAckLevel").ACK.sent,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWGlobals").getDependencies().generateExternalId(),msgContent:{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES},ts:a,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return{unstoredDbMedia:null,unstoredDbMsg:a,unstoredDbReaction:null}}function f(a,b){var e;switch(b){case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:e=d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE;break;case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:e=d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING;break;default:throw c("err")("Received unexpected screenshot action type")}b={ack:d("MAWAckLevel").ACK.sent,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWGlobals").getDependencies().generateExternalId(),msgContent:{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,screenshotActionType:e},ts:a,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return{unstoredDbMedia:null,unstoredDbMsg:b,unstoredDbReaction:void 0}}function j(a){return d("WAJids").switchOnMsgrChatJidType(a,{group:function(a){throw c("err")("Received invalid chatJid. We only support ephemeral messaging in 1:1 threads.")},user:function(a){return a}})}function k(a){a!=null&&a.messageExpirationTs!=null&&a.ephemeralCounterStarted===!0&&d("MAWIndexedDb").afterTransaction({tag:"MsgClearCountdown",value:d("MAWBridgeMsgCountdown").createBridgeMsgClearCountdown(a.msgId,a.messageExpirationTs)})}g.shouldUpdateContactEphemeralSetting=a;g.shouldUpdateForOutgoingUserEphemeralSettingChange=b;g.buildUnstoredDbEphemeralSettingMsgWithoutContentPlaceholder=e;g.buildUnstoredDbEphemeralScreenshotActionMsgWithoutContentPlaceholder=f;g.getUserJidForEphemeralSetting=j;g.maybeClearEphemeralMsgCountdown=k}),98);
__d("MAWExpiredXMACleaner",["MAWGating","MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ExpiredXMACleaner: Adding timestamps backend(",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startExpiredXMACleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){d("MAWGating").isXMAFeedPostShareEnabled()&&(d("WALogger").LOG(j()),k==null&&(k=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.XMA)))}function b(a){if(d("MAWGating").isXMAFeedPostShareEnabled())if(k==null){var b="Trying to add new addNewExpiredXMACleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startExpiredXMACleaner=a;g.addNewExpiredXMACleanerTimestamp=b;g.getExpiredXMACleaner_FOR_TESTING_ONLY=e;g.resetExpiredXMACleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWCastToMsgrServerMediaType",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"]);h=function(){return a};return a}function a(a){switch(a){case"image":case"video":case"gif":case"sticker":return a;case"ptt":return"audio";case"xma-image":return"xma";default:d("WALogger").ERROR(h(),a);return null}}g.castToMsgrServerMediaType=a}),98);
__d("MAWMediaBackupTxns",["MAWDbMediaTxns","MAWDexieTable","MAWGating","Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fbid already exists for objectId"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mediaId or msgId cannot differ for an objectId in mediaBackup"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fbid already exists for objectId"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mediaId or msgId cannot differ for an objectId in mediaBackup"]);k=function(){return a};return a}function a(a,b,c,e,f){return e==null||!d("MAWGating").isMediaBackupTableEnabled()?d("MAWDexieTable").dexieResolve():d("MAWDbMediaTxns").maybeGetMediaBackupRowFromObjectId(a,e).then(function(g){if(g==null){var h={mediaId:b,msgId:c,objectId:e};f!=null&&(h=babelHelpers["extends"]({},h,{fbid:f}));return a.mediaBackup.add(h).then(function(a){return babelHelpers["extends"]({},h,{mediaBackupId:a})})}else if(g.mediaId!==b||g.msgId!==c){d("WALogger").ERROR(k());return g}else{if(g.fbid==null&&f!=null){var i=babelHelpers["extends"]({},g,{fbid:f});return a.mediaBackup.put(i).then(function(a){return i})}else d("WALogger").WARN(j());return g}})}function c(a,c){if(c==null||!d("MAWGating").isMediaBackupTableEnabled())return d("MAWDexieTable").dexieResolve();var e=[];c.forEach(function(a){a=a.objectId;a!=null&&e.push(a)});return d("MAWDbMediaTxns").maybeGetMediaBackupRowsFromObjectIds(a,e).then(function(e){var f=[],g=[];c.forEach(function(c){var j=c.objectId;if(j!=null){var k=e.get(j);if(k==null){j={mediaId:c.mediaId,msgId:c.msgId,objectId:j};var l=c.fbid;l!=null&&(j=babelHelpers["extends"]({},j,{fbid:l}),f.push(j))}else{(k.mediaId!==c.mediaId||k.msgId!==c.msgId)&&d("WALogger").ERROR(i());l=c.fbid;if(k.fbid==null&&l!=null){j=babelHelpers["extends"]({},k,{fbid:l});g.push(j)}else d("WALogger").WARN(h())}return b("Promise").all([a.mediaBackup.bulkAdd(f),a.mediaBackup.bulkPut(g)])}})})}g.linkMediaBackup=a;g.bulkLinkMediaBackup=c}),98);
__d("MAWMediaManagementTxns",["MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWMediaBackupTxns","WALogger","WAMediaUtils","WASortedLists","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] media entry is missing, can't upate media with encoded data"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] media entry is missing, can't upate media info"]);i=function(){return a};return a}function j(a,b,c,e,f,g,h,i,j,k,l){l===void 0&&(l=!1);return d("MAWDbMediaTxns").maybeGetMediaFromHash(a,i).then(function(n){var o=m(g,j,k);if(n){var p=o?n.mediaEntries.set(b,o):n.mediaEntries,q=babelHelpers["extends"]({},n,{mediaEntries:p,msgIds:d("WASortedLists").addToSet(n.msgIds,b)});return a.media.put(q).then(function(c){var e=d("MAWDexieTable").dexieResolve();l||(e=d("MAWDbMsgTxns").updateMediaId(a,b,c));return e.then(function(){return d("MAWMediaBackupTxns").linkMediaBackup(a,c,b,j,k).then(function(){return q})})})}else{p=new Map();o&&p.set(b,o);var r=babelHelpers["extends"]({hashedPlaintextHash:i,mediaEntries:p,mediaType:e,msgIds:d("WASortedLists").singleElement(b),plaintextHash:c,size:f,ts:d("WATimeUtils").unixTime()},h);j!=null&&(r=babelHelpers["extends"]({},r,{objectId:j}));k!=null&&(r=babelHelpers["extends"]({},r,{fbid:k}));return a.media.add(r).then(function(c){var e=d("MAWDexieTable").dexieResolve();l||(e=d("MAWDbMsgTxns").updateMediaId(a,b,c));return e.then(function(){var e=babelHelpers["extends"]({},r,{mediaId:c});return d("MAWMediaBackupTxns").linkMediaBackup(a,e.mediaId,b,j,k).then(function(){return e})})})}})}var k=function(a,b,e,f,g,h,i,k,l,m){m===void 0&&(m=!1);return d("MAWDbMsgTxns").maybeGetMsg(a,b).then(function(d){if(d==null)throw c("err")("Do not have the media message "+b+" in db when attachHashToMediaMsg");else return j(a,b,e,i,k,void 0,l,f,g,h,m)})};f=function(a,b,c){return d("MAWDbMediaTxns").maybeGetMediaFromHash(a,b).then(function(b){if(b!=null){b=babelHelpers["extends"]({},b,c);return a.media.update(b.mediaId,b).then(function(){})}else d("WALogger").WARN(i())})};var l=function(a,b,c,e){return d("MAWDbMediaTxns").maybeGetMediaFromHash(a,b).then(function(b){if(b!=null){var f=e?b.mediaEntries.set(c,e):b.mediaEntries;b=babelHelpers["extends"]({},b,{mediaEntries:f});a.media.update(b.mediaId,b)}else d("WALogger").WARN(h())})};function a(a,b,c,e,f,g,h,i,j,l,m){m===void 0&&(m=!1);return d("MAWDexieTable").dexieAll([k(a,b,e,f,g,h,i,l.size,j,m),d("MAWDbChunkTxns").getOrCreateMediaChunk(a,e,f,c,l.type)]).then(function(a){a=a[0];return a})}function m(a,b,c){var e;a=a;a!=null&&b!=null&&(e=d("WAMediaUtils").decodeMediaEntryData(a),a=d("WAMediaUtils").encodeMediaEntryWithUpdatedObjectId(e,b));a!=null&&c!=null&&(e=d("WAMediaUtils").decodeMediaEntryData(a),a=d("WAMediaUtils").encodeMediaEntryWithUpdatedFbid(e,c));return a}function b(a,b,c){var e=new Map();a.mediaEntries.forEach(function(a,f){var g=d("WAMediaUtils").decodeMediaEntryData(a);g=g.objectId===b?d("WAMediaUtils").encodeMediaEntryWithUpdatedFbid(g,c):a;e.set(f,g)});return e}function e(a,b){var c=[],e=new Map();b.forEach(function(a){c.push(a.hashedPlaintextHash),e.set(a.hashedPlaintextHash,a)});return d("MAWDbMediaTxns").maybeBulkGetMediaFromHash(a,c).then(function(f){var g=f.reduce(function(a,b){a.set(b.hashedPlaintextHash,b);return a},new Map()),h=[],i=[];b.forEach(function(a){var b=g.get(a.hashedPlaintextHash);a=e.get(a.hashedPlaintextHash);if(a==null)return;var c=m(a==null?void 0:a.entry,a==null?void 0:a.objectId,a==null?void 0:a.fbId);if(b){var f=c?b.mediaEntries.set(a.msgId,c):b.mediaEntries;f=babelHelpers["extends"]({},b,{mediaEntries:f,msgIds:d("WASortedLists").addToSet(b.msgIds,a.msgId)});h.push(f)}else i.push(o(c,a))});return d("MAWDexieTable").dexieAll([a.media.bulkAdd(i),a.media.bulkPut(h)]).then(function(){return d("MAWDbMediaTxns").maybeBulkGetMediaFromHash(a,c).then(function(b){var c=b.reduce(function(a,b){var c=e.get(b.hashedPlaintextHash);c!=null&&!c.isXMAShare&&a.set(c.msgId,b.mediaId);return a},new Map());return d("MAWDbMsgTxns").bulkUpdateMediaId(a,c).then(function(c){return d("MAWMediaBackupTxns").bulkLinkMediaBackup(a,n(b,e)).then(function(){return b})})})})})}function n(a,b){return a.map(function(a){var c;c=(c=b.get(a.hashedPlaintextHash))==null?void 0:c.msgId;if(c!=null)return{fbid:a.fbid,mediaId:a.mediaId,msgId:c,objectId:a.objectId}}).filter(Boolean)}function o(a,b){var c;a=a?new Map([[b.msgId,a]]):new Map();return babelHelpers["extends"]({fbid:(c=b.fbId)!=null?c:void 0,hashedPlaintextHash:b.hashedPlaintextHash,mediaEntries:a,mediaType:b.mediaType,msgIds:d("WASortedLists").singleElement(b.msgId),objectId:(c=b.objectId)!=null?c:void 0,plaintextHash:b.plaintextHash,size:b.size,ts:d("WATimeUtils").unixTime()},b.mediaInfo)}g.linkMedia=j;g.attachHashToMediaMsg=k;g.updateMediaEntryWithValidatedMediaInfo=f;g.updateMediaWithEncodedMediaEntryData=l;g.attachHashAndSaveMedia=a;g.updateBackupFbidInMediaEntries=b;g.bulkLinkMedia=e}),98);
__d("MAWMsgType",["WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([d("WAMsgType").MSG_TYPE.IMAGE,d("WAMsgType").MSG_TYPE.VIDEO,d("WAMsgType").MSG_TYPE.PTT,d("WAMsgType").MSG_TYPE.GIF,d("WAMsgType").MSG_TYPE.STICKER,d("WAMsgType").MSG_TYPE.XMA,d("WAMsgType").MSG_TYPE.RAVEN,d("WAMsgType").MSG_TYPE.DOCUMENT_FILE]);a=function(a){return h.has(a)};g.isMAWSupportedMediaType=a}),98);
__d("MAWHandleUnstoredMediaTxns",["MAWBridgeUpload","MAWCastToMsgrServerMediaType","MAWDbChunkTxns","MAWDexieTable","MAWGating","MAWGlobals","MAWIndexedDb","MAWJidUtils","MAWMediaAfterTxns","MAWMediaManagementTxns","MAWMediaUtils","MAWMsgType","WALogger","WAMediaUtils","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing mandatory args for incoming media msg"]);h=function(){return a};return a}function a(a,b,c,e){e===void 0&&(e=!1);var f={validatedAudioInfo:b.validatedAudioInfo,validatedImageInfo:b.validatedImageInfo,validatedVideoInfo:b.validatedVideoInfo},g=d("MAWMediaUtils").genHMACPlaintextHash(b.plaintextHash),i=d("WAMediaUtils").decodeMediaEntryData(b.mediaEntry),j=i.objectId!=null?d("WAMediaUtils").stringToDeliveryObjectId(i.objectId):null;return d("MAWDexieTable").dexieAll([d("MAWMediaManagementTxns").linkMedia(a,c.msgId,b.plaintextHash,b.mediaType,b.size,b.mediaEntry,f,g,j,void 0,e),d("MAWDbChunkTxns").hasMediaChunk(a,g)]).then(function(a){var b=a[0];a=a[1];c.type!==d("WAMsgType").MSG_TYPE.REVOKED&&!e&&d("MAWMediaAfterTxns").handleNewMediaAfterTxn(c,b,a);return b}).then(function(a){if(d("MAWGating").isAttachmentBackupEnabled()){var b=d("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(i.serverMediaType);if(d("MAWMsgType").isMAWSupportedMediaType(c.type)){var e=c.threadJid;j!=null&&b!=null&&e!=null?d("MAWIndexedDb").afterTransaction({tag:"UploadAttachment",value:d("MAWBridgeUpload").createBridgeUploadAttachment(j,b,c.externalId,d("MAWGlobals").getConfig().productTypeForEBAttachments,d("MAWJidUtils").threadIdForChatJid(e))}):d("WALogger").WARN(h())}}return a})}function b(a,b,c){var e={validatedAudioInfo:b.validatedAudioInfo,validatedImageInfo:b.validatedImageInfo,validatedVideoInfo:b.validatedVideoInfo},f=d("MAWMediaUtils").genHMACPlaintextHash(b.plaintextHash);return d("MAWMediaManagementTxns").linkMedia(a,c.msgId,b.plaintextHash,b.mediaType,b.size,b.mediaEntry,e,f).then(function(b){var d=babelHelpers["extends"]({},c,{mediaId:b.mediaId});return a.unrenderedMessages.put(d).then(function(){return b})})}g.handleUnstoredDbMedia=a;g.handleUnstoredMediaOfDeleteForMeMsg=b}),98);
__d("MAWUnsendMsgContentCleaner",["MAWGating","MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UnsendMsgContentCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startUnsendMsgContentCleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){d("MAWGating").isUnsendGlobalEnabled()&&(d("WALogger").LOG(j()),k==null&&(k=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.UNSEND)))}function b(a){if(d("MAWGating").isUnsendGlobalEnabled())if(k==null){var b="Trying to add new UnsendMsgContentCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startUnsendMsgContentCleaner=a;g.addNewUnsendMsgContentCleanerTimestamp=b;g.getUnsendMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetUnsendMsgContentCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWUpdateQuotedMsgTxns",["MAWAuthor","MAWBridgeMsg","MAWDexieTable","MAWIndexedDb","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,e,f){var g=d("MAWAuthor").getAuthorUserJid(e);return a.messages.where("quoteExternalId").equals(c).toArray().then(function(c){if(c.length===0)return;c=c.filter(function(a){var c=a.quote;a=a.thread;return d("MAWAuthor").getAuthorUserJid(c==null?void 0:c.content.author)===g&&a===b});var e=c.map(function(a){var b;b=Object.assign({},(b=a.quote)==null?void 0:b.content,f.content);b=babelHelpers["extends"]({},a.quote,f,{content:b});return babelHelpers["extends"]({},a,{quote:b})});return a.messages.bulkPut(e).then(function(){return e})})},i=function(a,b,c,e,f){f===void 0&&(f=d("WAMsgType").MSG_TYPE.UNAVAILABLE);f={content:{mediaId:void 0,msgContent:void 0,type:f}};return h(a,b,c,e,f).then(function(a){if(a==null)return;a.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a)})})})};a=function(a,b,c){c===void 0&&(c=d("WAMsgType").MSG_TYPE.UNAVAILABLE);var e=b.author,f=b.chat,g=b.externalId;return a.threads.get({jid:f}).then(function(b){if(b==null)return;return i(a,b.chatId,g,e,c)})};b=function(a,b,c){var e=c.author,f=c.externalId,g=c.mediaId,i=c.msgContent,j=c.ts;c=c.type;if(!d("WAMsgType").isQuotedMsgType(c))return d("MAWDexieTable").dexieResolve();g={author:e,externalId:f,mediaId:g,msgContent:i,ts:j,type:c};return h(a,b,f,e,{content:g})};g.updateQuotedMsg=h;g.disassociateQuotedMsg=i;g.disassociateQuotedMessageByProtocolMsgId=a;g.associateQuotedMessage=b}),98);
__d("MAWWriteMsgSideEffectTxns",["MAWDbMsg","MAWDbParticipant","MAWDbParticipantTxns","MAWDexieTable","WADualSendMsgUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("MAWDbMsg").getCanonicalTsFromMsg(b),e=b.author;return e!=="@me"&&e!=="@system"?d("MAWDbParticipantTxns").updateParticipantTimestamps(a,d("MAWDbParticipant").craftParticipantId(b.thread,e),c,c,c,d("WADualSendMsgUtils").isDualSendJid(b.threadJid)):d("MAWDexieTable").dexieResolve()}g.updateParticipantTimestampsForMsg=a}),98);
__d("MAWXMAManagementTxns",["MAWDexieTable","MAWHandleUnstoredMediaTxns","MAWXMAUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){f===void 0&&(f=!1);var g=b.unstoredFavicon,i=b.unstoredHeaderMedia,j=b.unstoredPreviews,k=new Map();if(!f){g!=null&&k.set(g.plaintextHash,d("MAWHandleUnstoredMediaTxns").handleUnstoredDbMedia(a,g,c,!0));if(i!=null){f=k.get(i.plaintextHash);f==null&&k.set(i.plaintextHash,d("MAWHandleUnstoredMediaTxns").handleUnstoredDbMedia(a,i,c,!0))}j!=null&&j.forEach(function(b){var e=k.get(b.plaintextHash);e==null&&k.set(b.plaintextHash,d("MAWHandleUnstoredMediaTxns").handleUnstoredDbMedia(a,b,c,!0))})}f=Array.from(k.values());return d("MAWDexieTable").dexieAll(f).then(function(d){var f=d.reduce(function(a,b){return a.set(b.plaintextHash,b)},new Map()),k=i!=null?f.get(i.plaintextHash):void 0,l=g!=null?f.get(g.plaintextHash):void 0,m=j!=null?j.map(function(a){return f.get(a.plaintextHash)}).filter(Boolean):[];d=m.map(function(a){return a.mediaId});return h(a,b.unstoredDbXMA,l==null?void 0:l.mediaId,k==null?void 0:k.mediaId,d,c,e).then(function(a){return{dbXMA:a,favicon:l,headerMedia:k,previews:[].concat(m).filter(Boolean)}})})}function h(a,b,c,d,e,f,g){b=babelHelpers["extends"]({},b,{associatedMessageId:g==null?void 0:g,defaultPreviewMediaId:e[0],faviconMediaId:c,headerMediaId:d,msgId:f.msgId,previewMediaIds:e});return a.xma.add(b).then(function(b){return a.xma.get(b)})}function b(a,b,c,e,f,g,h,i,j){var k=d("MAWXMAUtils").isXMAExpired(!1,j.targetExpiringAtSec),l=k?babelHelpers["extends"]({},j,{associatedMessageId:h==null?void 0:h,author:i.author,ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,externalId:i.externalId,faviconMediaId:void 0,headerMediaId:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,msgId:g,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetType:f,targetUsername:void 0,threadJid:i.chat,titleText:void 0}):babelHelpers["extends"]({},j,{associatedMessageId:h==null?void 0:h,author:i.author,defaultPreviewMediaId:b==null?void 0:b,externalId:i.externalId,faviconMediaId:e==null?void 0:e,headerMediaId:c==null?void 0:c,isTombstoned:!1,msgId:g,previewMediaIds:b!=null?[b]:[],targetType:f,threadJid:i.chat});return a.xma.add(l).then(function(a){return babelHelpers["extends"]({},l,{xmaId:a})})}g.handleUnstoredXMAContent=a;g.handleUnstoredDbXMA=h;g.saveXMA=b}),98);
__d("MAWWriteMsgTxns",["ArmadilloDataTraceType.bs","MAWAckLevel","MAWBridgeMsg","MAWBridgeTrace","MAWBridgeTypes","MAWBridgeXMA","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbPendingStanzaTxns","MAWDbReactionsTxns","MAWDbThread","MAWDbThreadTxns","MAWDbXMATxns","MAWDeleteForMeMsgContentCleaner","MAWDexieTable","MAWEphemeralAdminMsgBuildTxns","MAWEphemeralUtil","MAWExpiredXMACleaner","MAWFolderTypes","MAWGating","MAWHandleUnstoredMediaTxns","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWLocalizationType","MAWLocalizationUtils","MAWPendingStanzaCleaner","MAWThreadEvent","MAWThreadFetchAndEmitTxns","MAWThreadManagementTxns","MAWThreadSnippetBuildTxns","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetUtils","MAWTimeUtils.bs","MAWUnsendMsgContentCleaner","MAWUpdateQuotedMsgTxns","MAWUploadMessagesBackup","MAWWriteMsgSideEffectTxns","MAWXMAManagementTxns","MAWXMAUtils","WADualSendMsgUtils","WAJids","WALogger","WAMsgType","WAResultOrError","WATimeUtils","err","qex"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["more than one message matched the externalId: "," in the thread: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["fail to write revoke message in db"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeMsgAfterTransaction - sortOrderMs: ",""]);j=function(){return a};return a}var k=6*d("WATimeUtils").HOUR_SECONDS,l=30*d("WATimeUtils").DAY_SECONDS,m=new Set([d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE]);function n(a,b,c,e){e===void 0&&(e=0);return e>5?d("MAWDexieTable").dexieResolve(b):a.messages.where("[thread+sortOrderMs]").equals([c,b]).first().then(function(f){return f==null?b:n(a,d("MAWDbMsg").getSortOrderWithFallback(f)+1,c,e+1)})}function o(a,b,c,e){c=c.newestMsg;if(d("MAWGating").enableStanzaQueueChatProcessing()&&b.type===d("WAMsgType").MSG_TYPE.ADMIN&&m.has(b.msgContent.adminType))return n(a,d("MAWDbMsg").getSortOrderWithFallback(b),b.thread).then(function(a){return babelHelpers["extends"]({},b,{sortOrderMs:a})});else if(e!=null)return d("MAWDexieTable").dexieResolve(babelHelpers["extends"]({},b,{sortOrderMs:e}));else if(c==null)return d("MAWDexieTable").dexieResolve(babelHelpers["extends"]({},b,{sortOrderMs:d("MAWDbMsg").getSortOrderWithFallback(b)}));else return d("MAWDbMsgTxns").maybeGetMsg(a,c).then(function(a){if(a==null||a.type===d("WAMsgType").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE)&&a.sortOrderMs===0)return babelHelpers["extends"]({},b,{sortOrderMs:d("MAWDbMsg").getSortOrderWithFallback(b)});else{a=d("MAWDbMsg").getSortOrderWithFallback(a);return babelHelpers["extends"]({},b,{sortOrderMs:d("MAWDbMsg").getSortOrderFromPrevious(b,a)})}})}function a(a,b,e,f){var g=a.ts;g=d("WATimeUtils").castUnixTimeToMillisTime(g);var h=d("MAWTimeUtils.bs").getMillisTime(b.newestMsgTs)||d("WATimeUtils").castToMillisTime(0);g=g>h?g:h;h=a.msgId;var i=a.msgId;h=babelHelpers["extends"]({},b,{newestMsg:h,newestMsgTs:g,nextInChatMsgId:b.nextInChatMsgId+1,oldestMsg:i,threadOrder:d("MAWDbThread").craftThreadOrder(g,b.jid)});d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(a)||(h.snippetMsg=a.msgId);var j=b.oldestMsg!=null&&a.msgId!==b.oldestMsg,k=!d("MAWGating").isOccamadillo()&&x(h);k&&(h=babelHelpers["extends"]({},h,{archived:!1,folder:d("MAWFolderTypes").FOLDER_ID.INBOX}));e.push(a);f.push(h);e=d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(a)?null:c("MAWThreadSnippetForAdminOrEphemeralMsg")(a,d("MAWThreadSnippetBuildTxns").getSnippetContactId(a.author));f=h.chatId;var l=h,m=l.jid;l=l.lastReadMsgTs;q({dbMsg:a,isFirstMsg:!1,isOldestMsgUpdated:j,jid:m,lastActivityTs:g,lastReadTs:l,oldestMsg:i,prevOldestMsg:b.oldestMsg==null?void 0:b.oldestMsg,shouldBeUnarchived:k,snippet:e,threadId:f,updatedThread:h})}function p(a,b,c,e){e===void 0&&(e={});e=e;var f=e.isCiphertextUpdateForXMAMessageWithAssociatedMsg,g=f===void 0?!1:f;f=e.isFirstMsg;var h=f===void 0?!1:f;f=e.isOutgoing;var i=f===void 0?!1:f,k=e.openMessageOtid,l=e.openMessageParticipantCount,m=e.optimisticMsg,n=e.participantCount,p=e.quotedReplyAttachmentMeta,r=e.sortOrderMs;f=b.ts;e=d("WATimeUtils").castUnixTimeToMillisTime(f);f=d("MAWTimeUtils.bs").getMillisTime(c.newestMsgTs)||d("WATimeUtils").castToMillisTime(0);var s=e>f?e:f;return d("MAWDbMsgTxns").calculateOldestAndNewestMsg(a,c.oldestMsg,c.newestMsg,b,r).then(function(e){var f=e.newestMsg,t=e.oldestMsg,u=babelHelpers["extends"]({},c,{newestMsg:f,newestMsgTs:s,nextInChatMsgId:c.nextInChatMsgId+1,oldestMsg:t,threadOrder:d("MAWDbThread").craftThreadOrder(s,c.jid)});d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(b)||(u.snippetMsg=b.msgId);var v=c.oldestMsg!=null&&t!==c.oldestMsg,w=!d("MAWGating").isOccamadillo()&&x(u);w&&(u=babelHelpers["extends"]({},u,{archived:!1,folder:d("MAWFolderTypes").FOLDER_ID.INBOX}));f=(e=d("MAWTimeUtils.bs").getMillisTime(c.lastReadMsgTs))!=null?e:0;e=(e=d("MAWTimeUtils.bs").getMillisTime(c.newestMsgTs))!=null?e:0;f=f<e;(b.author===d("WAJids").AUTHOR_ME||b.type===d("WAMsgType").MSG_TYPE.ADMIN&&d("MAWLocalizationUtils").isParticipantChangeAdminMsg(b.msgContent.adminType)&&!f)&&(u=babelHelpers["extends"]({},u,{lastReadMsg:b.msgId,lastReadMsgTs:s}));e=g?d("MAWDexieTable").dexieResolve(b):o(a,b,c,r);return e.then(function(b){return d("MAWDexieTable").dexieAll([a.messages.add(b).then(function(a){return babelHelpers["extends"]({},b,{rowId:a})}),a.threads.put(u),d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(b)?null:d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,b,c)]).then(function(a){var b=a[0],e=a[1];a=a[2];var f=u,g=f.jid;f=f.lastReadMsgTs;if(b.altIndex===d("MAWDbMsg").SPAM_ALT_INDEX||b.altIndex===d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX)return b;i&&d("WALogger").LOG(j(),b.sortOrderMs);q({dbMsg:b,isFirstMsg:h,isOldestMsgUpdated:v,jid:g,lastActivityTs:s,lastReadTs:f,oldestMsg:t,openMessageOtid:k,openMessageParticipantCount:l,optimisticMsg:m,participantCount:n,prevOldestMsg:c.oldestMsg==null?void 0:c.oldestMsg,quotedReplyAttachmentMeta:p,shouldBeUnarchived:w,snippet:a,threadId:e,updatedThread:u});return b})})})}function q(a){var b=a.dbMsg,e=a.isFirstMsg,f=a.isOldestMsgUpdated,g=a.jid,h=a.lastActivityTs,i=a.lastReadTs,j=a.oldestMsg,k=a.openMessageOtid,l=a.openMessageParticipantCount,m=a.optimisticMsg,n=a.participantCount,o=a.prevOldestMsg,p=a.quotedReplyAttachmentMeta,q=a.shouldBeUnarchived,r=a.snippet,s=a.threadId;a=a.updatedThread;d("MAWIndexedDb").afterTransaction({tag:"StartTrace",value:d("MAWBridgeTrace").createBridgeStartTraceData(b,g,d("ArmadilloDataTraceType.bs").armadilloMessageSend,k,e,l,n,a.authoritativeThreadKey)});d("MAWXMAUtils").isXMAStoryReply(b.xmaMessageType)||d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(b,m,p)});if(r!=null){k=r.snippetParams;e=r.snippetSenderContactId;l=r.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadBumped",value:d("MAWBridgeTypes").createBridgeBumpedThread(s,d("WADualSendMsgUtils").isDualSendJid(g),h,i,l,k,e)})}o==null&&d("MAWIndexedDb").afterTransaction({tag:"MsgsLoaded",value:d("MAWBridgeTypes").createBridgeMsgsLoadedInfo(s,[b],!0,!1,d("WADualSendMsgUtils").isDualSendJid(b.threadJid))});q&&d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({cannotReplyReason:a.cannotReplyReason,folder:d("MAWFolderTypes").FOLDER_ID.INBOX,isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.jid),threadId:a.chatId})});f&&d("MAWIndexedDb").afterTransaction({tag:"UpdateMinMessage",value:{minMessageId:j,minTimestampMs:c("qex")._("263")?d("MAWDbMsg").getCanonicalTsFromMsg(b)*1e3:d("MAWDbMsg").getSortOrderWithFallback(b),threadId:s}})}function b(a,b,c){c=babelHelpers["extends"]({},c,{nextInChatMsgId:c.nextInChatMsgId+1});return d("MAWDexieTable").dexieAll([a.unrenderedMessages.add(b),a.threads.put(c)]).then(function(){})}function r(a,b){return b!=null&&b.lastMessageTimestamp!=null&&b.lastMessageTimestamp>=a.ts}function s(a,b,e,f,g){g===void 0&&(g=!1);var h=d("MAWGating").isBulkifyHIMEnabled()?d("MAWThreadFetchAndEmitTxns").fetchThreadForIncomingMsgs(a,e,f,b.ts):d("MAWThreadFetchAndEmitTxns").fetchOrSetupThread(a,e,f,b.ts);return h.then(function(h){var j=d("MAWThreadManagementTxns").createMissingGroupThread(a,e,b.type,f,b.ts,h);return j.then(function(f){var j=h!=null?h.thread:f==null?void 0:f.thread;if(j==null)return d("WAResultOrError").makeError({type:"missing_thread"});var l=h==null&&f!=null;return d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,b.externalId,j.chatId,b.author),d("MAWDbPendingStanzaTxns").maybeGetPendingStanzaByExternalId(a,b.externalId,b.author,j.chatId,d("MAWDbPendingStanza").PENDING_TYPE.REVOKED),d("MAWDbPendingStanzaTxns").maybeGetPendingStanzaByExternalId(a,b.externalId,b.author,j.chatId,d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME),d("MAWDbMsgTxns").checkIfMsgIsDeletedForMeOrRevoked(a,b.externalId,j.chatId,b.author),d("MAWDbPendingStanzaTxns").maybeGetDeleteThreadFromPendingStanza(a,e)]).then(function(e){var f=e[0],h=e[1],m=e[2],n=e[3];e=e[4];var o=b;o=e!=null&&r(o,e);if(n||o)return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:null});e=d("MAWDbMsg").craftMsgId(j.chatId,j.nextInChatMsgId);var q,s;if(f==null){var t=babelHelpers["extends"]({},b,{msgId:e,thread:j.chatId,threadJid:j.jid});if(m!=null&&m.pendingContent.type==="DeleteForMe"){var u={ack:t.ack,author:t.author,externalId:t.externalId,messageDeleteForMeTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+k),msgContent:(n=d("MAWDbMsg").getMsgContent(b))==null?void 0:n.content,msgId:t.msgId,thread:t.thread,threadJid:j.jid,ts:t.ts,type:d("WAMsgType").MSG_TYPE.DELETE_FOR_ME};return d("MAWDexieTable").dexieAll([d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:u.author,chatId:u.thread,externalId:u.externalId}]),a.unrenderedMessages.add(u),a.pendingStanzas["delete"](m.rowId)]).then(function(a){a[0];a=a[1];d("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(u.messageDeleteForMeTs);return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:babelHelpers["extends"]({},u,{rowId:a})})})}if(h!=null&&h.pendingContent.type==="Revoked"){o={ack:b.ack,altIndex:null,author:b.author,externalId:h.pendingContent.content.externalId,msgContent:d("MAWDbMsg").getMsgContent(b),msgId:e,originalTs:b.ts,revokedExternalId:h.pendingContent.content.revokedExternalId,thread:j.chatId,threadJid:j.jid,ts:h.pendingContent.content.ts,type:"Revoked",unsendMsgContentDeleteTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+k)};return d("MAWDexieTable").dexieAll([p(a,o,j),a.pendingStanzas["delete"](h.rowId)]).then(function(b){var e=b[0];if(e.type!==d("WAMsgType").MSG_TYPE.REVOKED){d("WALogger").ERROR(i());throw c("err")("fail to write revoke message in db")}return A(a,null,e,j,!0).then(function(){return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:e})})})}j.folder===d("MAWFolderTypes").FOLDER_ID.OTHER&&(t.altIndex=t.altIndex===d("MAWDbMsg").FUTUREPROOF_ALT_INDEX?d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX:d("MAWDbMsg").SPAM_ALT_INDEX);s=babelHelpers["extends"]({},t);q=function(b){return p(a,t,j,{isCiphertextUpdateForXMAMessageWithAssociatedMsg:g,quotedReplyAttachmentMeta:b}).then(function(b){s.altIndex!==d("MAWDbMsg").SPAM_ALT_INDEX&&s.altIndex!==d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX&&s.author!==d("WAJids").AUTHOR_ME&&d("MAWIndexedDb").afterTransaction({tag:"ThreadBumpedServer",value:{isCurrentDeviceSendingMsg:!1,isDualSend:d("WADualSendMsgUtils").isDualSendJid(j.jid),lastActivityTs:d("WATimeUtils").castUnixTimeToMillisTime(t.ts),threadId:j.chatId}});return d("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(a,t).then(function(){return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:b})})})}}else if(w(f,b)){s=babelHelpers["extends"]({},b,{msgId:f.msgId,rowId:f.rowId,serverTs:f.serverTs,sortOrderMs:f.sortOrderMs,thread:f.thread,threadJid:j.jid,ts:f.ts});var v=s;q=function(b){return a.messages.put(v).then(function(){return d("MAWDbThreadTxns").needsRetroactiveReadReceiptInThread(a,v)}).then(function(b){if(b){v.altIndex=d("MAWDbMsg").craftToBeReadAltIndex(f.thread);return a.messages.put(v)}}).then(function(){return d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,v)}).then(function(b){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(v,void 0,b)});d("MAWIndexedDb").afterTransactionThreadEvent({chatJid:j.jid,msgId:v.msgId},d("MAWThreadEvent").PLACEHOLDER_CONVERT_SUBSCRIPTION);if(v.msgId===j.newestMsg){v.rowId;b=babelHelpers.objectWithoutPropertiesLoose(v,["rowId"]);return d("MAWDexieTable").dexieAll([d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,v,j),d("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(a,b)]).then(function(a){a=a[0];var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(j.jid),snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:j.chatId})});return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:v})})}return d("WAResultOrError").makeResult({isUnknownGroup:l,msg:v})})}}return q!=null&&s!=null?d("MAWDexieTable").dexieAll([d("MAWUpdateQuotedMsgTxns").associateQuotedMessage(a,j.chatId,s),d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,s),d("MAWLoadReplyMediaTxns").getReplyMediaForMsg(a,s)]).then(function(a){var b=a[0],c=a[1],e=a[2];return q(c).then(function(a){b!=null&&b.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,e)})});return a})}):d("WAResultOrError").makeResult({isUnknownGroup:l,msg:null})})})})}function e(a,b,c,e,f){return s(a,b,e,f).then(function(b){if(!b.success)return b;var e=b.value.msg,f=b.value.isUnknownGroup;if(e==null)return d("WAResultOrError").makeResult({dbMedias:null,dbMsg:null,isUnknownGroup:f});if(e.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME)return d("MAWHandleUnstoredMediaTxns").handleUnstoredMediaOfDeleteForMeMsg(a,c,e).then(function(a){return d("WAResultOrError").makeResult({dbMedias:[a],dbMsg:e,isUnknownGroup:f})});else return d("MAWHandleUnstoredMediaTxns").handleUnstoredDbMedia(a,c,e).then(function(a){return d("WAResultOrError").makeResult({dbMedias:[a],dbMsg:e,isUnknownGroup:f})})})}function f(a,b,c,e,f){var g=d("MAWDexieTable").dexieResolve();return d("MAWDbXMATxns").maybeGetAssociatedXMAMsg(a,c.unstoredAssociatedMsg,e).then(function(h){var i=b,j=!1;h!=null&&h.type===d("WAMsgType").MSG_TYPE.CIPHERTEXT&&(i=babelHelpers["extends"]({},b,{serverTs:h.serverTs,sortOrderMs:h.sortOrderMs!=null?h.sortOrderMs-1:h.sortOrderMs,ts:h.ts}),j=!0);var k=c.unstoredDbXMA;h=c.unstoredAssociatedMsg;if(d("MAWXMAUtils").isXMAStoryReaction(k.targetType)&&h!=null&&h.msgContent!=null){h=h.msgContent;i=babelHelpers["extends"]({},b,{msgContent:h})}var l=k.targetExpiringAtSec,m=d("MAWXMAUtils").isXMAExpired(k.isTombstoned,l);m&&(i.isExpiredXmaMsg=!0);return s(a,i,e,f,j).then(function(h){if(!h.success)return h;!m&&l!=null&&d("MAWExpiredXMACleaner").addNewExpiredXMACleanerTimestamp(l);!d("MAWXMAUtils").isXMAStoryReaction(k.targetType)&&c.unstoredAssociatedMsg!=null&&(g=s(a,c.unstoredAssociatedMsg,e,f));return g.then(function(g){if(g!=null&&!g.success)return g;var f=g==null?void 0:g.value.msg,i=f==null?void 0:f.msgId,j=h.value.msg,l=(g==null?void 0:g.value.isUnknownGroup)||h.value.isUnknownGroup;if(j==null||g!=null&&f==null)return d("WAResultOrError").makeResult({dbAssociatedMsg:null,dbMedias:null,dbMsg:null,isUnknownGroup:l});if(j.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME||g!=null&&(f==null?void 0:f.type)===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME)return d("WAResultOrError").makeResult({dbAssociatedMsg:f,dbMedias:null,dbMsg:j,isUnknownGroup:l});else{d("MAWXMAUtils").isXMAStoryReaction(k.targetType)&&d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(j)});g=m?d("MAWXMAUtils").buildUnstoredTombstonedXMA(k):k;d("MAWXMAUtils").isXMAStoryMention(g.targetType)&&(g.ctas=d("MAWXMAUtils").removeCTAsForStoryMentionXMA(g));return d("MAWXMAManagementTxns").handleUnstoredXMAContent(a,babelHelpers["extends"]({},c,{unstoredDbXMA:g}),j,i,m).then(function(g){var h=g.dbXMA,i=g.favicon,k=g.headerMedia;g=g.previews;var n=[i,k].concat(g).filter(Boolean);if(h!=null&&!d("MAWXMAUtils").isXMAStoryReply(h.targetType)){m||d("MAWIndexedDb").afterTransaction({tag:"NewXMA",value:d("MAWBridgeXMA").createBridgeXMA(j.thread,g[0],h)});return d("WAResultOrError").makeResult({dbAssociatedMsg:f,dbMedias:m?[]:n,dbMsg:j,isUnknownGroup:l})}return t(a,b,c,e,g[0],f,m).then(function(){return d("WAResultOrError").makeResult({dbAssociatedMsg:f,dbMedias:n,dbMsg:j,isUnknownGroup:l})})})}})})})}function t(a,b,e,f,g,h,i){var j;if(h==null)throw c("err")("flow check, associate message is null");if(h.type!==d("WAMsgType").MSG_TYPE.TEXT)throw c("err")("flow check, this message type is only in text type");var k=b.author;if(k==="@system")throw c("err")("wrong author of story reply");var l=d("WAJids").interpretAsUserJid(f);if(l==null)throw c("err")("this is a flow check, participant jid can not be null");j=(j=(j=e.unstoredDbXMA.defaultCTA)==null?void 0:j.nativeUrl)!=null?j:(j=e.unstoredDbXMA.defaultCTA)==null?void 0:j.actionUrl;var m=e.unstoredDbXMA.targetType;k={author:k===d("WAJids").AUTHOR_ME?l:d("WAJids").AUTHOR_ME,externalId:e.unstoredDbXMA.externalId,mediaId:i?void 0:g==null?void 0:g.mediaId,sourceId:j,ts:b.ts,type:d("WAMsgType").MSG_TYPE.XMA,xmaMessageType:m};l={content:k,remoteJid:f};var n=babelHelpers["extends"]({},h,{quote:l});return a.messages.put(n).then(function(){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(n)})})}function u(a,b,c,e,f,g,h,i){var j=d("MAWGating").isBulkifyHIMEnabled()?d("MAWThreadFetchAndEmitTxns").fetchThreadForIncomingMsgs(a,f,h):d("MAWThreadFetchAndEmitTxns").fetchOrSetupThread(a,f,h);return j.then(function(j){var k=d("MAWThreadManagementTxns").createMissingGroupThread(a,f,"DbEphemeralSettingAdminMsg",h,e,j);return k.then(function(f){var h=j!=null?j.thread:f==null?void 0:f.thread,k=j==null&&f!=null;return h==null?d("WAResultOrError").makeError({type:"missing_thread"}):d("MAWEphemeralAdminMsgBuildTxns").writeEphemeralSettingAdminMsg(a,b,c,e,h,g,i).then(function(a){return a.success?d("WAResultOrError").makeResult({isUnknownGroup:k,msg:a.value}):a})})})}function v(a,b,c,e,f,g,h){var i=d("MAWGating").isBulkifyHIMEnabled()?d("MAWThreadFetchAndEmitTxns").fetchThreadForIncomingMsgs(a,e,g):d("MAWThreadFetchAndEmitTxns").fetchOrSetupThread(a,e,g);return i.then(function(i){var j=d("MAWThreadManagementTxns").createMissingGroupThread(a,e,"DbEphemeralScreenshotActionMsg",g,c,i);return j.then(function(e){var g=i!=null?i.thread:e==null?void 0:e.thread,j=i==null&&e!=null;return g==null?d("WAResultOrError").makeError({type:"missing_thread"}):d("MAWEphemeralAdminMsgBuildTxns").writeEphemeralScreenshotActionMsg(a,b,g,c,f,h).then(function(a){return a.success?d("WAResultOrError").makeResult({isUnknownGroup:j,msg:a.value}):a})})})}function w(a,b){return a!=null&&a.type===d("WAMsgType").MSG_TYPE.CIPHERTEXT&&b.type!==d("WAMsgType").MSG_TYPE.CIPHERTEXT}function x(a){return a.archived===!0&&a.cannotReplyReason!=="viewer_not_subscribed"}function y(a,b,e,f){var g=d("MAWGating").isBulkifyHIMEnabled()?d("MAWThreadFetchAndEmitTxns").fetchThreadForIncomingMsgs(a,e,f):d("MAWThreadFetchAndEmitTxns").fetchOrSetupThread(a,e,f);return g.then(function(g){var i=d("MAWThreadManagementTxns").createMissingGroupThread(a,e,"Revoke",f,b.ts,g);return i.then(function(f){var i=g!=null?g.thread:f==null?void 0:f.thread,j=g==null&&f!=null;return i==null?d("WAResultOrError").makeError({type:"missing_thread"}):a.messages.where("externalId").equals(b.revokedExternalId).toArray().then(function(f){f=f.filter(function(a){return a.author===b.author});if(f.length===0){var g={ack:d("MAWAckLevel").ACK.received,altIndex:null,author:b.author,externalId:b.externalId,revokedExternalId:b.revokedExternalId,thread:i.chatId,threadJid:i.jid,ts:b.ts,type:"Revoked"},k=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+l),m={deleteTs:k,externalIdWithType:b.revokedExternalId+"_"+d("MAWDbPendingStanza").PENDING_REVOKED,pendingContent:{content:g,type:d("MAWDbPendingStanza").PENDING_TYPE.REVOKED}};m=a.pendingStanzas.add(m);g=B(a,g.externalId,g.author,i).then(function(b){if(b)return d("MAWThreadSnippetBuildTxns").updateThreadSnippet(a,i)});return d("MAWDexieTable").dexieAll([m,g]).then(function(){d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(k);return d("WAResultOrError").makeResult({isUnknownGroup:j,msg:void 0})})}f.length>1&&d("WALogger").ERROR(h(),b.revokedExternalId,e);m=f[0];g=i;if(m==null)throw c("err")("this should not happen, here just to make flow happy");return z(a,m,g,b.externalId,b.revokedExternalId,b.serverTs,b.ts,j,!1)})})})}function z(a,b,c,e,f,g,h,i,j){var l={ack:b.ack,altIndex:null,author:b.author,externalId:e,mediaId:b.mediaId,msgContent:d("MAWDbMsg").getMsgContent(b),msgId:b.msgId,originalTs:(e=b.serverTs)!=null?e:b.ts,quote:b.quote,revokedExternalId:f,rowId:b.rowId,serverTs:g,sortOrderMs:b.sortOrderMs,thread:b.thread,threadJid:c.jid,ts:h,type:"Revoked",unsendMsgContentDeleteTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+k),xmaMessageType:b.xmaMessageType};if(j){d("MAWUploadMessagesBackup").sendDeleteEchoMessage(b,c.jid);return d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeResult({isUnknownGroup:i,msg:l}))}return A(a,b,l,c,!1).then(function(){return d("WAResultOrError").makeResult({isUnknownGroup:i,msg:l})})}function A(a,b,c,e,f){var g,h=B(a,c.externalId,c.author,e).then(function(){return d("MAWThreadSnippetBuildTxns").updateThreadSnippet(a,e)}),i=d("MAWDexieTable").dexieResolve();b!=null&&d("MAWXMAUtils").isXMAStoryReply((g=b.quote)==null?void 0:g.content.xmaMessageType)&&(i=E(a,b));return d("MAWDexieTable").dexieAll([h,a.messages.put(c),d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:c.author,chatId:c.thread,externalId:c.revokedExternalId}]),d("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(a,c.thread,c.revokedExternalId,c.author,d("WAMsgType").MSG_TYPE.REVOKED),i]).then(function(b){b=b[0];d("MAWUnsendMsgContentCleaner").addNewUnsendMsgContentCleanerTimestamp(c.unsendMsgContentDeleteTs);b=(b==null?void 0:b.msgId)===c.msgId;if(b)return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,c,e).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:d("WADualSendMsgUtils").isDualSendJid(e.jid),snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:e.chatId})})})}).then(function(){b!=null&&d("MAWUploadMessagesBackup").sendDeleteEchoMessage(b,b.threadJid);f?d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(c)}):d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(c)});if(b!=null&&d("MAWDbMsg").isMediaMsg(b)){var a=b.mediaId;a!=null&&d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:a,msgId:b.msgId,threadId:b.thread}})}d("MAWEphemeralUtil").maybeClearEphemeralMsgCountdown(b)})}function B(a,b,c,e){return d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,b,e.chatId,c).then(function(b){return b!=null&&b.type===d("WAMsgType").MSG_TYPE.CIPHERTEXT?a.messages["delete"](b.rowId).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypes").createBridgeDeleteMessages(b.thread,[b])});return!0}):!1})}function C(a,b){var c=b.protocolMsgId,e=c.author;b=c.chat;var f=c.externalId;return d("MAWDexieTable").dexieAll([d("MAWThreadFetchAndEmitTxns").fetchAndEmitThread(a,b),a.unrenderedMessages.get({externalId:f})]).then(function(b){var g=b[0];b=b[1];if(g==null)return d("WAResultOrError").makeError("missing_thread");return b!=null&&b.thread===g.thread.chatId&&b.author===e?d("WAResultOrError").makeError("duplicate_delete_for_me"):d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,c).then(function(b){if(b==null){var h={ack:d("MAWAckLevel").ACK.received,author:e,externalId:f,thread:g.thread.chatId,threadJid:g.thread.jid,type:d("WAMsgType").MSG_TYPE.DELETE_FOR_ME},i=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+l);h={deleteTs:i,externalIdWithType:f+"_"+d("MAWDbPendingStanza").PENDING_DELETE_FOR_ME,pendingContent:{content:h,type:d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME}};return a.pendingStanzas.add(h).then(function(){d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(i);return d("WAResultOrError").makeResult()})}return d("MAWDexieTable").dexieResolve(D(a,b,e,c.chat,g.thread)).then(function(){return d("WAResultOrError").makeResult()})})})}function D(a,b,c,e,f){var g,h=d("MAWDexieTable").dexieResolve();d("MAWXMAUtils").isXMAStoryReply((g=b.quote)==null?void 0:g.content.xmaMessageType)&&(h=E(a,b));var i={ack:b.ack,author:c,externalId:b.externalId,mediaId:b.mediaId,messageDeleteForMeTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+k),msgContent:(g=d("MAWDbMsg").getMsgContent(b))==null?void 0:g.content,msgId:b.msgId,quote:b.quote,reportingMeta:b.reportingMeta,thread:b.thread,threadJid:e,ts:b.ts,type:d("WAMsgType").MSG_TYPE.DELETE_FOR_ME,xmaMessageType:b.xmaMessageType};g=d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").deleteDbMsg(a,b.rowId),h]).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypes").createBridgeDeleteMessages(b.thread,[b])});d("MAWGating").isUploadFlowEnabled()&&d("MAWUploadMessagesBackup").sendDeleteEchoMessage(b,f.jid);if(d("MAWDbMsg").isMediaMsg(b)){var c=b.mediaId;c!=null&&d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:c,msgId:b.msgId,threadId:b.thread}})}return d("MAWThreadSnippetBuildTxns").updateThreadSnippet(a,f)});return d("MAWDexieTable").dexieAll([g,a.unrenderedMessages.add(i),d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:c,chatId:b.thread,externalId:b.externalId}]),d("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(a,b.thread,b.externalId,b.author,d("WAMsgType").MSG_TYPE.REVOKED),d("MAWDbMsgTxns").maybeUpdateThreadMsgsForDeleteForMe(a,f.chatId,b.msgId)]).then(function(){d("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(i.messageDeleteForMeTs);return d("WAResultOrError").makeResult()})}function E(a,b){return d("MAWDbXMATxns").maybeGetXMAFromAssociatedMsgId(a,b.msgId).then(function(b){return d("MAWDbMsgTxns").maybeGetMsg(a,b==null?void 0:b.msgId).then(function(b){if(b!=null)return d("MAWDbMsgTxns").deleteDbMsg(a,b.rowId)})})}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=k;g.PENDING_STANZA_EXPIRATION_IN_SEC=l;g.writeIncomingE2EEThreadAdminMsg=a;g.writeMsg=p;g.writeUnrenderedMsg=b;g.checkIfMsgIsDeletedViaDeleteThread=r;g.writeIncomingMsg=s;g.writeIncomingMediaMsg=e;g.writeIncomingXMAMsg=f;g.writeIncomingEphemeralSettingMsg=u;g.writeIncomingEphemeralScreenshotActionMsg=v;g.shouldThreadBeUnarchived=x;g.writeIncomingRevokeMsg=y;g.revokeUnstoredMsg=z;g.markMsgAsRevoke=A;g.handleDeleteForMe=C;g.handleDeleteForMeForUnstoredMsg=D;g.deleteXMAStoryReplyMsg=E}),98);
__d("MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.INFO:return d("EchoMessageXMAFieldUtils").XMAGatingType.INFO;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.EYE_OFF:return d("EchoMessageXMAFieldUtils").XMAGatingType.EYE_OFF;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NEWS_OFF:return d("EchoMessageXMAFieldUtils").XMAGatingType.NEWS_OFF;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:return d("EchoMessageXMAFieldUtils").XMAGatingType.WARNING;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:return d("EchoMessageXMAFieldUtils").XMAGatingType.PRIVATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return d("EchoMessageXMAFieldUtils").XMAGatingType.NONE;default:d("WALogger").ERROR(h(),a);return d("EchoMessageXMAFieldUtils").XMAGatingType.NONE}}g.convertExtendedContentOverlayIconGlyphToXMAGatingType=a}),98);
__d("MAWConvertExtendedContentTargetTypeToXMATargetType",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentTargetType: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_SINGLE_IMAGE_POST_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_MULTIPOST_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_SINGLE_VIDEO_POST_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_CLIPS_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_IGTV_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_SHOP_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_PROFILE_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_HIGHLIGHT_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_VIDEO_HIGHLIGHT_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:return d("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_REACTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_FEED_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_MENTION;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_FEED_VIDEO_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_GAMING_CUSTOM_UPDATE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return d("EchoMessageXMAFieldUtils").XMAContentType.FB_PRODUCER_STORY_REPLY;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:return d("EchoMessageXMAFieldUtils").XMAContentType.MSG_EXTERNAL_LINK_SHARE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_MISSED_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_MISSED_VIDEO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_GROUP_AUDIO_CALL;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:return d("EchoMessageXMAFieldUtils").XMAContentType.RTC_GROUP_VIDEO_CALL;default:d("WALogger").ERROR(h(),a);return d("EchoMessageXMAFieldUtils").XMAContentType.NONE}}g.convertExtendedContentTargetTypeToXMATargetType=a}),98);
__d("MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentXMLLayoutType: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE:return d("EchoMessageXMAFieldUtils").XMALayoutType.SINGLE;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.PORTRAIT:return d("EchoMessageXMAFieldUtils").XMALayoutType.PORTRAIT;default:d("WALogger").ERROR(h(),a);return d("EchoMessageXMAFieldUtils").XMALayoutType.SINGLE}}g.convertExtendedContentXMLLayoutTypeToXMALayoutType=a}),98);
__d("MAWEBUploadMessageUtils",["MAWDbMsg","WALogger","bs_caml_int64","bs_int64","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth-web] externalId is not a valid int64"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth-web] Timestamp bits in externalId not valid"]);i=function(){return a};return a}var j=2199023255551;function a(a){if(!c("gkx")("1816")||a.serverTs==null)return d("MAWDbMsg").getSortOrderWithFallback(a);var b=d("bs_int64").of_string_opt(a.externalId);if(b!=null){b=Number(d("bs_caml_int64").to_string(d("bs_caml_int64").and_(d("bs_caml_int64").lsr_(b,22),d("bs_caml_int64").of_float(j))));if(k(b)){b=Math.floor(Number(b)%1e5/100);return Number(a.serverTs)*1e3+b}else d("WALogger").WARN(i())}else d("WALogger").WARN(h());return d("MAWDbMsg").getSortOrderWithFallback(a)}function k(a){return new Date(a).getTime()>0}g.echoOverrideMessageSortOrder=a}),98);
__d("MAWEncryptedBackupCacheManager",[],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=new Map(),i=new Map();function a(a,b){h.set(a,{cache:b,status:"restoring"})}function b(a){a.forEach(function(a){var b=h.get(a);b!=null&&h.set(a,{cache:b.cache,status:"done"})})}function c(a){a=h.get(a);if(a!=null)return a.status;else return"none"}function d(a){return(a=h.get(a))==null?void 0:a.cache}function e(a){return h["delete"](a)}function j(a,b){var c=g.get(a)||new Set();c.add(b);g.set(a,c)}function k(a,b){a=g.get(a);return a!=null?a==null?void 0:a.has(b):!1}function l(a,b){a=g.get(a);a!=null&&a["delete"](b)}function m(a){return h.has(a)}function n(a){return i.has(a)}function o(a){return i.get(a)}function p(a){n(a)&&i["delete"](a)}function q(a,b){i.set(a,b)}f.restoredCache=h;f.addMsgEntryToRestoredCache=a;f.setRestoredCacheStatusAsDone=b;f.getRestoredCacheStatus=c;f.getRestoredCache=d;f.removeFromRestoredCache=e;f.addMsgEntryToReuploadCache=j;f.checkForMsgEntryInReuploadCache=k;f.removeMsgEntryFromReuploadCache=l;f.peekRestoreCache=m;f.peekPendingStanzaCache=n;f.getPendingStanzaCacheValue=o;f.removePendingStanzaCacheValue=p;f.addPendingStanzaToPendingStanzaCache=q}),66);
__d("MAWGetAttachmentTypeForServerMediaType",["EchoMessageMediaFieldUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid AttachmentType: ",""]);h=function(){return a};return a}function a(a){switch(a){case"image":return d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case"video":return d("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case"ptt":return d("EchoMessageMediaFieldUtils").AttachmentType.PTT;case"gif":return d("EchoMessageMediaFieldUtils").AttachmentType.GIF;case"sticker":return d("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case"xma-image":return d("EchoMessageMediaFieldUtils").AttachmentType.XMA;default:d("WALogger").WARN(h(),a);return null}}g.getAttachmentTypeForServerMediaType=a}),98);
__d("MAWGetMediaAttachmentTypeForServerMediaType",["EchoMessageMediaFieldUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid EchoMessageActMediaAttachmentType: ",""]);h=function(){return a};return a}function a(a){switch(a){case"image":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE;case"video":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO;case"ptt":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO;case"gif":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF;case"sticker":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER;case"audio":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO;case"document":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT;case"ppic":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.PROFILE_PICTURE;case"md-app-state":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.APP_STATE;case"md-msg-hist":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.HISTORY_SYNC;case"thumbnail-image":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.THUMBNAIL_IMAGE;case"thumbnail-video":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.THUMBNAIL_VIDEO;case"thumbnail-gif":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.THUMBNAIL_GIF;case"thumbnail-document":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.THUMBNAIL_DOCUMENT;case"thumbnail-link":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.THUMBNAIL_LINK;case"novi-video":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.NOVI_VIDEO;case"novi-image":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.NOVI_IMAGE;case"xma-image":return d("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE;default:d("WALogger").ERROR(h(),a);return null}}g.getMediaAttachmentTypeForServerMediaType=a}),98);
__d("MAWGetPreviewContentTypeForMediaType",["EchoMessageMediaFieldUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid EchoMessageMediaPreviewType: ",""]);h=function(){return a};return a}function a(a){switch(a){case"image":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case"gif":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case"sticker":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case"video":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case"ptt":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case"xma-image":return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:d("WALogger").ERROR(h(),a);return d("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG}}g.getPreviewContentTypeForMediaType=a}),98);
__d("MAWUploadMessageTxns",["EchoCommonUtils","EchoEncodingUtils","EchoMessage","EchoMessageReceiptStatusFieldUtils","LSDataTraceCheckPoint.re","MAWBridgeEventTransmitter","MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType","MAWConvertExtendedContentTargetTypeToXMATargetType","MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType","MAWDbContactsTxns","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbReactionsTxns","MAWDbXMATxns","MAWDexieTable","MAWEBUploadMessageUtils","MAWEncryptedBackupCacheManager","MAWGating","MAWGetAttachmentTypeForServerMediaType","MAWGetMediaAttachmentTypeForServerMediaType","MAWGetPreviewContentTypeForMediaType","MAWGlobals","MAWJidUtils","MAWJids","MAWMsgType","MAWTraceUtils","MAWUploadMessagesBackup","MAWVault","WAArmadilloXMA.pb","WABase64","WAJids","WALogger","WAMediaUtils","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(a,b,e){return a.threads.get(b).then(function(a){if(a==null){e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadThreadNotPresent,[],!1);throw c("err")("constructEchoMessage: thread not present")}e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadThreadPresent,[],!1);return a.jid})}function j(a,b,e,f){return a.receipts.get(b.msgId).then(function(g){var h=[];g!=null&&g.statusTsPerUser.forEach(function(c,f){h.push(d("MAWDbContactsTxns").maybeGetContactName(a,f).then(function(a){var g=d("EchoMessageReceiptStatusFieldUtils").MessageReceiptStatus.UNKNOWN,h;f===e?(g=d("EchoMessageReceiptStatusFieldUtils").MessageReceiptStatus.READ,h=b.ts):c.readTs!=null?(g=d("EchoMessageReceiptStatusFieldUtils").MessageReceiptStatus.READ,h=c.readTs):c.deliveredTs!=null&&(g=d("EchoMessageReceiptStatusFieldUtils").MessageReceiptStatus.DELIVERED,h=c.deliveredTs);a={address:d("EchoCommonUtils").craftEchoAddress(a,d("MAWJids").userIdFromJid(f),"AdvancedCrypto"),status:g};h!=null&&(a.timestampMs=h*1e3);return a}))});d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetReceiptStatusListSuccessful,[],!1);return d("MAWDexieTable").dexieAll(h)})}var k="You unsent a message";function l(a){switch(a.specialTextSize){case 1:return d("EchoMessage").MessageTextSize.SMALL;case 2:return d("EchoMessage").MessageTextSize.MEDIUM;case 3:return d("EchoMessage").MessageTextSize.LARGE;default:return d("EchoMessage").MessageTextSize.NONE}}function m(a,b,e){return d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,d("MAWJidUtils").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId)).then(function(b){if((b==null?void 0:b.previewMediaIds)==null||b.previewMediaIds.length===0){d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadXmaNotFoundInIdb,[],!1);return d("MAWDexieTable").dexieResolve({echoMessage:null,maybeErrorDetail:{errorMsg:"constructEchoMessage: XMA not found in IndexedDB",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN}})}return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,b.previewMediaIds[0]).then(function(a){if(a==null){d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadMediaNotFoundForXmaInIdb,[],!1);return d("MAWDexieTable").dexieResolve({echoMessage:null,maybeErrorDetail:{errorMsg:"constructEchoMessage: DbMedia is null for the XMA message",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN}})}return a.fbid==null?d("MAWDexieTable").dexieResolve({echoMessage:null,maybeErrorDetail:{errorMsg:"constructEchoMessage: fbid is null for the XMA message",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN}}):p(b,e)})})}function a(a,b,e,f){if(b.type!==d("WAMsgType").MSG_TYPE.TEXT&&b.type!==d("WAMsgType").MSG_TYPE.REVOKED&&b.type!==d("WAMsgType").MSG_TYPE.XMA&&!d("MAWMsgType").isMAWSupportedMediaType(b.type))return d("MAWDexieTable").dexieResolve({echoMessage:null,externalId:b.externalId,maybeErrorDetail:{errorMsg:'constructEchoMessage: "'+String(b.type)+'" NYI',uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN}});if(b.type===d("WAMsgType").MSG_TYPE.XMA&&!d("MAWGating").isXMABackupEnabled())return d("MAWDexieTable").dexieResolve({echoMessage:null,externalId:b.externalId,maybeErrorDetail:{errorMsg:'constructEchoMessage: "'+String(b.type)+'" is XMA but user is not enabled for XMA QE param',uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN}});var g=b.threadJid!=null?d("MAWDexieTable").dexieResolve(b.threadJid):i(a,b.thread,e),p=s(b,e),q=p.senderId;p=p.senderJid;var r=d("MAWDbContactsTxns").maybeGetContactName(a,p,e);p=j(a,b,p,e);var v={mediaMetadata:null},w;try{w=d("MAWDbMsg").isMediaMsg(b)||b.type===d("WAMsgType").MSG_TYPE.XMA}catch(a){var x="[labyrinth_web] Invalid msg type for isMediaMsg check: "+a;d("WALogger").ERROR(h(),x);v.maybeErrorDetail={errorMsg:x,uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};w=!1}x=w?n(a,b,e):d("MAWDexieTable").dexieResolve(v);w=o(a,b);v=b.quote!=null?u(a,b.quote,b.thread,g,f,e):d("MAWDexieTable").dexieResolve();e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetQuoteMsgSuccessful,[],!1);f=b.quote!=null?t(a,v,e):d("MAWDexieTable").dexieResolve();e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetQuoteSenderNameSuccessful,[],!1);a=!d("MAWGating").isXMABackupEnabled()||!d("MAWDbMsg").isXMAMsg(b)?d("MAWDexieTable").dexieResolve(null):m(a,b,e);return d("MAWDexieTable").dexieAll([g,r,p,x,w,v,f,a]).then(function(a){var f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],m=a[5],n=a[6];a=a[7];f=d("MAWJidUtils").threadIdForChatJid(f);var o=b.serverTs;o={authoritativeTimestampMs:o!=null?o*1e3:void 0,contentSubtype:d("EchoMessage").EchoMessageContentSubtype.NONE,contentType:d("EchoMessage").EchoMessageContentType.TEXT,displayTimestampMs:b.ts*1e3,from:d("EchoCommonUtils").craftEchoAddress(g,q,"AdvancedCrypto"),isForwarded:b.isForwarded,messageId:b.externalId,receiptStatusList:h,serializationOrigin:d("EchoMessage").EchoSerializationOriginType.WEB,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(b),textSize:l(b),threadId:f,version:d("EchoMessage").ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION,xContentType:d("EchoEncodingUtils").convertDbMsgTypeToXMessageContentType(b.type),xMessagePlaceholderType:d("EchoMessage").EchoMessagePlaceholderType.NO_PLACEHOLDER,xOfflineThreadingId:b.externalId,xThreadId:f};b.type===d("WAMsgType").MSG_TYPE.TEXT?o=babelHelpers["extends"]({},o,{text:d("MAWVault").unvault(b.msgContent.content)}):b.type===d("WAMsgType").MSG_TYPE.REVOKED&&(o.contentType=d("EchoMessage").EchoMessageContentType.PLACEHOLDER,o.contentSubtype=d("EchoMessage").EchoMessageContentSubtype.UNSEND,o.revokeSentTimestampMs=b.originalTs,o.revokeUnsentTimestampMS=b.unsendMsgContentDeleteTs,o.text=k);if(m!=null){g=s(m);h=g.senderId;f=d("EchoCommonUtils").craftEchoAddress(n,h,"AdvancedCrypto");m.sortOrderMs!=null&&(o.quoteData={quoteMessageId:m.externalId,quoteMessageSender:f,quoteSortOrderInMs:m.sortOrderMs})}if(d("MAWMsgType").isMAWSupportedMediaType(b.type)){g=i.mediaMetadata;if(g!=null)o=babelHelpers["extends"]({},o,{contentType:d("EchoMessage").EchoMessageContentType.MEDIA,mediaData:g});else{e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadMissingMediaDataForMediaMsg,[],!1);return{echoMessage:o,externalId:b.externalId,maybeErrorDetail:i.maybeErrorDetail}}}if(a!=null&&a.xmaData!=null&&b.type===d("WAMsgType").MSG_TYPE.XMA)o.xmaData=a.xmaData,o.contentType=d("EchoMessage").EchoMessageContentType.XMA;else if(a!=null&&a.xmaData==null&&b.type===d("WAMsgType").MSG_TYPE.XMA){e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadXmaDataIsNull,[],!1);return{echoMessage:o,externalId:b.externalId,maybeErrorDetail:a.maybeErrorDetail}}e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadEchoMessageCreationSuccessful,[],!1);return{echoMessage:babelHelpers["extends"]({},o,j),externalId:b.externalId}})}function n(a,b,e){var f={mediaMetadata:null};if(b.type===d("WAMsgType").MSG_TYPE.XMA)return d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,d("MAWJidUtils").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId)).then(function(b){if(b!=null)return q(a,b);else{f.maybeErrorDetail={errorMsg:"[labyrinth_web] Media meta data couldn't be created for XMA",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(f)}});if(!d("MAWMsgType").isMAWSupportedMediaType(b.type)){e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadUnsupportedMediaType,[],!1);f.maybeErrorDetail={errorMsg:"[labyrinth_web] Media type is not supported for msg, type: "+b.type,uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.WARN};return d("MAWDexieTable").dexieResolve(f)}if(b.mediaId==null){e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadNoMediaIdFoundInMediaMsg,[],!1);f.maybeErrorDetail={errorMsg:"[labyrinth_web] No media id found in a media msg",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(f)}return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,b.mediaId).then(function(g){if(!g){e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadNoMediaEntryForMediaId,[],!1);f.maybeErrorDetail={errorMsg:"[labyrinth_web] No media db entry for media id",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(f)}var h=d("MAWGating").isMediaBackupTableEnabled()?d("MAWDbMediaTxns").maybeGetMediaBackupRowFromMsgId(a,b.msgId):d("MAWDexieTable").dexieResolve();return h.then(function(a){return d("MAWDexieTable").dexieResolve(r(b.msgId,g,!1,a))})})}function o(a,b,e){return d("MAWDbReactionsTxns").getReactionsFromMessage(a,b.msgId).then(function(a){if(a!=null&&a.length>0){var b=d("WAJids").extractUserId(d("MAWGlobals").getMyUserJid()),f=a.map(function(a){var c=d("WAJids").authorToUserId(a.author,b);return d("EchoCommonUtils").craftEchoAddress(a.reaction,c,"AdvancedCrypto")}),g=a.map(function(a){var c=d("WAJids").authorToUserId(a.author,b);return d("EchoCommonUtils").craftEchoAddress((a.ts*1e3).toString(),c,"AdvancedCrypto")});a=a.map(function(a){var c=d("WAJids").authorToUserId(a.author,b);return d("EchoCommonUtils").craftEchoAddress(a.externalId.toString(),c,"AdvancedCrypto")});e!=null&&d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetReactionDataSuccessful,[],!1);return{reactionAuthoritativeTimestampMs:g,reactions:f,reactionXOfflineThreadingIds:a}}})}function p(a,b){var e={mediaMetadata:null,xmaData:null};if(a.isTombstoned==null){e.maybeErrorDetail={errorMsg:"[labyrinth_web] no isTombstoned to construct XMAData",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return e}var f={xmaHeaderSubtitle:a.overlayTitle,xmaHeaderTitle:a.headerTitle,xmaIsTombstoned:a.isTombstoned,xmaMaxSubtitleNumLines:a.maxSubtitleNumOfLines,xmaMaxTitleNumLines:a.maxTitleNumOfLines,xmaSubtitleText:a.subtitleText,xmaTargetExpiry:a.targetExpiringAtSec,xmaTargetId:a.targetId,xmaTargetUsername:a.targetUsername,xmaTitleText:a.titleText},g=a.xmaLayoutType||d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE;f=babelHelpers["extends"]({},f,{xmaLayoutType:d("MAWConvertExtendedContentXMLLayoutTypeToXMALayoutType").convertExtendedContentXMLLayoutTypeToXMALayoutType(g)});a.targetType!=null&&(f=babelHelpers["extends"]({},f,{xmaTargetType:d("MAWConvertExtendedContentTargetTypeToXMATargetType").convertExtendedContentTargetTypeToXMATargetType(a.targetType)}));a.overlayIconGlyph!=null&&(f=babelHelpers["extends"]({},f,{xmaGatingType:d("MAWConvertExtendedContentOverlayIconGlyphToXMAGatingType").convertExtendedContentOverlayIconGlyphToXMAGatingType(a.overlayIconGlyph)}));a.defaultCTA!=null&&a.defaultCTA.nativeUrl!=null&&(f=babelHelpers["extends"]({},f,{xmaDefaultCTA:a.defaultCTA.nativeUrl}));e.xmaData=f;b!=null&&d("MAWTraceUtils").recordCheckpointForTrace(b,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetXmaDataSuccessful,[],!1);return e}function q(a,b){var c={mediaMetadata:null};if(b.previewMediaIds==null){c.maybeErrorDetail={errorMsg:"[labyrinth_web] No mediaId found in DbXMA payload",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(c)}var e=b.previewMediaIds[0];return d("MAWDbMediaTxns").maybeGetMediaFromMediaId(a,e).then(function(e){if(!e){c.maybeErrorDetail={errorMsg:"[labyrinth_web] No media db entry for media id to be used for xma",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(c)}var f=b.msgId;if(f==null){c.maybeErrorDetail={errorMsg:"[labyrinth_web] No message id found in a xma msg",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return d("MAWDexieTable").dexieResolve(c)}var g=d("MAWGating").isMediaBackupTableEnabled()?d("MAWDbMediaTxns").maybeGetMediaBackupRowFromMsgId(a,f):d("MAWDexieTable").dexieResolve();return g.then(function(a){return d("MAWDexieTable").dexieResolve(r(f,e,!0,a))})})}function r(a,b,c,e){var f={mediaMetadata:null},g=e!=null?e.fbid:b.fbid;a=b.mediaEntries.get(a);if(a==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no media entry to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}a=d("WAMediaUtils").decodeMediaEntryData(a);e=e!=null?e.objectId:b.objectId;if(e==null)return f;var h=d("MAWGetAttachmentTypeForServerMediaType").getAttachmentTypeForServerMediaType(a.serverMediaType);if(h==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no attachment type to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}var i=a.mediaKey;if(i==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no mediaKey to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}var j=a.mediaKeyTimestamp;if(j==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no mediaKeyTimestamp to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}var k=a.directPath;if(k==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no directPath to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}if(a.serverMediaType==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no mediaContentType to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}c=c?"image/jpeg":d("WAMediaUtils").getMimeTypeFromServerMediaType(a.serverMediaType);var l=d("MAWGetMediaAttachmentTypeForServerMediaType").getMediaAttachmentTypeForServerMediaType(a.serverMediaType);if(l==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no xAttachmentType to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}if(a.serverMediaType!=null&&a.serverMediaType in{gif:1,image:1,sticker:1}&&b.validatedImageInfo==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no imageinfo to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}if(a.serverMediaType==="video"&&b.validatedVideoInfo==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no videoinfo to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}if(a.serverMediaType==="ptt"&&b.validatedAudioInfo==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no audioinfo to construct mediaMetadata",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}if(a.fileSha256==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no WA fileSha256 found",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}var m=d("WABase64").encodeB64UrlSafe(a.fileSha256);if(a.fileEncSha256==null){f.maybeErrorDetail={errorMsg:"[labyrinth_web] no WA fileEncSha256 found",uploadErrorType:d("MAWUploadMessagesBackup").UploadErrorType.FATAL};return f}f=d("WABase64").encodeB64UrlSafe(a.fileEncSha256);var n=0,o=0,p=0,q=0,r=0;a=d("MAWGetPreviewContentTypeForMediaType").getPreviewContentTypeForMediaType(a.serverMediaType);if(b.validatedImageInfo!=null){var s;n=(s=b.validatedImageInfo.width)!=null?s:0;o=(s=b.validatedImageInfo.height)!=null?s:0;q=(s=b.validatedImageInfo.jpegThumbnailWidth)!=null?s:0;r=(s=b.validatedImageInfo.jpegThumbnailHeight)!=null?s:0}if(b.validatedVideoInfo!=null){n=(s=b.validatedVideoInfo.width)!=null?s:0;o=(s=b.validatedVideoInfo.height)!=null?s:0;q=(s=b.validatedVideoInfo.jpegThumbnailWidth)!=null?s:0;r=(s=b.validatedVideoInfo.jpegThumbnailHeight)!=null?s:0;p=(s=b.validatedVideoInfo.duration)!=null?s:0}if(b.validatedAudioInfo!=null){p=(s=b.validatedAudioInfo.duration)!=null?s:0}s={attachmentObjectId:e,attachmentType:h,directPath:k,hashedPlaintextHash:f,height:o,mediaBackupStatus:"success",mediaContentType:c,mediaKey:d("EchoEncodingUtils").convertMediaKeyToString(i),mediaKeyTimestamp:j,mediaPlayableDuration:p,plaintextHash:m,previewContentHeight:r,previewContentType:a,previewContentWidth:q,size:b.size,width:n,xAttachmentType:l,xContentType:"full"};g!=null&&(s=babelHelpers["extends"]({},s,{backupEntFbid:g}));return{mediaMetadata:s}}function s(a,b){a=d("WAJids").authorToUserId(a.author,d("MAWJids").userIdFromJid(d("MAWGlobals").getMyUserJid()));var e=d("MAWJids").toUserJid(a);b!=null&&d("MAWTraceUtils").recordCheckpointForTrace(b,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetSenderInfoSuccessful,[],!1);return{senderId:a,senderJid:e}}function t(a,b,e){return b.then(function(b){if(b!=null){b=s(b);b=b.senderJid;b=d("MAWDbContactsTxns").maybeGetContactName(a,b);d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetSenderDisplayNameForQuotedMsgNotNull,[],!1);return b}d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebUploadGetSenderDisplayNameForQuotedMsgNull,[],!1);return null})}function u(a,b,e,f,g,h){var i=b.content.msgId,j=b.content.externalId;return g!=null?d("MAWDexieTable").dexieResolve(g):d("MAWDbMsgTxns").maybeGetMsg(a,i).then(function(a){if(a==null){d("MAWTraceUtils").recordCheckpointForTrace(h,c("LSDataTraceCheckPoint.re").labyrinthWebUploadRepliedMessageNotInDb,[],!1);return f.then(function(a){a=d("MAWJidUtils").threadIdForChatJid(a);if(!d("MAWEncryptedBackupCacheManager").peekRestoreCache(j)){d("MAWEncryptedBackupCacheManager").addMsgEntryToReuploadCache(e,j);d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(j,a);return null}else{a=(a=d("MAWEncryptedBackupCacheManager").getRestoredCache(j))==null?void 0:a.dbMsg;return d("MAWDexieTable").dexieResolve(a)}})}else{d("MAWTraceUtils").recordCheckpointForTrace(h,c("LSDataTraceCheckPoint.re").labyrinthWebUploadRepliedMessageInDb,[],!1);return d("MAWDexieTable").dexieResolve(a)}})}g.constructEchoMessage=a;g.constructXMAData=p;g.constructMediaMetadata=r}),98);
__d("MAWAdminMsgTxnsUtils",["MAWBridge","MAWGlobals","MAWIndexedDb","MAWJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.map(function(a){return d("MAWJids").userIdFromJid(a)});a.forEach(function(){d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.ADMIN_MESSAGE,key:"missing_user_id"})});d("MAWIndexedDb").afterTransaction({tag:"SyncContacts",value:b})}function b(a){return a==null||a===""}function h(){return d("MAWGlobals").getConfig().defaultUnknownContactText()}function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.map(function(a){return a==null||a===""?h():a})}g.afterTransactionFetchContactsNames=a;g.isUnknownName=b;g.getUnknownUserName=h;g.createAdminMsgContent=c}),98);
__d("MAWEphemeralAdminMsgBuildTxns",["MAWAckLevel","MAWAdminMsgTxnsUtils","MAWBridgeMsg","MAWBridgeTypes","MAWDbContactsTxns","MAWDbMsg","MAWDbMsgTxns","MAWDexieTable","MAWGlobals","MAWIndexedDb","MAWLocalizationType","MAWThreadSnippetBuildTxns","MAWWriteMsgTxns","WAArmadilloApplication.pb","WAJids","WAMsgType","WAResultOrError","err"],(function(a,b,c,d,e,f,g){"use strict";var h=60,i=60*h,j=24*i;function a(a,b,e,f,g,k,l){return d("MAWDbContactsTxns").maybeGetContactName(a,b).then(function(m){var n=d("MAWAdminMsgTxnsUtils").isUnknownName(m),o,p=[];m=b===d("MAWGlobals").getMyUserJid();if(e<0)throw c("err")("Received unexpected ephemeral time setting");var q=d("WAJids").extractUserId(b).toString();e===0?m?o=d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:n?o=d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:(o=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,p.push(q)):e<h?(m?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:n?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:(o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,p.push(q)),p.push(e.toString())):e<i?(m?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:n?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:(o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,p.push(q)),p.push((e/h).toString())):e<j?(m?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:n?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:(o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,p.push(q)),p.push((e/i).toString())):(m?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:n?o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:(o=k?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,p.push(q)),p.push((e/j).toString()));m=l!=null?d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,l,g.chatId,b):d("MAWDexieTable").dexieResolve();return m.then(function(c){if(c==null){var e,h=d("MAWDbMsg").craftMsgId(g.chatId,g.nextInChatMsgId),i={ack:d("MAWAckLevel").ACK.sent,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:b,externalId:(e=l)!=null?e:d("MAWGlobals").getDependencies().generateExternalId(),msgContent:{adminMsgContent:p,adminType:o,version:1},msgId:h,thread:g.chatId,threadJid:g.jid,ts:f,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return d("MAWWriteMsgTxns").writeMsg(a,i,g).then(function(a){n&&d("MAWAdminMsgTxnsUtils").afterTransactionFetchContactsNames([b]);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},i,{rowId:a.rowId}))})}else if(c.type===d("WAMsgType").MSG_TYPE.CIPHERTEXT){var j={ack:d("MAWAckLevel").ACK.sent,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:b,externalId:c.externalId,msgContent:{adminMsgContent:p,adminType:o,version:1},msgId:c.msgId,rowId:c.rowId,serverTs:c.serverTs,thread:c.thread,threadJid:c.threadJid,ts:c.ts,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return a.messages.put(j).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypes").createBridgeDeleteMessages(c.thread,[c])});d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(j)});if(j.msgId===g.newestMsg)return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,j,g).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:!1,snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:g.chatId})});return d("WAResultOrError").makeResult(j)});n&&d("MAWAdminMsgTxnsUtils").afterTransactionFetchContactsNames([b]);return d("WAResultOrError").makeResult(j)})}else return d("WAResultOrError").makeResult(null)})})}function b(a,b,e,f,g,h){return d("MAWDbContactsTxns").maybeGetContactName(a,b).then(function(i){var j=d("MAWAdminMsgTxnsUtils").isUnknownName(i);i=d("WAJids").extractUserId(b).toString();var k,l=[],m=b===d("MAWGlobals").getMyUserJid();switch(g){case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:m?k=d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:j?k=d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:(k=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,l.push(i));break;case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:m?k=d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:j?k=d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:(k=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,l.push(i));break;default:throw c("err")("Received unexpected screenshot action type")}return d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,h,e.chatId,b).then(function(c){if(c==null){var i=d("MAWDbMsg").craftMsgId(e.chatId,e.nextInChatMsgId),n={ack:d("MAWAckLevel").ACK.received,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:m?d("WAJids").AUTHOR_ME:b,externalId:h,msgContent:{adminMsgContent:l,adminType:k,screenshotActionType:g,version:1},msgId:i,thread:e.chatId,threadJid:e.jid,ts:f,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return d("MAWWriteMsgTxns").writeMsg(a,n,e).then(function(a){j&&d("MAWAdminMsgTxnsUtils").afterTransactionFetchContactsNames([b]);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},n,{rowId:a.rowId}))})}else if(c.type===d("WAMsgType").MSG_TYPE.CIPHERTEXT){var o={ack:d("MAWAckLevel").ACK.received,altIndex:d("MAWDbMsg").UNDEFINED_ALT_INDEX,author:m?d("WAJids").AUTHOR_ME:b,externalId:c.externalId,msgContent:{adminMsgContent:l,adminType:k,screenshotActionType:g,version:1},msgId:c.msgId,rowId:c.rowId,serverTs:c.serverTs,thread:c.thread,threadJid:c.threadJid,ts:c.ts,type:d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return a.messages.put(o).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypes").createBridgeDeleteMessages(c.thread,[c])});d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(o)});if(o.msgId===e.newestMsg)return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,o,e).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypes").createBridgeUpdatedThread({isDualSend:!1,snippetParams:b,snippetSenderContactId:c,snippetType:a,threadId:e.chatId})});return d("WAResultOrError").makeResult(o)});j&&d("MAWAdminMsgTxnsUtils").afterTransactionFetchContactsNames([b]);return d("WAResultOrError").makeResult(o)})}else return d("WAResultOrError").makeResult(null)})})}g.writeEphemeralSettingAdminMsg=a;g.writeEphemeralScreenshotActionMsg=b}),98);
__d("EchoBackupCompareUtils",["MAWGating"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;return{contentSubtype:a.contentSubtype,contentType:a.contentType,reactionTsList:(b=a.reactionAuthoritativeTimestampMs)==null?void 0:b.map(function(a){return a.displayName==null?null:Number(a.displayName)/1e3}).filter(Boolean).sort(),receiptTsList:(b=a.receiptStatusList)==null?void 0:b.map(function(a){return a.timestampMs==null?null:a.timestampMs/1e3}).filter(Boolean).sort()}}function h(a,b){if(a==null&&b==null)return!0;if(a!=null&&b!=null)return a.length===b.length&&a.every(function(a,c){return a===b[c]});return a==null&&(b==null?void 0:b.length)===0||b==null&&(a==null?void 0:a.length)===0?!0:!1}function b(a,b){return b!=null&&a.contentSubtype===b.contentSubtype&&a.contentType===b.contentType&&h(a.reactionTsList,b.reactionTsList)&&(d("MAWGating").isOccamadilloReadReceiptsEnabled()?!0:h(a.receiptTsList,b.receiptTsList))}g.buildEchoDocCacheValue=a;g.echoEquals=b}),98);
__d("MAWUploadRetryStatusUtil",["MAWGating","MAWGlobals","MAWIndexedDb","MAWTransactionMode","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unhandled error in postBackupWriteCompletionHook job: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] postBackupWriteCompletionHook get null/empty input."]);i=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({retroactiveBackupsState:d("MAWTransactionMode").READONLY})(function(a){return a.retroactiveBackupsState.count().then(function(a){return a>0?!0:!1})});c=d("MAWIndexedDb").makeMsgrTransactor({uploadRetryStatus:d("MAWTransactionMode").READWRITE})(function(a,b){return a.uploadRetryStatus.bulkAdd(b.map(function(a){return{externalId:a.msg.externalId,lastRetryTs:a.lastRetryTs,retriedTimes:a.retriedTimes,traceId:a.traceId}})).then(function(a){})});var j=d("MAWIndexedDb").makeMsgrTransactor({uploadRetryStatus:d("MAWTransactionMode").READWRITE})(function(a,b){return a.uploadRetryStatus.where("traceId").anyOf(b)["delete"]()});e=d("MAWGlobals").getPersistedJobsApi().definePersistedJob().finalStep("postBackupWriteCompletionHook",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.traceIdArray;if(!d("MAWGating").isEncryptedBackupsUploadTrackingEnabled())return;if(a==null||a.length===0){d("WALogger").ERROR(i());return}try{yield j(a)}catch(a){d("WALogger").ERROR(h(),a)}});return function(b){return a.apply(this,arguments)}}()).end();g.checkRetroactiveBackupsStateStore=a;g.bulkInsert=c;g.bulkRemove=j;g.postBackupWriteCompletionHook=e}),98);
__d("MAWUploadMessagesBackup",["$InternalEnum","EchoBackupCompareUtils","EchoMessage","LSDataTraceCheckPoint.re","LSDataTraceType.re","MAWBridge","MAWBridgeEventTransmitter","MAWBridgeUpload","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbThreadTxns","MAWDbXMA","MAWDexieTable","MAWEBSwitch","MAWEBUploadMessageUtils","MAWEncryptedBackupCacheManager","MAWGating","MAWGlobals","MAWHMACKey","MAWHandlePendingStanzasInRestore","MAWIndexedDb","MAWJidUtils","MAWLLAMigrationUtils","MAWQplProxy","MAWTraceUtils","MAWTransactionMode","MAWUploadMessageTxns","MAWUploadRetryStatusUtil","Promise","WADualSendMsgUtils","WAGlobals","WAJids","WALogger","WAMsgType","WAStanzaUtils","WATimeUtils","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot proceed with encodeAndSendEchoMessage: Encrypted Backups are not enabled"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid is null for pendingStanza"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] thread is null for pendingStanza"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanzaMessageType: "," not supported"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unhandled error in uploadMessagesBackup job: ",""]);p=function(){return a};return a}e=d("MAWGlobals").getPersistedJobsApi().definePersistedJob().finalStep("echoSerialization",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.messageIds,c=a.oldTraceIdMap,e=a.pendingStanzaIds,f=a.reactionIds,g=a.receiptIds;a=a.xmaIds;try{g=q(g);a=d("MAWDbXMA").convertNumbersToXMAIds(a);e=(e=e)!=null?e:[];yield s(b,e,f,g,a,c)}catch(a){d("WALogger").ERROR(p(),a)}});return function(b){return a.apply(this,arguments)}}()).end();function q(a){return a==null?[]:a.filter(Boolean).map(function(a){if(a!=null)return d("MAWDbMsg").toMsgId(a)}).filter(Boolean)}var r=b("$InternalEnum").Mirrored(["FATAL","WARN"]);function s(a,e,f,g,h,i){var j=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521480064,"835"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled()},"int":{timestamp:Date.now()}});a=y(a,e,f,g,h,j).then(function(a){j.endSuccess(),C(a,void 0,!1,i)}).then(function(a){});return b("Promise").all([a]).then(function(){})}function t(a,b,c){c==null?void 0:c.addPoint("message_lookup_start");return a.messages.bulkGet(b).then(function(a){return a.filter(Boolean)}).then(function(a){c==null?void 0:c.addPoint("message_lookup_end");return a})}function u(a,b,c){c==null?void 0:c.addPoint("pendingStanzas_lookup_start");return a.pendingStanzas.bulkGet(b).then(function(a){return a.filter(Boolean).map(function(a){var b=a.pendingContent.type;c==null?void 0:c.addPoint("pendingStanzas_lookup_progress",{string:{type:b}});if(b==null||b!==d("MAWDbPendingStanza").PENDING_TYPE.REVOKED&&b!==d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME){d("WALogger").WARN(o(),b);return}b=a.pendingContent.content.externalId;if(b==null){d("WALogger").WARN(n());return}b=a.pendingContent.content.thread;if(b==null){d("WALogger").WARN(m());return}b=a.pendingContent.content.threadJid;if(b==null){d("WALogger").WARN(l());return}d("MAWHandlePendingStanzasInRestore").issuePointQueryForPendingStanza(a)})}).then(function(a){c==null?void 0:c.addPoint("pendingStanzas_lookup_end");return[]})}function v(a,b,c){c==null?void 0:c.addPoint("receipts_lookup_start");return a.messages.where("msgId").anyOf(b).toArray().then(function(a){return a.filter(Boolean)}).then(function(a){c==null?void 0:c.addPoint("receipts_lookup_end");return a})}function w(a,b,c){c==null?void 0:c.addPoint("reactions_lookup_start");return a.reactions.bulkGet(b).then(function(b){b=b.filter(Boolean).map(function(b){return d("MAWDbThreadTxns").getThreadByJid(a,b.threadJid).then(function(c){var e=c.success?c.value:null;if(e!=null&&e.chatId!=null){c=b.reactToAuthor;c=c===d("WAGlobals").getMyUserJid()?d("WAJids").AUTHOR_ME:c;return d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,b.reactToExternalId,e.chatId,c).then(function(a){if(a==null&&!d("MAWEncryptedBackupCacheManager").peekRestoreCache(b.reactToExternalId)){var c=d("MAWJidUtils").threadIdForChatJid(e.jid);d("MAWEncryptedBackupCacheManager").addMsgEntryToReuploadCache(e.chatId,b.reactToExternalId);d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(b.reactToExternalId,c)}return a})}})});return d("MAWDexieTable").dexieAll(b).then(function(a){c==null?void 0:c.addPoint("reactions_lookup_end");return a.filter(Boolean)})})}function x(a,b,c){c==null?void 0:c.addPoint("xma_lookup_start");b=b.filter(Boolean);return a.xma.bulkGet(b).then(function(b){b=b.map(function(a){return a==null?void 0:a.associatedMessageId}).filter(Boolean);return a.messages.where("msgId").anyOf(b).toArray()}).then(function(a){c==null?void 0:c.addPoint("xma_lookup_end");return a})}var y=d("MAWIndexedDb").makeMsgrTransactor.apply(void 0,[{messages:d("MAWTransactionMode").READONLY,pendingStanzas:d("MAWTransactionMode").READONLY,reactions:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY,xma:d("MAWTransactionMode").READONLY}].concat(d("MAWLLAMigrationUtils").getTransactorQPLParam("uploadMsgBackupGetMsgs",!1,{},!0)))(function(a,b,c,d,e,f,g){return E(a,b,c,d,e,f,g)});function z(a){a=[a];d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:a})}function A(a){var e=new Map();a.forEach(function(a){return e.set(a.dbMsg.externalId,a)});return b("Promise").all(a.map(function(a){return D(a.dbMsg,a.traceId,a.quotedMsg)})).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];a=a.map(function(a){var f=e.get(a.externalId)||{dbMsg:null,traceId:null},g=f.dbMsg;f=f.traceId;if(a.maybeErrorDetail!=null){f!=null&&d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").labyrinthWebUploadInvalidEchoMessageSerializationResponse,[],!1);b.push(f);return a}var h=a.echoMessage;if((h==null?void 0:h.xOfflineThreadingId)==null){a.maybeErrorDetail={errorMsg:"[labyrinth_web] xOfflineThreadingId should not be empty in the EchoMessage",uploadErrorType:r.FATAL};b.push(f);return a}var i=h.xOfflineThreadingId,j=d("WAStanzaUtils").toStanzaId(i);if(d("MAWEncryptedBackupCacheManager").getRestoredCacheStatus(j)==="done"){var k=d("EchoBackupCompareUtils").buildEchoDocCacheValue(h);k=d("EchoBackupCompareUtils").echoEquals(k,d("MAWEncryptedBackupCacheManager").getRestoredCache(j));d("MAWEncryptedBackupCacheManager").removeFromRestoredCache(j);if(k){a.maybeErrorDetail={errorMsg:"[labyrinth_web] duplicate message upload request, aborting it",uploadErrorType:r.WARN};f!=null&&d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").labyrinthWebUploadDuplicateRequest,[],!1);b.push(f);return a}}g!=null&&f!=null&&z({tag:"UploadMessage",value:d("MAWBridgeUpload").createBridgeUploadMessage(i,h.threadId,d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(g),d("EchoMessage").encodeEchoMessage(h),1,f)});f!=null&&d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").labyrinthWebUploadIssueMessageUploadUiEvent,[],!1);return a});d("MAWGating").isEncryptedBackupsUploadTrackingEnabled()&&(yield d("MAWUploadRetryStatusUtil").bulkRemove(b.filter(Boolean)));return a});return function(b){return a.apply(this,arguments)}}())}function B(a){var b=new Set(),c=[];a.forEach(function(a){var e=a.externalId+"|"+a.thread.toString()+"|"+a.author;d("MAWEncryptedBackupCacheManager").getRestoredCacheStatus(a.externalId)!=="restoring"&&!b.has(e)&&(b.add(e),c.push(a))});return c}function C(a,e,f,g){if(!c("MAWEBSwitch").isEnabled()){d("WALogger").LOG(k());return b("Promise").resolve()}var h=B(a).filter(function(a){return a.type!==d("WAMsgType").MSG_TYPE.UNAVAILABLE&&a.type!==d("WAMsgType").MSG_TYPE.CIPHERTEXT&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)&&!d("WADualSendMsgUtils").isDualSendJid(a.threadJid)}).map(function(a){var b=d("MAWTraceUtils").startNewTrace(c("LSDataTraceType.re").encryptedBackupsUpload,d("MAWTraceUtils").CONTEXT_BACKUP_UPLOAD);f!=null&&f&&d("MAWTraceUtils").recordCheckpointForTrace(b,c("LSDataTraceCheckPoint.re").labyrinthWebRetroactiveBackupsStartUploadMsg,[],!1);return{lastRetryTs:d("WATimeUtils").millisTime(),msg:a,retriedTimes:0,traceId:b}});return(d("MAWGating").isEncryptedBackupsUploadTrackingEnabled()?d("MAWUploadRetryStatusUtil").bulkInsert(h):b("Promise").resolve()).then(function(a){return F(h.map(function(a){var b=a.msg.quoteExternalId;if(b!=null)return{dbMsg:a.msg,quotedMsg:e==null?void 0:e.get(b),traceId:a.traceId};else return{dbMsg:a.msg,traceId:a.traceId}}),g)}).then(function(){return b("Promise").resolve()})}var D=d("MAWIndexedDb").makeMsgrTransactor({contacts:d("MAWTransactionMode").READONLY,media:d("MAWTransactionMode").READONLY,mediaBackup:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READONLY,reactions:d("MAWTransactionMode").READONLY,receipts:d("MAWTransactionMode").READONLY,threads:d("MAWTransactionMode").READONLY,xma:d("MAWTransactionMode").READONLY})(d("MAWUploadMessageTxns").constructEchoMessage);function E(a,b,c,e,f,g,h){b=t(a,b,h);d("MAWGating").isReuploadOfPendingStanzasEnabled()?u(a,c,h):d("MAWDexieTable").dexieResolve();c=v(a,f,h);f=w(a,e,h);e=d("MAWGating").isXMABackupEnabled()?x(a,g,h):d("MAWDexieTable").dexieResolve([]);return d("MAWDexieTable").dexieAll([b,c,f,e]).then(function(a){return a.flat()})}function F(a,e){var f=new Map();a.forEach(function(a){var b=a.dbMsg;a=a.traceId;d("MAWTraceUtils").recordCheckpointForTrace(a,c("LSDataTraceCheckPoint.re").labyrinthWebEchoMessageUploadBegin,[d("MAWTraceUtils").getTagForMsgType(b.type)],!1);var g=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521475102,"868"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled()},"int":{sort_order:b.sortOrderMs,timestamp:Date.now()},string:{hashed_msgid:G(b.externalId),message_id:b.externalId,message_type:b.type.toString(),org_trace_id:e==null?void 0:e.get(b.externalId),trace_id:a}});f.set(b.externalId,{constructEchoFlow:g,traceId:a})});a=A(a)["catch"](function(a){a="[labyrinth_web] Error while encode and upload message to backup: "+String(a);d("WALogger").ERROR(j(),a);for(var e of f.values())d("MAWTraceUtils").recordFailureAndFlushForTraceId(e.traceId,c("LSDataTraceCheckPoint.re").labyrinthWebEchoMessageUploadFailure,[],a),e.constructEchoFlow.endFail("serialisation_failure");return b("Promise").resolve()});return a.then(function(a){a==null?void 0:a.forEach(function(a){var b;b=(b=a.echoMessage)==null?void 0:b.messageId;if(b!=null&&f.has(d("WAStanzaUtils").toStanzaId(b))){var e;b=f.get(d("WAStanzaUtils").toStanzaId(b))||{constructEchoFlow:null,traceId:null};var g=b.constructEchoFlow;b=b.traceId;e=a==null?void 0:(e=a.maybeErrorDetail)==null?void 0:e.uploadErrorType;a=a==null?void 0:(a=a.maybeErrorDetail)==null?void 0:a.errorMsg;if(e!=null)switch(e){case r.WARN:a!=null&&d("WALogger").WARN(i(),a);g==null?void 0:g.endSuccess({bool:{is_skipped:!0}});b!=null&&d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(b,c("LSDataTraceCheckPoint.re").labyrinthWebEchoMessageUploadInvalidRequest,[]);break;case r.FATAL:a=(e=a)!=null?e:"[labyrinth_web] unknown error in the upload message flow";d("WALogger").ERROR(h(),a);b!=null&&d("MAWTraceUtils").recordFailureAndFlushForTraceId(b,c("LSDataTraceCheckPoint.re").labyrinthWebEchoMessageUploadFailure,[],a);g==null?void 0:g.endFail("serialisation_failure");break}else g==null?void 0:g.endSuccess()}});return b("Promise").resolve()})}function G(a){if(a==null)return"";var b=d("MAWGlobals").getHMACKey();return d("MAWHMACKey").hmacTweetNaCl(a,b)}function a(a,b){var e=d("MAWTraceUtils").startNewTrace(c("LSDataTraceType.re").encryptedBackupsUpload,d("MAWTraceUtils").CONTEXT_BACKUP_UPLOAD);d("MAWTraceUtils").recordCheckpointForTrace(e,c("LSDataTraceCheckPoint.re").labyrinthWebEchoMessageUploadBegin,[d("MAWTraceUtils").getTagForMsgType(a.type)],!1);b=b==null?a.thread.toString():d("MAWJidUtils").threadIdForChatJid(b);d("MAWIndexedDb").afterTransaction({tag:"UploadMessage",value:d("MAWBridgeUpload").createBridgeUploadMessage(a.externalId,b,d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(a),null,2,e)})}g.uploadMessagesBackup=e;g.convertStringMsgIdtoMsgId=q;g.UploadErrorType=r;g.getMsgs=y;g.deduplicateMessageArray=B;g.uploadUniqueMessage=C;g.getMessagesBackupForUpload=E;g.hashIdentifier=G;g.sendDeleteEchoMessage=a}),98);
__d("MAWHandlePendingStanzasInRestore",["MAWBridgeEventTransmitter","MAWDbPendingStanza","MAWDbPendingStanzaTxns","MAWDbThreadTxns","MAWDexieTable","MAWEncryptedBackupCacheManager","MAWIndexedDb","MAWJidUtils","MAWTransactionMode","MAWUploadMessagesBackup","MAWWriteMsgTxns","Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] thread is null"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Pending Stanza not found in the cache. This shouldn't happen."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanza type "," is not supported"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid is null for pendingStanza"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Delete For Me pending stanza does not need to be applied."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanzaTs is null for pendingStanza"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Could not find thread for chatId "," for pendingStanza"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanza type "," is not supported"]);t=function(){return a};return a}a=function(a,b,c){a=a.restoredMsgs;return d("MAWDexieTable").dexieAll(a.map(function(a){return a.then(function(a){a=a.restoredMessages;a=a.map(function(a){return a.dbMsg});return B(a,b,c)})})).then(function(){})};var u=function(a,c,e,f){var g=a.pendingContent.type;if(g===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED)return v(a,c,e,f).then(function(a){a!=null&&d("MAWUploadMessagesBackup").uploadUniqueMessage([a],void 0,!1,void 0)});else if(g===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME)return w(a);else{d("WALogger").WARN(t(),g);return b("Promise").resolve()}},v=d("MAWIndexedDb").makeMsgrTransactor({chunk:d("MAWTransactionMode").READONLY,contacts:d("MAWTransactionMode").READONLY,groupInfo:d("MAWTransactionMode").READWRITE,media:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READWRITE,pendingStanzas:d("MAWTransactionMode").READWRITE,reactions:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READWRITE,xma:d("MAWTransactionMode").READONLY})(function(a,b,c,e,f){var g=c.thread;e=e.get(c.thread);if(e==null){d("WALogger").ERROR(s(),g);return d("MAWDexieTable").dexieResolve()}g=b.pendingContent.content.externalId;if(g==null){d("WALogger").ERROR(r());return d("MAWDexieTable").dexieResolve()}var h=b.pendingContent.content.revokedExternalId;if(h==null){d("WALogger").ERROR(q());return d("MAWDexieTable").dexieResolve()}var i=b.pendingContent.content.ts;if(i==null){d("WALogger").ERROR(p());return d("MAWDexieTable").dexieResolve()}return d("MAWWriteMsgTxns").revokeUnstoredMsg(a,c,e,g,h,c.serverTs,c.ts,!1,f).then(function(c){a.pendingStanzas["delete"](b.rowId);if(c.success){c=c.value.msg;return d("MAWDexieTable").dexieResolve(c)}return d("MAWDexieTable").dexieResolve(void 0)})}),w=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READWRITE})(function(a,b){d("WALogger").LOG(o());return d("MAWDexieTable").dexieAll([a.pendingStanzas["delete"](b.rowId)]).then(function(){return d("MAWDexieTable").dexieResolve(b)})}),x=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READONLY})(function(a){return d("MAWDbPendingStanzaTxns").getAllPendingStanzas(a)}),y=function(a){var b=0,c=0;a.forEach(function(a){var e=a.pendingContent.type;e===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED?c++:e===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME&&b++;z(a)});a.clear();return[b,c]};function z(a){var b=a.pendingContent.content.threadJid;if(b==null){d("WALogger").WARN(n());return}b=d("MAWJidUtils").threadIdForChatJid(b);var c=a.pendingContent.type;if(c===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED){var e=a.pendingContent.content.revokedExternalId;if(e==null){d("WALogger").WARN(m());return}e=e}else if(c===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME){var f=a.pendingContent.content.externalId;if(f==null){d("WALogger").WARN(l());return}e=f}else{d("WALogger").WARN(k(),c);return}d("MAWEncryptedBackupCacheManager").addPendingStanzaToPendingStanzaCache(e,a);d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(e,b)}var A=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READWRITE})(function(a,b){return d("MAWDbPendingStanzaTxns").deletePendingStanzas(a,b)}),B=function(a,c,e){e==null?void 0:e.addPoint("apply_pending_stanza_start");var f=0,g=0,h=0,k=0,l=new Map();return x().then(function(a){a==null?void 0:a.map(function(a){var b=a.pendingContent.content.externalId;if(b==null){d("WALogger").WARN(j());return}l.set(a.externalIdWithType,a)}),k=l.size}).then(function(){var b=new Set();return C(a).then(function(e){return d("MAWDexieTable").dexieAll(a.map(function(a){var j=a.externalId;if(c)if(d("MAWEncryptedBackupCacheManager").peekPendingStanzaCache(j)){var k=d("MAWEncryptedBackupCacheManager").getPendingStanzaCacheValue(j);if(k==null){d("WALogger").ERROR(i());return}return u(k,a,e,c).then(function(a){a!=null&&b.add(k);d("MAWEncryptedBackupCacheManager").removePendingStanzaCacheValue(j);l["delete"](k.externalIdWithType);a=k.pendingContent.type;a===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED&&f++;g++})}else l.clear();else{var m=j+"_"+d("MAWDbPendingStanza").PENDING_REVOKED,n=l.get(m);if(n!=null)return u(n,a,e,c).then(function(a){a!=null&&(b.add(n),f++,h++),l["delete"](n.externalIdWithType)})}})).then(function(){if(!c){var a=y(l);f+=a[1];g+=a[0]+a[1];A(Array.from(b))}})})}).then(function(a){e==null?void 0:e.addPoint("apply_pending_stanza_end",{"int":{initialRestorePendingStanzaCount:h,pendingStanzasToBeUploadedCount:k,pointRestorePendingStanzaCount:g,revokedCount:f}});return b("Promise").resolve()})},C=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY})(function(a,b){var c=[];b.forEach(function(a){c.push(a.thread)});return d("MAWDbThreadTxns").getThreads(a,c).then(function(a){var b=new Map();a.forEach(function(a){if(a==null){d("WALogger").WARN(h());return d("MAWDexieTable").dexieResolve()}b.set(a.chatId,a)});return b})});g.applyPendingStanzas=a;g.issuePointQueryForPendingStanza=z;g.applyPendingStanzasToDbMsgs=B}),98);
__d("MAWDbPersonalSenderKeyStatusTxns",["WADualSendMsgUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h={hasSenderKey:new Set(),rotateSenderKey:!0,senderKeyId:null,senderKeyTs:d("WATimeUtils").castToUnixTime(0)};function a(a,b){b=d("WADualSendMsgUtils").isDualSendJid(b)?d("WADualSendMsgUtils").removeDualSendPrefixForGroup(b):b;var c=babelHelpers["extends"]({},h,{groupJid:b});return a.personalSenderKeyStatuses.put(c).then(function(){return c})}function b(a,b,c){return k(a,b).then(function(b){var d=[];b.forEach(function(a){if(a==null||a.rotateSenderKey)return;c.forEach(function(b){return a.hasSenderKey["delete"](b)});d.push(a)});return a.personalSenderKeyStatuses.bulkPut(d).then(function(){return b})})}function c(a,b){b=b.map(function(a){return d("WADualSendMsgUtils").isDualSendJid(a)?d("WADualSendMsgUtils").removeDualSendPrefixForGroup(a):a});return a.personalSenderKeyStatuses.bulkDelete(b)}function e(a,b){return i(a,[b]).then(function(a){return a[0]})}function i(a,b){return k(a,b).then(function(b){var c=[];b.forEach(function(a){if(a==null)return;a.rotateSenderKey=!0;c.push(a)});return a.personalSenderKeyStatuses.bulkPut(c).then(function(){return b})})}function f(a,b){return a.personalSenderKeyStatuses.bulkPut(b).then(function(){})}function j(a,b,c,d){return a.personalSenderKeyStatuses.get(b).then(function(e){var f=babelHelpers["extends"]({},e||h,{groupJid:b,rotateSenderKey:!1,senderKeyId:c,senderKeyTs:d});return a.personalSenderKeyStatuses.put(f).then(function(){return f})})}function k(a,b){return a.personalSenderKeyStatuses.bulkGet(b)}g.putNewPersonalSenderKeyStatus=a;g.removeDevicesToMultiplePersonalSenderKeyStatuses=b;g.bulkDeletePersonalSenderKeyStatus=c;g.setRotateSenderKeyToTrue=e;g.bulkSetRotateSenderKeyToTrue=i;g.bulkUpdateSenderKeyStatus=f;g.updateSenderKeyStatusAsRotated=j;g.bulkGetPersonalSenderKeyStatuses=k}),98);
__d("MAWSmartSenderKeyRotationTxns",["MAWDbIdentityTxns","MAWDbPersonalSenderKeyStatusTxns","MAWDexieTable","MAWGating"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(!d("MAWGating").isSmartSenderKeyRotationEnabled())return d("MAWDbPersonalSenderKeyStatusTxns").setRotateSenderKeyToTrue(a,b);c=c.map(function(a){return a.user});return d("MAWDexieTable").dexieAll([a.personalSenderKeyStatuses.get(b),d("MAWDbIdentityTxns").getIdentitiesForMultipleUsers(a,c)]).then(function(b){var c=b[0];b=b[1];var d=[];b.forEach(function(a,b){a.forEach(function(a){return d.push(a.deviceJid)})});return h(a,c,d)})}function b(a,b,c){return!d("MAWGating").isSmartSenderKeyRotationEnabled()?d("MAWDbPersonalSenderKeyStatusTxns").bulkSetRotateSenderKeyToTrue(a,b):a.personalSenderKeyStatuses.bulkGet(b).then(function(b){return i(a,b,c)})}function h(a,b,c){return i(a,[b],c).then(function(a){return a[0]})}function i(a,b,c){var e=[],f=[];b.forEach(function(a){if(a==null||a.rotateSenderKey){f.push(a);return}var b=babelHelpers["extends"]({},a);b.rotateSenderKey=b.rotateSenderKey||c.some(function(a){return b.hasSenderKey.has(a)});c.forEach(function(a){b.hasSenderKey["delete"](a)});f.push(b);b.rotateSenderKey&&e.push(b)});return d("MAWDbPersonalSenderKeyStatusTxns").bulkUpdateSenderKeyStatus(a,e).then(function(){return d("MAWDexieTable").dexieResolve(f)})}g.bulkPerformSmartSenderKeyRotationForParticipantRemoval=a;g.bulkSmartSenderKeyRotateForRemovedDevices=b;g.smartRotateSenderKey=h;g.bulkSmartRotateSenderKey=i}),98);
__d("MAWMessageRequestUtils",["MAWDbContact","MAWFolderTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.folder===d("MAWFolderTypes").FOLDER_ID.PENDING||a.folder===d("MAWFolderTypes").FOLDER_ID.OTHER;return b==null?c:c||(a.folder===null||a.folder===d("MAWFolderTypes").FOLDER_ID.INBOX)&&(b.relationship===d("MAWDbContact").REVERSED_ONE_WAY_CONTACT||b.relationship===d("MAWDbContact").NON_CONTACT)}function b(a){return a.relationship===d("MAWDbContact").TWO_WAY_CONTACT}g.isMessageRequestOrSpamThread=a;g.isTwoWayContact=b}),98);
__d("MAWAdminWriteUserDeviceMsgTxn",["MAWAdminMsgTxnsUtils","MAWDbContactsTxns","MAWDbMsg","MAWDbThreadTxns","MAWDexieTable","MAWGlobals","MAWJids","MAWLocalizationType","MAWLocalizationUtils","MAWMessageRequestUtils","MAWWriteMsgTxns","WAJids","err"],(function(a,b,c,d,e,f,g){"use strict";b={add:"add",remove:"remove",update:"update"};function h(a,b){switch(a){case"add":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE;case"remove":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE;case"update":if(b)return d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE;else return d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE}}function a(a,b,e,f,g){return d("MAWDbThreadTxns").getThread(a,e).then(function(e){if(!e.success)throw c("err")("missing thread when device info changes");var i=e.value;if(i.newestMsg==null)return d("MAWDexieTable").dexieResolve();var j=d("WAJids").interpretAsGroupJid(i.jid)!=null;return d("MAWDbContactsTxns").getContact(a,b).then(function(c){if(c!=null&&!d("MAWMessageRequestUtils").isTwoWayContact(c)&&!j)return d("MAWDexieTable").dexieResolve();var e=d("MAWAdminMsgTxnsUtils").isUnknownName(c==null?void 0:c.nameForSearch);c=b===d("MAWGlobals").getMyUserJid();var k=h(f,c);c=c?[]:[d("MAWJids").userIdFromJid(b)];var l=d("MAWDbMsg").craftMsgId(i.chatId,i.nextInChatMsgId);c=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:c,adminType:k,version:1},i.chatId,i.jid,l,g);return d("MAWWriteMsgTxns").writeMsg(a,c,i).then(function(){e&&d("MAWAdminMsgTxnsUtils").afterTransactionFetchContactsNames([b])})})})}g.DeviceChange=b;g.writeUserDeviceAdminMsg=a}),98);
__d("MAWDbAddDeviceChangeAlertsTxn",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.deviceChangeAlerts.add(b)}f.addDeviceChangeAlertsTxn=a}),66);
__d("MAWDbGetAlertsWithDeviceJidTxn",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.deviceChangeAlerts.filter(function(a){return a.deviceJid===b&&!a.loggedOut}).toArray().then(function(a){a.length>1&&c("err")("Invalid result, more than one active devices with the same deviceJid: "+b);return a[0]})}g.getAlertsWithDeviceJidTxn=a}),98);
__d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn",["MAWIndexedDb"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.deviceChangeAlerts.filter(function(a){return a.isArchived===!1}).toArray().then(function(a){return d("MAWIndexedDb").afterTransaction({tag:"UnArchivedSelfDeviceChangeAlerts",value:a.length})})}g.getUnArchivedDeviceChangeAlertsCountTxn=a}),98);
__d("MAWDbUpdateDeviceChangeAlertsTxn",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.deviceChangeAlerts.put(b)}f.updateDeviceChangeAlertsTxn=a}),66);
__d("MAWDbUpdateDeviceChangeAlertsLogInStatusTxn",["MAWDbGetAlertsWithDeviceJidTxn","MAWDbUpdateDeviceChangeAlertsTxn"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWDbGetAlertsWithDeviceJidTxn").getAlertsWithDeviceJidTxn(a,b).then(function(b){return d("MAWDbUpdateDeviceChangeAlertsTxn").updateDeviceChangeAlertsTxn(a,babelHelpers["extends"]({},b,{loggedOut:!0}))})}g.updateDeviceChangeAlertsLogInStatusTxn=a}),98);
__d("MAWUpdateDevicesForUserApi",["MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWDbGetAlertsWithDeviceJidTxn","MAWDbGetUnArchivedDeviceChangeAlertsCountTxn","MAWDbIdentityTxns","MAWDbMsgTypeVersionTxns","MAWDbThreadTxns","MAWDbUpdateDeviceChangeAlertsLogInStatusTxn","MAWDexieTable","MAWGlobals","MAWIndexedDb","MAWQplProxy","MAWSmartSenderKeyRotationTxns","MAWTransactionMode","WABase64","WACryptoUtils","WAJids","WALogger","WAOdsEnums","WATimeUtils","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Got identity mismatch ",", ",""]);h=function(){return a};return a}function i(a,b){return{deviceJid:a.id,firstSeenTs:d("WATimeUtils").unixTime(),identity:a.identity,userJid:b}}function j(a,b){return a.identity.where("userJid").equals(b).toArray().then(function(a){return a.map(function(a){return a.deviceJid})})}function k(a,b,e,f,g,j,k){j===void 0&&(j="no-context");var l=e.map(function(a){return a.id}),m=b===((g=g)!=null?g:d("MAWGlobals").getMyUserJid()),n=m&&k!=null;return d("MAWDexieTable").dexieAll([d("MAWDbThreadTxns").getAllThreadsForUser(a,b).then(function(a){return a.filter(function(a){return!a.archived})}),a.identity.bulkGet(l),a.existingUsers.get(b),d("MAWDbMsgTypeVersionTxns").maybeBulkGetSecuritySetting(a)]).then(function(g){var l=g[0],o=g[1],p=g[2];g=g[3];var q=g.allowSecurityAlertForContact,r=g.allowSecurityAlertForSelf,s=new Set(f),t=[],u=[],v=0,w=0,x=0,y=!0;c("gkx")("792")?(m||q===!1)&&(y=!1):y=m?r:q;g=d("MAWDexieTable").dexieAll(o.map(function(f,g){g=e[g];var o=g.id,q=g.identity,z=g.model;g=g.platform;var A=i({id:o,identity:q},b);if(f==null){u.push(A);v++;return d("MAWDexieTable").dexieAll([n&&z!=null&&g!=null&&k!=null?d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").ADD,deviceJid:o,identity:q,isArchived:!r,model:z,platform:g,ts:k}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(p!=null&&y?l.map(function(c){return d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,b,c.chatId,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.add,k)}):[])).then(function(){(n&&z!=null||p!=null&&y)&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:m?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").ADD})})}s["delete"](A.deviceJid);if(!d("WACryptoUtils").serializedPubKeysEqual(f.identity,A.identity)){u.push(A);t.push(f.deviceJid);w++;if(d("MAWGlobals").getMyDeviceJid()===A.deviceJid){var B=d("WAJids").extractDeviceId(A.deviceJid);B=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25311782,"728"),{"int":{deviceId:B},string:{context:j}});B.endSuccess()}if(m){B=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25311490,"729"));B.endSuccess()}return d("MAWDexieTable").dexieAll([n&&z!=null&&g!=null&&k!=null?d("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(a,{action:d("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:o,identity:q,isArchived:!r,model:z,platform:g,ts:k}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(y?l.map(function(e){d("MAWGlobals").getMyDeviceJid()===A.deviceJid&&c("gkx")("8498")&&c("gkx")("3827")&&d("WALogger").ERROR(h(),d("WABase64").encodeB64(f.identity),d("WABase64").encodeB64(A.identity));return d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,b,e.chatId,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.update,k)}):[])).then(function(){(n&&z!=null||y)&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:m?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").KEY_CHANGE})})}x++})).then(function(){return d("MAWDexieTable").dexieAll(s.forEach(function(c){return d("MAWDexieTable").dexieAll([n&&k!=null?d("MAWDbGetAlertsWithDeviceJidTxn").getAlertsWithDeviceJidTxn(a,c).then(function(){return d("MAWDbUpdateDeviceChangeAlertsLogInStatusTxn").updateDeviceChangeAlertsLogInStatusTxn(a,c)}).then(function(){return d("MAWDbGetUnArchivedDeviceChangeAlertsCountTxn").getUnArchivedDeviceChangeAlertsCountTxn(a)}):d("MAWDexieTable").dexieResolve()].concat(y?l.map(function(c){return d("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(a,b,c.chatId,d("MAWAdminWriteUserDeviceMsgTxn").DeviceChange.remove,k)}):[]))})).then(function(){s.size>0&&(n||y)&&d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:m?d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_SELF:d("WAOdsEnums").Entity.SECURITY_ALERT_FOR_CONTACT,key:d("MAWDbDeviceChangeAlerts").REMOVE})})});q=l.map(function(a){return d("WAJids").interpretAsGroupJid(a.jid)}).filter(Boolean);return d("MAWDexieTable").dexieAll([a.existingUsers.put({id:b}),g,q.length>0&&s.size>0?d("MAWSmartSenderKeyRotationTxns").bulkSmartSenderKeyRotateForRemovedDevices(a,q,Array.from(s)):d("MAWDexieTable").dexieResolve(),d("MAWDbIdentityTxns").bulkPutIdentities(a,u)]).then(function(){var a=Array.from(s),b=t.concat(a);return{identitiesToDelete:a,newIdentitiesCount:v,sessionsToDelete:b,untouchedIdentitiesCount:x,updatedIdentitiesCount:w}})})}function l(a,b,c){return d("MAWDexieTable").dexieAll([a.identity.bulkDelete(b),a.session.bulkDelete(c)]).then(function(){return{identityRecordsDeletedCount:b.length,sessionRecordsDeletedCount:c.length}})}function m(a,b,c,d,e,f){e===void 0&&(e="no-context");return j(a,b).then(function(g){return k(a,b,c,g,d,e,f).then(function(b){var c=b.identitiesToDelete;b=b.sessionsToDelete;return l(a,c,b).then(function(){})})})}a=d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READONLY,chunk:d("MAWTransactionMode").READONLY,contacts:d("MAWTransactionMode").READONLY,deviceChangeAlerts:d("MAWTransactionMode").READWRITE,existingUsers:d("MAWTransactionMode").READWRITE,groupInfo:d("MAWTransactionMode").READONLY,identity:d("MAWTransactionMode").READWRITE,media:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READWRITE,participants:d("MAWTransactionMode").READONLY,personalSenderKeyStatuses:d("MAWTransactionMode").READWRITE,session:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READWRITE},c("qpl")._(25310731,"7104"))(function(a,b,c,d,e){e===void 0&&(e="no-context");return m(a,b,c.map(function(a){return babelHelpers["extends"]({},a)}),d,e)});g.getAllDeviceJidsForUser=j;g.updateDeviceIdentities=k;g.deleteSignalInfoForDevices=l;g.updateDevicesForUserTxn=m;g.updateDevicesForUser=a}),98);/*FB_PKG_DELIM*/
__d("CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7221332091272137"}),null);
__d("CometFeedFavoritesEndOfFeedMessageQuery.graphql",["CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"hasNoStories"}],c=[{alias:null,args:[{kind:"Literal",name:"is_end_of_feed",value:!0}],concreteType:"SeeFirstMigrationContent",kind:"LinkedField",name:"see_first_migration_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesEndOfFeedMessageQuery_eof",fragmentName:"CometFeedSeeFirstMigrationCard_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:"see_first_migration_content(is_end_of_feed:true)"},{alias:null,args:[{kind:"Variable",name:"is_empty_feed",variableName:"hasNoStories"}],concreteType:"ValueProposition",kind:"LinkedField",name:"favorites_caught_up_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesEndOfFeedMessageQuery_caughtup",fragmentName:"CometFeedFavoritesCaughtUp_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometFeedFavoritesEndOfFeedMessageQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometFeedFavoritesEndOfFeedMessageQuery",selections:c},params:{id:b("CometFeedFavoritesEndOfFeedMessageQuery_facebookRelayOperation"),metadata:{},name:"CometFeedFavoritesEndOfFeedMessageQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometModernHomeFeedQuery.graphql",["GroupsCometDelayCheckBlockedUsers.relayprovider","IsWorkUser.relayprovider","IsMergQAPolls.relayprovider","StoriesRing.relayprovider","CometFeedUnit_feedUnit$normalization.graphql","CometModernHomeFeedQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__GroupsCometDelayCheckBlockedUsersrelayprovider:b("GroupsCometDelayCheckBlockedUsers.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:b("IsWorkUser.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:b("IsMergQAPolls.relayprovider"),__relay_internal__pv__StoriesRingrelayprovider:b("StoriesRing.relayprovider")};a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},c={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},d={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},e={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},f={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},h={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},i={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},j={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},k={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},l={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},m={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},n={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},o={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},p={defaultValue:["TOP_STORIES"],kind:"LocalArgument",name:"orderby"},q={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},r={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},s={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},t={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},u={defaultValue:null,kind:"LocalArgument",name:"scale"},v={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},w=[{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Literal",name:"first",value:2},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],x={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},z=[y],A=[{alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:z,storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v],kind:"Fragment",metadata:null,name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNewsFeed_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,j,e,f,h,i,l,m,n,o,q,u,v,s,t,a,p,c,r,k,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GroupsCometDelayCheckBlockedUsersrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsWorkUserrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsMergQAPollsrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesRingrelayprovider"}],kind:"Operation",name:"CometModernHomeFeedQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:w,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[x,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},x],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:z,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:z,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:z,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:z,type:"XFBSFTFeedUnit",abstractKey:null},{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:A,type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:A,type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{args:null,fragment:b("CometFeedUnit_feedUnit$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewer$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:w,filters:["orderby","feed_style"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],storageKey:null}]},params:{id:b("CometModernHomeFeedQuery_facebookRelayOperation"),metadata:{},name:"CometModernHomeFeedQuery",operationKind:"query",text:null,providedVariables:g}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometNewsFeedPaginationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5910783532335039"}),null);
__d("CometNewsFeedPaginationQuery.graphql",["GroupsCometDelayCheckBlockedUsers.relayprovider","IsWorkUser.relayprovider","IsMergQAPolls.relayprovider","StoriesRing.relayprovider","CometFeedUnit_feedUnit$normalization.graphql","CometNewsFeedPaginationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__GroupsCometDelayCheckBlockedUsersrelayprovider:b("GroupsCometDelayCheckBlockedUsers.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:b("IsWorkUser.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:b("IsMergQAPolls.relayprovider"),__relay_internal__pv__StoriesRingrelayprovider:b("StoriesRing.relayprovider")};a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"RELAY_INCREMENTAL_DELIVERY"},c={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},d={defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},e={defaultValue:null,kind:"LocalArgument",name:"connectionClass"},f={defaultValue:2,kind:"LocalArgument",name:"count"},h={defaultValue:null,kind:"LocalArgument",name:"cursor"},i={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},j={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},k={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},l={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},m={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},n={defaultValue:null,kind:"LocalArgument",name:"experimentalValues"},o={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},p={defaultValue:null,kind:"LocalArgument",name:"feedStyle"},q={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},r={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},s={defaultValue:null,kind:"LocalArgument",name:"orderby"},t={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},u={defaultValue:null,kind:"LocalArgument",name:"recentVPVs"},v={defaultValue:null,kind:"LocalArgument",name:"refreshMode"},w={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},x={defaultValue:null,kind:"LocalArgument",name:"scale"},y={defaultValue:null,kind:"LocalArgument",name:"useDefaultActor"},z=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"client_query_id",variableName:"clientQueryId"},{kind:"Variable",name:"connection_class",variableName:"connectionClass"},{kind:"Literal",name:"environment",value:"DESKTOP"},{kind:"Variable",name:"experimental_values",variableName:"experimentalValues"},{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"orderby",variableName:"orderby"},{kind:"Variable",name:"recent_vpvs_v2",variableName:"recentVPVs"},{kind:"Variable",name:"refresh_mode",variableName:"refreshMode"},{kind:"Literal",name:"site",value:"comet"}],A={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},C=[B],D=[{alias:null,args:null,concreteType:"QuickPromotionFeedUnitItem",kind:"LinkedField",name:"quick_promotion_items",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"quick_promotion",plural:!1,selections:C,storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y],kind:"Fragment",metadata:null,name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[{kind:"Variable",name:"clientQueryId",variableName:"clientQueryId"},{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"CometNewsFeed_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__GroupsCometDelayCheckBlockedUsersrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsWorkUserrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__IsMergQAPollsrelayprovider"},{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesRingrelayprovider"}],kind:"Operation",name:"CometNewsFeedPaginationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:z,concreteType:"NewsFeedConnection",kind:"LinkedField",name:"news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Stream",label:"CometNewsFeed_viewer$stream$CometNewsFeed_viewer_news_feed",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[A,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null},A],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:C,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:C,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:C,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:C,type:"XFBSFTFeedUnit",abstractKey:null},{kind:"TypeDiscriminator",abstractKey:"__isFeedUnit"},{kind:"InlineFragment",selections:D,type:"QuickPromotionFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:D,type:"QuickPromotionNativeTemplateFeedUnit",abstractKey:null},{args:null,fragment:b("CometFeedUnit_feedUnit$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{"if":"RELAY_INCREMENTAL_DELIVERY",kind:"Defer",label:"CometNewsFeed_viewer$defer$CometNewsFeed_viewer_news_feed$page_info",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:z,filters:["orderby","feed_style"],handle:"comet_news_feed",key:"CometNewsFeed_viewer_news_feed",kind:"LinkedHandle",name:"news_feed"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},B],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],storageKey:null}]},params:{id:b("CometNewsFeedPaginationQuery_facebookRelayOperation"),metadata:{},name:"CometNewsFeedPaginationQuery",operationKind:"query",text:null,providedVariables:g}}}();e.exports=a}),null);
__d("CometNewsFeedUnit_edge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometNewsFeedUnit_edge",selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_feedUnit"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null}],storageKey:null},{kind:"InlineDataFragmentSpread",name:"CometNewsFeedVPVDStore_newsFeedEdge",selections:[{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_qid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vsid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vspos",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_recent_vpv_fetch_tracking_data",storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},{args:null,kind:"FragmentSpread",name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge"},{args:null,kind:"FragmentSpread",name:"CometFeedUnit_newsFeedEdge"}],type:"NewsFeedEdge",abstractKey:null};e.exports=a}),null);
__d("CometNewsFeed_viewer.graphql",["CometNewsFeedPaginationQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["news_feed"],c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"RELAY_INCREMENTAL_DELIVERY"},{kind:"RootArgument",name:"UFI2CommentsProvider_commentsKey"},{defaultValue:null,kind:"LocalArgument",name:"clientQueryId"},{kind:"RootArgument",name:"connectionClass"},{defaultValue:2,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"displayCommentsContextEnableComment"},{kind:"RootArgument",name:"displayCommentsContextIsAdPreview"},{kind:"RootArgument",name:"displayCommentsContextIsAggregatedShare"},{kind:"RootArgument",name:"displayCommentsContextIsStorySet"},{kind:"RootArgument",name:"displayCommentsFeedbackContext"},{kind:"RootArgument",name:"experimentalValues"},{kind:"RootArgument",name:"feedLocation"},{kind:"RootArgument",name:"feedStyle"},{kind:"RootArgument",name:"feedbackSource"},{kind:"RootArgument",name:"focusCommentID"},{kind:"RootArgument",name:"orderby"},{kind:"RootArgument",name:"privacySelectorRenderLocation"},{kind:"RootArgument",name:"recentVPVs"},{kind:"RootArgument",name:"refreshMode"},{kind:"RootArgument",name:"renderLocation"},{kind:"RootArgument",name:"scale"},{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:a,stream:!0}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:a},fragmentPathInResult:["viewer"],operation:b("CometNewsFeedPaginationQuery.graphql")}},name:"CometNewsFeed_viewer",selections:[{alias:"news_feed",args:[{kind:"Variable",name:"feed_style",variableName:"feedStyle"},{kind:"Variable",name:"orderby",variableName:"orderby"}],concreteType:"NewsFeedConnection",kind:"LinkedField",name:"__CometNewsFeed_viewer_news_feed_comet_news_feed",plural:!1,selections:[{alias:null,args:null,concreteType:"NewsFeedInject",kind:"LinkedField",name:"injected_stories",plural:!1,selections:[{args:null,documentName:"CometNewsFeed_viewer",fragmentName:"CometInjectedStoriesNotice_edge",fragmentPropName:"edge",kind:"ModuleImport"}],storageKey:null},{kind:"Stream",selections:[{alias:null,args:null,concreteType:"NewsFeedEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sponsored_auction_distance",storageKey:null},{kind:"InlineDataFragmentSpread",name:"useCometFeedUnitReordering_newsFeedEdge",selections:[{alias:null,args:null,kind:"ScalarField",name:"brs_content_label",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"brs_filter_setting",storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,{args:null,kind:"FragmentSpread",name:"CometFeedUnitErrorBoundary_feedUnit"}],storageKey:null},{alias:null,args:null,concreteType:"FeedBackendData",kind:"LinkedField",name:"feed_backend_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"qid",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometNewsFeedUnit_edge"},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}]},{kind:"Defer",selections:[{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_have_friends",storageKey:null},{alias:null,args:null,concreteType:"AllFriendsConnection",kind:"LinkedField",name:"all_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"friend_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_fb_employee",storageKey:null}],type:"Viewer",abstractKey:null}}();e.exports=a}),null);
__d("CometFeedFavoritesHeaderQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4698600443600354"}),null);
__d("CometFeedFavoritesHeaderQuery.graphql",["CometFeedFavoritesHeaderQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SeeFirstMigrationContent",kind:"LinkedField",name:"see_first_migration_content",plural:!1,selections:[{args:null,documentName:"CometFeedFavoritesHeaderQuery",fragmentName:"CometFeedSeeFirstMigrationCard_content",fragmentPropName:"content",kind:"ModuleImport"}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedFavoritesHeaderQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometFeedFavoritesHeaderQuery",selections:a},params:{id:b("CometFeedFavoritesHeaderQuery_facebookRelayOperation"),metadata:{},name:"CometFeedFavoritesHeaderQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge",selections:[{alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedUnitEventLogger_feedUnit"}],storageKey:null}],type:"NewsFeedEdge",abstractKey:null};e.exports=a}),null);
__d("useCometFeedUnitReordering_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"useCometFeedUnitReordering_newsFeedEdge"};e.exports=a}),null);
__d("CometHomeContactGroupsContainerQuery.graphql",["WebPixelRatio.relayprovider","CometHomeContactGroupsContainerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__WebPixelRatiorelayprovider:b("WebPixelRatio.relayprovider")};a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},e={kind:"Literal",name:"height",value:36},f={kind:"Literal",name:"width",value:36},h=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometHomeContactGroups_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"}],kind:"Operation",name:"CometHomeContactGroupsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_status_viewable",storageKey:null},c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:[{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null},c],storageKey:null},d,{alias:null,args:[e,f],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:h,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[a,c,d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[e,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},f],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:h,storageKey:null}],storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:null},c],storageKey:null}],storageKey:null}],storageKey:"message_threads(group_threads_only:true,last:10)"}],storageKey:null}]},params:{id:b("CometHomeContactGroupsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactGroupsContainerQuery",operationKind:"query",text:null,providedVariables:g}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometHomeContactGroups_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},b={kind:"Literal",name:"height",value:36},c={kind:"Literal",name:"width",value:36},d=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__WebPixelRatiorelayprovider"}],kind:"Fragment",metadata:null,name:"CometHomeContactGroups_viewer",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_hide_group_conversations_list",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_status_viewable",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null},{alias:null,args:[{kind:"Literal",name:"group_threads_only",value:!0},{kind:"Literal",name:"last",value:10}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_xac",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null}],storageKey:null},a,{alias:null,args:[b,c],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:d,storageKey:"image(height:36,width:36)"},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[b,{kind:"Variable",name:"scale",variableName:"__relay_internal__pv__WebPixelRatiorelayprovider"},c],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:d,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"message_threads(group_threads_only:true,last:10)"}],type:"Viewer",abstractKey:null}}();e.exports=a}),null);
__d("CometHomeContactsContainerQuery.graphql",["CometHomeContactsContainerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"numContactsToFetch"},c={defaultValue:null,kind:"LocalArgument",name:"presenceReadEnableMsys"},d={defaultValue:null,kind:"LocalArgument",name:"scale"},e=[{kind:"Literal",name:"supported",value:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"]}],f={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsDefaultRenderer_contactsHomeDefaultRenderer",fragmentPropName:"contactsHomeDefaultRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeDefaultRenderer",abstractKey:null},g={kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeContactsContainerQuery",fragmentName:"CometHomeContactsMessagingSolutionForAPRenderer_contactsHomeMessagingSolutionForAPRenderer",fragmentPropName:"contactsHomeMessagingSolutionForAPRenderer",kind:"ModuleImport"}],type:"XFBContactsHomeMessagingSolutionForAPRenderer",abstractKey:null},h={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"CometHomeContactsContainerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[f,g],storageKey:'contacts_home_renderer(supported:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"])'}],type:"User",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c],kind:"Operation",name:"CometHomeContactsContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[h,{kind:"InlineFragment",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"contacts_home_renderer",plural:!1,selections:[h,f,g],storageKey:'contacts_home_renderer(supported:["XFBContactsHomeDefaultRenderer","XFBContactsHomeMessagingSolutionForAPRenderer"])'}],type:"User",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometHomeContactsContainerQuery_facebookRelayOperation"),metadata:{},name:"CometHomeContactsContainerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometHomeRightSideEgoContainer_egoPanel.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoContainer_egoPanel",selections:[{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6269297973131907"}),null);
__d("CometHomeRightSideEgoRefetchQuery.graphql",["CometHomeRightSideEgoRefetchQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:0,kind:"LocalArgument",name:"refresh_num"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c={kind:"Variable",name:"refresh_num",variableName:"refresh_num"},d=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:[c],kind:"FragmentSpread",name:"CometHomeRightSideEgo_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometHomeRightSideEgoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"sideFeed",args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},c],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:d,type:"AdsSideFeedUnitItem",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometHomeRightSideEgoRefetchQuery_facebookRelayOperation"),metadata:{},name:"CometHomeRightSideEgoRefetchQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometHomeRightSideEgo_viewer.graphql",["CometHomeRightSideEgoRefetchQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:0,kind:"LocalArgument",name:"refresh_num"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["viewer"],operation:b("CometHomeRightSideEgoRefetchQuery.graphql")}},name:"CometHomeRightSideEgo_viewer",selections:[{alias:"sideFeed",args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometRightSideHeaderCardsQuery.graphql",["StoriesRing.relayprovider","CometRightSideHeaderCardsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";var g={__relay_internal__pv__StoriesRingrelayprovider:b("StoriesRing.relayprovider")};a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"refresh_num"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={kind:"Literal",name:"environment",value:"COMET"},e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h=[f],i={kind:"InlineFragment",selections:h,type:"Node",abstractKey:"__isNode"};h={kind:"InlineFragment",selections:h,type:"AdsSideFeedUnitItem",abstractKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometRightSideHeaderCards_viewerSideFeed"},{args:null,kind:"FragmentSpread",name:"CometHomeRightSideEgoContainer_egoPanel"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PagesCometHomeAdminContainer_query"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,{defaultValue:null,kind:"LocalArgument",name:"__relay_internal__pv__StoriesRingrelayprovider"}],kind:"Operation",name:"CometRightSideHeaderCardsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"right_side_widget_container_placement",storageKey:null},{alias:null,args:[d,{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[e,{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainer_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainerWithSeeMore_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainerWithSeeMore",abstractKey:null},i,h],storageKey:null}],storageKey:null},{alias:"sideFeed",args:[d,{kind:"Literal",name:"query_ego_units",value:!0},{kind:"Literal",name:"refresh_num",value:0}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[e,{kind:"InlineFragment",selections:[{args:null,documentName:"CometHomeRightSideEgo_viewer",fragmentName:"CometAdsSideFeedUnit_adsSideFeedUnit",fragmentPropName:"adsSideFeedUnit",kind:"ModuleImport"}],type:"AdsSideFeedUnit",abstractKey:null},i,h],storageKey:null}],storageKey:'side_feed(environment:"COMET",query_ego_units:true,refresh_num:0)'},{alias:null,args:null,kind:"ScalarField",name:"globe_focus",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_profile_plus_on_like_experience",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"delegate_page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_manage_classic_page_in_pages_tab",storageKey:null}],type:"User",abstractKey:null},f],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:b("CometRightSideHeaderCardsQuery_facebookRelayOperation"),metadata:{},name:"CometRightSideHeaderCardsQuery",operationKind:"query",text:null,providedVariables:g}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometRightSideHeaderCards_viewerSideFeed.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"refresh_num"}],kind:"Fragment",metadata:null,name:"CometRightSideHeaderCards_viewerSideFeed",selections:[{alias:null,args:null,kind:"ScalarField",name:"right_side_widget_container_placement",storageKey:null},{alias:null,args:[{kind:"Literal",name:"environment",value:"COMET"},{kind:"Literal",name:"query_ego_units",value:!1},{kind:"Variable",name:"refresh_num",variableName:"refresh_num"}],concreteType:"SideFeedConnection",kind:"LinkedField",name:"side_feed",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"PagesCometHomeAdminContainer_pagesPanel",fragmentPropName:"pagesPanel",kind:"ModuleImport"}],type:"PagesSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"FriendingCometHomeInlineRHCContainer_friendsPanel",fragmentPropName:"friendsPanel",kind:"ModuleImport"}],type:"FriendingRequestsSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRemindersContainer_reminderPanel",fragmentPropName:"reminderPanel",kind:"ModuleImport"}],type:"RemindersSideFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainer_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometRightSideHeaderCards_viewerSideFeed",fragmentName:"CometHomeRightSideWidgetContainerWithSeeMore_widgetContainer",fragmentPropName:"widgetContainer",kind:"ModuleImport"}],type:"CometHomeSideFeedWidgetContainerWithSeeMore",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometFeedInlineComposerQuery.graphql",["CometFeedInlineComposerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"includeSingleSprout"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null},g=[e,f];return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerWOYM_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerPressableProfilePic_profile"},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_profile"},{kind:"InlineFragment",selections:g,type:"User",abstractKey:null},{kind:"InlineFragment",selections:g,type:"Page",abstractKey:null}],storageKey:null},action:"THROW",path:"viewer.actor"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{condition:"includeSingleSprout",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSingleSprout_composer"}]},{args:null,kind:"FragmentSpread",name:"CometFeedInlineComposerSproutsList_composer"}],storageKey:null},action:"THROW",path:"viewer.feed_comet_composer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"CometFeedInlineComposerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[d,{kind:"TypeDiscriminator",abstractKey:"__isActor"},e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},f],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"}],type:"Profile",abstractKey:"__isProfile"},{kind:"InlineFragment",selections:[f],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FeedCometComposer",kind:"LinkedField",name:"feed_comet_composer",plural:!1,selections:[{condition:"includeSingleSprout",kind:"Condition",passingValue:!0,selections:[{kind:"InlineFragment",selections:[{alias:"inline_single_sprout",args:[{kind:"Literal",name:"supported",value:["CometComposerUploadMediaSprout"]}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSingleSprout_composer",fragmentName:"CometFeedInlineComposerSingleSproutMedia_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:["CometComposerUploadMediaSprout"])'}],type:"ICometComposer",abstractKey:"__isICometComposer"}]},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"]}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[d,{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"InlineComposerLiveProducerSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerLiveProducerSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMediaSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMagicUploadsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMagicUploadsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerWithTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerLocationTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerLocationTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerFeelingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMinutiaeSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetWhatsAppMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetWhatsAppMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerArticlesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerArticlesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerReelsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerReelsSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"])'}],type:"ICometComposer",abstractKey:"__isICometComposer"}],storageKey:null}],storageKey:null}]},params:{id:b("CometFeedInlineComposerQuery_facebookRelayOperation"),metadata:{},name:"CometFeedInlineComposerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometFeedInlineComposerSproutsList_composer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerSproutsList_composer",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"]}],concreteType:null,kind:"LinkedField",name:"inline_sprouts",plural:!0,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"InlineComposerLiveProducerSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerLiveProducerSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMediaSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerUploadMediaSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerMagicUploadsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMagicUploadsSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerWithTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerLocationTaggingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerLocationTaggingSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerFeelingSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerMinutiaeSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerGetWhatsAppMessagesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"FeedCometComposerGetWhatsAppMessagesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerArticlesSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerArticlesSprout",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometFeedInlineComposerSproutsList_composer",fragmentName:"FeedInlineComposerReelsSprout_sprout",fragmentPropName:"sprout",kind:"ModuleImport"}],type:"CometComposerReelsSprout",abstractKey:null}],storageKey:'inline_sprouts(supported:["FeedCometComposerLiveProducerSprout","CometComposerUploadMediaSprout","CometComposerMagicUploadsSprout","CometComposerWithTaggingSprout","CometComposerLocationTaggingSprout","FeedCometComposerGetMessagesSprout","CometComposerMinutiaeSprout","FeedCometComposerGetWhatsAppMessagesSprout","CometComposerArticlesSprout","CometComposerReelsSprout"])'}],type:"ICometComposer",abstractKey:"__isICometComposer"};e.exports=a}),null);
__d("CometFeedInlineComposerSproutsList_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedInlineComposerSproutsList_profile",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"Profile",abstractKey:"__isProfile"};e.exports=a}),null);
__d("CometMegaphoneRootQuery.graphql",["CometMegaphoneRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:1,kind:"LocalArgument",name:"first"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"surface_nux_id",value:2646},{kind:"Literal",name:"trigger",value:"NEWSFEED"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMegaphoneQuickPromotionSection_quickPromotion"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometMegaphoneRootQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"megaphonePromotions",args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerEligibleQuickPromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPrimaryTestUserUpsellQP","CometSlimMegaphoneRendererStrategy","CometStandardMegaphoneRendererStrategy","CometEmergencyMegaphoneRendererStrategy","CometMegaphoneWWWDeviceBasedLoginRendererStrategy","CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy","CometQuickPromotionPageTransparencyMegaphoneRendererStrategy","CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy","CometQuickPromotionNonprofitMegaphoneRendererStrategy","CometQPDiglossiaSurveyRendererStrategy","CometQPRegularSurveyRendererStrategy","CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy","CometQuickPromotionFullImageMegaphoneRendererStrategy","CometQuickPromotionBLMMegaphoneRendererStrategy","CometConsentFrameworkRendererStrategy","CometQuickPromotionPPAMegaphoneRendererStrategy","CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy","CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy","CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy","CometQuickPromotionFullBleedImageRendererStrategy","CometQuickPromotionCreateStreamerFanGroupsRendererStrategy","CometSideImageMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionRendererStrategy","CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy","CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy","CometQuickPromotionTransparencyInformPlatformRendererStrategy","CometQuickPromotionSettingsContextualMessageRendererStrategy","CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy","CometMegaphoneGHLAdBlockerNotificationRendererStrategy","CometQuickPromotionLFCFeedUnitRendererStrategy"]}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometPrimaryTestUserUpsellQP_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometPrimaryTestUserUpsellQP",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometSlimMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometSlimMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometStandardMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometStandardMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometEmergencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometEmergencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWDeviceBasedLoginRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPageTransparencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPageTransparencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNonprofitMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNonprofitMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPDiglossiaSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPDiglossiaSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQPRegularSurveyRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQPRegularSurveyRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionBLMMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionBLMMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometConsentFrameworkRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometConsentFrameworkRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionFullBleedImageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionFullBleedImageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionCreateStreamerFanGroupsRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionCreateStreamerFanGroupsRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometSideImageMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometSideImageMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWEmailAcquisitionRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWEmailAcquisitionRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionTransparencyInformPlatformRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionTransparencyInformPlatformRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionSettingsContextualMessageRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionSettingsContextualMessageRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometMegaphoneGHLAdBlockerNotificationRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometMegaphoneGHLAdBlockerNotificationRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMegaphoneQuickPromotionSection_quickPromotion",fragmentName:"CometQuickPromotionLFCFeedUnitRendererStrategy_quickPromotion",fragmentPropName:"quickPromotion",kind:"ModuleImport"}],type:"CometQuickPromotionLFCFeedUnitRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:["CometPrimaryTestUserUpsellQP","CometSlimMegaphoneRendererStrategy","CometStandardMegaphoneRendererStrategy","CometEmergencyMegaphoneRendererStrategy","CometMegaphoneWWWDeviceBasedLoginRendererStrategy","CometQuickPromotionAYMTNewsFeedMegaphoneRendererStrategy","CometQuickPromotionPageTransparencyMegaphoneRendererStrategy","CometQuickPromotionLocationTransparencyMegaphoneRendererStrategy","CometQuickPromotionNonprofitMegaphoneRendererStrategy","CometQPDiglossiaSurveyRendererStrategy","CometQPRegularSurveyRendererStrategy","CometQuickPromotionFundraiserPromotionalMegaphoneRendererStrategy","CometQuickPromotionFullImageMegaphoneRendererStrategy","CometQuickPromotionBLMMegaphoneRendererStrategy","CometConsentFrameworkRendererStrategy","CometQuickPromotionPPAMegaphoneRendererStrategy","CometQuickPromotionPPAPostEnforcementMegaphoneRendererStrategy","CometQuickPromotionPPAPreApprovedMegaphoneRendererStrategy","CometQuickPromotionAskMeAnythingNewsFeedMegaphoneRendererStrategy","CometQuickPromotionFullBleedImageRendererStrategy","CometQuickPromotionCreateStreamerFanGroupsRendererStrategy","CometSideImageMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionRendererStrategy","CometQuickPromotionPrayerSettingsMegaphoneRendererStrategy","CometMegaphoneWWWEmailAcquisitionNoAutofillRendererStrategy","CometQuickPromotionNewsfeedPrivacyPolicyNoticeMegaphoneRendererStrategy","CometQuickPromotionTransparencyInformPlatformRendererStrategy","CometQuickPromotionSettingsContextualMessageRendererStrategy","CometQuickPromotionProfilePlusTopOfFeedMegaphoneRendererStrategy","CometMegaphoneGHLAdBlockerNotificationRendererStrategy","CometQuickPromotionLFCFeedUnitRendererStrategy"])'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometMegaphoneRootQuery_facebookRelayOperation"),metadata:{},name:"CometMegaphoneRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"Variable",name:"isCommentEnabled",variableName:"isCommentEnabled"};return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"isCommentEnabled"}],kind:"Fragment",metadata:{plural:!0},name:"StoriesTrayRectangularBuckets_buckets",selections:[a,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[a],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchProfileURI_profile"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsLogger_buckets"},{args:null,kind:"FragmentSpread",name:"useStoriesBucketsIndexer_buckets"},{args:[b],kind:"FragmentSpread",name:"StoriesTrayTileSelf_bucket"},{args:[{kind:"Variable",name:"blur",variableName:"blur"},b],kind:"FragmentSpread",name:"StoriesTrayTile_bucket"}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_createTileUris.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularBuckets_createTileUris",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayCreateTile_imageUris"}],type:"User",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayRectangularBuckets_reels.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesTrayRectangularBuckets_reels",selections:[{args:null,kind:"FragmentSpread",name:"FBReelsTopOfFeedTrayTile_card"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayRectangularQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6123595047692285"}),null);
__d("StoriesTrayRectangularQuery.graphql",["StoriesTrayRectangularQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"blur"},c={defaultValue:null,kind:"LocalArgument",name:"bucketsToFetch"},d={defaultValue:null,kind:"LocalArgument",name:"cursor"},e={defaultValue:null,kind:"LocalArgument",name:"id"},f={defaultValue:null,kind:"LocalArgument",name:"isCommentEnabled"},g={defaultValue:null,kind:"LocalArgument",name:"scale"},h=[{kind:"Variable",name:"id",variableName:"id"}],i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},k=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"bucketsToFetch"}],l={kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},m={kind:"Variable",name:"scale",variableName:"scale"},n={kind:"Literal",name:"width",value:40},o=[m,n],p=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],q={alias:"profilePic",args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};o={alias:null,args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null};var s=[{kind:"Literal",name:"height",value:277},m,{kind:"Literal",name:"width",value:156}],t={alias:"coverImage",args:s,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},u=[q,r,o,t];n=[{kind:"Literal",name:"height",value:40},m,n];var v=[j],w={kind:"InlineFragment",selections:v,type:"Node",abstractKey:"__isNode"},x={kind:"InlineFragment",selections:v,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},y={kind:"InlineFragment",selections:v,type:"GenericAttachmentMedia",abstractKey:null},z={kind:"InlineFragment",selections:v,type:"MontageImage",abstractKey:null};v={kind:"InlineFragment",selections:v,type:"MontageVideo",abstractKey:null};var A=[l,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:h,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"StoriesTrayRectangular_me"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,d,f,g,e],kind:"Operation",name:"StoriesTrayRectangularQuery",selections:[{alias:null,args:h,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,j,{kind:"InlineFragment",selections:[{alias:null,args:k,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[i,l,j,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[j,{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},j],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[i,{kind:"InlineFragment",selections:u,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:n,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},r,{alias:null,args:n,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:p,storageKey:null},t],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:u,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[q,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},r,o,t,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},w],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[j,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[i,w,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},w],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},x,y,z,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:s,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:p,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},j],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[j,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},m],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:p,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},m,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:p,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{"if":null,kind:"Defer",label:"StoriesTrayTileSelf_bucket$defer$StoriesTrayTileView_bucket",selections:A},{"if":null,kind:"Defer",label:"StoriesTrayTile_bucket$defer$StoriesTrayTileView_bucket",selections:A}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:k,filters:null,handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"}],type:"User",abstractKey:null}],storageKey:null}]},params:{id:b("StoriesTrayRectangularQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StoriesTrayRectangularReelsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8242839265790552"}),null);
__d("StoriesTrayRectangularReelsQuery.graphql",["StoriesTrayRectangularReelsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"reelsCount"},{defaultValue:null,kind:"LocalArgument",name:"reelsCursor"},{defaultValue:null,kind:"LocalArgument",name:"shouldSkipReelsPlayCountFetch"}],c=[{kind:"Variable",name:"after",variableName:"reelsCursor"},{kind:"Variable",name:"first",variableName:"reelsCount"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e=[d];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StoriesTrayRectangularReelsQuery",selections:[{args:[{kind:"Variable",name:"reelsCursor",variableName:"reelsCursor"}],kind:"FragmentSpread",name:"StoriesTrayRectangular_reels"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StoriesTrayRectangularReelsQuery",selections:[{alias:null,args:c,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"fb_shorts_unified_tofu",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:null,concreteType:"ShortFormVideoContext",kind:"LinkedField",name:"short_form_video_context",plural:!1,selections:[{condition:"shouldSkipReelsPlayCountFetch",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_count_reduced",storageKey:null}]},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"playback_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:e,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:e,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:e,type:"XFBSFTFeedUnit",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},d],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:c,filters:null,handle:"connection",key:"StoriesTrayRectangularReels_fb_shorts_unified_tofu",kind:"LinkedHandle",name:"fb_shorts_unified_tofu"}]},params:{id:b("StoriesTrayRectangularReelsQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularReelsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StoriesTrayRectangularRootQuery.graphql",["StoriesTrayRectangularRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:10,kind:"LocalArgument",name:"blur"},c={defaultValue:8,kind:"LocalArgument",name:"bucketsToFetch"},d={defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},e={defaultValue:1,kind:"LocalArgument",name:"reelsCount"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:!1,kind:"LocalArgument",name:"shouldEnableHybridTray"},h={defaultValue:!1,kind:"LocalArgument",name:"shouldSkipReelsPlayCountFetch"},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j=[i],k={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l=[{kind:"Variable",name:"first",variableName:"bucketsToFetch"}],m={kind:"TypeDiscriminator",abstractKey:"__isStoryBucket"},n={kind:"Variable",name:"scale",variableName:"scale"},o={kind:"Literal",name:"width",value:40},p=[n,o],q=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],r={alias:"profilePic",args:p,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};p={alias:null,args:p,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null};var t=[{kind:"Literal",name:"height",value:277},n,{kind:"Literal",name:"width",value:156}],u={alias:"coverImage",args:t,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},v=[r,s,p,u];o=[{kind:"Literal",name:"height",value:40},n,o];var w={kind:"InlineFragment",selections:j,type:"Node",abstractKey:"__isNode"},x={kind:"InlineFragment",selections:j,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},y={kind:"InlineFragment",selections:j,type:"GenericAttachmentMedia",abstractKey:null},z={kind:"InlineFragment",selections:j,type:"MontageImage",abstractKey:null},A={kind:"InlineFragment",selections:j,type:"MontageVideo",abstractKey:null},B=[m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_comments",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null}],C={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},D={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null},E=[{kind:"Variable",name:"first",variableName:"reelsCount"}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangular_me"},{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_createTileUris"}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:j,storageKey:null}],storageKey:null},{condition:"shouldEnableHybridTray",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangular_reels"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[f,c,a,d,e,g,h],kind:"Operation",name:"StoriesTrayRectangularRootQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[k,i,{kind:"InlineFragment",selections:[{alias:null,args:l,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"unified_stories_buckets",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[k,m,i,{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[i,{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[k,{kind:"InlineFragment",selections:v,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},s,{alias:null,args:o,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null},u],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:v,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[r,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},s,p,u,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},w],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[i,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[k,w,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{args:null,documentName:"StoriesTrayTileView_warningScreen",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null},w],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"},x,y,z,A],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:t,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[i,{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},n],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z,A],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},n,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],type:"Photo",abstractKey:null},w,x,y,z,A],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{"if":null,kind:"Defer",label:"StoriesTrayTileSelf_bucket$defer$StoriesTrayTileView_bucket",selections:B},{"if":null,kind:"Defer",label:"StoriesTrayTile_bucket$defer$StoriesTrayTileView_bucket",selections:B}]}],storageKey:null},C],storageKey:null},D],storageKey:null},{alias:null,args:l,filters:null,handle:"connection",key:"StoriesTrayRectangular_unified_stories_buckets",kind:"LinkedHandle",name:"unified_stories_buckets"},{alias:"profilePicture",args:[{kind:"Literal",name:"height",value:150},n,{kind:"Literal",name:"width",value:150}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:q,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[k,i],storageKey:null}],storageKey:null},{condition:"shouldEnableHybridTray",kind:"Condition",passingValue:!0,selections:[{alias:null,args:E,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"fb_shorts_unified_tofu",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:null,concreteType:"ShortFormVideoContext",kind:"LinkedField",name:"short_form_video_context",plural:!1,selections:[{condition:"shouldSkipReelsPlayCountFetch",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_count_reduced",storageKey:null}]},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"playback_video",plural:!1,selections:[i,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:q,storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null},w,{kind:"InlineFragment",selections:j,type:"FBShortsMidCardFeedUnit",abstractKey:null},{kind:"InlineFragment",selections:j,type:"XFBDummyReelsInWatchIFU",abstractKey:null},{kind:"InlineFragment",selections:j,type:"XFBSFTFeedUnit",abstractKey:null}],storageKey:null},C,i],storageKey:null},D],storageKey:null},{alias:null,args:E,filters:null,handle:"connection",key:"StoriesTrayRectangularReels_fb_shorts_unified_tofu",kind:"LinkedHandle",name:"fb_shorts_unified_tofu"}]}]},params:{id:b("StoriesTrayRectangularRootQuery_facebookRelayOperation"),metadata:{},name:"StoriesTrayRectangularRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("StoriesTrayRectangular_me.graphql",["StoriesTrayRectangularQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["unified_stories_buckets"];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{kind:"RootArgument",name:"bucketsToFetch"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{kind:"RootArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{connection:[{count:"bucketsToFetch",cursor:"cursor",direction:"forward",path:a}],refetch:{connection:{forward:{count:"bucketsToFetch",cursor:"cursor"},backward:null,path:a},fragmentPathInResult:["node"],operation:b("StoriesTrayRectangularQuery.graphql"),identifierField:"id"}},name:"StoriesTrayRectangular_me",selections:[{alias:"unified_stories_buckets",args:null,concreteType:"UserToUnifiedStoryBucketsConnection",kind:"LinkedField",name:"__StoriesTrayRectangular_unified_stories_buckets_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserToUnifiedStoryBucketsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_buckets"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"User",abstractKey:null}}();e.exports=a}),null);
__d("StoriesTrayRectangular_reels.graphql",["StoriesTrayRectangularReelsQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=["fb_shorts_unified_tofu"];return{argumentDefinitions:[{kind:"RootArgument",name:"reelsCount"},{defaultValue:null,kind:"LocalArgument",name:"reelsCursor"},{kind:"RootArgument",name:"shouldSkipReelsPlayCountFetch"}],kind:"Fragment",metadata:{connection:[{count:"reelsCount",cursor:"reelsCursor",direction:"forward",path:a}],refetch:{connection:{forward:{count:"reelsCount",cursor:"reelsCursor"},backward:null,path:a},fragmentPathInResult:[],operation:b("StoriesTrayRectangularReelsQuery.graphql")}},name:"StoriesTrayRectangular_reels",selections:[{alias:"fb_shorts_unified_tofu",args:null,concreteType:"FbShortsUnifiedTofuConnection",kind:"LinkedField",name:"__StoriesTrayRectangularReels_fb_shorts_unified_tofu_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"FbShortsUnifiedTofuEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayRectangularBuckets_reels"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();e.exports=a}),null);
__d("StoriesTrayTileSelf_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"Variable",name:"scale",variableName:"scale"},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],d=[{kind:"Literal",name:"height",value:277},b,{kind:"Literal",name:"width",value:156}];return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"StoriesTrayTileSelf_bucket",selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[b,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null},{alias:"coverImage",args:d,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[a,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:d,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:c,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[a,{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_bucket"}]}]}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("StoriesTrayTile_LWRAnimations.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTile_LWRAnimations",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_LWRAnimations"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("StoriesTrayTile_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},c={kind:"Variable",name:"scale",variableName:"scale"},d={kind:"Literal",name:"width",value:40},e=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],f={alias:null,args:[c,d],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},g=[{kind:"Literal",name:"height",value:277},c,{kind:"Literal",name:"width",value:156}],h={alias:"coverImage",args:g,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},i=[b,f,h];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{defaultValue:!1,kind:"LocalArgument",name:"isCommentEnabled"},{kind:"RootArgument",name:"scale"},{defaultValue:!1,kind:"LocalArgument",name:"shouldSkipCanViewerReply"}],kind:"Fragment",metadata:null,name:"StoriesTrayTile_bucket",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null}],type:"DirectMessageThreadBucket",abstractKey:null},{args:null,kind:"FragmentSpread",name:"useStoriesTrayProfileImpressionLogging_bucket"},a,{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:i,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[b,{alias:null,args:[{kind:"Literal",name:"height",value:40},c,d],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:e,storageKey:null},h],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:i,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[b,f,h,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story_tray"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_warningScreen"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story_tray")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:g,concreteType:"Image",kind:"LinkedField",name:"story_thumbnail",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"FBStoryPortalInfo",kind:"LinkedField",name:"background_color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"FBStoryColorInfo",kind:"LinkedField",name:"color_info",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dominant_color",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[a,{condition:"shouldSkipCanViewerReply",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reply",storageKey:null}],storageKey:null}]},{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePressable_story"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_live",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{condition:"isCommentEnabled",kind:"Condition",passingValue:!0,selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"StoriesTrayTileView_bucket"}]}]}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayProfileImpressionLogging_bucket.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesTrayProfileImpressionLogging_bucket",selections:[a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ranking_tracking_string",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"thumbnail_story_to_show",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[b],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayTilePrefetchImageURI_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePrefetchImageURI_story",selections:[{alias:null,args:null,concreteType:"StoryBackdrop",kind:"LinkedField",name:"backdrop",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"blur",variableName:"blur"},a],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:b,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"height",value:1920},a,{kind:"Literal",name:"width",value:1080}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:b,storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null}}();e.exports=a}),null);
__d("useStoriesTrayTilePrefetchProfileURI_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b={kind:"Literal",name:"width",value:40},c=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],d=[{alias:"profilePic",args:[a,b],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{plural:!0},name:"useStoriesTrayTilePrefetchProfileURI_profile",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:d,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"profilePic",args:[{kind:"Literal",name:"height",value:40},a,b],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:c,storageKey:null}],type:"Group",abstractKey:null},{kind:"InlineFragment",selections:d,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:d,type:"User",abstractKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesTrayTilePressable_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"blur"}],kind:"Fragment",metadata:null,name:"useStoriesTrayTilePressable_story",selections:[{args:[{kind:"Variable",name:"blur",variableName:"blur"}],kind:"FragmentSpread",name:"useStoriesTrayTilePrefetchImageURI_story"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("useStoriesBucketsIndexer_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsIndexer_buckets",selections:[{args:null,kind:"FragmentSpread",name:"useStoriesIsBucketEmpty_buckets"},a,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_post",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"story_card_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("useStoriesBucketsLogger_buckets.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"useStoriesBucketsLogger_buckets",selections:[{alias:null,args:null,kind:"ScalarField",name:"story_bucket_type",storageKey:null},a,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_bucket_owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},a],type:"User",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null},{alias:null,args:null,concreteType:"UnifiedStoryBucketToUnifiedStoriesConnection",kind:"LinkedField",name:"unified_stories",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_empty",storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"nodes",plural:!0,selections:b,storageKey:null}],storageKey:null}],type:"StoryBucket",abstractKey:"__isStoryBucket"}}();e.exports=a}),null);
__d("CometSideAdsRefreshHandler",["CometDebounce","CometHomeRightSideEgoRefetchQuery.graphql","CometRHCRefreshConfig","CometRelay","ODS","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g){var h=this;d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.constructor");this.$1=a;this.$2=!0;this.$9=1;this.$3=!1;this.$4=b;this.$6=!1;this.$7=!1;this.$8=!1;this.$10=!1;this.$11=!1;this.$5=Date.now();this.$13=e;this.$14=f;this.$16=g;this.$15=!1;this.$12=c("CometDebounce")(function(){h.checkEligibilityAndRefreshIfAllowed()},{wait:c("CometRHCRefreshConfig").debounceDelay})}var b=a.prototype;b.checkEligibilityAndRefreshIfAllowed=function(){this.checkRefreshEligibility()&&this.refresh()};b.checkRefreshEligibility=function(){if(this.$14||this.$6||!this.$2)return!1;if(this.isAdBackgroundedOnHomeTab()||this.isAdHiddenOnHomeTab())return!1;if(this.$8||Date.now()-this.$5>=c("CometRHCRefreshConfig").refreshTimeout){c("CometRHCRefreshConfig").enableTestMode&&d("CometRelay").fetchQuery(this.$1,c("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:d("WebPixelRatio").get()},{}).toPromise();return!0}return!1};b.unregister=function(){this.$15&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_query_discarded"),this.$2=!1,this.handleActivityTracking()};b.refresh=function(){var a=this;if(this.$6)return;d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_triggered");this.$6=!0;var b="store-or-network";this.$8&&this.$9!==0&&(d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_started"),b="network-only",this.$9=0,this.$15=!0);d("CometRelay").fetchQuery(this.$1,c("CometHomeRightSideEgoRefetchQuery.graphql"),{refresh_num:this.$9,scale:d("WebPixelRatio").get()},{fetchPolicy:b}).toPromise().then(function(b){if(a.$14||a.isAdBackgroundedOnHomeTab()||a.isAdHiddenOnHomeTab()||a.$7){d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refresh_cancelled");return}b=a.isAdHiddenForRefresh();a.$8&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_finished."+(b?"hidden":"visible"));a.$8=!1;b?(a.$10=!0,a.$13(a.$9),a.$9++,d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.hidden")):(a.$13(a.$9),a.$9++,a.$15=!1,a.$5=Date.now(),d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.refreshing_ui.visible"))})["finally"](function(){a.$6=!1,a.$7&&(a.$7=!1,window.setTimeout(a.checkEligibilityAndRefreshIfAllowed(),0))})};b.restartInitialLoad=function(){if(this.$8||!this.$2){this.$2&&!this.$8&&d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity_lost.not_refreshed");return}this.$8=!0;this.$6?this.$7=!0:this.checkEligibilityAndRefreshIfAllowed()};b.handleActivityTracking=function(){var a=this.$2&&this.$3&&!this.$4;a!==this.$11&&(a?this.enableActivityListeners():this.removeActivityListeners())};b.isAdHiddenForRefresh=function(){return this.$4&&!this.$3};b.isAdHiddenOnHomeTab=function(){return!this.$4&&!this.$3};b.isAdBackgroundedOnHomeTab=function(){return!this.$4&&this.$16()};b.handleAnyVisibilityChange=function(){this.$3&&!this.$4&&this.$10&&(this.$10=!1,this.$15=!1,this.$5=Date.now())};b.enableActivityListeners=function(){window.addEventListener("scroll",this.$12),window.addEventListener("resize",this.$12),this.$11=!0};b.removeActivityListeners=function(){window.removeEventListener("scroll",this.$12),window.removeEventListener("resize",this.$12),this.$11=!1};b.setHiddenSubtree=function(a){this.$4=a,a&&(d("ODS").bumpEntityKey(144,"feed_ads","CometSideAdsRefreshHandler.reload_opportunity"),this.restartInitialLoad()),this.handleAnyVisibilityChange(),this.handleActivityTracking()};b.setAdUnitVisibility=function(a){this.$3=a,this.handleAnyVisibilityChange(),this.handleActivityTracking()};b.setEnvironment=function(a){this.$1=a};b.setRefetchCallback=function(a){this.$13=a};b.setIsHovered=function(a){this.$14=a};b.setGetIsBackgrounded=function(a){this.$16=a};return a}();g["default"]=a}),98);
__d("useSideAdsRefreshHandler",["CometRelay","CometSideAdsRefreshHandler","HiddenSubtreePassiveContext","react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useContext,j=b.useEffect,k=b.useRef;function a(a,b){var e=d("CometRelay").useRelayEnvironment(),f=k(null),g=k(null),l=i(c("HiddenSubtreePassiveContext")),m=h(function(){return l.getCurrentState().backgrounded},[l]);j(function(){f.current!=null&&f.current.setEnvironment(e)},[e]);j(function(){f.current!=null&&f.current.setRefetchCallback(function(b){a(b)})},[a]);j(function(){f.current!=null&&f.current.setGetIsBackgrounded(m)},[m]);j(function(){f.current!=null&&f.current.setIsHovered(b)},[b]);var n=h(function(){if(f.current!=null)return;var d=l.getCurrentState();f.current=new(c("CometSideAdsRefreshHandler"))(e,d.hidden,function(b){a(b)},b,m);g.current!=null&&(g.current.remove(),g.current=null);g.current=l.subscribeToChanges(function(a){f.current!=null&&f.current.setHiddenSubtree(a.hidden)})},[m,e,l,b,a]),o=c("useVisibilityObserver")({onHidden:function(){f.current!=null&&f.current.setAdUnitVisibility(!1)},onVisible:function(){f.current!=null&&f.current.setAdUnitVisibility(!0)}}),p=h(function(a){a!=null&&(n(),o(a))},[n,o]);j(function(){return function(){f.current!=null&&(f.current.unregister(),f.current=null),g.current!=null&&(g.current.remove(),g.current=null)}},[]);return p}g["default"]=a}),98);
__d("CometClipboardCustomCopy.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function j(a,b){var c=[];if(b==null)return c;for(b of b){var d=b(a);d!==null&&c.push.apply(c,Array.isArray(d)?d:[d])}return c}function k(a,b){var c=[];if(b==null)return c;for(b of b)b.onReadyImmediately(function(b){b=b(a);b!==null&&c.push.apply(c,Array.isArray(b)?b:[b])});return c}function a(a){var b=a.children,c=a.reformers,d=a.reformersDeferred;a=i(function(a){if(a.clipboardData==null)return;var b=document.getSelection();if(b===null||b.isCollapsed)return;var e=[];e.push.apply(e,j(b,c));e.push.apply(e,k(b,d));if(e.length===0)return;a.preventDefault();for(b of e){var f;e=b.data;var g=b.format;(f=a.clipboardData)==null?void 0:f.setData(g,e)}},[c,d]);return(c==null?void 0:c.length)===0&&(d==null?void 0:d.length)===0?h.jsx("div",{children:b}):h.jsx("div",{onCopy:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedEndOfFeedMessageForNewsfeedOnly.react",["CometFeedEndOfFeedMessage.react","HiddenSubtreePassiveContext","NetworkStatus","cr:1638891","gkx","qex","react","requireDeferred","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useEffect,k=e.useRef,l=c("requireDeferred")("CometNewsFeedEofFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),m=c("requireDeferred")("CometNewsFeedEofUnmountedFalcoEvent").__setRef("CometFeedEndOfFeedMessageForNewsfeedOnly.react");function a(a){var d,e=a.endOfFeedComponent;e=e===void 0?c("CometFeedEndOfFeedMessage.react"):e;var f=a.feedUnitReceivedCount,g=a.feedUnitRenderedCount,n=a.friendsCount,o=a.hasPageInfo,p=a.isError,q=a.maxFeedUnitsReceived,r=a.onReload,s=a.onTailLoadReload,t=a.renderLocation,u=a.tailLoadErrored;a=babelHelpers.objectWithoutPropertiesLoose(a,["endOfFeedComponent","feedUnitReceivedCount","feedUnitRenderedCount","friendsCount","hasPageInfo","isError","maxFeedUnitsReceived","onReload","onTailLoadReload","renderLocation","tailLoadErrored"]);var v=k(!1),w=i(c("HiddenSubtreePassiveContext")),x=k(null),y=!c("gkx")("976093")&&c("gkx")("1393"),z=r!=null?function(){v.current=!0,y&&u?s():r()}:void 0;d=(d=c("qex")._("292"))!=null?d:!1;var A=c("useCometRouterState")(),B=(A=A==null?void 0:(A=A.main)==null?void 0:(A=A.route)==null?void 0:A.tabKey)!=null?A:"",C=B==="most_recent_feed"&&d;j(function(){if(t==="homepage_stream"||C){var a=p?"unknown_error":"no_more_edges";p&&(!o&&u?a="missing_page_info_and_tail_load_error":!o?a="missing_page_info":u&&(a="tail_load_error"));var b=c("NetworkStatus").isOnline();x.current=Date.now();l.onReady(function(c){c.log(function(){return{eof_mount_reason:a,feed_tab_key:B,feed_unit_count:g,feed_unit_received_count:f,is_online:b,max_feed_units_received_count:q,was_in_hidden_subtree:w.getCurrentState().hiddenOrBackgrounded_FIXME}})});return function(){var a=Date.now(),b=x.current!=null?a-x.current:null,c=v.current,d=w.getCurrentState().hiddenOrBackgrounded;m.onReady(function(a){a.log(function(){return{feed_unit_count:g,feed_unit_received_count:f,manual_reload:c,mounted_duration:b,was_in_hidden_subtree:d}})})}}},[]);A=!p&&(n==null||n>=60);return h.jsx(e,babelHelpers["extends"]({},a,{feedUnitReceivedCount:f,friendsCount:n,isError:p,isTailLoadError:y&&u,onReload:z,unstable_fbOnlyMessage:A&&b("cr:1638891")!=null?h.jsx(b("cr:1638891"),{}):void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedFavoritesEndOfFeedMessage.react",["CometFeedFavoritesEndOfFeedMessageQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var c=a.feedUnitReceivedCount;a=a.onReload;c={hasNoStories:c===0};var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometFeedFavoritesEndOfFeedMessageQuery.graphql"),c);return i.jsxs("div",{children:[i.jsx(d("CometRelay").MatchContainer,{match:e==null?void 0:e.see_first_migration_content,props:{onReload:a}}),i.jsx(d("CometRelay").MatchContainer,{match:e==null?void 0:e.favorites_caught_up_content,props:{hasNoStories:c.hasNoStories}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedBrandSafetyContextProvider.react",["CometFeedBrandSafetyContext","react","useUnsafeRef_DEPRECATED","uuid"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useMemo;function a(a){var b=a.children;a=a.feedStateInfoRef;var d=j(function(){return{brsSessionId:c("uuid")()}},[]),e=c("useUnsafeRef_DEPRECATED")({}),f=c("useUnsafeRef_DEPRECATED")({feedSessionInfo:d,feedStateInfoRef:a,feedUnitRegistry:e.current});d=i(function(){return f.current},[]);return h.jsx(c("CometFeedBrandSafetyContext").Provider,{value:d,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedKeyboardNavPositionContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(0);g["default"]=b}),98);
__d("CometNewsFeedEmptyRenderFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4147");b=d("FalcoLoggerInternal").create("comet_news_feed_empty_render",a);e=b;g["default"]=e}),98);
__d("CometNewsFeedLoadedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743387");b=d("FalcoLoggerInternal").create("comet_news_feed_loaded",a);e=b;g["default"]=e}),98);
__d("CometNewsFeedPerfExperiments",["FBLogger","UserAgent","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=40,i=-1;function a(){if(!c("gkx")("6191"))return i;var a;try{a=j()}catch(b){c("FBLogger")("comet_performance.memory","CometNewsFeedPerfExperiments").catching(b).mustfix("Unable to detect if browser supports scroll anchoring"),a=!1}if(!a)return i;try{a=c("qex")._("183")===!0;return a?c("UserAgent").isBrowser("Firefox")?i:h:c("justknobx")._("546")}catch(a){c("FBLogger")("comet_performance.memory","CometNewsFeedPerfExperiments").catching(a).mustfix("Unable to determine news feed story cap")}return i}function j(){var a;return((a=window)==null?void 0:(a=a.CSS)==null?void 0:a.supports==null?void 0:a.supports("overflow-anchor","auto"))===!0}g.getMaxFeedEdgesToRender=a}),98);
__d("useLogCometFeedUnitRenderAttemptEvent",["CometRelay","react","recoverableViolation","unrecoverableViolation","useCometFeedUnitEventLogger","useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useRef;function a(a,e,f){var g=j(!1);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useLogCometFeedUnitRenderAttemptEvent_newsFeedEdge.graphql"),a);var k=a.category,l=a.deduplication_key;if(a.node==null)throw c("unrecoverableViolation")("node cannot be null on edge in useLogCometFeedUnitRenderAttemptEvent","comet_feed");var m=c("useCometFeedUnitEventLogger")(a.node);i(function(){if(!g.current){g.current=!0;if(l!=null){var a;m({category:(a=k)!=null?a:void 0,event:"render_attempt",position:e,renderLocation:(a=f)!=null?a:void 0})}else c("recoverableViolation")("deduplication key and node cannot be null in useLogCometFeedUnitRenderAttemptEvent","comet_feed")}},[k,l,m,e,f])}g["default"]=a}),98);
__d("CometNewsFeedUnit.react",["CometFeedUnit.react","CometFeedUnitOnUnsupportedLoggerContext","CometFeedUnitSetStatusContext","CometNewsFeedUnit_edge.graphql","CometNewsFeedVPVDStore","CometRelay","FBLogger","react","useLayoutEffect_SAFE_FOR_SSR","useLogCometFeedUnitRenderAttemptEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useContext;function a(a){var e=d("CometRelay").useFragment(h!==void 0?h:h=b("CometNewsFeedUnit_edge.graphql"),a.edge),f=e.category,g=e.node,k=g==null?void 0:g.__typename,l=g==null?void 0:g.post_id,m=a.position,n=a.variables.renderLocation!=="%future added value"?a.variables.renderLocation:null;c("useLogCometFeedUnitRenderAttemptEvent")(e,m,n);var o=j(d("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContext),p=g==null;c("useLayoutEffect_SAFE_FOR_SSR")(function(){p&&(o("error"),c("FBLogger")("CometNewsFeedUnitNull").warn("node should not be null in CometNewsFeedUnit","comet_feed"))},[p,o]);return g==null?null:i.jsx("div",{"data-testid":void 0,children:i.jsx(d("CometNewsFeedVPVDStore").LoggerProvider,{newsFeedEdge:e,children:i.jsx(d("CometFeedUnitOnUnsupportedLoggerContext").CometFeedUnitOnUnsupportedLoggerContextProvider,{category:f,position:m,postID:l,renderLocation:n,unitName:k,children:i.jsx(c("CometFeedUnit.react"),{feedUnit:g,newsFeedEdge:e,position:m,variables:a.variables})})})})}a.displayName=a.name+" [from "+f.id+"]";e=i.memo(a);g["default"]=e}),98);
__d("CometNewsfeedOrderingDebuggingState",[],(function(a,b,c,d,e,f){"use strict";var g={hasInjectedStories:null,order:null,reorderingEnabled:null};function a(){return g}function b(a){g.order=a}function c(a){g.hasInjectedStories=a}function d(a){g.reorderingEnabled=a}f.dump=a;f.setFeedUnitOrderingState=b;f.setHasInjectedStories=c;f.setReorderingEnabled=d}),66);
__d("GHLRandomTags.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.children;a.depth>1&&(b=h.jsx(i,{children:a.children,depth:a.depth-1}));return h.jsx("span",{children:b})}i.displayName=i.name+" [from "+f.id+"]";g["default"]=i}),98);
__d("BrandSafetyEnforcementUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return a==="SPONSORED"&&c!=null&&b!=null&&c>b}f.isInvalidBrandSafetyPositioning=a}),66);
__d("CometFeedClientQEBasedGapRuleConfig",["qex"],(function(a,b,c,d,e,f,g){"use strict";f={configName:"CometFeedClientQEBasedGapRuleConfig",minGapFromTop:{END_OF_FEED_CONTENT:0,ENGAGEMENT:0,ENGAGEMENT_QP:1,FB_SHORTS:(b=(a=c("qex")._("265"))!=null?a:c("qex")._("115"))!=null?b:7,FB_STORIES:0,FB_STORIES_ENGAGEMENT:0,FIXED_POSITION:0,HIGH_VALUE_PROMOTION:0,ORGANIC:0,PROMOTION:0,SHOWCASE:3,SPONSORED:1,UNKNOWN:0},minGap:{END_OF_FEED_CONTENT:{ORGANIC:0,ENGAGEMENT:0,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,END_OF_FEED_CONTENT:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},ENGAGEMENT:{ORGANIC:0,ENGAGEMENT:2,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FB_STORIES:{ORGANIC:0,FIXED_POSITION:0,PROMOTION:0,SPONSORED:0,FB_STORIES:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FB_STORIES_ENGAGEMENT:{PROMOTION:0,ORGANIC:0,FIXED_POSITION:0,SPONSORED:0,HIGH_VALUE_PROMOTION:0,FB_STORIES_ENGAGEMENT:0},FIXED_POSITION:{ORGANIC:0,FIXED_POSITION:0,PROMOTION:2,SPONSORED:0,HIGH_VALUE_PROMOTION:0},HIGH_VALUE_PROMOTION:{ORGANIC:0,PROMOTION:0,SPONSORED:0,HIGH_VALUE_PROMOTION:0},ORGANIC:{ORGANIC:0,PROMOTION:0,SPONSORED:0},PROMOTION:{PROMOTION:2,SPONSORED:0},SPONSORED:{SPONSORED:2},FB_SHORTS:{FB_SHORTS:(e=(d=c("qex")._("355"))!=null?d:c("qex")._("419"))!=null?e:0}}};g["default"]=f}),98);
__d("CometFeedGapRuleConfigProvider",["CometFeedClientQEBasedGapRuleConfig"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CometFeedClientQEBasedGapRuleConfig")}),98);
__d("CometFeedGapRules",["CometFeedGapRuleConfigProvider","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("CometFeedGapRuleConfigProvider").configName}function a(){return Object.keys(c("CometFeedGapRuleConfigProvider").minGapFromTop)}function i(a){return c("CometFeedGapRuleConfigProvider").minGapFromTop[a]!==void 0}var j=new Set();function k(a,b,d){if(j.has(a))return;b=c("FBLogger")(b);d&&(b=b.catching(d));b.warn(a);j.add(a);return}function l(a){i(a)||k("Feed unit category "+a+" is not supported by client-side gap rule config "+h(),"CometFeedGapValidation")}function b(a,b){a=[a,b];a.forEach(l);a.sort();b=a[0];a=a[1];return(b=(b=c("CometFeedGapRuleConfigProvider").minGap[b])==null?void 0:b[a])!=null?b:0}function d(a){l(a);return(a=c("CometFeedGapRuleConfigProvider").minGapFromTop[a])!=null?a:0}g.getGapRuleConfigName=h;g.getSupportedFeedUnitCategories=a;g.getMinGapBetweenCategories=b;g.getMinGapFromTop=d}),98);
__d("CometValidFeedUnitOrdering",["BrandSafetyEnforcementUtils","CometFeedGapRules","CometFeedUnitStatusTrackingUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b.key]=b,a))},{})}function i(a){var b={};d("CometFeedGapRules").getSupportedFeedUnitCategories().forEach(function(a){b[a]=null});a.forEach(function(a,c){b[a.category]=c});return b}function j(a,b,c){return k(a,b,d("CometFeedUnitStatusTrackingUtils").isPossiblyVisible,c)===null}function k(a,b,e,f){var g=d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(a,e),h=g.length,j=i(g);e=Object.keys(j);var k=d("CometFeedGapRules").getMinGapFromTop(b),l=h;if(l<k)return{conflictPosition:null,conflictUnitCategory:null,violationType:"minGapFromTop"};l=null;var m=(k=f==null?void 0:f.sponsoredAuctionDistance)!=null?k:0;if(c("gkx")("366")&&a.length>=1){k=a[a.length-1];k=(k=k==null?void 0:(k=k.edgeData)==null?void 0:k.brsContentLabel)!=null?k:0;f=f==null?void 0:f.brsFilterSetting;f=d("BrandSafetyEnforcementUtils").isInvalidBrandSafetyPositioning(b,f,k);if(f)return{conflictPosition:a.length,conflictUnitCategory:"SPONSORED",violationType:"brandSafetyViolation"}}e.some(function(a){var c=d("CometFeedGapRules").getMinGapBetweenCategories(b,a);c=b==="SPONSORED"&&a==="SPONSORED"?Math.max(c,m+1):c;if(j[a]!=null){var e=h-j[a];if(e<c){l={conflictPosition:g[j[a]].position,conflictUnitCategory:a,violationType:"minGapBetweenCategories"};return!0}}return!1});return l}function l(a,b){for(var c=0;c<b.length;c++){var d,e=b[c];if(j(a,e.category,{brsContentLabel:e==null?void 0:(d=e.edgeData)==null?void 0:d.brsContentLabel,brsFilterSetting:e==null?void 0:(d=e.edgeData)==null?void 0:d.brsFilterSetting,sponsoredAuctionDistance:e==null?void 0:(d=e.edgeData)==null?void 0:d.sponsoredAuctionDistance}))return e}return null}function m(a,b){var c=h(a);return b.filter(function(a){return c[a.key]==null})}function n(a,b){if(a.length<2||b.length===0)return[];b=b.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b]=!0,a))},{});var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(b[e.key]!=null)return c;c.push(e)}return[]}function a(a,b){b===void 0&&(b=0);var c=[];for(b=b;b<a.length;b++){var e=a[b];if(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(e)){var f=k(a.slice(0,b),e.category,d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible);f!=null&&c.push(babelHelpers["extends"]({},f,{violationPosition:b,violationUnitCategory:e.category,violationUnitKey:e.key}))}}return c}function b(a,b,c){c===void 0&&(c=!1);var d=b.reduce(function(a,b,c){return babelHelpers["extends"]({},a,(a={},a[b.key]=c,a))},{}),e={};a.forEach(function(a,b){if(e[a.key]!=null){e[a.key].receivedPositions=e[a.key].receivedPositions.concat([b]);return}e[a.key]={receivedPositions:[b],renderedPosition:(b=d[a.key])!=null?b:null}});if(c)return e;var f={};Object.keys(e).forEach(function(a){var b=e[a];if(b.receivedPositions.length===1&&b.receivedPositions[0]===b.renderedPosition)return;f[a]=b});return f}function o(a){var b={};return a.filter(function(a){if(b[a.key])return!1;b[a.key]=!0;return!0})}function e(a,b,e){b=o(b);var f=h(b);a=a.filter(function(a){return f[a.key]!=null});a=d("CometFeedUnitStatusTrackingUtils").getAllPositionedFeedUnits(d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(a));e=n(b,e).map(function(a){return babelHelpers["extends"]({},a,{status:"positioned"})});var g=e.concat(a),i=m(g,b);e=function(){var a=l(g,i);if(a==null)return"break";if(c("gkx")("366")&&g.length>=1){var b=g[g.length-1];b=d("BrandSafetyEnforcementUtils").isInvalidBrandSafetyPositioning(b.category,(b=b.edgeData)==null?void 0:b.brsFilterSetting,(b=a.edgeData)==null?void 0:b.brsContentLabel);b&&g.pop()}g.push(babelHelpers["extends"]({},a,{status:"received"}));i=i.filter(function(b){return b.key!==a.key})};while(i.length>0){a=e();if(a==="break")break}return g}g.getFeedUnitMap=h;g.getLastPositionsForCategories=i;g.isUnitEligibleToBePlacedNext=j;g.getViolationIfUnitIsPlacedNext=k;g.getNextEligibleUnit=l;g.getAvailableUnits=m;g.getNewHeadLoadedUnits=n;g.getFeedUnitOrderViolations=a;g.getFeedUnitReorderInfo=b;g.removeDuplicates=o;g.getValidFeedUnitOrdering=e}),98);
__d("useCometFeedIneligibleUnitLogger",["CometFeedUnitsTypedLoggerLite","CometValidFeedUnitOrdering","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useMemo,j=b.useRef;function a(a,b){var e=c("useUnsafeRef_DEPRECATED")({}),f=i(function(){return a.map(function(a){if(a!=null&&a.category!=null&&a.deduplication_key!=null){return{category:a.category,key:a.deduplication_key,status:"received",typename:(a=a==null?void 0:(a=a.node)==null?void 0:a.__typename)!=null?a:null}}return null}).filter(Boolean)},[a]),g=f.reduce(function(a,b){return babelHelpers["extends"]({},a,(a={},a[b.key]=b,a))},{}),k=f.map(function(a){return{category:a.category,key:a.key,status:"rendered"}}),l=0;k.some(function(a,b){if(e.current[a.key]==null){l=b;return!0}});var m=d("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(k,l),n=j({});h(function(){var a={};f.forEach(function(d,e){if(a[d.key]!=null){var f;a[d.key]+=1;a[d.key]>((f=n.current[d.key])!=null?f:0)&&c("CometFeedUnitsTypedLoggerLite").log({category:d.category,event:"ineligible_for_position",ineligible_reason:"duplicate",position:e,render_location:b,unit_name:d.typename})}else a[d.key]=1});n.current=a});h(function(){m.forEach(function(a){if(e.current[a.violationUnitKey]==null){var d=a.violationPosition,f=a.violationUnitCategory;a=a.violationUnitKey;c("CometFeedUnitsTypedLoggerLite").log({category:f,event:"ineligible_for_position",ineligible_reason:"gap_rule_violation",position:d,render_location:b,unit_name:(d=(f=g[a])==null?void 0:f.typename)!=null?d:null})}}),k.forEach(function(a){e.current[a.key]=!0})})}g["default"]=a}),98);
__d("FeedRequestWaterfallTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:FeedRequestWaterfallLoggerConfig")}),null);
__d("useCometFeedRequestWaterfallLogger",["FeedRequestWaterfallTypedLoggerLite","react","usePrevious","uuid"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef;function a(a,b,d){var e=j(null),f=c("usePrevious")(a);i(function(){if(f===a)return;if(e.current!=null){var b=f!=null?a.filter(function(a){return!f.find(function(b){return b===a})}):a,g=b.reduce(function(a,b){b=(b=b.feed_backend_data)==null?void 0:b.qid;if(b==null)return a;a[b]==null?a[b]=1:a[b]++;return a},{});Object.keys(g).forEach(function(a){c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_received_response",is_employee:d,number_of_stories:g[a],query_id:a})})}},[a,d,f]);var g=j(0),k=b.length;i(function(){e.current!=null&&(c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_rendered_success",is_employee:d,number_of_stories:k-g.current}),g.current=k)},[k,d]);b=h(function(){var a=c("uuid")();c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:a,event:"client_sent_request",is_employee:d});e.current=a;return a},[d]);var l=h(function(a){c("FeedRequestWaterfallTypedLoggerLite").log({client_query_id:e.current,event:"client_failed_to_receive_response",failure_reason:a.message,is_employee:d,number_of_stories:g.current})},[d]);return[b,l]}g["default"]=a}),98);
__d("CometFeedUnitOrderingDebugInfo",["CometValidFeedUnitOrdering"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=[],e=[],f=d("CometValidFeedUnitOrdering").getFeedUnitMap(b.map(function(a){return babelHelpers["extends"]({},a,{status:"received"})}).concat(a)),g=d("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(b,a,!0);b.forEach(function(a){a=a.key;a={renderedPosition:g[a]!=null?g[a].renderedPosition:null,receivedPositions:g[a]!=null?g[a].receivedPositions:[],category:f[a].category,key:a,status:f[a].status};a.renderedPosition!=null?c[a.renderedPosition]=a:e.push(a)});return{feedUnitsDeferred:e,feedUnitsToRender:c}}function a(a,b,c,d,e){c===void 0&&(c=!0);d===void 0&&(d=0);a=h(a,b);b=a.feedUnitsToRender.concat(a.feedUnitsDeferred);a=b.slice(d,e!=null?e:b.length);d=a.map(function(a){var b=a.renderedPosition!==a.receivedPositions[0];return(b?"*":" ")+" "+((b=a.renderedPosition)!=null?b:"X").toString().padStart(3)+": ["+(a.receivedPositions.toString()+"]").padEnd(7)+" "+a.category.padEnd(12).slice(0,12)+" "+a.key.padEnd(10).slice(0,10)+" "+a.status.slice(0,16)});if(c){e="  Pos: [recvd]  "+"Category".padEnd(13)+"Key (part)".padEnd(11)+"Status";return[e].concat(d).join("\n")}return d.join("\n")}g.getCometFeedUnitOrderingDebugInfo=h;g.getCometFeedUnitOrderingDebugInfoString=a}),98);
__d("getCometFeedUnitOrderingDebuggingTable",["CometFeedUnitOrderingDebugInfo"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return{ReceivedPositions:"["+a.receivedPositions.toString()+"]"+(a.renderedPosition!==a.receivedPositions[0]?" reordered":""),Category:a.category,Key:a.key,Status:a.status+(a.renderedPosition==null?" (deferred)":"")}}function a(a,b){a=d("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfo(a,b);b=a.feedUnitsToRender.map(h);a=a.feedUnitsDeferred.map(h);return{feedUnitsDeferred:a,feedUnitsToRender:b}}g["default"]=a}),98);
__d("debugCometFeedUnitOrdering",["getCometFeedUnitOrderingDebuggingTable"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=c("getCometFeedUnitOrderingDebuggingTable")(a,b);b=a.feedUnitsDeferred;a=a.feedUnitsToRender;var d=console.table!=null?console.table:emptyFunction;console.group("Feed Unit Order");d(Array.from(a));b.length>0&&d(Array.from(b));console.groupEnd()}g["default"]=a}),98);
__d("useCometFeedGapRuleViolationLogger",["CometFeedUnitOrderingDebugInfo","CometFeedUnitStatusTrackingUtils","CometValidFeedUnitOrdering","react","requireDeferred","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=c("requireDeferred")("CometFeedGapRuleViolationTypedLoggerLite").__setRef("useCometFeedGapRuleViolationLogger"),j=6,k=3;function a(a,b,e){var f=c("useUnsafeRef_DEPRECATED")({}),g=0;a.some(function(a,b){if(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible(a)&&f.current[a.key]==null){g=b;return!0}});var l=d("CometValidFeedUnitOrdering").getFeedUnitOrderViolations(a,g);h(function(){l.forEach(function(c){if(a[c.violationPosition]!=null&&f.current[a[c.violationPosition].key]==null){var g=c.conflictPosition,h=c.conflictUnitCategory,l=c.violationPosition,m=c.violationType,n=c.violationUnitCategory;c=(c=g)!=null?c:0;var o=e?d("CometFeedUnitOrderingDebugInfo").getCometFeedUnitOrderingDebugInfoString(a,b,!0,c-j,l+1+k):null,p=a.slice(0,l+1).filter(function(a){return a.status==="error"}).length,q=a.slice(c+1,l).filter(function(a){return a.status==="error"}).length;i.onReady(function(a){a.log({conflict_position:g,conflict_unit_category:h,debug_info:o,errored_in_gap_count:q,errored_total_count:p,reordering_enabled:e,violation_cause:"unknown",violation_position:l,violation_type:m,violation_unit_category:n})})}}),a.filter(d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible).forEach(function(a){f.current[a.key]=!0})})}g["default"]=a}),98);
__d("useCometFeedUnitStatusTracking",["CometFeedUnitStatusTrackingUtils","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef,j=["received","positioned","rendered","error"];function k(a,b){b=b.map(function(b){return a[b]!=null?{category:a[b].category,key:b,status:a[b].status}:null}).filter(Boolean);return d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithRenderingOutOfOrderFixed(b)}function a(a,b){var d=c("useUnsafeRef_DEPRECATED")({}),e=c("useUnsafeRef_DEPRECATED")([]),f=i({}),g=c("useUnsafeRef_DEPRECATED")(0),l=g.current,m=h(function(){if(a!=null){var b=k(d.current,e.current);a(b)}},[a]),n=h(function(){return k(d.current,e.current)},[]),o=h(function(){d.current={},e.current=[],f.current={},g.current+=1},[]),p=h(function(a){var b=e.current.length===a.length&&e.current.every(function(b,c){return b===a[c]});if(b)return;e.current.filter(function(b){return a.indexOf(b)===-1}).forEach(function(a){delete d.current[a]});e.current=a;m()},[m]),q=h(function(a,c){l;var e=d.current[a];if(e==null){d.current[a]=c;m();return}var g=j[Math.max(j.indexOf(c.status),j.indexOf(e.status))];c={category:c.category,status:g};if(c.category===e.category&&c.status===e.status)return;c.status==="error"&&f.current[a]===void 0&&(b!=null&&b(a,e.status==="rendered"),f.current[a]=!0);d.current[a]=c;m()},[b,m,l]),r=k(d.current,e.current);return[r,p,q,o,n]}g["default"]=a}),98);
__d("useCometFeedUnitReordering",["CometFeedGapRules","CometFeedUnitStatusTrackingUtils","CometNewsfeedOrderingDebuggingState","CometRelay","CometValidFeedUnitOrdering","FBLogger","InteractionTracing","debugCometFeedUnitOrdering","emptyFunction","getCometFeedUnitOrderingDebuggingTable","gkx","react","recoverableViolation","useCometFeedGapRuleViolationLogger","useCometFeedUnitReordering_newsFeedEdge.graphql","useCometFeedUnitStatusTracking","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useCallback,j=e.useEffect,k=e.useRef,l=e.useState;function m(a,b,d){b===void 0&&(b="CometFeedRenderingOrderError");d===void 0&&(d="Feed unit effects called out of order");var e=null,f=null;a.forEach(function(a,b){a.status==="rendered"&&(e=b),a.status==="received"&&f===null&&(f=b)});if(e!=null&&f!=null&&f<e&&f!==0){a=a.map(function(a,b){return babelHelpers["extends"]({},a,{position:b})}).slice(Math.max(0,f-2),e+2).map(function(a){return String(a.position).padStart(2)+": "+a.status+" | "+a.category+" | "+a.key}).join("\n");c("FBLogger")(b).warn(d+" in positions "+f+"-"+e+".\n"+a)}}function a(a,e,f,g){var n=l(0);n[0];var o=n[1],p=k({});n=i(function(a,b){o(function(a){return a+1}),b&&(p.current[a]=!0)},[]);j(function(){d("CometNewsfeedOrderingDebuggingState").setReorderingEnabled(e)},[e]);n=c("useCometFeedUnitStatusTracking")(c("emptyFunction"),n);var q=n[0],r=n[1],s=n[2],t=n[3],u=n[4],v=c("gkx")("976093"),w=a.map(function(a,e){if(a==null){c("recoverableViolation")("edge should not be nullish in useCometFeedUnitReordering","comet_feed");return null}if(a.node==null)return null;if(a.category==null){c("recoverableViolation")("category should not be nullish in useCometFeedUnitReordering","comet_feed");return null}if(a.deduplication_key==null){c("recoverableViolation")("deduplication_key should not be nullish in useCometFeedUnitReordering","comet_feed");return null}var f={category:a.category,key:a.deduplication_key},i;c("gkx")("366")&&(i=d("CometRelay").readInlineData(h!==void 0?h:h=b("useCometFeedUnitReordering_newsFeedEdge.graphql"),g==null?void 0:g[e]));return v?f:babelHelpers["extends"]({},f,{edgeData:{brsContentLabel:(e=i)==null?void 0:e.brs_content_label,brsFilterSetting:(f=i)==null?void 0:(e=f.node)==null?void 0:(f=e.sponsored_data)==null?void 0:f.brs_filter_setting,sponsoredAuctionDistance:a.sponsored_auction_distance}})}).filter(Boolean);n=c("usePrevious")(w.map(function(a){return a.key}));c("useCometFeedGapRuleViolationLogger")(q,w,e);var x=e?d("CometValidFeedUnitOrdering").getValidFeedUnitOrdering(q,w,(q=n)!=null?q:[]):w.map(function(a){return babelHelpers["extends"]({},a,{status:"received"})});j(function(){var a=x.map(function(a){return a.key});r(a);d("CometFeedUnitStatusTrackingUtils").getUncommittedFeedUnits(x).forEach(function(a){return s(a.key,{category:a.category,status:a.status})})});var y=a.filter(Boolean).reduce(function(a,b){if(b==null||b.deduplication_key==null)return a;return a[b.deduplication_key]!=null?a:babelHelpers["extends"]({},a,(a={},a[b.deduplication_key]=b,a))},{});n=f&&e?x.filter(d("CometFeedUnitStatusTrackingUtils").isPossiblyVisible):x;q=e?n.map(function(a){return y[a.key]}).filter(Boolean):a.filter(Boolean);var z=k(!1);j(function(){var b;b=(b=a[0])==null?void 0:b.deduplication_key;if(e&&!z.current&&b!=null&&w!=null&&x!=null){var f=d("CometValidFeedUnitOrdering").getFeedUnitReorderInfo(w,x);f[b]!=null&&c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("firstFeedUnitReordered",1)});z.current=!0}});j(function(){},[e]);j(function(){d("CometNewsfeedOrderingDebuggingState").setFeedUnitOrderingState(c("getCometFeedUnitOrderingDebuggingTable")(x,w))});j(function(){window.requestAnimationFrame(function(){m(u(),"CometFeedRenderingOrderErrorAfterAnimationFrame","Feed units rendered out of order")})});return{feedEdgesToRender:q,getFeedUnitStatusListPassive:u,resetFeedUnitRegistry:t,setFeedUnitRecord:s}}g["default"]=a}),98);
__d("CometNewsFeed.react",["fbt","CometBackupPlaceholder.react","CometClipboardCustomCopy.react","CometFeedBrandSafetyContextProvider.react","CometFeedEndOfFeedMessageForNewsfeedOnly.react","CometFeedInfiniteScrollSuspenseList.react","CometFeedKeyboardNavPositionContext","CometFeedTailLoadConfig","CometFeedUnitErrorBoundary.react","CometFeedUnitSetDebugInfoContextProvider.react","CometFeedUnitSetStatusContext","CometFeedUnitStatusListPassiveContext","CometFeedUnitsTypedLoggerLite","CometGHLFeedClassContext","CometHeroFeedItem.react","CometHeroHoldTrigger.react","CometNewsFeedEmptyRenderFalcoEvent","CometNewsFeedLoadedFalcoEvent","CometNewsFeedPerfExperiments","CometNewsFeedUnit.react","CometNewsFeed_viewer.graphql","CometNewsfeedOrderingDebuggingState","CometOnInitialMount.react","CometRelay","CometScreenReaderHeading.react","ErrorGuard","FBLogger","GHLRandomTags.react","GHLSurfaceContainerContext","HiddenSubtreePassiveContext","InteractionTracing","Random","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","cr:1142206","cr:1813330","cr:1915","cr:1999","cr:3432","cr:3683","gkx","justknobx","react","useCometFeedIneligibleUnitLogger","useCometFeedKeyCommands","useCometFeedRequestWaterfallLogger","useCometFeedUnitReordering","useCometRouterState","usePrevious","useSimpleImpression","useStable","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,aa=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState,o=d("CometNewsFeedPerfExperiments").getMaxFeedEdgesToRender();e=b("cr:1999")(o);var ba=e.CappedListContext,ca=e.CappedListItemTracker,da=e.useCometCappedListV2,ea=c("gkx")("1101967"),fa=d("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed"),p="homepage_stream",ga=c("gkx")("1217157")?[2,2,2,2,4]:void 0,q=i!==void 0?i:i=b("CometNewsFeed_viewer.graphql"),ha=j.memo(function(a){var b,e=a.feedEdge,f=a.position,g=a.setFeedUnitRecord;a=a.variables;var h=m(!1),i=e.node;if(i==null)return null;var k=(b=i.__typename)!=null?b:null;return j.jsx(c("CometHeroFeedItem.react"),{position:f,children:j.jsx(c("CometBackupPlaceholder.react"),{fallback:j.jsx(c("CometOnInitialMount.react"),{onInitialMount:function(){c("CometFeedUnitsTypedLoggerLite").log({category:e.category,event:"unexpected_resuspense",position:f,render_location:p,unit_name:k})}}),unstable_onSuspense:function(a){h.current||(c("CometFeedUnitsTypedLoggerLite").log({category:e.category,event:"unexpected_resuspense_with_name",position:f,promise_name:a,render_location:p,unit_name:k}),h.current=!0)},children:j.jsx(d("CometFeedUnitSetStatusContext").CometFeedUnitSetStatusContextProvider,{category:e.category,deduplicationKey:e.deduplication_key,setFeedUnitRecord:g,children:j.jsx(c("CometFeedUnitErrorBoundary.react"),{category:(b=e.category)!=null?b:void 0,feedUnit:i,position:f,renderLocation:p,unitTypename:k,children:j.jsx(c("CometNewsFeedUnit.react"),{edge:e,position:f,variables:a})})})})})});function a(a){var e,f,g=n(!1),i=g[0],s=g[1];g=n(!1);var t=g[0],ia=g[1];g=d("CometRelay").usePaginationFragment(q,a.viewer);var u=g.data,v=g.hasNext,w=g.isLoadingNext,x=g.loadNext,y=d("CometRelay").useIsParentQueryActive(q,a.viewer);g=a.endOfFeedComponent;var z=a.isReloading,ja=a.onReload,ka=a.variables;a=u==null?void 0:u.is_fb_employee;var A=u==null?void 0:u.news_feed;e=(e=u==null?void 0:u.can_have_friends)!=null?e:!0;f=(f=u==null?void 0:(f=u.actor)==null?void 0:f.name)!=null?f:null;var B=w||y||!t||z,C=!i&&(v||y||!t),D=u==null?void 0:(w=u.news_feed)==null?void 0:w.injected_stories;z=(A==null?void 0:A.page_info)!=null;u=u==null?void 0:(w=u.all_friends)==null?void 0:w.friend_count;var E=(w=A==null?void 0:A.edges)!=null?w:[];A=m(null);var F=m(null);l(function(){var a={didMount:t,hasMore:C,hasNextFromPaginationFragment:v,isParentQueryActive:y,tailLoadErrored:i};if(F.current!=null&&F.current.tailLoadErrored===!1&&F.current.hasMore===!1&&C===!0){var b;b=(b=c("ErrorGuard").applyWithGuard(function(){return JSON.stringify({hasMoreObject:a,previousHasMoreObject:F.current})},null,[]))!=null?b:"";c("FBLogger")("CometNewsfeedHasMoreUnstable").addMetadata("COMET_FEED","FEED_UNIT_RECEIVED_COUNT",String(E.length)).mustfix("hasMore unexpectedly became true again after being false\n\n"+b)}F.current=a},[t,E.length,C,v,y,i]);var G=c("useUnsafeRef_DEPRECATED")(0),H=Math.max(G.current,E.length);l(function(){G.current=H},[H]);c("useCometFeedIneligibleUnitLogger")(E,p);w=c("useCometFeedUnitReordering")(E,c("gkx")("951936")&&!D,ea,E);var I=w.feedEdgesToRender,la=w.getFeedUnitStatusListPassive,ma=w.setFeedUnitRecord,J=(w=c("usePrevious")(E.length))!=null?w:0,K=(w=c("usePrevious")(I.length))!=null?w:0,L=m(0),M=c("useCometRouterState")(),N=aa(c("HiddenSubtreePassiveContext"));l(function(){if(E.length===J)return;I.length<=K?(L.current++,c("CometNewsFeedEmptyRenderFalcoEvent").log(function(){var a;return{empty_render_count:L.current.toString(),feed_tab_key:(a=M==null?void 0:(a=M.main)==null?void 0:(a=a.route)==null?void 0:a.tabKey)!=null?a:"",feed_unit_count:I.length.toString(),feed_unit_received_count:E.length.toString(),max_feed_units_received_count:H.toString(),was_in_hidden_subtree:N.getCurrentState().hiddenOrBackgrounded_FIXME}})):L.current=0},[E.length,N,H,J,K,I.length,M==null?void 0:(w=M.main)==null?void 0:(w=w.route)==null?void 0:w.tabKey]);w=b("cr:1915")(I,o);var O=w.cappedList,P=w.pauseTrim,Q=w.resumeTrim,R=w.topOffset;l(function(){c("CometNewsFeedLoadedFalcoEvent").log(function(){return{feed_unit_count:I.length,feed_unit_received_count:E.length,was_in_hidden_subtree:N.getCurrentState().hiddenOrBackgrounded_FIXME}})},[]);l(function(){ia(!0)},[]);l(function(){d("CometNewsfeedOrderingDebuggingState").setHasInjectedStories(D!=null)},[D]);w=c("useCometFeedRequestWaterfallLogger")(E,I,!!a);var S=w[0],na=w[1],T=k(function(){b("cr:1142206")!=null&&b("cr:1142206").log("[handleLoadMore]","checking if we have hasNext or are isLoading",{hasNext:C,isLoading:B});if(!C||B)return;b("cr:1142206")!=null&&b("cr:1142206").log("[handleLoadMore]","starting tail load with trace");var a=S();x(c("CometFeedTailLoadConfig").fetchCount,{UNSTABLE_extraVariables:{clientQueryId:a},onComplete:function(a){a!=null&&(s(!0),na(a),b("cr:1142206")!=null&&b("cr:1142206").log("[loadNext]","Failed to fetch next page",{errorMessage:a.toString(),hasNext:C,isLoading:B}))}})},[C,B,x,na,S]);a=k(function(){s(!1),T()},[T]);w=null;D!=null&&(w=d("CometRelay").ModuleResource.read(D));var U={},V=O.map(function(a,b){if(a.node==null)return null;var c=a.deduplication_key;c!=null?(U[c]!=null?U[c]+=1:U[c]=1,c=c+"-"+U[c].toString()):c=(b+R).toString();return{edge:a,reactKey:c}}).filter(Boolean),W=da(V,o,k(function(a){return a.reactKey},[]),c("justknobx")._("818"),c("justknobx")._("881")),X=W.cappedListContextValue,oa=R,Y=O.length,pa=0;W=V.map(function(a,b){b=a.edge;a=a.reactKey;b=j.jsx(ha,{feedEdge:b,position:oa++,setFeedUnitRecord:ma,variables:ka},a);(X==null?void 0:X.cappedItemIDs.has(a))&&(Y--,pa++);return j.jsx(ca,{id:a,children:b},a)});c("useSimpleImpression")(function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("comet_news_feed_count",Y)})});O=R+pa;b("cr:1813330")!=null&&(b("cr:1813330").setNewsFeedCount(Y),b("cr:1813330").setNewsFeedStoryPositionOffset(O));V=c("useCometFeedKeyCommands")(I.length,"newsfeed",null,P,Q);var Z=!B&&!C,$=!z||i,qa=m({hasMore:C,isEOFError:$,isLoading:B,showEOFMessageAfterFeedStoppedLoading:Z});l(function(){qa.current={hasMore:C,isEOFError:$,isLoading:B,showEOFMessageAfterFeedStoppedLoading:Z}},[Z,C,$,B]);O=c("gkx")("8240")?null:{role:"feed"};P=c("useStable")(function(){return Math.floor(d("Random").random()*5)+4});Q=j.jsxs(j.Fragment,{children:[j.jsx(c("CometScreenReaderHeading.react"),{children:h._("__JHASH__DhoLL8WnZ7W__JHASH__")}),j.jsx(c("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:fa,children:j.jsx(c("CometClipboardCustomCopy.react"),{reformersDeferred:b("cr:3683")!=null?[b("cr:3683")]:[],children:j.jsx(c("GHLSurfaceContainerContext").Provider,{value:A,children:j.jsxs(c("CometFeedKeyboardNavPositionContext").Provider,{value:V,children:[w?j.jsx(w,{}):null,j.jsx(c("CometFeedUnitStatusListPassiveContext").Provider,{value:la,children:j.jsx(c("CometFeedUnitSetDebugInfoContextProvider.react"),{location:"newsfeed",children:j.jsxs(c("CometFeedBrandSafetyContextProvider.react"),{feedStateInfoRef:qa,children:[j.jsx(c("CometHeroHoldTrigger.react"),{description:"FeedQuery",hold:(C||B)&&Y<2}),j.jsx(c("CometGHLFeedClassContext").Provider,{value:c("gkx")("7166"),children:j.jsx(r,{context:ba,value:X,children:j.jsx(c("CometFeedInfiniteScrollSuspenseList.react"),{hasMore:C,incrementalRenderingPageSizes:ga,interactionSource:0,isLoading:B,onLoadMore:T,pageletName:"FeedUnit",positionLimitForSSR:c("gkx")("1490223")?1:0,waitOnScrollIntent:!0,children:b("cr:3432")?[W==null?void 0:W[0],j.jsx(b("cr:3432"),{children:W},"chunker")]:W})})})]})})}),Z?j.jsx(c("CometFeedEndOfFeedMessageForNewsfeedOnly.react"),{canHaveFriends:e,endOfFeedComponent:g,feedUnitReceivedCount:E.length,feedUnitRenderedCount:Y,friendsCount:u,hasPageInfo:z,isError:$,maxFeedUnitsReceived:H,onReload:ja,onTailLoadReload:a,renderLocation:p,tailLoadErrored:i,viewerName:f}):null]})})})})]});return j.jsx("div",babelHelpers["extends"]({"data-testid":void 0,ref:A},O,{children:c("gkx")("8409")?j.jsx(c("GHLRandomTags.react"),{children:Q,depth:P}):Q}))}a.displayName=a.name+" [from "+f.id+"]";function r(a){var b=a.children,c=a.context;a=a.value;c=c;return c==null?b:j.jsx(c.Provider,{value:a,children:b})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FeedsCometEndOfFeed.react",["fbt","ix","CometCard.react","TetraIcon.react","TetraTextPairing.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){a=h._("__JHASH__v08xGtDkJGJ__JHASH__");var b=h._("__JHASH__OyqzLoZqCEb__JHASH__");return j.jsx("div",{className:"x1hq5gj4",children:j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf x1p5oq8j xxbr6pl xwxc41k xbbxn1n",children:[j.jsx("div",{className:"x1yztbdb x123j3cw x1mpkggp xs9asl8 x1t2a60a",children:j.jsx(c("TetraIcon.react"),{color:"positive",icon:d("fbicon")._(i("509885"),32)})}),j.jsx(c("TetraTextPairing.react"),{body:a,headline:b,level:2,textAlign:"center"})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometModernHomeFeed.react",["CometFeedFavoritesEndOfFeedMessage.react","CometModernHomeFeedQuery.graphql","CometNewsFeed.react","CometRelay","FeedsCometEndOfFeed.react","RelayUFI2CommentsKeyContext","gkx","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("CometModernHomeFeedQuery.graphql");a=i.memo(function(a){var b,e=a.cacheBreaker,f=a.feedQueryReference,g=a.isLoading;a=a.onReload;var h=d("CometRelay").usePreloadedQuery(j,f),k=String(f.variables.orderby);e=k+"_"+e;b=(b=c("qex")._("292"))!=null?b:!1;k=f.variables.feedStyle==="FAVORITES_FEED"&&c("gkx")("1386487")?c("CometFeedFavoritesEndOfFeedMessage.react"):k==="MOST_RECENT"&&b?c("FeedsCometEndOfFeed.react"):void 0;return i.jsx(c("RelayUFI2CommentsKeyContext").Provider,{value:"CometModernHomeFeedQuery",children:i.jsx(c("CometNewsFeed.react"),{endOfFeedComponent:k,isReloading:g,onReload:a,variables:f.variables,viewer:h.viewer},e)})});g["default"]=a}),98);
__d("CometFeedFavoritesHeader.react",["fbt","ix","CometFeedFavoritesHeaderQuery.graphql","CometRelay","TetraButton.react","TetraText.react","fbicon","react","useCometFeedPreferencesDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=d("react");function a(){var a=d("CometRelay").useLazyLoadQuery(j!==void 0?j:j=b("CometFeedFavoritesHeaderQuery.graphql"),{}),e=c("useCometFeedPreferencesDialog")(),f=e[0];e=e[1];return k.jsxs("div",{children:[k.jsxs("div",{className:"x78zum5 xyorhqc",children:[k.jsx("div",{className:"x1iyjqo2 xz9dl7a",children:k.jsx(c("TetraText.react"),{type:"headlineEmphasized3",children:h._("__JHASH__gQCwNEoCDV5__JHASH__")})}),k.jsx("div",{className:"x1c4vz4f",children:k.jsx(c("TetraButton.react"),{icon:d("fbicon")._(i("497566"),16),label:h._("__JHASH__RQlCb2nGstH__JHASH__"),onPress:function(){return f()},onPressIn:e,type:"secondary"})}),k.jsx("div",{className:"x1c4vz4f xurb0ha",children:k.jsx(c("TetraButton.react"),{icon:d("fbicon")._(i("638854"),16),label:h._("__JHASH__3_zHGB-NXwp__JHASH__"),linkProps:{url:"/"},type:"secondary"})})]}),k.jsx(d("CometRelay").MatchContainer,{match:a==null?void 0:a.see_first_migration_content})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedMostRecentHeader.react",["fbt","CometPressable.react","CometRouteParams","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){var a=d("CometRouteParams").useRouteParams();a=a.sk;if(a!=="h_chr")return null;a=h._("__JHASH__uwsm5G_5HyE__JHASH__");return i.jsxs("div",{className:"x1n2xptk x78zum5 xdj266r xkrivgy xat24cr x1gryazu xyamay9 x4uap5 x1l90r2v xkhd6sd",children:[i.jsx("div",{className:"x1iyjqo2",children:i.jsx(c("TetraText.react"),{type:"headlineEmphasized3",children:h._("__JHASH__EwjDAHsS3QO__JHASH__")})}),i.jsx("div",{className:"xs83m0k",children:i.jsx(c("CometPressable.react"),{display:"inline",label:a,linkProps:{url:"/"},overlayDisabled:!0,children:i.jsx(c("TetraText.react"),{color:"blueLink",type:"body3",children:a})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CappedListContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);g["default"]=b}),98);
__d("CappedListItemTracker.react",["CappedListContext","FBLogger","gkx","react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext;function a(a){var b=a.children,d=a.id;a=j(c("CappedListContext"));var e=a==null?void 0:a.onItemOffScreen,f=a==null?void 0:a.onItemOnScreen,g=i(function(){e==null?void 0:e(d)},[d,e]),k=i(function(){f==null?void 0:f(d)},[d,f]);g=c("useVisibilityObserver")({onHidden:g,onVisible:k});if(a==null){c("FBLogger")("comet_performance.memory","error").mustfix("Unable to find context data for id=%s",JSON.stringify(d));return b}k=a.cappedItemIDs.has(d);a=null;return k?null:h.jsx("div",babelHelpers["extends"]({ref:g},a,{children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CappedListItemTrackerMock.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;return h.jsx("div",{children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometCappedListV2",["FBLogger","forEachObject","gkx","qex","react","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";f=d("react");var h=f.useCallback,i=f.useDeferredValue,j=f.useEffect,k=f.useInsertionEffect,l=f.useMemo,m=f.useRef,n=f.useState,o=1e3;d=c("gkx")("7933");function a(a,b){var c=JSON.stringify(a.map(b));return l(function(){return a.map(b)},[c,b])}function b(a,b){return a}f=c("qex")._("261");var p=f===!0?a:b;function e(a,b,d,e,f){e===void 0&&(e=5e3);f===void 0&&(f=5);var g=n(new Set()),v=g[0],w=g[1],x=i(v),y=m({}),z=p(a,d),A=m(z),B=c("useDebouncedComet")(h(function(){y.current=q({cappedListInfo:y.current,dontUnmountItemsNearOnScreenOnes:f,fullList:A.current,getItemID:d,maxLength:b,minOffscreenDurationBeforeUnmount:e}),w(s(x,y.current))},[x,f,d,b,e]),{wait:o}),C=h(function(){B()},[B]),D=m([]);g=n({});var E=g[0],F=g[1],G=h(function(a,b,c){if(c&&t(y.current,a)==null){D.current.push({id:a,isOnScreen:b});F({});return}y.current=u(y.current,a,b);C()},[C]),H=h(function(a,b){b===void 0&&(b=!0),G(a,!1,b)},[G]),I=h(function(a,b){b===void 0&&(b=!0),G(a,!0,b)},[G]),J=h(function(){A.current=z,y.current=r(d,y.current,z)},[z,d]);k(function(){J()},[J]);j(function(){var a=D.current;if(E&&a.length){c("FBLogger")("comet_performance.memory","useCometCappedListV2").mustfix("Processing %s manual visibility updates although it shouldn't happen: %s",a.length,JSON.stringify(a));J();var b=a.length;a.forEach(function(a){var b=a.id;a=a.isOnScreen;a?I(b,!1):H(b,!1)});a.splice(0,b)}},[E,H,I,J]);return l(function(){return{cappedListContextValue:b>0?{cappedItemIDs:x,onItemOffScreen:H,onItemOnScreen:I}:null}},[x,b,H,I])}function q(a){var b=a.cappedListInfo,d=a.dontUnmountItemsNearOnScreenOnes,e=a.fullList,f=a.getItemID,g=a.maxLength;a=a.minOffscreenDurationBeforeUnmount;if(g<=0)return b;var h=new Set();e=e.map(function(a){a=typeof a==="string"?a:f(a);var c=t(b,a);if(c==null){h.add(a);return null}return{id:a,info:c}}).filter(Boolean).filter(function(a){return!a.info.isCapped});if(h.size>0){c("FBLogger")("comet_performance.memory","useCometCappedListV2").mustfix("Unable to apply capping rules because we couldn't find info for items: %s",JSON.stringify(Array.from(h)));return b}var i=Date.now();g=e.length-g;var j=e.findIndex(function(a){a=a.info;return a.isOnScreen});if(j<0)return b;var k;for(var l=0;g>0&&l<e.length;l++){var m=e[l],n=m.id;m=m.info;if(l+d>=j)break;if(m.lastTimeVisible!=null&&i-m.lastTimeVisible<=a)break;if(m.isOnScreen===!0)break;k==null&&(k=babelHelpers["extends"]({},b));Object.prototype.hasOwnProperty.call(k,n)||c("FBLogger")("comet_performance.memory","newsfeed").mustfix("Unable to find capped item context data for id=%s, this should never happen",JSON.stringify(n));k[n]=babelHelpers["extends"]({},m,{isCapped:!0});g--}return k||b}function r(a,b,c){var d;c.forEach(function(c){c=typeof c==="string"?c:a(c);Object.prototype.hasOwnProperty.call(b,c)||(d==null&&(d=babelHelpers["extends"]({},b)),d[c]={isCapped:!1,isOnScreen:null,lastTimeVisible:null})});return d||b}function s(a,b){var d=null;c("forEachObject")(b,function(b,c){b.isCapped&&!a.has(c)&&(d==null&&(d=new Set(a)),d.add(c))});return d||a}function t(a,b){return a[b]}function u(a,b,d){var e=t(a,b);if(e==null){c("FBLogger")("comet_performance.memory","useCometCappedListV2").warn("Unable to set visibility [isOnScreen=%s] for item [id=%s]",d,JSON.stringify(b));return a}e=babelHelpers["extends"]({},e,{isOnScreen:d,lastTimeVisible:Date.now()});return babelHelpers["extends"]({},a,(d={},d[b]=e,d))}g["default"]=e}),98);
__d("useCometCappedListV2Mock",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){return{cappedListContextValue:null}}f["default"]=a}),66);
__d("cometCappedListFactory",["CappedListContext","CappedListItemTracker.react","CappedListItemTrackerMock.react","useCometCappedListV2","useCometCappedListV2Mock"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a>0;return{CappedListContext:a?c("CappedListContext"):null,CappedListItemTracker:a?c("CappedListItemTracker.react"):c("CappedListItemTrackerMock.react"),useCometCappedListV2:a?c("useCometCappedListV2"):c("useCometCappedListV2Mock")}}g["default"]=a}),98);
__d("useCometCappedListMock",["emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=c("emptyFunction");var d=c("emptyFunction");return{cappedList:a,pauseTrim:b,resumeTrim:d,topOffset:0}}g["default"]=a}),98);
__d("MWJewelThreadFacepile.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}e={activityBadge:c,availabilityBadge:a,lastActiveTimeBadge:b,trigger:d};f.ProfilePhotoAddOn=e}),66);
__d("MWThreadAddOnPrimary.bs",["ImmutableArray.bs","MWJewelThreadFacepile.bs","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,d,e,f){return{addOn:f,primaryPhoto:{alt:c("bs_belt_Option").getWithDefault(d,""),source:{uri:a}},secondaryPhoto:{alt:c("bs_belt_Option").getWithDefault(d,""),source:{uri:b}},size:e,type:"messenger-facepile"}}function i(a,b,d,e,f){return{addOn:e,alt:c("bs_belt_Option").getWithDefault(b,""),linkProps:void 0,shape:f,size:d,source:{uri:a},type:"profile-photo"}}function a(a,b,e,f,g,j){f=f!==void 0?c("bs_caml_option").valFromOption(f):"circle";var k=d("MWJewelThreadFacepile.bs").ProfilePhotoAddOn.availabilityBadge({type:"availabilityBadge"}),l=d("MWJewelThreadFacepile.bs").ProfilePhotoAddOn.lastActiveTimeBadge({border:"web-wash",time:j,type:"lastActiveTimeBadge"});e=e?c("bs_caml_option").some(k):j!==void 0?c("bs_caml_option").some(l):void 0;k=d("ImmutableArray.bs").get(a,0);j=d("ImmutableArray.bs").get(a,1);if(k!==void 0)if(j!==void 0)return h(k,j,b,g,e);else return i(k,b,g,e,f);else if(j!==void 0)return i(j,b,g,e,f);else return}g.buildFacepileConfig=h;g.buildProfileConfig=i;g.get=a}),98);
__d("CometHomeContactGroup.react",["CometGlobalPanelGating","JSResourceForInteraction","JSScheduler","MWThreadAddOnPrimary.bs","TetraListCell.react","react","useCometPreloader","useMWChatOpenTabForGroup"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback,j=c("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("CometHomeContactGroup.react");function a(a){var b=a.activeStatusOn,e=a.images,f=a.isThreadActive,g=a.lastActiveTime,k=a.name,l=a.threadID;a=d("MWThreadAddOnPrimary.bs").get(e,void 0,f,void 0,d("CometGlobalPanelGating").isGlobalPanelVisible()?24:36,b?g:void 0);e=c("useMWChatOpenTabForGroup")("sidebarGroupsList");var m=e[0],n=e[1];f=i(function(){d("JSScheduler").scheduleSpeculativeCallback(function(){j.preload()}),n(l)},[n,l]);b=c("useCometPreloader")("button",f,f);g=b[0];e=b[1];return h.jsx(c("TetraListCell.react"),{addOnPrimary:a,headline:k,level:4,onHoverIn:g,onHoverOut:e,onPress:function(){return m(l)},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactGroupsContentWrapper.react",["fbt","ix","CometHomeContactsPresenceAwareList.react","MWChatOpenNewTab.bs","TetraListCell.react","fbicon","gkx","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.activeStatusOn;a=a.groups;var e=d("MWChatOpenNewTab.bs").useHook("sidebarGroupsList");if(a.length>0)return j.jsx(c("CometHomeContactsPresenceAwareList.react"),{active:b,children:j.jsx(j.Fragment,{children:a})});else return c("gkx")("1406650")?null:j.jsx(c("TetraListCell.react"),{addOnPrimary:{icon:d("fbicon")._(i("483769"),20),size:36,type:"contained-icon"},headline:h._("__JHASH__nldYURqlkh6__JHASH__"),level:4,onPress:function(){return e(!1)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("JsDictReadOnly.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.keys(a)}function c(a){return a}d=b("bs_js_dict").get;e=b("bs_js_dict").entries;b=b("bs_js_dict").values;f.from=c;f.get=d;f.keys=a;f.entries=e;f.values=b}),null);
__d("MWParticipantListRenderer",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";d("react");a=function(){function a(){var a=this;this.$6=function(b){var c=a.$5;if(c!=null){var d=b.id;if(d!=null&&c[d]!=null&&c[d]!=null)return c[d]}return a.$2?b.short_name:b.name};this.$1=!1;this.$2=!1;this.$3=!1;this.$4=0;this.$5=null}var b=a.prototype;b.renderParticipantList=function(a){a=a.map(this.$6);switch(a.length){case 0:return i(this.$1);case 1:return j(a);case 2:return this.$3?l(a):k(a);case 3:return this.$3?n(a):m(a);default:return this.$3?p(a,this.$4):o(a,this.$4)}};b.setIsNewThread=function(a){this.$1=a;return this};b.setNameRenderer=function(a){this.$6=a;return this};b.setUseShortName=function(a){this.$2=a;return this};b.setNickname=function(a){this.$5=a;return this};b.setUseAndSeparator=function(a){this.$3=a;return this};b.setTotalParticipantCount=function(a){this.$4=a;return this};return a}();function i(a){if(a)return h._("__JHASH__uhF6__U4Uqu__JHASH__");else return h._("__JHASH__sUmg9cbVQAa__JHASH__")}function j(a){return a[0]}j.displayName=j.name+" [from "+f.id+"]";function k(a){return h._("__JHASH__QVqNH0CDXLb__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}k.displayName=k.name+" [from "+f.id+"]";function l(a){return h._("__JHASH__JTikoCjxB3O__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}l.displayName=l.name+" [from "+f.id+"]";function m(a){return h._("__JHASH__FfZsrZ3E8l3__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}m.displayName=m.name+" [from "+f.id+"]";function n(a){return h._("__JHASH__0a7wtHuBFBj__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}n.displayName=n.name+" [from "+f.id+"]";function o(a,b){return h._("__JHASH__DTZWN4rVq-W__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2]),h._param("others_link",q((b||a.length)-3))])}o.displayName=o.name+" [from "+f.id+"]";function p(a,b){return h._("__JHASH__P_doxz4r-mz__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_link",q((b||a.length)-2))])}p.displayName=p.name+" [from "+f.id+"]";function q(a){if(a>1)return h._("__JHASH__fXVmG3gSqH2__JHASH__",[h._param("others_count",a,[0])]);else return h._("__JHASH__AXvVFDKadXa__JHASH__")}g["default"]=a}),98);
__d("MWUIThreadTitle.bs",["CurrentUser","JsDictReadOnly.bs","MWParticipantListRenderer","bs_belt_Array","bs_caml_option","bs_js_dict"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={};c("bs_js_dict").entries(a).forEach(function(a){b[a[0]]=a[1]});return b}function i(a,b,d,e,f){if(a!=="")return a;a=h(d);return new(c("MWParticipantListRenderer"))().setUseShortName(f).setUseAndSeparator(e).setIsNewThread(!1).setNickname(a).renderParticipantList(b)}function j(a,b,e){var f=c("CurrentUser").getID(),g=d("JsDictReadOnly.bs").keys(b).length,h=c("bs_belt_Array").keepMap(d("JsDictReadOnly.bs").keys(b),function(a){if(a===f&&g>1)return;a=d("JsDictReadOnly.bs").get(b,a);if(a!==void 0)return{id:a.id,name:a.name,short_name:a.short_name}});return i(a,h,e,!0,!0)}function a(a,b,c){return j(a,d("JsDictReadOnly.bs").from(b),c)}function k(a,b){if(a!==void 0)return[c("bs_caml_option").valFromOption(a)];else{var e=c("CurrentUser").getID();a=d("JsDictReadOnly.bs").keys(b);var f=a.length;return c("bs_belt_Array").keepMap(a,function(a){a=a;if(a===e&&f!==1)return;else{a=d("JsDictReadOnly.bs").get(b,a);if(a!==void 0)return c("bs_caml_option").nullable_to_opt(c("bs_caml_option").valFromOption(a).image_src);else return}})}}function b(a,b){return k(a,d("JsDictReadOnly.bs").from(b))}g.getTitleForGroup_=j;g.getTitleForGroup=a;g.getProfileImages_=k;g.getProfileImages=b}),98);
__d("CometHomeContactGroups.react",["fbt","CometGlobalPanelGating","CometHomeContactGroup.react","CometHomeContactGroupsContentWrapper.react","CometHomeContactGroups_viewer.graphql","CometHomeRightRailUnit.react","CometRelay","CometUnitHeader.react","CometVisualCompletionAttributes","MWUIThreadTitle.bs","MWXacGating.bs","cr:254","qex","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=h._("__JHASH__b0sYOo4GQ6M__JHASH__");function l(a,b){return a.map(function(a){var e,f,g,h;a=a==null?void 0:a.node;if(a==null||((e=a.thread_key)==null?void 0:e.thread_fbid)==null)return null;if(a.is_xac&&!d("MWXacGating.bs").isGroupsEnabled())return null;e=a.thread_key.thread_fbid;f=(f=(f=a.all_participants)==null?void 0:f.edges)!=null?f:[];var i=!1;f=Object.fromEntries(f.map(function(a){var b;a=(a=a.node)==null?void 0:a.messaging_actor;if((a==null?void 0:a.id)==null)return null;var c=a.id;if((a==null?void 0:a.name)==null||((b=a.profile_picture)==null?void 0:b.uri)==null)return null;a.availability==="ACTIVE"&&(i=!0);return[c,{id:c,image_src:a.profile_picture.uri,name:a.name,short_name:(b=a.short_name)!=null?b:a.name}]}).filter(Boolean));g=(g=(g=a.customization_info)==null?void 0:g.participant_customizations)!=null?g:[];g=Object.fromEntries(g.map(function(a){return a==null||a.participant_id==null||a.nickname==null?null:[a.participant_id,a.nickname]}).filter(Boolean));h=d("MWUIThreadTitle.bs").getTitleForGroup_((h=a.name)!=null?h:"",f,g);g=d("MWUIThreadTitle.bs").getProfileImages_((g=a.image)==null?void 0:g.uri,f);return j.jsx("li",{children:j.jsx(c("CometHomeContactGroup.react"),{activeStatusOn:b,images:g,isThreadActive:i,lastActiveTime:a.updated_time,name:h,threadID:e})},e)}).filter(Boolean).slice(0,3)}function m(a){var b=a.activeStatusOn;a=a.viewer;a=l((a=a==null?void 0:(a=a.message_threads)==null?void 0:a.edges)!=null?a:[],b);return j.jsx(c("CometHomeContactGroupsContentWrapper.react"),{activeStatusOn:b,groups:a})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e;a=a.viewer$key;a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometHomeContactGroups_viewer.graphql"),a);if((a==null?void 0:a.chat_sidebar_is_collapsed)===!0)return null;if((a==null?void 0:(e=a.actor)==null?void 0:e.should_hide_group_conversations_list)===!0)return null;e=c("qex")._("1285");e=e===!0?(a==null?void 0:(e=a.presence_view_side_settings)==null?void 0:e.is_active_status_viewable)===!0:(a==null?void 0:a.chat_visibility)===!0;return j.jsx("div",babelHelpers["extends"]({"data-testid":void 0},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:j.jsxs(c("CometHomeRightRailUnit.react"),{hasBottomDivider:!1,header:j.jsx(c("CometUnitHeader.react"),{headline:k,headlineColor:d("CometGlobalPanelGating").isGlobalPanelVisible()?"primary":"secondary",level:3}),children:[j.jsx(m,{activeStatusOn:e,viewer:a}),b("cr:254")?j.jsx(b("cr:254"),{}):null]})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactGroupsContainer.react",["CometHomeContactGroups.react","CometHomeContactGroupsContainerQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.homeContactGroupsQueryReference;a=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("CometHomeContactGroupsContainerQuery.graphql"),a);a=a.viewer;return i.jsx(c("CometHomeContactGroups.react"),{viewer$key:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactsContainer.react",["CometHomeContactsContainerQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.homeContactsQueryReference;a=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("CometHomeContactsContainerQuery.graphql"),a);a=a.viewer;a=a.actor.contacts_home_renderer;return a==null?i.jsx("div",{}):i.jsx(d("CometRelay").MatchContainer,{fallback:i.jsx("div",{}),match:a,props:{}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContactAndGroupContainer.react",["CometErrorBoundary.react","CometHomeContactGroupsContainer.react","CometHomeContactsContainer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.homeContactGroupsQueryReference;a=a.homeContactsQueryReference;return h.jsxs(h.Fragment,{children:[h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("CometHomeContactsContainer.react"),{homeContactsQueryReference:a})}),h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("CometHomeContactGroupsContainer.react"),{homeContactGroupsQueryReference:b})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeContentAnimationContainer.react",["CometFeedGlimmer.react","clearTimeout","cr:683059","react","scrollTo","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef,k=e.useState,l=500,m=1500;function a(a){var d=a.children,e=a.isPending,f=j(null);a=k(!1);var g=a[0],n=a[1];a=k(!1);var o=a[0],p=a[1];i(function(){var a=f.current;e&&a!=null&&(p(!0),c("setTimeout")(function(){var a=Math.max(window.innerHeight,m);window.scrollY>a&&c("scrollTo")({top:a});c("scrollTo")({behavior:"smooth",top:0});b("cr:683059")&&(b("cr:683059").setInitialScrollY(0),b("cr:683059").addAnnotationInt("ScrollToTop",1))},l))},[e]);i(function(){if(e!==!1||o===!1)return;n(!0);var a=c("setTimeout")(function(){n(!1),p(!1)},l);return function(){return c("clearTimeout")(a)}},[e,o]);return h.jsxs(h.Fragment,{children:[o===!0?h.jsx("div",{className:"x54ewbq xqcmdr3 x47corl x1unhpq9 x6o7n8i xh8yej3"+(g?" xg01cxk":" x1hc1fzr"),children:h.jsx(c("CometFeedGlimmer.react"),{})}):null,h.jsx("div",{className:"x1unhpq9 x6o7n8i"+(o===!0?" xg01cxk x47corl":""+(g?" xg01cxk":" x1hc1fzr")),ref:f,children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeCreateGroupButtonShim.react",["cr:1996927"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1996927")}),98);
__d("CometHomeGQLCreateGroupButton.react",["fbt","ix","TetraListCell.react","fbicon","react","useCometHomeOpenNewChatTab"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useCallback;function a(){var a=c("useCometHomeOpenNewChatTab")("sidebarGroupsList"),b=a.onPress;a=babelHelpers.objectWithoutPropertiesLoose(a,["onPress"]);var e=k(function(){b()},[b]);return j.jsx(c("TetraListCell.react"),babelHelpers["extends"]({},a,{addOnPrimary:{icon:d("fbicon")._(i("483769"),20),size:36,type:"contained-icon"},headline:h._("__JHASH__N3jQuSpN-AP__JHASH__"),level:4,onPress:e,testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometHomeRightSideEgo.react",["CometHomeRightSideEgo_viewer.graphql","CometRelay","ODS","Random","react","useSideAdsRefreshHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.startTransition,k=e.useCallback,l=e.useEffect,m=e.useState,n=h!==void 0?h:h=b("CometHomeRightSideEgo_viewer.graphql");function a(a){a=d("CometRelay").useRefetchableFragment(n,a.viewerRef);var b=a[0],e=a[1];b=b==null?void 0:(a=b.sideFeed)==null?void 0:a.nodes;a=m(null);var f=a[0];a=a[1];var g=m(!1),h=g[0],o=g[1];l(function(){var a=function(){o(!1)};window.addEventListener("blur",a);return function(){window.removeEventListener("blur",a)}},[]);l(function(){if(f==null){var a=2;d("Random").coinflip(a)&&d("ODS").bumpEntityKey(144,"feed_ads","CometHomeRightSideEgo.empty_first_unit",a)}},[f]);g=k(function(a){j(function(){e({refresh_num:a},{fetchPolicy:"store-only"})})},[e,j]);g=c("useSideAdsRefreshHandler")(g,h);if(b!=null&&b.length>=1&&f!==b[0]){a(b[0]);return null}return f==null||Object.keys(f).length===0?null:i.jsx("div",{onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},ref:g,children:i.jsx(d("CometRelay").MatchContainer,{match:f})})}a.displayName=a.name+" [from "+f.id+"]";e=a;g["default"]=e}),98);
__d("CometHomeRightSideEgoContainer.react",["CometHomeRightSideEgo.react","CometHomeRightSideEgoContainer_egoPanel.graphql","CometRelay","FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){a=a.egoPanel;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometHomeRightSideEgoContainer_egoPanel.graphql"),a);if(!a){c("FBLogger")("feed_ads").mustfix("Expecting non-nullviewer");return null}return i.jsx("span",{children:i.jsx(c("CometHomeRightSideEgo.react"),{viewerRef:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometRightSideHeaderCards.react",["CometErrorBoundary.react","CometHomeRightSideEgoContainer.react","CometRelay","CometRightSideHeaderCardsQuery.graphql","CometRightSideHeaderCards_viewerSideFeed.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react"),k=h!==void 0?h:h=b("CometRightSideHeaderCardsQuery.graphql"),l=i!==void 0?i:i=b("CometRightSideHeaderCards_viewerSideFeed.graphql");function m(a){var b;a=a.rightSideHeaderCardsQueryReference;a=d("CometRelay").usePreloadedQuery(k,a);var e=a.viewer,f=a;a=d("CometRelay").useFragment(l,e);if(e==null)return null;b=a==null?void 0:(b=a.side_feed)==null?void 0:b.nodes;var g=null;b=b!=null?b.map(function(a,b){if((a==null?void 0:a.__typename)==="CometHomeSideFeedWidgetContainer"||(a==null?void 0:a.__typename)==="CometHomeSideFeedWidgetContainerWithSeeMore"){g=j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a})},b);return null}else if((a==null?void 0:a.__typename)==="PagesSideFeedUnit")return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:{query$key:f}})},b);return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(d("CometRelay").MatchContainer,{match:a})},b)}).filter(Boolean):null;a=a==null?void 0:a.right_side_widget_container_placement;return j.jsxs("div",{children:[a==="ABOVE_ADS"?g:null,j.jsx(c("CometHomeRightSideEgoContainer.react"),{egoPanel:e}),a==="BELOW_ADS"?g:null,b]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(m,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedInlineComposerSproutsList.react",["CometFeedInlineComposerSproutsList_composer.graphql","CometFeedInlineComposerSproutsList_profile.graphql","CometInlineComposerSproutListMatcher.react","RelayHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");function a(a){d("RelayHooks").useFragment(h!==void 0?h:h=b("CometFeedInlineComposerSproutsList_profile.graphql"),a.profile$key);var e=d("RelayHooks").useFragment(i!==void 0?i:i=b("CometFeedInlineComposerSproutsList_composer.graphql"),a.composer);e=(e=e==null?void 0:e.inline_sprouts)!=null?e:[];return j.jsx("div",{className:"xe4j0kc x78zum5 x1a02dak x1vqgdyp x1l1ennw x14vqqas x6ikm8r x10wlt62 x1y1aw1k xh8yej3",children:j.jsx(c("CometInlineComposerSproutListMatcher.react"),{onHoverIn:a.onHoverInPrerenderer,onHoverOut:a.onHoverOutPrerenderer,onPressIn:a.onPressInPrerenderer,showComposerDialog:a.showFeedComposerDialog,sprouts:e,triggerRef:a.triggerRef})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedInlineComposer.react",["fbt","CometCard.react","CometComposerAttachmentPluginTypes","CometFeedInlineComposerPressableProfilePic.react","CometFeedInlineComposerQuery.graphql","CometFeedInlineComposerSproutsList.react","CometFeedInlineComposerWOYM.react","CometRelay","CometScreenReaderHeading.react","cometGetKeyCommandConfig","cr:1993522","cr:3594","getComposerUnsavedChangesAlert","gkx","react","useComposerTerminalEventLog","useFeedComposerCometDialog","useLayerKeyCommands","useNullthrowsViolation","useOnBeforeUnload","usePostInProgress","useResumableComposerViewState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo,m=e.useRef,n={current:null};function a(a){a=a.feedInlineComposerQueryReference;var e=m(!1),f=c("useResumableComposerViewState")(),g=f.clearResumableViewState,o=f.getResumableViewState,p=f.saveResumableViewState;f=c("usePostInProgress")();var q=f.postPlainText,r=f.updatePostPlainText,s=m(!1);c("useOnBeforeUnload")(function(){return s.current===!0?c("getComposerUnsavedChangesAlert")():void 0});c("useComposerTerminalEventLog")(function(){return s.current},function(){return o().creationSessionID});f=k(function(a){if(e.current===!0)s.current=!1,g(),r(o());else{var b;s.current=(b=a==null?void 0:a.isDirty)!=null?b:!1;p(a);r(o())}},[g,r,o,p]);var t=function(){e.current=!1},u=function(){s.current=!0,e.current=!1},v=function(){e.current=!0},w=h._("__JHASH__ecVLcDRqpWJ__JHASH__");a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("CometFeedInlineComposerQuery.graphql"),a);a=a.viewer;var x=c("useNullthrowsViolation")(a.actor.id,"Unable to render CometFeedInlineComposer with null viewerID and type "+a.actor.__typename),y=a.actor.has_professional_features_for_watch===!0,z=y&&c("gkx")("1430759");y=c("useFeedComposerCometDialog")({composerEntryPointName:"inline_composer",composerSourceSurface:"newsfeed",composerType:"feed",onBeforeClose:f,onSave:t,onSaveError:u,onSubmit:v,profileID:x,title:w,tracePolicy:"comet.composer.feed"});var A=y[0];f=y[1];t=y[2];u=y[3];v=y[4];var B=k(function(a){s.current=!1;var b=c("gkx")("1224637");b=o(a==null?void 0:a.additionalMediaAttachmentItems,{startWithHeaderTextStyle:b});b=babelHelpers["extends"]({},b,{characterLimit:63206,mediaAttachmentsLimit:80,useFeatureDefinitions:c("gkx")("891"),videoComposerData:{shouldOpenVideoSpecificComposer:z,targetID:x}});if((a==null?void 0:a.pushedPageOnLoad)==="get_messages"){var d=c("gkx")("6262");b=babelHelpers["extends"]({},b,{attachmentArea:babelHelpers["extends"]({},b.attachmentArea,{activeAttachmentType:c("CometComposerAttachmentPluginTypes").GET_MESSAGES}),isGetMessagesPost:!0,isGetMessagesPostAttachmentOptional:d})}(a==null?void 0:a.pushedPageOnLoad)==="get_whatsapp_messages"&&(b=babelHelpers["extends"]({},b,{attachmentArea:babelHelpers["extends"]({},b.attachmentArea,{activeAttachmentType:c("CometComposerAttachmentPluginTypes").GET_WHATSAPP_MESSAGES}),isGetWhatsAppMessagePost:!0,isGetWhatsappMessagesPostAttachmentOptional:!0}));A({beginningViewState:b,pushedPageOnLoad:a==null?void 0:a.pushedPageOnLoad})},[o,A,x,z]);w=l(function(){return[d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","newPost",B)]},[B]);c("useLayerKeyCommands")(w);y=h._("__JHASH__wQWxG07eOjM__JHASH__");w=j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{"aria-label":y,className:"x6s0dn4 x78zum5 x1a02dak x1pi30zi x1swvt13 xz9dl7a"+(c("CometFeedInlineComposerSproutsList.react")?" x1a8lsjc":" xsag5q8"),role:"region",children:[j.jsxs("div",{className:"x1cy8zhl x78zum5 x1iyjqo2 xs83m0k xh8yej3",children:[j.jsx(c("CometScreenReaderHeading.react"),{children:y}),j.jsx(c("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:a.actor}),j.jsx(c("CometFeedInlineComposerWOYM.react"),{onHoverInPrerenderer:t,onHoverOutPrerenderer:u,onPress:function(){return B()},onPressInPrerenderer:v,postPlainText:q,profile$key:a.actor,triggerRef:f}),b("cr:3594")&&j.jsx("div",{className:"x1i64zmx",children:j.jsx(b("cr:3594"),{composer:a.feed_comet_composer,onPress:B})})]}),!b("cr:3594")&&j.jsx(c("CometFeedInlineComposerSproutsList.react"),{composer:a.feed_comet_composer,onHoverInPrerenderer:t,onHoverOutPrerenderer:u,onPressInPrerenderer:v,profile$key:a.actor,showFeedComposerDialog:B,triggerRef:f})]})});if(b("cr:1993522")==null)return w;else return j.jsx(b("cr:1993522"),{enableFeature:!1,fallback:j.jsx(c("CometCard.react"),{background:"white",dropShadow:1,children:j.jsxs("div",{"aria-label":y,className:"x6s0dn4 x78zum5 x1a02dak x1a8lsjc x1pi30zi x1swvt13 xz9dl7a",role:"region",children:[j.jsx(c("CometScreenReaderHeading.react"),{children:y}),j.jsx(c("CometFeedInlineComposerPressableProfilePic.react"),{profile$key:a.actor}),j.jsx(c("CometFeedInlineComposerWOYM.react"),{onPress:function(){},profile$key:a.actor,triggerRef:n}),c("CometFeedInlineComposerSproutsList.react")&&j.jsx(c("CometFeedInlineComposerSproutsList.react"),{composer:null,showFeedComposerDialog:function(){},triggerRef:n})]})}),children:w})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMegaphoneRoot.react",["CometMegaphoneQuickPromotionSection.react","CometMegaphoneRootQuery.graphql","CometRelay","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("CometMegaphoneRootQuery.graphql");function a(a){a=a.megaphoneQueryReference;a=d("CometRelay").usePreloadedQuery(j,a);a=(a=a.viewer)==null?void 0:(a=a.megaphonePromotions)==null?void 0:(a=a.edges[0])==null?void 0:a.node;return a==null?null:i.jsx(c("CometMegaphoneQuickPromotionSection.react"),{quickPromotion:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesAppMessengerOutline24IconFbicon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("505621"),24);g["default"]=a}),98);
__d("StoriesPhotoHeartOutline24IconFbicon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("875971"),24);g["default"]=a}),98);
__d("StoriesStopwatchOutline24IconFbicon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("518675"),24);g["default"]=a}),98);
__d("StoriesTrayCreateCard.react",["fbt","CometCard.react","QuickPerformanceLogger","StoriesGating","TetraAccessoryListCell.react","TopOfFeedContext","XCometStoriesCreateControllerRouteBuilder","cr:3595","qpl","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useContext;function a(){var a=c("XCometStoriesCreateControllerRouteBuilder").buildURL({}),e={entryPoint:"add_to_story_persistent_button",sourceSurface:"newsfeed"},f=j(function(){c("QuickPerformanceLogger").markerEnd(c("qpl")._(13238400,"7688"),4),c("QuickPerformanceLogger").markerStart(c("qpl")._(13238400,"7688"))},[]),g=k(c("TopOfFeedContext"));g=g.topOfFeedEnabled;return i.jsx("div",{className:"x1yztbdb",children:i.jsx(c("CometCard.react"),{background:"white",dropShadow:g?0:1,children:i.jsx("div",{className:"x1y1aw1k xwib8y2",children:i.jsx(c("TetraAccessoryListCell.react"),{addOnPrimary:{color:"lightblue",icon:b("cr:3595"),size:40,type:"contained-icon"},body:d("StoriesGating").getCreationDescription(),emphasized:!0,headline:h._("__JHASH__Piwub9vzMev__JHASH__"),linkProps:{passthroughProps:e,url:a},onPress:f})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayRow.react",["StoriesGating","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;var b=4;a=h.Children.map(a,function(a,c){return h.jsx("div",{className:"x98rzlu x150jy0e x1e558r4"+((c>=b+1&&!d("StoriesGating").isTopOfFeedUnitEnabled()?" xq4ptzf xb19nzs x4e3nt7 x1qw9tx2":""+(c===b&&!d("StoriesGating").isTopOfFeedUnitEnabled()?"":""))+(c===b&&!d("StoriesGating").isTopOfFeedUnitEnabled()?" xo1ujjn x1283tta xfa1y8d":"")),children:a},"stories_tray_tile_"+c)});return h.jsx("div",{className:"x9f619 x193iq5w",children:h.jsx("div",{className:"x1qjc9v5 x78zum5 x1q0g3np xozqiw3 x1nhvcw1 x6ikm8r x10wlt62 x1n2onr6"+(d("StoriesGating").isTopOfFeedUnitEnabled()?" x11i5rnm x16n37ib x18d9i69 xyamay9 xl5ka8d xh8yej3":" xcud41i x139jcc6 xwxc41k x1y1aw1k"),children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTraySeeAllStoriesButton.react",["fbt","ArrowLeftFilled20IconSvg.react","ArrowRightFilled20IconSvg.react","CometTooltip.react","Locale","TetraCircleButton.react","XCometStoriesControllerRouteBuilder","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("requireDeferred")("ODS").__setRef("StoriesTraySeeAllStoriesButton.react");function a(){var a=function(){j.onReady(function(a){a.bumpEntityKey(4329,"fb_stories_web","stories_tray_see_all_stories_button_click",1)})},b=d("Locale").isRTL()?c("ArrowLeftFilled20IconSvg.react"):c("ArrowRightFilled20IconSvg.react"),e=h._("__JHASH__JuCGQWapuNv__JHASH__");b={color:"secondary",icon:b,label:e,linkProps:{traceParams:{navigation_source:"stories_tray_arrow"},url:c("XCometStoriesControllerRouteBuilder").buildURL({})},size:40,type:"overlay"};return i.jsx("div",{className:"x1z11no5 xjy5m1g x1mnwbp6 x4pb5v6 xjf5wm9 x10l6tqk x1owr592 x1egi5h6",children:i.jsx(c("CometTooltip.react"),{delayMs:300,tooltip:e,children:i.jsx(c("TetraCircleButton.react"),babelHelpers["extends"]({},b,{onPress:a}))})},"button")}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useStoriesTrayProfileImpressionLogging",["CometRelay","StoriesActorContext","StoriesLoggerHelper","TopOfFeedLoggingContext","react","requireDeferred","useImpressionLogger","useStoriesTrayProfileImpressionLogging_bucket.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;d("react");e=d("react");var i=e.useCallback,j=e.useContext,k=e.useRef,l=c("requireDeferred")("StoryProfileImpressionFalcoEvent").__setRef("useStoriesTrayProfileImpressionLogging"),m=h!==void 0?h:h=b("useStoriesTrayProfileImpressionLogging_bucket.graphql");function a(a,b,e,f){var g,h=k(!1),n=d("CometRelay").useFragment(m,a);a=j(c("StoriesActorContext"));a=a.actorID;var o=j(c("TopOfFeedLoggingContext")),p=o.tofuSessionID;o=n==null?void 0:(o=n.story_bucket_owner)==null?void 0:o.__typename;var q=n==null?void 0:(g=n.story_bucket_owner)==null?void 0:g.id;g=(n==null?void 0:(g=n.story_bucket_owner)==null?void 0:g.is_viewer_friend)||!1;var r=d("StoriesLoggerHelper").getOwnerType(a,o,q,g),s=n==null?void 0:(a=n.thumbnail_story_to_show)==null?void 0:(o=a.attachments)==null?void 0:(g=o[0])==null?void 0:(a=g.media)==null?void 0:a.id;o=i(function(a,c){if(h.current||n==null)return;h.current=!0;a.log(function(){return{has_new_content:n.is_bucket_seen_by_viewer||!1,has_new_views:n.is_bucket_seen_by_viewer||!1,media_id:s,preview_type:"rectangle",source:b,story_index:f,story_owner:q,story_owner_type:r,tofu_tray_session_id:p,tracking_string:n==null?void 0:n.ranking_tracking_string,tray_session_id:e}})},[n,s,b,f,q,r,p,e]);return c("useImpressionLogger")(l,o)}g["default"]=a}),98);
__d("useStoriesTrayTilePrefetchImageURI",["CometRelay","useStoriesTrayTilePrefetchImageURI_story.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePrefetchImageURI_story.graphql"),a);c=a==null?void 0:(c=a.attachments)==null?void 0:(c=c[0])==null?void 0:c.media;var e=c==null?void 0:(c=c.image)==null?void 0:c.uri,f=a==null?void 0:(c=a.backdrop)==null?void 0:(a=c.media)==null?void 0:(c=a.image)==null?void 0:c.uri;return e==null&&f==null?null:function(){if(e!=null){var a=new Image();a.src=e;if(f!=null){a=new Image();a.src=f}}}}g["default"]=a}),98);
__d("useStoriesTrayTilePressable",["CometRelay","QPLUserFlow","StoriesLoggingConstants","qpl","useStoriesTrayTilePrefetchImageURI","useStoriesTrayTilePressable_story.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e===void 0&&(e=c("StoriesLoggingConstants").ACTION_SOURCE.TRAY);a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePressable_story.graphql"),a);var f=c("useStoriesTrayTilePrefetchImageURI")(a),g=e===c("StoriesLoggingConstants").ACTION_SOURCE.TRAY?c("qpl")._(13249850,"5510"):c("qpl")._(13239835,"17340");return{onPress:function(){c("QPLUserFlow").start(g)},onPressIn:function(a){f&&f()}}}g["default"]=a}),98);
__d("StoriesTrayTile.react",["fbt","CometImage.react","CometRelay","GraphQLGender","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileView.react","StoriesTrayTile_LWRAnimations.graphql","StoriesTrayTile_bucket.graphql","StoriesTrayUtils","react","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=d("react"),l=d("StoriesGating").isCommentEnabled();function a(a){var e,f,g,m,n,o=a.animations,p=a.bucketCount,q=a.bucketLength,r=a.bucketNode,s=a.gender;s=s===void 0?"UNKNOWN":s;var t=a.hasSelfBucket,u=a.isOnBizKit;u=u===void 0?!1:u;var v=a.traySessionID,w=a.source;w=w===void 0?c("StoriesLoggingConstants").ACTION_SOURCE.UNKNOWN:w;var x=a.storiesTrayType;x=x===void 0?"TOP_OF_FEED_TRAY":x;var y=a.index,z=a.trayBucketIDs,A=a.hasReactionIcon;A=A===void 0?!1:A;var B=a.onPressIn;a=babelHelpers.objectWithoutPropertiesLoose(a,["animations","bucketCount","bucketLength","bucketNode","gender","hasSelfBucket","isOnBizKit","traySessionID","source","storiesTrayType","index","trayBucketIDs","hasReactionIcon","onPressIn"]);r=d("CometRelay").useFragment(i!==void 0?i:i=b("StoriesTrayTile_bucket.graphql"),r);var C=r==null?void 0:r.id;y=c("useStoriesTrayProfileImpressionLogging")(r,w,v,y);var D=c("useStoriesTrayTilePressable")(r==null?void 0:r.first_story_to_show,w),E=D.onPress,F=D.onPressIn;D=d("CometRelay").useFragment(j!==void 0?j:j=b("StoriesTrayTile_LWRAnimations.graphql"),o);if(r==null||C==null)return null;o=r.story_bucket_owner;var G=r.first_story_to_show,H=r.thumbnail_story_to_show,I=r.ranking_tracking_string;e=(e=r.should_show_close_friend_badge)!=null?e:!1;var J=H==null?void 0:H.story_card_info;f=(f=G==null?void 0:(f=G.story_card_info)==null?void 0:f.can_viewer_reply)!=null?f:!1;g=(J==null?void 0:(g=J.story_thumbnail)==null?void 0:g.uri)||(o==null?void 0:(g=o.coverImage)==null?void 0:g.uri);J=J==null?void 0:(J=J.background_color_info)==null?void 0:(J=J.color_info)==null?void 0:J[0];J=J==null?void 0:J.dominant_color;m=o==null?void 0:(m=o.profile_picture)==null?void 0:m.uri;var K=(o==null?void 0:o.name)||h._("__JHASH__fHKXLeuru3K__JHASH__"),L=r.is_bucket_seen_by_viewer===!1;n=(n=r==null?void 0:r.is_bucket_live)!=null?n:!1;o=(o=o==null?void 0:o.availability)!=null?o:null;o=o==="ACTIVE";m=m!=null?k.jsx(c("CometImage.react"),{alt:K,height:40,src:m,width:40}):k.jsx("div",{className:"x1vqgdyp x100vrsf"});n=k.jsx(c("StoriesTrayTileAvatar.react"),{hasNew:L,isLiveStreaming:n,isOnline:o,isOpaqueBackground:!1,shouldShowCloseFriendsBadge:e,children:m});o=u?null:d("StoriesTrayUtils").getBucketURL(C,G==null?void 0:G.id,p,w);e=new(c("GraphQLGender"))(s).toIntlVariationsEnum();m=h._("__JHASH__tkqpcCYUVoy__JHASH__",[h._name("Story owner's name (possesive)",K,e)]);u=J!=null&&J!==""?"#"+J:null;J=H==null?void 0:(C=H.attachments)==null?void 0:(p=C.find(function(a){return((a=a.media)==null?void 0:a.cix_screen)!=null}))==null?void 0:(s=p.media)==null?void 0:(e=s.cix_screen)==null?void 0:e.view_model;return k.jsx("div",{ref:y,children:k.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({animations:D,avatar:n,backgroundColor:u,bucket:l?r:null,bucketUrl:o,canViewerReply:f,coverImage:g,hasNew:L,hasReactionIcon:A,label:m,onPress:E,onPressIn:function(a){F&&F(a),B&&B()},passthroughProps:{bucketLength:q,bucketType:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER,hasSelfBucket:t,source:w,storiesTrayType:x,trackingString:I,trayBucketIDs:z,traySessionID:v},storyId:G==null?void 0:G.id},a,{text:K,warningScreenNode:J}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayTilePlaceholder.react",["StoriesTrayTileAvatar.react","StoriesTrayTileView.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=babelHelpers["extends"]({},a);return h.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:h.jsx(c("StoriesTrayTileAvatar.react"),{}),showShadow:!1},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayTileSelf.react",["fbt","CometImage.react","CometRelay","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayTileAvatar.react","StoriesTrayTileSelf_bucket.graphql","StoriesTrayTileView.react","StoriesTrayUtils","cr:2722","react","requireDeferred","useOnBeforeUnload","useStoriesTrayProfileImpressionLogging","useStoriesTrayTilePressable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState,m=c("requireDeferred")("ODS").__setRef("StoriesTrayTileSelf.react"),n=d("StoriesGating").isCommentEnabled();function a(a){var e,f,g,o,p=a.bucketCount,q=a.bucketNode,r=a.bucketLength,s=a.hasSelfBucket,t=a.isInterATS;t=t===void 0?!1:t;var u=a.traySessionID,v=a.source;v=v===void 0?c("StoriesLoggingConstants").ACTION_SOURCE.TRAY:v;var w=a.index,x=a.isUploading,y=a.optimisticStoryURI,z=a.onPressIn;a=babelHelpers.objectWithoutPropertiesLoose(a,["bucketCount","bucketNode","bucketLength","hasSelfBucket","isInterATS","traySessionID","source","index","isUploading","optimisticStoryURI","onPressIn"]);q=d("CometRelay").useFragment(i!==void 0?i:i=b("StoriesTrayTileSelf_bucket.graphql"),q);var A=q==null?void 0:q.id;w=c("useStoriesTrayProfileImpressionLogging")(q,v,u,w);var B=l(y),C=B[0];B=B[1];var D=c("useStoriesTrayTilePressable")(q==null?void 0:q.first_story_to_show,v),E=D.onPress,F=D.onPressIn,G=k(function(){m.onReady(function(a){a.bumpEntityKey(4329,"fb_stories_web","stories_tray.self_story_tile",1)})},[]);c("useOnBeforeUnload")(function(a){if(x===!0&&a==null)return{warnMessage:h._("__JHASH__uxWAqVRcCKO__JHASH__")}});if(q==null||A==null)return null;D=q.story_bucket_owner;e=(e=q.should_show_close_friend_badge)!=null?e:!1;var H=q.first_story_to_show,I=q.thumbnail_story_to_show,J=q.ranking_tracking_string;f=(I==null?void 0:(f=I.story_card_info)==null?void 0:(f=f.story_thumbnail)==null?void 0:f.uri)||(D==null?void 0:(f=D.coverImage)==null?void 0:f.uri);var K=q.is_bucket_seen_by_viewer===!1;g=(g=q==null?void 0:q.is_bucket_live)!=null?g:!1;f={coverImage:f,hasNew:K};o=(I==null?void 0:(o=I.story_card_info)==null?void 0:o.story_thumbnail)!=null;var L=h._("__JHASH__p_clzZs1eeC__JHASH__"),M=h._("__JHASH__ZsZbryTgDNj__JHASH__");A=d("StoriesTrayUtils").getBucketURL(A,H==null?void 0:H.id,p,v);p=D==null?void 0:(H=D.profile_picture)==null?void 0:H.uri;H=(D==null?void 0:D.name)||h._("__JHASH__fHKXLeuru3K__JHASH__");D=b("cr:2722")!=null?j.jsx(b("cr:2722"),{}):p!=null?j.jsx(c("CometImage.react"),{alt:H,height:40,src:p,width:40}):j.jsx("div",{className:"x1vqgdyp x100vrsf"});p=I==null?void 0:(H=I.attachments)==null?void 0:(p=H.find(function(a){return((a=a.media)==null?void 0:a.cix_screen)!=null}))==null?void 0:(I=p.media)==null?void 0:(H=I.cix_screen)==null?void 0:H.view_model;I=j.jsx(c("StoriesTrayTileAvatar.react"),{hasNew:K,isInterATS:t,isLiveStreaming:g,isOpaqueBackground:!1,isUploading:x,shouldShowCloseFriendsBadge:e,children:D});if(x===!0&&d("StoriesGating").shouldEnableOptimisticImprovements()){y!=null&&(C===null||C!==y)&&B(y);H={coverImage:C};return j.jsx("div",{"data-testid":void 0,ref:w,children:j.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:I,avatarInteractable:t,bucket:n?q:null,bucketUrl:A,isUploading:x,label:M,onPress:E,onPressIn:function(a){F&&F(a),z&&z(),G()},passthroughProps:{source:v,trackingString:J,traySessionID:u},text:L,warningScreenNode:p},H,a))})}else if(o)return j.jsx("div",{"data-testid":void 0,ref:w,children:j.jsx(c("StoriesTrayTileView.react"),babelHelpers["extends"]({avatar:I,avatarInteractable:t,bucket:n?q:null,bucketUrl:A,isUploading:x,label:M,onPressIn:function(a){F&&F(a),z&&z(),G()},passthroughProps:{bucketLength:r,bucketType:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF,hasSelfBucket:s,source:v,trackingString:J,traySessionID:u},text:L,warningScreenNode:p},f,a))});else if(x===!0)return j.jsx("div",{ref:w,children:j.jsx(c("StoriesTrayTileView.react"),{avatar:I,avatarInteractable:t,bucket:n?q:null,isUploading:!0,label:M,text:L,warningScreenNode:p})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TopOfFeedConsts",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({REELS:"reels",ROOMS:"rooms",STATUS:"status",STORIES:"stories",UNDEFINED:"undefined"});c=[a.STORIES,a.REELS,a.ROOMS];d=b("$InternalEnum")({UNKNOWN:0,STORIES:1,REELS:2,ROOMS:3});e=200;b=9/16;var g=16,h=12;f.UnifiedTofuTrayEnum=a;f.TABS_DISPLAYED=c;f.UnifiedTofuTrayDefaultLandingTabEnum=d;f.DEFAULT_TOH_TILE_HEIGHT=e;f.TOH_TILE_ASPECT_RATIO=b;f.TOH_TABBED_TRAY_PEEK_WIDTH=g;f.HYBRID_TRAY_WITH_HEADER_PEEK_WIDTH=h}),66);
__d("useStoriesBucketsIndexer",["CometRelay","Env","StoriesActorContext","StoriesEnums","react","useStoriesBucketsIndexer_buckets.graphql","useStoriesIsBucketEmpty","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useContext,j=e.useEffect;function k(a){a=(a=a.unified_stories)==null?void 0:a.nodes;return a!=null?a.some(function(a){return((a=a.story_card_info)==null?void 0:a.story_card_type)==="LIVE_STORY"}):!1}function l(a,b){var c;return a.can_viewer_post===!0&&((c=a.story_bucket_owner)==null?void 0:c.id)===b&&(a.story_bucket_type==="STORY"||a.story_bucket_type==="PROFILE_PLUS_STORY")}function m(a,b){return l(a,b)?d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF:d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OTHER}function n(a,b,c){return l(a,c)?!0:!b&&!k(a)}function a(a){var e=c("useUnsafeRef_DEPRECATED")(!0),f=i(c("StoriesActorContext")),g=f.actorID;f=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesBucketsIndexer_buckets.graphql"),a);j(function(){e.current=!1});var k=c("useStoriesIsBucketEmpty")(f);return f!=null?f.map(function(a){var b,d=k(a==null?void 0:a.id,(e.current?c("Env").start:Date.now())/1e3);return a!=null?{gender:(b=(b=a.story_bucket_owner)==null?void 0:b.gender)!=null?b:"UNKNOWN",isEmpty:d,isSeen:(b=a.is_bucket_seen_by_viewer)!=null?b:!1,shouldShow:n(a,d,g),type:m(a,g)}:null}):null}g["default"]=a}),98);
__d("useStoriesBucketsLogger",["CometRelay","StoriesActorContext","react","requireDeferred","useStoriesBucketsLogger_buckets.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useCallback,j=e.useContext,k=c("requireDeferred")("StoriesTrayLogger").__setRef("useStoriesBucketsLogger"),l=h!==void 0?h:h=b("useStoriesBucketsLogger_buckets.graphql");function a(a,b){var e=d("CometRelay").useFragment(l,b);b=j(c("StoriesActorContext"));var f=b.actorID;return i(function(b,c){k.onReady(function(d){d.logStoryTrayLoad({actorID:f,buckets:e,feedUnitTrackingString:c,sessionID:b,source:a})})},[f,e,a])}g["default"]=a}),98);
__d("useStoriesTrayTilePrefetchProfileURI",["CometRelay","useStoriesTrayTilePrefetchProfileURI_profile.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useStoriesTrayTilePrefetchProfileURI_profile.graphql"),a);var c=a!=null?a.map(function(a){return a==null?void 0:(a=a.story_bucket_owner)==null?void 0:(a=a.profilePic)==null?void 0:a.uri}):[];return c.length===0?null:function(){c.map(function(a){if(a!=null){var b=new Image();b.src=a}})}}g["default"]=a}),98);
__d("StoriesTrayRectangularBuckets.react",["fbt","CometRelay","CometScreenReaderHeading.react","CometVisualCompletionAttributes","StoriesConstants","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayCreateCard.react","StoriesTrayCreateTile.react","StoriesTrayRectangularBuckets_buckets.graphql","StoriesTrayRectangularBuckets_createTileUris.graphql","StoriesTrayRectangularBuckets_reels.graphql","StoriesTrayRow.react","StoriesTraySeeAllStoriesButton.react","StoriesTrayTile.react","StoriesTrayTilePlaceholder.react","StoriesTrayTileSelf.react","TopOfFeedConsts","TopOfFeedContext","cr:1638955","cr:3260","cr:3271","cr:3745","cr:3760","cr:4318","cr:4340","cr:4459","cr:576","qex","react","requireDeferred","usePrevious","useStoriesBucketsIndexer","useStoriesBucketsLogger","useStoriesIsUploading","useStoriesTrayTilePrefetchProfileURI"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=d("react");e=d("react");var m=e.useCallback,n=e.useContext,o=e.useEffect,p=e.useMemo,q=e.useState,r=e.useTransition,s=c("requireDeferred")("ODS").__setRef("StoriesTrayRectangularBuckets.react"),aa=(e=c("qex")._("1856"))!=null?e:!1,ba=(e=c("qex")._("1871"))!=null?e:1,t=(e=c("qex")._("1857"))!=null?e:d("StoriesConstants").TOFU_TILE_HEIGHT;function ca(a,b){return b==null?[]:b.reduce(function(b,c){var d=c.id;if(d==null)return b;var e=a.find(function(a){return a.id===d});if(e==null)return b.concat(d);c=(c=(c=c.unified_stories)==null?void 0:(c=c.nodes)==null?void 0:c.map(function(a){return a.id}))!=null?c:[];e=(e=(e=e.unified_stories)==null?void 0:(e=e.nodes)==null?void 0:e.map(function(a){return a.id}))!=null?e:[];if(c.length!==e.length)return b.concat(d);for(var f=0;f<e.length;f++)if(e[f]!==c[f])return b.concat(d);return b},[])}function u(a,b,e,f,g,h,i,j){var k=f==null?void 0:f.type;return k==null?null:l.jsx(c("StoriesTrayTile.react"),{bucketCount:d("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:b,bucketNode:a,gender:f.gender,hasSelfBucket:e,index:h,onPressIn:function(){i&&i(),v(h)},source:c("StoriesLoggingConstants").ACTION_SOURCE.TRAY,trayBucketIDs:j,traySessionID:g},a.id)}u.displayName=u.name+" [from "+f.id+"]";function v(a){s.onReady(function(b){b.bumpEntityKey(4329,"fb_stories_web","stories_tray.pog_index_"+a,1)})}var da=i!==void 0?i:i=b("StoriesTrayRectangularBuckets_createTileUris.graphql"),ea=j!==void 0?j:j=b("StoriesTrayRectangularBuckets_reels.graphql");function a(a){var e=a.createTileRef,f=a.edges,g=a.hasNext,i=a.isLoadingNext,j=a.loadNext,s=a.reelsHasNext,v=a.reelsIsLoadingNext,w=a.reelsLoadNext,x=a.reelsNodes,y=a.refetch,z=a.traySessionID,A=d("CometRelay").useRelayEnvironment();a=r();var B=a[0],C=a[1];a=n(c("TopOfFeedContext"));var D=a.hybridTrayEnabled,fa=a.hybridTrayWithHeaderEnabled,E=a.topOfFeedEnabled;a=q(0);var F=a[0],ga=a[1],G=d("CometRelay").useFragment(k!==void 0?k:k=b("StoriesTrayRectangularBuckets_buckets.graphql"),f),H=c("useStoriesTrayTilePrefetchProfileURI")(G),I=d("CometRelay").useFragment(da,e),J=d("CometRelay").useFragment(ea,x);a=q(!1);var K=a[0],L=a[1];f=m(function(){!K&&!B&&(L(!0),C(function(){y(function(){L(!1)})}))},[B,K,y,C]);e=c("useStoriesIsUploading")(f);var M=e||K||B,N=d("StoriesGating").shouldUseHScroll(),O=p(function(){var a=G||[],b=[];for(var c=0;c<a.length;c++)a[c]!=null&&b.push(a[c]);return b},[G]),P=c("usePrevious")(O);o(function(){var a=ca(O,P);a.length!==0&&a.forEach(function(a){A.commitUpdate(function(b){b=b.get(a);b!=null&&b.invalidateRecord()})})},[A,P,O]);var Q=c("useStoriesBucketsIndexer")(O),R=p(function(){var a;return(a=Q)!=null?a:[]},[Q]),S=c("usePrevious")(z),T=b("cr:1638955")(),U=c("useStoriesBucketsLogger")(c("StoriesLoggingConstants").ACTION_SOURCE.TRAY,O),V=(x=R==null?void 0:R.length)!=null?x:0,W=!1;if(R!=null&&V>0){a=R[0];e=(f=R[0])==null?void 0:f.type;f=(x=a==null?void 0:a.isEmpty)!=null?x:!0;e===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF&&!f&&(W=!0)}var X=5,Y=m(function(a,b){if(a==null)return[];b=b.reduce(function(a,b,c){if(b.id==null)return a;c=R[c];return(c==null?void 0:c.shouldShow)===!0&&c.type===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF?a:[].concat(a,[b.id])},[]);var c=b.indexOf(a);if(c===-1)return[];var e=b.slice(0,c).slice(-3);b=b.slice(c+1,Math.min(O.length,c+4));return[].concat(e,[a],b)},[R,O.length]),Z=d("StoriesGating").shouldUseTrayOrder(),$=d("StoriesGating").isInterATS();a=p(function(){var a=!0,e=[],f={entryPoint:"add_to_story_first_pog",sourceSurface:"newsfeed"};D&&b("cr:3760")!==null&&ba!==0&&(b("cr:576")!=null&&(b("cr:3745")!=null?e.push(l.jsx(b("cr:3745"),{},"collapsible-sticky-header")):e.push(l.jsx(b("cr:576"),{showIcon:!0,title:d("TopOfFeedConsts").UnifiedTofuTrayEnum.REELS},"header"))),e.push(l.jsx(b("cr:3760"),{fragmentRef:J!=null?J[F]:null,onPress:function(){aa&&!v&&s&&w&&(w(1),window.setTimeout(function(){ga(F+1)},1e3))},positionInTray:0},"reels_tile")),e.push(l.jsx("div",{className:"x14nfmen x146dn1l x11t77rh x1thhq0t xf6uls8 xvo3xdp x1sy10c2 xieb3on x51ohtg"},"divider")));E&&(b("cr:576")!=null&&e.push(l.jsx(b("cr:576"),{showIcon:!0,title:d("TopOfFeedConsts").UnifiedTofuTrayEnum.STORIES},"sticky-header")),($&&!W&&!M||!$)&&e.push(l.jsx(c("StoriesTrayCreateTile.react"),{fragmentProp:I,passthroughProps:f},"stories_creation_tile")));for(var g=0;g<O.length&&(e.length<X||N);g++){var i=R[g];if((i==null?void 0:i.shouldShow)===!0){var j=i==null?void 0:i.type;if(j===d("StoriesEnums").STORIES_BUCKETS_INDEXER_TYPES.OWNED_SELF){var k;j=O[g];k=(k=i==null?void 0:i.isEmpty)!=null?k:!0;E||e.push(l.jsx(c("StoriesTrayCreateTile.react"),{fragmentProp:I,passthroughProps:f},g));(!k||M)&&(e.push(l.jsx(c("StoriesTrayTileSelf.react"),{bucketCount:d("StoriesConstants").NAV_PANE_TOTAL_COUNT,bucketLength:V,bucketNode:j,hasSelfBucket:W,index:g,isInterATS:$,isUploading:M,onPressIn:H,optimisticStoryURI:T,traySessionID:z},j.id)),a=!1)}else{k=O[g];j=Z?Y(k.id,O):[];k=u(k,V,W,i,z,g,H,j);k!=null&&(e.push(k),(i==null?void 0:i.isEmpty)===!1&&(a=!1))}}}j=X-e.length;if(b("cr:3260")!=null&&e.length===1)e.push(l.jsx(b("cr:3260"),{body1:h._("__JHASH__iJLSI4bB6rl__JHASH__"),body2:h._("__JHASH__9J1h-gHVCXF__JHASH__"),body3:h._("__JHASH__f4Wx-GATbfd__JHASH__"),icon1:b("cr:4340"),icon2:b("cr:4459"),icon3:b("cr:4318")},"tofu-null-card"));else if(!E)for(k=0;k<Math.max(0,j);k++)e.push(l.jsx(c("StoriesTrayTilePlaceholder.react"),{},"placeholder-"+k));return{placeHoldersCount:j,shouldShowCreateCard:a,tiles:e}},[D,$,E,J,F,v,s,w,I,O,N,R,M,V,W,H,T,z,Z,Y]);x=a.placeHoldersCount;e=a.shouldShowCreateCard;f=a.tiles;o(function(){if(S===z)return;U(z)},[z,U,S]);a=h._("__JHASH__TIbUrjBujSG__JHASH__");if(e&&!E)if(c("StoriesTrayCreateCard.react")!=null)return l.jsx(c("StoriesTrayCreateCard.react"),{});else return null;else if(N&&b("cr:3271")!=null){e=null;E&&(e={type:"fixed",width:t*d("StoriesConstants").DEFAULT_ASPECT_RATIO});return l.jsxs("div",babelHelpers["extends"]({"aria-label":a,className:"x1n2onr6"+((fa?" xrxnnga":""+(E?" x121yvx8":""))+(E?" xjkvuk6 xieb3on x9otpla x1iorvi4":" x1g2khh7"))},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{role:"region",style:{minHeight:t},children:[l.jsx(c("CometScreenReaderHeading.react"),{children:a}),l.jsx(b("cr:3271"),{cardWidth:e,children:f,hasNext:g,hideArrows:E?!1:x>0,isLoadingNext:i,loadNext:j,peek:E})]}))}return l.jsxs("div",{"aria-label":a,className:"x1n2onr6",role:"region",children:[l.jsx(c("CometScreenReaderHeading.react"),{children:a}),l.jsx(c("StoriesTrayRow.react"),{children:f}),l.jsx(c("StoriesTraySeeAllStoriesButton.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayRectangular.react",["CometRelay","StoriesGating","StoriesTrayRectangularBuckets.react","StoriesTrayRectangular_me.graphql","StoriesTrayRectangular_reels.graphql","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo,m=h!==void 0?h:h=b("StoriesTrayRectangular_me.graphql"),n=i!==void 0?i:i=b("StoriesTrayRectangular_reels.graphql");function a(a){var b,e,f=a.storiesData;a=a.traySessionID;if(!f.me)throw c("unrecoverableViolation")("Expected current actor for StoriesRoot to be available","fb_stories_web");var g=f.me,h=d("CometRelay").usePaginationFragment(m,g),i=h.data,o=h.hasNext,p=h.isLoadingNext,q=h.loadNext,r=h.refetch,s=i;h=d("CometRelay").usePaginationFragment(n,d("StoriesGating").isHybridTrayEnabled()?f:null);var t=h.data;i=h.hasNext;f=h.isLoadingNext;h=h.loadNext;var u=k(function(a){r({},{fetchPolicy:"store-and-network",onComplete:a})},[r]);b=l(function(){var a;return!d("StoriesGating").isHybridTrayEnabled()?null:((t==null?void 0:(a=t.fb_shorts_unified_tofu)==null?void 0:a.edges)||[]).map(function(a){return a==null?void 0:a.node}).filter(Boolean)},[t==null?void 0:(b=t.fb_shorts_unified_tofu)==null?void 0:b.edges]);e=l(function(){var a;return((s==null?void 0:(a=s.unified_stories_buckets)==null?void 0:a.edges)||[]).map(function(a){return a==null?void 0:a.node}).filter(Boolean)},[s==null?void 0:(e=s.unified_stories_buckets)==null?void 0:e.edges]);return j.jsx(c("StoriesTrayRectangularBuckets.react"),{createTileRef:g,edges:e,hasNext:o,isLoadingNext:p,loadNext:q,reelsHasNext:i,reelsIsLoadingNext:f,reelsLoadNext:h,reelsNodes:b,refetch:u,traySessionID:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayRectangularRoot.react",["fbt","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","StoriesActorProvider.react","StoriesGating","StoriesTrayRectangular.react","StoriesTrayRectangularRootQuery$Parameters","StoriesTrayRectangularRootQuery.graphql","WebPixelRatio","cr:3664","cr:4185","cr:4186","qex","react","useRefetchablePreloadedQuery","useStoriesTrayRefresh","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState,m=(e=c("qex")._("980"))!=null?e:!1,n=i!==void 0?i:i=b("StoriesTrayRectangularRootQuery.graphql");function o(a){var e;a=a.queries;var f=l(function(){return c("uuid")()});f=f[0];a=c("useRefetchablePreloadedQuery")(c("StoriesTrayRectangularRootQuery$Parameters"),a.storiesTrayQueryReference);var g=a[0];a=a[1];a=d("CometRelay").usePreloadedQuery(n,a);var i=d("StoriesGating").getTrayBucketCount(),o=k(function(){g({bucketsToFetch:i,isCommentEnabled:d("StoriesGating").isCommentEnabled(),scale:d("WebPixelRatio").get(),shouldEnableHybridTray:d("StoriesGating").isHybridTrayEnabled()})},[g,i]);c("useStoriesTrayRefresh")(o);e=a==null?void 0:(e=a.viewer)==null?void 0:(e=e.actor)==null?void 0:e.id;return j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return j.jsxs(j.Fragment,{children:[b("cr:4186")!=null&&!m&&j.jsx(b("cr:4186"),{description:h._("__JHASH__K7kc1TK2hE0__JHASH__"),onPress:o}),b("cr:4185")!=null&&!m&&j.jsx(b("cr:4185"),{})]})},children:j.jsx(c("CometPlaceholder.react"),{fallback:b("cr:3664")!=null&&j.jsx(b("cr:3664"),{}),children:j.jsx(c("StoriesActorProvider.react"),{actorID:e,children:j.jsx(c("StoriesTrayRectangular.react"),{storiesData:a,traySessionID:f})})})})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return j.jsx(o,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"4886725694759503",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"5218522061549416",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5837572036269296"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c},params:{id:b("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometCalloutEdgeArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return h.jsxs("svg",babelHelpers["extends"]({className:c("stylex")(b),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("CometCalloutEdge.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometCalloutEdgeArrow.svg.react","Locale","react","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingStart:"x1ye3gou",paddingEnd:"xn6708d",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}},k={accent:{backgroundColor:"xwnonoy",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},l={end:{borderBottomEndRadius:"x5pf9jr",marginBottom:"xieb3on",$$css:!0},middle:{marginBottom:"x12nagc",$$css:!0},start:{borderBottomStartRadius:"xo71vjh",marginBottom:"xieb3on",$$css:!0}},m={end:{borderTopEndRadius:"x13lgxp2",marginTop:"x1sy10c2",$$css:!0},middle:{marginTop:"x1gslohp",$$css:!0},start:{borderTopStartRadius:"x168nmei",marginTop:"x1sy10c2",$$css:!0}},n={end:{bottom:"x7ofzsv",end:"xds687c",transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",end:"xds687c",$$css:!0},start:{bottom:"x7ofzsv",start:"x17qophe",$$css:!0}},o={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},p={end:{bottom:"x7ofzsv",end:"xds687c",transform:"xpk2tj9",$$css:!0},middle:{bottom:"x7ofzsv",end:"xds687c",$$css:!0},start:{bottom:"x7ofzsv",start:"x17qophe",$$css:!0}},q={end:{$$css:!0},middle:{$$css:!0},start:{$$css:!0}},r={end:{end:"xds687c",top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{end:"xds687c",top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{start:"x17qophe",top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},s={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}},t={end:{end:"xds687c",top:"x1nl0pjx",transform:"x19jd1h0",$$css:!0},middle:{end:"xds687c",top:"x1nl0pjx",transform:"x1oihik5",$$css:!0},start:{start:"x17qophe",top:"x1nl0pjx",transform:"x1oihik5",$$css:!0}},u={end:{transform:"x19jd1h0",$$css:!0},middle:{transform:"x1oihik5",$$css:!0},start:{transform:"x1oihik5",$$css:!0}},v={end:"start",start:"end"};function a(a){var b,d=a.children,e=a.onOutsideClick,f=a.type;f=f===void 0?"default":f;a=a.xstyle;var g=i(c("BaseContextualLayerOrientationContext")),n=g.align;g=g.position;n=n==="stretch"?"start":n;g=g==="start"?"above":g==="end"?"below":g;var o=i(c("BaseContextualLayerContextSizeContext"));b=(b=i(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;n=b!==0?v[n]:n;o=y(n,(o=o==null?void 0:o.width)!=null?o:0,b);b=c("useOnOutsideClick")(e);return h.jsxs(c("BaseView.react"),{style:o,xstyle:j.container,children:[h.jsx(c("BaseRow.react"),{ref:b,xstyle:[j.content,k[f],g==="above"&&l[n],g==="below"&&m[n],a],children:d}),h.jsx(x,{align:n,position:g,type:f})]})}a.displayName=a.name+" [from "+f.id+"]";var w=c("Locale").isRTL();function x(a){var b=a.align,d=a.position;a=a.type;return h.jsx(c("CometCalloutEdgeArrow.svg.react"),{fill:a==="default"?"var(--popover-background)":"var(--accent)",xstyle:[j.arrow,d==="above"&&a==="default"&&(w?o[b]:n[b]),d==="above"&&a==="accent"&&(w?q[b]:p[b]),d==="below"&&a==="default"&&(w?s[b]:r[b]),d==="below"&&a==="accent"&&(w?u[b]:t[b])]})}x.displayName=x.name+" [from "+f.id+"]";function y(a,b,c){c=c===0?b/2:0;if(c===0)return void 0;if(a==="start")return{transform:"translateX("+(w?-1*c:c)+"px)"};return a==="end"?{transform:"translateX("+(w?c:-1*c)+"px)"}:void 0}g["default"]=a}),98);
__d("CometCalloutInsetArrow.svg.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return h.jsxs("svg",babelHelpers["extends"]({className:c("stylex")(b),height:"12px",viewBox:"0 0 21 12",width:"21px"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M20.685.12c-2.229.424-4.278 1.914-6.181 3.403L5.4 10.94c-2.026 2.291-5.434.62-5.4-2.648V.12h20.684z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;g["default"]=a}),98);
__d("CometCalloutInset.react",["BaseContextualLayerContextSizeContext","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseRow.react","BaseView.react","CometCalloutInsetArrow.svg.react","Locale","react","useOnOutsideClick"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={arrow:{position:"x10l6tqk",$$css:!0},container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingStart:"x1ye3gou",paddingEnd:"xn6708d",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}},k={accent:{backgroundColor:"xwnonoy",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},l={above:{marginBottom:"x1yztbdb",$$css:!0},below:{marginTop:"xw7yly9",$$css:!0},end:{marginStart:"x1d52u69",$$css:!0}},m={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}},n={above:{bottom:"x1wa3icf",$$css:!0},below:{top:"x1jzctok",transform:"x1oihik5",$$css:!0},end:{$$css:!0}};function a(a){var b,d=a.children,e=a.onOutsideClick,f=a.type;f=f===void 0?"default":f;a=a.xstyle;var g=i(c("BaseContextualLayerOrientationContext")),m=g.align;g=g.position;m=m==="stretch"?"start":m;g=g==="start"?"above":g==="end"?"below":g;var n=i(c("BaseContextualLayerContextSizeContext"));b=(b=i(c("BaseContextualLayerLayerAdjustmentContext")))!=null?b:0;n=q(m,g,(m=n==null?void 0:n.width)!=null?m:0,b);m=n[0];b=n[1];n=c("useOnOutsideClick")(e);return h.jsxs(c("BaseView.react"),{style:m,xstyle:j.container,children:[h.jsx(c("BaseRow.react"),{ref:n,xstyle:[j.content,k[f],l[g],a],children:d}),h.jsx(o,{arrowStyles:b,position:g,type:f})]})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=a.arrowStyles,d=a.position;a=a.type;return h.jsx(c("CometCalloutInsetArrow.svg.react"),{fill:a==="default"?"var(--popover-background)":"var(--accent)",style:b,xstyle:[j.arrow,m[d],a==="accent"&&n[d]]})}o.displayName=o.name+" [from "+f.id+"]";var p=c("Locale").isRTL();function q(a,b,c,d){var e=Math.max(c/2-8,16)+Math.abs(d),f=c/2-8<16;c=24-c/2;if(b==="above")if(a==="start"){var g;b=p?"right":"left";return[f?{transform:"translateX("+(p?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){b=p?"left":"right";return[f?{transform:"translateX("+(p?-c:c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else{var h;b=p?"left":"right";g=(p?-d:d)-8;return[void 0,(h={},h[b]="calc(50% + "+g+"px)",h)]}else if(a==="start"){b=p?"right":"left";return[f?{transform:"translateX("+(p?c:-c)+"px)"}:void 0,(g={},g[b]="min(calc(100% - 32px), "+e+"px)",g)]}else if(a==="end"){h=p?"left":"right";return[f?{transform:"translateX("+(p?-c:c)+"px)"}:void 0,(b={},b[h]="min(calc(100% - 32px), "+e+"px)",b)]}else{g=p?"left":"right";a=(p?-d:d)-8;return[void 0,(f={},f[g]="calc(50% + "+a+"px)",f)]}}g["default"]=a}),98);
__d("CometCallout.react",["fbt","ix","BaseContextualLayerOrientationContext","BaseRow.react","BaseRowItem.react","BaseView.react","CometCalloutEdge.react","CometCalloutInset.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometIcon.react","CometNUXInlineSurvey.react","CometPressable.react","TetraTextPairing.react","fbicon","react","unrecoverableViolation","useOnOutsideClick","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useContext,l=b.useRef,m={container:{display:"x78zum5",$$css:!0},content:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxShadow:"xofhs1l",paddingStart:"x1ye3gou",paddingEnd:"xn6708d",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},crossoutButton:{marginEnd:"xcud41i",marginTop:"x9otpla",$$css:!0},item:{paddingStart:"x16hj40l",paddingEnd:"xsyo7zv",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",$$css:!0}},n={accent:{backgroundColor:"xwnonoy",$$css:!0},"default":{backgroundColor:"x9bbmet",$$css:!0}},o={above:{marginBottom:"x12nagc",$$css:!0},below:{marginTop:"x1gslohp",$$css:!0},end:{marginStart:"xsgj6o6",$$css:!0},start:{$$css:!0}};function a(a){var b=a.arrowStyle;b=b===void 0?"none":b;var e=a.hasCloseButton;e=e===void 0?!1:e;var f=a.headline,g=a.inlineSurvey,p=a.label,q=a.onClose,r=a.onHelpful,s=a.onHide,t=a.onNotHelpful,u=a.onOutsideClick,v=a.onPressCallout_experimentalDONOTUSE,w=a.onShow,x=a.profilePhoto_experimentalDONOTUSE,y=a.type;y=y===void 0?"default":y;a=a.xstyle;var z=k(c("BaseContextualLayerOrientationContext"));z=z.position;var A=l(null),B=function(){if(A.current==null){var a;A.current=(a=g==null?void 0:g.getShouldShowInlineSurvey==null?void 0:g.getShouldShowInlineSurvey())!=null?a:!1}return A.current}(),C=c("useOnOutsideClick")(u);s=c("useVisibilityObserver")({onHidden:s,onVisible:w});w=y==="default"?"primary":"white";if(z==="end"&&(b==="inset"||b==="edge"))throw c("unrecoverableViolation")('"end" position with arrow is not supported yet',"comet_ui");x=j.jsxs(c("CometColumn.react"),{children:[j.jsx(c("CometColumnItem.react"),{children:j.jsxs(c("BaseRow.react"),{children:[x!=null&&j.jsx(c("BaseRowItem.react"),{verticalAlign:"top",children:x}),j.jsx(c("BaseRowItem.react"),{expanding:!0,ref:s,verticalAlign:"center",xstyle:m.item,children:j.jsx(c("TetraTextPairing.react"),{body:p,bodyColor:w,headline:f,headlineColor:w,level:3})}),e&&j.jsx(c("BaseRowItem.react"),{xstyle:[m.crossoutButton,m.item],children:j.jsx(c("CometIcon.react"),{"aria-label":h._("__JHASH__cCrSTii9yXy__JHASH__"),color:y==="default"?"secondary":"white",icon:d("fbicon")._(i("478232"),16),onPress:q,size:16})})]})}),g==null||B!==!0?null:j.jsx(c("CometColumnItem.react"),{paddingTop:12,children:j.jsx(c("BaseRow.react"),{children:j.jsx(c("BaseRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:m.item,children:j.jsx(c("CometNUXInlineSurvey.react"),{bodyColor:y==="default"?void 0:"white",initialHasAnsweredSurvey:g.initialHasAnsweredSurvey,linkColor:y==="default"?void 0:"white",onAnswer:g.onAnswer,onHelpful:r,onNotHelpful:t})})})})]});p=v?j.jsx(c("BaseRowItem.react"),{ref:s,children:j.jsx(c("CometPressable.react"),{onPress:v,overlayDisabled:!0,children:x})}):x;if(b==="inset")return j.jsx(c("CometCalloutInset.react"),{onOutsideClick:u,type:y,xstyle:a,children:p});return b==="edge"?j.jsx(c("CometCalloutEdge.react"),{onOutsideClick:u,type:y,xstyle:a,children:p}):j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return j.jsx("div",{})},children:j.jsx(c("BaseView.react"),{xstyle:m.container,children:j.jsx(c("BaseRow.react"),{ref:C,xstyle:[m.content,n[y],b==="none"&&o[z],a],children:p})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometCalloutImpl.react",["BaseContextualLayer.react","BaseContextualLayerAnchorRootContext","CometCallout.react","CometCalloutContext","LayoutAnimationBoundaryContext","react","useCometDisplayTimingTrackerForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=a.anchorRootRefContext,d=a.animationContext,e=a.calloutID,f=a.calloutProps,g=a.contextRef,k=a.imperativeRef,l=a.scrollableAreaContext;a=c("useCometDisplayTimingTrackerForInteraction")("CometCalloutManager");var m=i(c("CometCalloutContext"));j(function(){var a=l.map(function(a){return a.getDOMNode()}).filter(Boolean),b=function(){var a;return(a=k.current)==null?void 0:a.reposition()};if(a.length>0){a.forEach(function(a){return a.addEventListener("scroll",b,{passive:!0})});return function(){a.forEach(function(a){return a.removeEventListener("scroll",b,{passive:!0})})}}},[k,l]);return m==null||f==null||g==null?null:h.jsx(c("LayoutAnimationBoundaryContext").Provider,{value:d,children:h.jsx(c("BaseContextualLayerAnchorRootContext").Provider,{value:b,children:h.jsx(c("BaseContextualLayer.react"),{align:f.align,contextRef:g,disableAutoAlign:f.disableAutoAlign,disableAutoFlip:f.disableAutoFlip,imperativeRef:k,position:f.position,ref:a,children:h.jsx(c("CometCallout.react"),{arrowStyle:f.arrowStyle,hasCloseButton:f.hasCloseButton,headline:f.headline,inlineSurvey:f.inlineSurvey,label:f.label,onClose:f.hasCloseButton===!0?function(){m.removeCallout(e),f.onClose==null?void 0:f.onClose()}:void 0,onHelpful:f.onHelpful,onHide:f.onHide,onNotHelpful:f.onNotHelpful,onOutsideClick:function(){f.disableOutsideClick!==!0&&m.removeCallout(e)},onPressCallout_experimentalDONOTUSE:f.onPressCallout_experimentalDONOTUSE,onShow:f.onShow,profilePhoto_experimentalDONOTUSE:f.profilePhoto_experimentalDONOTUSE,type:f.type,xstyle:f.xstyle})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTopNavTabBadge.react",["CometNumberedBadge.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.isBadgeHidden,d=a.isTab,e=a.overflow,f=a.setBadgeCount,g=a.testid,j=a.value;g=babelHelpers.objectWithoutPropertiesLoose(a,["isBadgeHidden","isTab","overflow","setBadgeCount","testid","value"]);i(function(){f&&f(j)},[j,f]);if(b===!0||j===0)return null;a=d===!0?"red":void 0;return h.jsx(c("CometNumberedBadge.react"),babelHelpers["extends"]({},g,{color:a,overflow:e,testid:void 0,value:j}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometNotificationsBadgeCount.react",["CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometNumberedBadge.react","CometPlaceholder.react","CometRelay","hero-tracing","react","setupNotificationsLiveQuery","unrecoverableViolation","updateWidgetServiceWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react"),k=d("react").useEffect;function a(a){var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});e=e.viewer;if(e==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");e=d("CometRelay").useFragment(i!==void 0?i:i=b("CometNotificationsBadgeCountFragment_viewer.graphql"),e);var f=(e=e==null?void 0:e.notifications_unseen_count)!=null?e:0;e=a.isBadgeHidden;var g=a.overflow,l=a.setBadgeCount,m=d("CometRelay").useRelayEnvironment();k(function(){var a=c("setupNotificationsLiveQuery")(m);return function(){return a.dispose()}},[m]);k(function(){l&&l(f),c("updateWidgetServiceWorker")()},[f,l]);return j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx("span",{}),children:e!==!0&&f>0?j.jsx(d("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(a,b){return j.jsxs(j.Fragment,{children:[j.jsx(c("CometNumberedBadge.react"),{overflow:g,ref:a,testid:void 0,value:f}),j.jsx(b,{})]})}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatHeadError.react",["fbt","ix","CometPressable.react","MWIcon.react","MWTooltip.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},l=h._("__JHASH__1kKkUA_eanI__JHASH__");function a(a){var b=a.contextRef;a=a.onPress;return j.jsx(c("MWTooltip.react"),{align:"end",position:"above",tooltip:l,children:j.jsx(c("CometPressable.react"),{"aria-label":l,disabled:a==null,display:"inline",onPress:a,ref:b,xstyle:function(a){return[k.compose,k.dropShadow]},children:j.jsx(c("MWIcon.react"),{icon:d("fbicon")._(i("502063"),24)})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.contextRef;a=a.onPress;var d=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT");return d?h.jsx("div",{className:"x1ey2m1c xds687c xixxii4",children:h.jsx("div",{className:"x191j7n5 x92rtbv x10l6tqk",children:h.jsx(c("MWChatHeadError.react"),{contextRef:b,onPress:a})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","CometLazyPopoverTrigger.react","FBLogger","JSResourceForInteraction","MWChatDisabled.react","cr:11569","gkx","killswitch","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.warn("Error loading MWV2Chat")}var j=c("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),k=function(a){return h.jsx(c("CometLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:a},popoverResource:j,position:"above",visibleOnLoad:!1,children:function(a,b){return h.jsx(c("MWChatDisabled.react"),{contextRef:a,onPress:b})}})};function a(a){return h.jsx(c("CometErrorBoundary.react"),{fallback:k,onError:i,children:!c("gkx")("1673554")||c("killswitch")("COMET_CHAT")||!c("gkx")("1812744")?h.jsx(c("MWChatDisabled.react"),{}):b("cr:11569")&&h.jsx(b("cr:11569"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatStateV2CompareTabs.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.openWatermark-b.openWatermark;if(a<0)return 1;else if(a>0)return-1;else return 0}function b(a,b){a=Math.max(a.minimizeWatermark,a.clientForcedMinimizeWatermark)-Math.max(b.minimizeWatermark,b.clientForcedMinimizeWatermark);if(a<0)return 1;else if(a>0)return-1;else return 0}f.byMostRecentOpened=a;f.byMostRecentMinimized=b}),66);
__d("MWChatStateV2IsComposeTab.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.tabType;if(a.TAG===0)return!0;else return!1}f.isComposeTab=a}),66);
__d("MWChatStateV2HeadGroups.bs",["MWChatStateV2CompareTabs.bs","MWChatStateV2IsComposeTab.bs","MWChatStateV2IsMinimized.bs","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=a!==void 0?c("bs_caml_option").valFromOption(a):void 0;a=Array.from(e.values()).filter(function(a){return d("MWChatStateV2IsMinimized.bs").isMinimized(c("bs_caml_option").some(g),a)}).sort(function(a,b){var c=d("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,b);if(c===0)return d("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,b);else return c});e=b.filter(function(a){return!d("MWChatStateV2IsComposeTab.bs").isComposeTab(a)}).concat(a);return[e.slice(0,f),e.slice(f,e.length)]}g.getHeadGroups=a}),98);
__d("MWChatStateV2TabGroups.bs",["MWChatStateV2CompareTabs.bs","MWChatStateV2IsOpen.bs","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){var d=a.length;if(d>b&&b>0&&c!==void 0){var e=a.findIndex(function(a){return a.tabId===c});if(e!==-1&&e>=b&&e<d){d=function(b,c){var d=a[b];a[b]=a[c];a[c]=d};d(b-1|0,e)}}return a}function a(a,b,e,f){var g=a!==void 0?c("bs_caml_option").valFromOption(a):void 0;a=h(Array.from(b.values()).filter(function(a){return d("MWChatStateV2IsOpen.bs").isOpen(c("bs_caml_option").some(g),a)}).sort(d("MWChatStateV2CompareTabs.bs").byMostRecentOpened),f,e);return[a.slice(0,f),a.slice(f,a.length)]}g.getTabGroups=a}),98);
__d("MWV2ChatHeadsLayout.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;return h.jsx("div",{className:"x191j7n5 x92rtbv x10l6tqk x1useyqa",children:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2PreloadComposeTab.bs",["JSResourceForInteraction","JSScheduler","react","useCometPreloader"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2PreloadComposeTab.bs");function a(){var a=h.useCallback(function(){d("JSScheduler").scheduleSpeculativeCallback(function(){i.preload()})},[]);return c("useCometPreloader")("button",a,a)}g.useHook=a}),98);
__d("MWV2ComposeHead.bs",["fbt","ix","CometPressable.react","CometTintedIcon.react","LSThreadAttributionStore.bs","MWChatStateV2.bs","MWTooltip.react","MWV2PreloadComposeTab.bs","bs_curry","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover_boxShadow":"x19xcq9t",$$css:!0}};function a(a){var b=a.onFocusChange;a=a.onHoverChange;var e=d("MWChatStateV2.bs").useDispatch(),f=function(){d("LSThreadAttributionStore.bs").setSourceForNewThread("chatheadsNewMessage");var a=Date.now(),b=function(b){return{clientForcedMinimizeWatermark:b.clientForcedMinimizeWatermark,closeWatermark:b.closeWatermark,minimizeWatermark:b.minimizeWatermark,openFlyoutWatermark:b.openFlyoutWatermark,openWatermark:a,tabId:b.tabId,tabType:b.tabType}},f=function(b){var c=b.openWatermark<b.closeWatermark;if(c)return{clientForcedMinimizeWatermark:b.clientForcedMinimizeWatermark,closeWatermark:b.closeWatermark,minimizeWatermark:b.minimizeWatermark,openFlyoutWatermark:b.openFlyoutWatermark,openWatermark:a,tabId:b.tabId,tabType:{_0:[],_1:!1,TAG:0}};else return{clientForcedMinimizeWatermark:b.clientForcedMinimizeWatermark,closeWatermark:a,minimizeWatermark:b.minimizeWatermark,openFlyoutWatermark:b.openFlyoutWatermark,openWatermark:b.openWatermark,tabId:b.tabId,tabType:{_0:[],_1:!1,TAG:0}}};return c("bs_curry")._1(e,[{_0:{_0:[],_1:!1,TAG:0},_1:{shouldFocus:!0},_2:f,_3:b,TAG:3}])},g=d("MWV2PreloadComposeTab.bs").useHook(),l=h._("__JHASH__lMGuJRoIOm8__JHASH__");return j.jsx(c("MWTooltip.react"),{align:"middle",position:"start",tooltip:l.toString(),children:j.jsx(c("CometPressable.react"),{"aria-label":l,onFocusChange:b,onHoverChange:a,onHoverIn:g[0],onHoverOut:g[1],onPress:f,testid:void 0,xstyle:function(){return[k.button]},children:j.jsx(c("CometTintedIcon.react"),{color:"primary",icon:d("fbicon")._(i("507172"),20)})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("useSubscriptionValue",["React"],(function(a,b,c,d,e,f,g){b=d("React");var h=b.useCallback,i=b.useEffect,j=b.useState;function a(a){var b=a.getCurrentValue,c=a.subscribe;a=j(function(){return b()});var d=a[0],e=a[1],f=h(function(){e(b)},[b]);a=j(function(){return b});var g=a[0];a=a[1];g!==b&&(a(function(){return b}),f());i(function(){var a=!1,b=function(){a||f()},d=c(b);f();return function(){a=!0,d()}},[f,c]);return d}g["default"]=a}),98);
__d("useWindowSize",["ExecutionEnvironment","react","throttle","useSubscriptionValue"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function i(){return!c("ExecutionEnvironment").canUseDOM?{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0}:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}}function a(a){a===void 0&&(a=500);var b=h(function(b){var d=c("throttle")(b,a);window.addEventListener("resize",d);return function(){window.removeEventListener("resize",d)}},[a]);return c("useSubscriptionValue")({getCurrentValue:i,subscribe:b})}g["default"]=a}),98);
__d("useMWChatStateV2MaxTabCount",["bs_js_math","useWindowSize"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("useWindowSize")();b=b.innerWidth;if(b<1100||a)return 1;a=(b/2|0)-90|0;b=a/338;if(b<1)return 1;else return c("bs_js_math").ceil_int(b)}g["default"]=a}),98);
__d("useMWIsTopLevelRouteMediaViewerExperiment",["MWChatVisibileRoutes","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useCometRouterState")();if(a==null)return!1;var b=a.main;a=a.pushViewStack;a=a&&a.length>0?a[a.length-1]:b;return d("MWChatVisibileRoutes").ROUTES.has((a=(b=a.route)==null?void 0:b.tracePolicy)!=null?a:"")}g["default"]=a}),98);
__d("MWV2ChatHeads.bs",["BootloaderResource","CometErrorBoundary.react","CometPlaceholder.react","JSResource","MWChatStateV2.bs","MWChatStateV2HeadGroups.bs","MWChatStateV2TabGroups.bs","MWV2ChatHeadsLayout.bs","MWV2ComposeHead.bs","bs_caml_option","bs_int64","cr:1134","react","useMWChatStateV2MaxTabCount"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){return h.createElement(d("BootloaderResource").read(c("JSResource")("MWV2ChatHead.react").__setRef("MWV2ChatHeads.bs")),a)}i.displayName=i.name+" [from "+f.id+"]";function j(a){return h.createElement(d("BootloaderResource").read(c("JSResource")("MWV2ChatOverflowHead.bs").__setRef("MWV2ChatHeads.bs")),a)}j.displayName=j.name+" [from "+f.id+"]";function k(a){return{transform:"translateY(-"+String(Math.imul(a,58))+"px)"}}function l(a){return{transform:"translateY(-"+String(Math.imul(a,58)-12|0)+"px)"}}function a(a){a=a.isMediaViewer;var e=d("MWChatStateV2.bs").useState(function(a){return a.tabs});e=e.tabs;var f=d("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),g=d("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark}),m=c("useMWChatStateV2MaxTabCount")(a);a=a?g.mediaViewerOpenWatermark:void 0;g=d("MWChatStateV2TabGroups.bs").getTabGroups(c("bs_caml_option").some(a),e,f.focusedTabId,m);f=d("MWChatStateV2HeadGroups.bs").getHeadGroups(c("bs_caml_option").some(a),g[1],e,5);m=f[1];a=f[0];e=g[0].length;f=a.length;var n=m.length>0?1:0;g=h.useState(function(){return!1});var o=g[1],p=m.length;if(p!==1)p=p!==0?h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(j,{excessHeads:m,onHoverChange:o,style:k(1)})}):null;else{m=m[0];var q=m.tabType;q.TAG===0?p=null:p=h.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{onFocusChange:o,onHoverChange:o,style:k(1),tab:m,threadKeyDescriptor:q._0})})},c("bs_int64").to_string(q._0.threadKey))}return h.jsxs(d("MWV2ChatHeadsLayout.bs").make,{children:[!(b("cr:1134")==null)&&(e>0||f>0)?h.jsx(b("cr:1134").make,{isVisible:g[0],openTabCount:e,style:l((f+n|0)+1|0)}):null,a.reverse().map(function(b,d){var a=b.tabType;if(a.TAG===0)return null;d=(d+n|0)+1|0;return h.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{onFocusChange:o,onHoverChange:o,style:k(d),tab:b,threadKeyDescriptor:a._0})})},c("bs_int64").to_string(a._0.threadKey))}),p,h.jsx(d("MWV2ComposeHead.bs").make,{onFocusChange:o,onHoverChange:o})]})}a.displayName=a.name+" [from "+f.id+"]";e=a;g.make=e}),98);
__d("MWV2ChatTabLoading.bs",["cssVar","fbt","MWChatStateActions.bs","MWChatStateV2.bs","MWPThreadTheme.bs","MWV2HeaderCloseButton.bs","MWV2HeaderContainer.bs","MWV2IsTabFocusedContext.bs","MWV2TabContainer.bs","bs_curry","react","useCometLoadingStateTracker"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.tab;a=c("useCometLoadingStateTracker")();var e=a[1],f=d("MWChatStateV2.bs").useDispatch();a=d("MWPThreadTheme.bs").useTop();var g=d("MWV2IsTabFocusedContext.bs").useContext();a=g?a:"#C9CCD1";j.useEffect(function(){if(g){var a=e.current;a==null||a.focus()}},[g]);return j.jsx(d("MWV2TabContainer.bs").make,{ariaBusy:!0,ariaLabel:i._("__JHASH__SxkfHU6fYt9__JHASH__"),domRef:e,tab:b,tabIndex:0,children:j.jsx(d("MWV2HeaderContainer.bs").make,{endContent:j.jsx(d("MWV2HeaderCloseButton.bs").make,{color:a,onPress:function(){return c("bs_curry")._1(f,d("MWChatStateActions.bs").closeTab(Date.now(),b.tabId))}})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2ChatTabsLayout.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;return h.jsx("div",{className:"x1ey2m1c x78zum5 x164qtfw xixxii4 x1vjfegm","data-testid":void 0,children:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWV2ChatTabs.bs",["CometErrorBoundary.react","CometHeroInteractionWithDiv.react","FBLogger","JSResourceForInteraction","MWChatInteraction.bs","MWChatStateV2.bs","MWChatStateV2TabGroups.bs","MWFallbackWithTimeout.react","MWPReplyContext.bs","MWThreadListGlimmer.react","MWV2ChatTabLoading.bs","MWV2ChatTabsLayout.bs","MWV2IsTabFocusedContext.bs","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","clearTimeout","cr:356","lazyLoadComponent","promiseDone","react","setTimeout","useCometDisplayTimingTrackerForInteraction","useCometPlaceholderImpl","useMWChatStateV2MaxTabCount"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.load;a.load=function(){var d=c("setTimeout")(function(){c("FBLogger")("messenger_web_product","tabs_suspense").warn("Bootloader did not respond within 10 seconds")},1e4),e=b.call(a);c("promiseDone")(e,function(){return c("clearTimeout")(d)});return e};return a}var i=c("lazyLoadComponent")(a(c("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2ChatTabs.bs"))),j=c("lazyLoadComponent")(a(c("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("MWV2ChatTabs.bs")));function e(a){a=a.isMediaViewer;var e=c("useCometPlaceholderImpl"),f=d("MWChatStateV2.bs").useState(function(a){return a.tabs}),g=d("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),k=g.focusedTabId;g=d("MWChatStateV2.bs").useState(function(a){return a.mediaViewerOpenWatermark});var l=c("useMWChatStateV2MaxTabCount")(a);a=d("MWChatStateV2TabGroups.bs").getTabGroups(c("bs_caml_option").some(a?g.mediaViewerOpenWatermark:void 0),f.tabs,k,l);var m=h.useCallback(function(a){if(a.TAG===0)return null;else return d("MWChatInteraction.bs").get(c("bs_int64").to_string(a._0.threadKey))},[]),n=c("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0);g=a[0].map(function(a,f){var g=c("bs_caml_obj").caml_equal(k,a.tabId),l=a.tabType;l=l.TAG===0?h.jsx(i,{initialTokens:l._0,tab:a}):h.jsx(e,{fallback:h.jsx(c("MWFallbackWithTimeout.react"),{message:"LazyMWV2ChatTab suspends",children:h.jsx(c("MWThreadListGlimmer.react"),{})}),unstable_onSuspense:function(a){return c("FBLogger")("messenger_web_product","tabs_suspense").warn("MWV2ChatTabs suspense: %s",a)},children:h.jsx(j,{tab:a,threadKeyDescriptor:l._0})});g=h.jsx(d("MWV2IsTabFocusedContext.bs").make,{isFocused:g,children:h.jsx(d("MWPReplyContext.bs").make,{children:h.jsx(e,{fallback:h.jsx(c("MWFallbackWithTimeout.react"),{message:"CometHeroInteraction suspends",children:h.jsx(d("MWV2ChatTabLoading.bs").make,{tab:a})}),unstable_onSuspense:function(a){return c("FBLogger")("messenger_web_product","hero_interaction_suspense").warn("MWV2ChatTabs suspense: %s",a)},children:h.jsx(c("CometHeroInteractionWithDiv.react"),{excludeFromMainVC:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:c("bs_curry")._1(m,a.tabType),pageletName:"ChatTab",ref:n,children:l})})})});return h.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:b("cr:356")==null?g:h.jsx(b("cr:356").TabIndex.make,{children:g,value:f})},String(a.tabId))});return h.jsx(d("MWV2ChatTabsLayout.bs").make,{children:b("cr:356")==null?g:h.jsx(b("cr:356").make,{children:g})})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("useMWChatInit",["LSErrorHandlerDeferred.bs","MWLSChatPopperUpper.bs","MWPGetThreadTitle.bs","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){var a=c("useReStore")();h(function(){d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("threads")).map(function(b){return[b,d("ReQLSuspense").toArray(d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(b.threadKey),d("ReQL").fromTableAscending(a.table("contacts"))).take(d("MWPGetThreadTitle.bs").amountToFetchForTitle))]}).take(30));return d("LSErrorHandlerDeferred.bs").subscribeToErrors(a)},[a]);d("MWLSChatPopperUpper.bs").useHook(a)}g["default"]=a}),98);
__d("useMWV2ChatUpdateMediaViewerOpenWatermark",["MWChatStateActions.bs","MWChatStateV2.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=d("MWChatStateV2.bs").useDispatch();return h(function(){var b=Date.now();a(d("MWChatStateActions.bs").updateMediaViewerOpenWatermark(b))},[a])}g["default"]=a}),98);
__d("MWV2CookieWriter.bs",["DeferredCookie","MWCMThreadTypes.react","MessagingThreadType.bs","Promise","ReQL.bs","bs_belt_Option","bs_caml","bs_caml_option","bs_int64","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").group))return"g.";else if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaOneToOne))return"sc.";else if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaGroup))return"sg.";else return"u."}function a(a,e,f){var g=function(a){if(e===void 0)return!1;var b=e.tabType;if(b.TAG===0)return!1;else return c("bs_caml").i64_eq(b._0.threadKey,a)},i=function(a){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(f.table("threads")),{hd:a,tl:0}))},j={contents:void 0};a=a.map(function(a){var e=a.threadType,f=a.threadKey,k={};return i(f).then(function(a){if(a!==void 0)if(g(f)){c("gkx")("1747")&&d("MWCMThreadTypes.react").isJoinedCMThread(e)&&(j.contents=c("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve()}else{k.i=h(e)+c("bs_int64").to_string(f);c("gkx")("1747")&&d("MWCMThreadTypes.react").isJoinedCMThread(e)&&(k.p=c("bs_int64").to_string(a.parentThreadKey));return b("Promise").resolve(c("bs_caml_option").some(k))}else{k.i=h(e)+c("bs_int64").to_string(f);return b("Promise").resolve(c("bs_caml_option").some(k))}})});a=b("Promise").all(a).then(function(a){var d;if(e!==void 0){var f=e.tabType;if(f.TAG===0)d=void 0;else{f=f._0;d=h(f.threadType)+c("bs_int64").to_string(f.threadKey)}}else d=void 0;f=a.filter(c("bs_belt_Option").isSome);a=j.contents;a=a!==void 0?JSON.stringify({lm3:d,lm3p:a,t3:f,utc3:Date.now(),v:1}):JSON.stringify({lm3:d,t3:f,utc3:Date.now(),v:1});a!==void 0?c("DeferredCookie").addToQueue("presence","C"+a,0,c("gkx")("1747")?"/":"",!1,!1,!0):c("recoverableViolation")("Failed to serialize cookie","messenger_comet");return b("Promise").resolve()});c("promiseDone")(a)}e=1;g.write=a;g.version=e}),98);
__d("useMWV2CookieWriter",["I64","MWChatStateV2.bs","MWChatStateV2CompareTabs.bs","MWChatStateV2IsOpen.bs","MWV2CookieWriter.bs","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){var a=d("MWChatStateV2.bs").useState(function(a){return a.tabs}),b=c("useReStore")();h(function(){var e=Array.from(a.tabs.values()).filter(function(a){return d("MWChatStateV2IsOpen.bs").isOpen(void 0,a)}).sort(d("MWChatStateV2CompareTabs.bs").byMostRecentOpened)[0],f=function(a){a=a.tabType;if(e==null)return!1;var b=e.tabType;if(b.TAG===0||a.TAG===0)return!1;else return d("I64").equal(b._0.threadKey,a._0.threadKey)},g=[];Array.from(a.tabs.values()).filter(function(a){if(a.openWatermark>a.closeWatermark)return!0;else return a.minimizeWatermark>a.closeWatermark}).filter(function(a){if(c("gkx")("1747"))return!0;else return!f(a)}).sort(function(a,b){var c=d("MWChatStateV2CompareTabs.bs").byMostRecentMinimized(a,b);if(c===0)return d("MWChatStateV2CompareTabs.bs").byMostRecentOpened(a,b);else return c}).forEach(function(a){a=a.tabType;if(a.TAG===0)return;g.push(a._0)});d("MWV2CookieWriter.bs").write(g,e,b)},[b,a])}b=c("gkx")("1812641")?a:function(){};e=b;g["default"]=e}),98);
__d("MWV2ChatTabsRoot.react",["CometContextualLayerAnchorRoot.react","CometPlaceholder.react","FocusRegion.react","MWChatStateV2.bs","MWChatVisibilityOverrideContext","MWLSThreadDisplayContext","MWSetupPresenceReportingDeferred.react","MWV2ChatHeads.bs","MWV2ChatTabs.bs","focusScopeQueries","gkx","react","stylex","useMWChatInit","useMWIsOnPushView","useMWIsTopLevelRouteMediaViewerExperiment","useMWV2ChatUpdateMediaViewerOpenWatermark","useMWV2CookieWriter","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useMemo,k={chatAbovePushView:{zIndex:"x1vjfegm",$$css:!0},container:{alignItems:"xuk3077",display:"x78zum5",isolation:"xc8icb0",$$css:!0},root:{bottom:"x1ey2m1c",end:"xds687c",position:"xixxii4",$$css:!0}};function l(a){var b=a.isMediaViewer;a=a.showChatAbovePushView;var e=d("MWChatStateV2.bs").useState(function(a){return a.tabs});e=e.tabs;var f=!1;for(e of e.values())if(e.openWatermark>e.closeWatermark){f=!0;break}return h.jsx(d("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"ChatTab",children:h.jsx("div",{className:c("stylex")(k.root,a||c("gkx")("6264")?k.chatAbovePushView:!1),children:h.jsx(c("CometContextualLayerAnchorRoot.react"),{children:h.jsx("div",{className:"xuk3077 x78zum5 xc8icb0",children:f?h.jsxs(d("FocusRegion.react").FocusRegion,{containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:"MWV2ChatTabsRootChatTabsFocusRegion",children:[h.jsx(c("MWV2ChatTabs.bs"),{isMediaViewer:b}),h.jsx(d("MWV2ChatHeads.bs").make,{isMediaViewer:b})]}):h.jsxs(h.Fragment,{children:[h.jsx(c("MWV2ChatTabs.bs"),{isMediaViewer:b}),h.jsx(d("MWV2ChatHeads.bs").make,{isMediaViewer:b})]})})})})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){a=a.children;c("useMWV2CookieWriter")();c("useMWChatInit")();return a}m.displayName=m.name+" [from "+f.id+"]";function a(){var a=c("useMWIsOnPushView")(),b=c("useMWIsTopLevelRouteMediaViewerExperiment")(),e=d("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(b),f=c("useMWV2ChatUpdateMediaViewerOpenWatermark")(),g=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT")&&e;i(function(){b&&f()},[b,f]);return j(function(){return h.jsxs(c("CometPlaceholder.react"),{fallback:null,children:[h.jsx(c("MWSetupPresenceReportingDeferred.react"),{}),h.jsx(m,{children:g?h.jsx(l,{isMediaViewer:b,showChatAbovePushView:a}):null})]})},[g,a,b])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatContainer.react",["LSPlatformClientProviderWithDeferredLoadingStrategy.bs","LSPlatformConfig.re","LSPlatformMessengerConfig.bs","MWChatEncryptedBackupsTrackRestoreWrapper.react","MWV2ChatTabsRoot.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.bs").configEagerlyLoaded,children:h.jsxs(d("LSPlatformClientProviderWithDeferredLoadingStrategy.bs").make,{children:[h.jsx(c("MWV2ChatTabsRoot.react"),{}),h.jsx(c("MWChatEncryptedBackupsTrackRestoreWrapper.react"),{})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWChatBadgeInitSyncCompleteUpdates.bs",["LSSyncStatus.bs","MAWInitSyncComplete.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){var a=c("useReStore")();return c("bs_belt_Option").mapWithDefault(d("ReQLSubscription.bs").useFirst(h.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:d("MAWInitSyncComplete.bs").id,tl:0})},[a])),!1,function(a){return c("bs_caml").i64_eq(a.syncStatus,d("LSSyncStatus.bs").complete)})}g.useHook=a}),98);
__d("MWChatBadgeCount.react",["CometNumberedBadge.react","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","MAWGating","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.bs","MWXacGating.bs","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useRef;function l(a){var e,f=a.overflow,g=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!d("MWXacGating.bs").isGroupsEnabled()},{fetchPolicy:"store-or-network"});a=(a=a.viewer)==null?void 0:a.message_threads;var l=a!=null&&!m((e=a.is_loading_client_threads)!=null?e:d("MAWGating").isArmadillo()===!0)&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.bs").minSyncedThreads,a.unseen_count):0,n=k(null);j(function(){g&&n.current!==l&&(n.current=l,g(l))},[l,g]);return i.jsx(i.Fragment,{children:l>0?i.jsx(c("CometNumberedBadge.react"),{overflow:f,testid:void 0,value:l}):null})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.overflow;a=a.setBadgeCount;return i.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx("span",{}),children:i.jsx(l,{overflow:b,setBadgeCount:a})})}))}a.displayName=a.name+" [from "+f.id+"]";function m(a){return a&&!((a=c("qex")._("343"))!=null?a:!1)&&((a=c("qex")._("15"))!=null?a:!1)}g["default"]=a}),98);
__d("MWChatBadgeCountUpdater.react",["CometRelay","LsSystemFolder.re","MAWChatBadgeInitSyncCompleteUpdates.bs","MWChatBadgeCountUpdates.bs","MWXacGating.bs","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(){var a=d("CometRelay").useRelayEnvironment(),b=d("MWChatBadgeCountUpdates.bs").useHook(d("LsSystemFolder.re").inbox),e=d("MAWChatBadgeInitSyncCompleteUpdates.bs").useHook();h(function(){var f={suppress_xac_groups:!d("MWXacGating.bs").isGroupsEnabled()};a.commitUpdate(function(a){a=a.getRoot();if(a==null){c("recoverableViolation")("A store root must be present to move forward.","messenger_comet");return}a=a.getOrCreateLinkedRecord("viewer","Viewer");a=a.getOrCreateLinkedRecord("message_threads","ViewerMessageThreadsConnection");if(b!=null){var d=a.getValue("unseen_count",f);(d===null||d!==b)&&a.setValue(b,"unseen_count",f)}d=a.getValue("is_loading_client_threads");(d==null||d===e)&&a.setValue(!e,"is_loading_client_threads")})},[a,e,b]);return null}g["default"]=a}),98);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.debug("Error loading MWChatBadgeCountUpdater")}function a(){return c("ExecutionEnvironment").canUseDOM?h.jsx(c("CometErrorBoundary.react"),{onError:i,children:b("cr:4562")&&h.jsx(b("cr:4562"),{})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatOptionsHead.bs",["fbt","ix","CometDeferredPopoverTrigger.react","CometPressable.react","MWIcon.react","MWTooltip.react","bs_curry","fbicon","react","requireDeferred"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover_boxShadow":"x19xcq9t",$$css:!0},headArea:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xc9qbxq",position:"x10l6tqk",start:"xi8xln7",width:"x14qfxbe",$$css:!0},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh",$$css:!0},hoverTarget:{alignItems:"x6s0dn4",backgroundColor:"xjbqb8w",display:"x78zum5",height:"xnnlda6",justifyContent:"xl56j7k",marginStart:"x1tl9596",marginTop:"xhsvlbd",width:"x1dmp6jm",$$css:!0}},l=h._("__JHASH__GqqnGnZcXBj__JHASH__");function a(a){var b=a.isVisible,e=a.openTabCount,f=a.style;a=j.useState(!1);var g=a[0],h=a[1];a=j.useState(!1);var m=a[0],n=a[1];a=j.useState(!1);var o=a[0];a=a[1];return j.jsx(c("CometDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:a,popoverProps:{hasOpenTabs:e>0},popoverResource:c("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.bs"),position:"above",children:function(a,e){return j.jsx("div",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu xc9qbxq x10l6tqk xi8xln7 x14qfxbe",style:f,children:j.jsx("div",{className:"x6s0dn4 xjbqb8w x78zum5 xnnlda6 xl56j7k x1tl9596 xhsvlbd x1dmp6jm","data-testid":void 0,onMouseEnter:function(){return c("bs_curry")._1(h,function(){return!0})},onMouseLeave:function(){return c("bs_curry")._1(h,function(){return!1})},children:j.jsx(c("CometPressable.react"),{label:l,onFocusChange:function(a){return c("bs_curry")._1(n,function(){return a})},onPress:function(){return c("bs_curry")._1(e)},ref:a,testid:void 0,xstyle:function(){return[k.head,b||g||m||o?k.headVisible:!1]},children:j.jsx(c("MWTooltip.react"),{align:"middle",position:"start",tooltip:l,children:j.jsx(c("MWIcon.react"),{icon:d("fbicon")._(i("484387"),20)})})})})})}})}a.displayName=a.name+" [from "+f.id+"]";b=36;e=10;h=a;g.width=b;g.marginBottom=e;g.make=h}),98);
__d("CometTypeaheadEntityViewItem.react",["CometProfilePhoto.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,d=a.meta,e=a.pictureUrl;a.queryString;var f=a.size;f=f===void 0?36:f;var g=a.style;g=g===void 0?"circle":g;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","meta","pictureUrl","queryString","size","style"]);return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemStartContent:e!=null?h.jsx(c("CometProfilePhoto.react"),{shape:g,size:f,source:{uri:e}}):null,children:h.jsx(c("TetraTextPairing.react"),{body:b.label,bodyLineLimit:2,level:3,meta:d,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a,b){var c=a?a.getInteractionUUID():null,d=a?a.getVCTrackerRef():null,e=c!=null&&a!=null&&!a.isResolved();return h(function(){var f=function(c,d){a&&d!=null&&a.setEventStartTime(d.timeStamp),b(c,d)};return{interactionUUID:c,onTracedChange:f,shouldHoldHeroTracing:e,vcTrackerRef:d}},[c,b,e,a,d])}g["default"]=a}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){return function(b){var c=b.inputRef,d=b.onPressEntry,e=b.traceProvider;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onPressEntry","traceProvider"]);var f=i(function(a){e&&e.setEndReason("successful_user_action"),d&&d(a)},[d,e]);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:c,onPressEntry:f,traceProvider:e}))}}g["default"]=a}),98);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","filterNulls","react","recoverableViolation","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useMemo;function a(a){var e=a.bootstrapDatasource,f=d("CometRelay").useRelayEnvironment();return i(function(){return{validate:function(a){a=c("filterNulls")(a.map(function(a){if(a.subtype!=="bootstrap")return null;a=(a=a.rawData.structuredInfo)!=null?a:{};a=a.direct_nav_result;if(a==null)return null;var b=a.ent_id;a=a.title;if(b==null||a==null){c("recoverableViolation")("Unexpected missing ent_id or title on direct_nav_result","search");return null}return{id:b,keyword:a}}));d("CometRelay").fetchQuery(f,h!==void 0?h:h=b("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:a}}).subscribe({error:function(a){d("CometRelayErrorHandling").markErrorAsHandled(a)},next:function(a){a=a.search_client_cache_policy_check;for(a of(a=a==null?void 0:a.policy_decision)!=null?a:[]){var b=a.cache_type,c=a.force_cache_refresh,d=a.ids_to_remove;if(b==="KEYWORD_BOOTSTRAP"){for(b of d)e.removeEntriesByEntID(b);c===!0&&(e.clear(),e.bootstrap())}}}})}}},[e,f])}g["default"]=a}),98);
__d("useSearchCometShouldRenderBadgeWithExposure",["QE2Logger","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){return h(function(){var b;if(a==null)return!1;if(!c("qex")._("578"))return!0;d("QE2Logger").logExposureForUser("search_nullstate_desktop");return(b=c("qex")._("580"))!=null?b:!1},[a])}g["default"]=a}),98);
__d("CometSearchTypeaheadRecentEntityViewItem.react",["CometBadge.react","CometTypeaheadEntityViewItem.react","react","recoverableViolation","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.rawData,e=d.badgeSnippet;d=d.profile;d=(d=d)!=null?d:{};var f=d.id,g=d.profilePictureURL;d=d.url;if(g==null){c("recoverableViolation")("Missing profile picture for fbid "+((f=f)!=null?f:"null"),"search")}f=c("useSearchCometShouldRenderBadgeWithExposure")(e);f=f?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),e]}):void 0;return h.jsx(c("CometTypeaheadEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,linkProps:{preventLocalNavigation:!0,url:d},meta:f,pictureUrl:g,size:36}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadRecentEntityViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("entity")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react",["CometImage.react","CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo,j=36,k={imageIcon:{display:"x1lliihq",$$css:!0}};function a(a){var b,d=a.entry,e=a.isActive,f=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);b=(b=(b=d.rawData.structuredInfo)==null?void 0:b.direct_nav_result)!=null?b:{};var g=b.img_url,l=b.link_url,m=b.snippet;b=b.type;var n=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:l}},[l]),o=null;g!=null&&(o=b==="SHORTCUT"?h.jsx(c("CometImage.react"),{height:j,src:g,width:j,xstyle:k.imageIcon}):h.jsx(c("CometProfilePhoto.react"),{shape:b==="SHORTCUT"?"square":"circle",size:j,source:{uri:g}}));return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:d,isActive:e,itemStartContent:o,linkProps:n,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:d.label,query:f,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:m,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react",["CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("We were trying to show disambiguation result, but had missing data","search");return null}b=b.disambiguation_info_list;var j=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:j,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react",["CometProfilePhoto.react","CometTypeaheadHighlight.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps,i=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=(b=e.rawData.structuredInfo)==null?void 0:b.high_confidence_result)!=null?b:{};var j=b.hcm_id,k=b.picture_url,l=b.snippet;if(k==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((b=j)!=null?b:"null"),"search")}return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:k!=null?h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:k}}):null,itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f}),linkProps:g,children:h.jsx(c("CometTypeaheadHighlight.react"),{content:e.label,query:i,strategy:"non-match",children:function(a){return h.jsx(c("TetraTextPairing.react"),{body:a,bodyLineLimit:2,level:3,meta:l,metaLineLimit:1})}})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometSearchTypeaheadRecentEntityViewItem.react","CometTypeaheadFocusLockRegion.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);return h.jsx(c("CometSearchTypeaheadRecentEntityViewItem.react"),babelHelpers["extends"]({},a,{entry:b,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),testid:void 0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react",["CometBadge.react","CometProfilePhoto.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","TetraTextPairing.react","react","useSearchCometShouldRenderBadgeWithExposure"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.entry,d=a.isActive;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]);var e=b.rawData,f=e.badgeSnippet;e=e.structuredInfo;e=(e=e==null?void 0:e.direct_nav_result)!=null?e:{};var g=e.img_url,j=e.link_url,k=e.snippet,l=e.title;e=e.type;var m=i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:j}},[j]),n=c("useSearchCometShouldRenderBadgeWithExposure")(f);n=n?h.jsxs(h.Fragment,{children:[h.jsx(c("CometBadge.react"),{color:"blue"}),f]}):k;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:d,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})}),itemStartContent:g!=null?h.jsx(c("CometProfilePhoto.react"),{shape:e==="SHORTCUT"?"square":"circle",size:36,source:{uri:g}}):null,linkProps:m,testid:void 0,children:h.jsx(c("TetraTextPairing.react"),{body:l,bodyLineLimit:2,level:3,meta:n,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.entry,f=a.isActive,g=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);b=(b=e.rawData.structuredInfo)!=null?b:{};b=b.disambiguation_result;if(b==null){c("recoverableViolation")("Missing disambiguation result STS info","search");return null}b=b.disambiguation_info_list;b=b[0].snippet;return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:e,isActive:f,itemEndContent:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:e})}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:f}),linkProps:g,children:h.jsx(c("TetraTextPairing.react"),{body:e.label,bodyLineLimit:2,level:2,meta:b,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react",["CometProfilePhoto.react","CometRow.react","CometRowItem.react","CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","TetraTextPairing.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.entry,e=a.isActive,f=a.linkProps;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","linkProps","queryString"]);var g=b.rawData;g=(g=(g=g.structuredInfo)==null?void 0:g.high_confidence_result)!=null?g:{};var i=g.hcm_id,j=g.picture_url;g=g.snippet;if(j==null){c("recoverableViolation")("Missing HC keyword item picture url for hcm_id "+((i=i)!=null?i:"null"),"search")}return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{entry:b,isActive:e,itemEndContent:h.jsxs(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[j!=null?h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometProfilePhoto.react"),{shape:"roundedRect",size:36,source:{uri:j}})}):null,h.jsx(c("CometRowItem.react"),{children:h.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:h.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:b})})})]}),itemStartContent:h.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewRecentIcon,{isActive:e}),linkProps:f,children:h.jsx(c("TetraTextPairing.react"),{body:b.label,bodyLineLimit:2,level:3,meta:g,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("direct_nav")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("keyword")&&b.has("direct_nav")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("disambiguation")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("high_confidence")&&a.subtype==="keyword"?a:null}f["default"]=a}),66);
__d("searchCometTypeaheadSTSMappings",["CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react","CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react","CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react","CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react","CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react","CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react","CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react","cometSearchTypeaheadRecentEntityViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver","cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"],(function(a,b,c,d,e,f,g){"use strict";a=[{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDirectNavKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredHighConfidenceKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseStructuredDisambiguationKeywordViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDirectNavKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredHighConfidenceKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadStructuredDisambiguationKeywordRecentViewItem.react")},{resolver:c("cometSearchTypeaheadRecentEntityViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseSurfaceRecentEntityViewItem.react")}].filter(Boolean);g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef;function a(a,d){var e,f=a.onChange;a=babelHelpers.objectWithoutPropertiesLoose(a,["onChange"]);e=(e=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?e:{};var g=e.subscribeToGlobalTypeaheadFocus;e=c("useRefEffect")(function(a){return g==null?void 0:g(function(){if(a==null)return;a.value="";a.focus();f("")})},[f,g]);var k=j(null),l=j(!1);i(function(){var a=k.current;if(b("cr:2012305")!=null&&a!=null&&l.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");l.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),l.current=!1}}},[]);e=c("useMergeRefs")(e,k);e=c("useMergeRefs")(e,d);return h.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},a,{onChange:f,ref:e}))}a.displayName=a.name+" [from "+f.id+"]";d=h.forwardRef(a);g["default"]=d}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.extraLayoutProps;b=b===void 0?{}:b;var d=b.afterViewContent;b=b.beforeViewContent;var e=a.helperText,f=a.label,g=a.onAbandonTypeahead_DO_NOT_USE,i=a.onBlur,j=a.onChange,k=a.onClick,l=a.onDownArrow,m=a.onEnter,n=a.onEscape,o=a.onHighlightEntry,p=a.onOutsideClick,q=a.onPressEntry,r=a.onShiftTab,s=a.onTab,t=a.onUpArrow,u=a.traceProvider,v=a.viewRole,w=a.inputRef,x=a.xstyles;a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","viewRole","inputRef","xstyles"]);var y=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();y=y.isOpened;var z=c("useCometInternalTypeaheadState")(),A=z.activeEntries;z=z.highlightedEntry;var B=c("useCometInternalTypeaheadFetch")();B=B.isLoading;w=c("useCometTypeaheadInputRefs")(w);var C=w.composedRef;w=w.inputRef;var D=c("useSearchCometGlobalTypeaheadStyles")();x=(x=x)!=null?x:D;D=c("useCometInternalTypeaheadHeroTracing")(u,j);u=D.interactionUUID;j=D.onTracedChange;var E=D.shouldHoldHeroTracing;D=D.vcTrackerRef;g=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")({handlers:{onAbandonTypeahead_DO_NOT_USE:g,onBlur:i,onChange:j,onClick:k,onDownArrow:l,onEnter:m,onEscape:n,onHighlightEntry:o,onOutsideClick:p,onPressEntry:q,onShiftTab:r,onTab:s,onUpArrow:t},inputRef:w});i=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:A,helperText:e,highlightedEntry:z,inputLabel:f,isOpened:y,viewRole:v});return h.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:u,ref:D,children:[h.jsx(c("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:E}),h.jsx(c("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},a,g,{extraLayoutProps:{afterViewContent:d,ariaProps:i,beforeViewContent:b,helperTextComponent:null,isLoading:B,isOpened:y},inputRef:C,label:f,viewRole:v,xstyles:x}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1570865")}g.hasTypeaheadRedirection=a}),98);
__d("searchCometGlobalTypeahead.config",["qex"],(function(a,b,c,d,e,f,g){"use strict";a=8;d={dataSources:{bootstrapKeywordsDataSourceParams:{queryVariables:{first:(b=c("qex")._("156"))!=null?b:2e3}},keywordDataSourceParams:{queryVariables:{fetch_count:a,fetch_mode:"blended"}}},logging:{sessionContext:"SEARCH_GLOBAL"},view:{renderLimit:a,sectionLimits:new Map([["RECENT_SEARCHES",a],["RECENT_SEARCHES_AND_VISIT",a]])}};g["default"]=d}),98);
__d("useSearchCometGlobalTypeaheadCompositeDataSource",["useSearchCometTypeaheadCompositeDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h={instance:null};function a(a){a=c("useSearchCometTypeaheadCompositeDataSource")(a);h.instance==null&&(h.instance=a);return h.instance}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometGlobalSERPRouteUrlBuilder","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useSearchCometGlobalSERPRouteUrlBuilder")(),b=c("useSearchCometHashtagRouteUrlBuilder")(),e=c("useSearchCometResultsEntryPointSurface")();return function(f){var g=f.entry,h=f.queryString;f=f.typeaheadSessionID;var i=g.label.toLowerCase(),j=g.metaData;j=j==null?void 0:j.markers;var k=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(i);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&k!=null&&!j.has("see_all"))return b({entryPointAction:"SEARCH_BOX",exploreEntryPoint:h===""?3:4,hashtag:k,typeaheadSessionID:f});else{h=g.rawData;k=(k=c("searchCometTypeaheadGetStsDisambiguation")(g))!=null?k:void 0;if(g.subtype==="keyword"&&j.has("disambiguation")){h=(j=(j=h.structuredInfo)==null?void 0:(h=j.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?j:{};j=h.link_url;if(j!=null){h=d("ConstUriUtils").getUri(j);if(h!=null){j=new Map();e!=null&&j.set("__eps__",e);k!==void 0&&j.set("__stsd__",c("Base64").encode(JSON.stringify(k)));var l=new Map();for(j of j){var m=j[0],n=j[1];l.set(m,n)}m=h.addQueryParams(l);if(m!=null)return m.toString()}}}return a({entryPointAction:"SEARCH_BOX",highConfidenceResult:c("searchCometTypeaheadGetHighConfidenceResult")(g),query:i,stsDisambiguation:k,typeaheadSessionID:f})}}}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["gkx","react","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useMemo;function a(a){var b=a.entry,d=a.queryString,e=c("useCometRouterDispatcher")(),f=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),g=i(function(){return f({entry:b,queryString:d})},[f,b,d]);h(function(){e!=null&&c("gkx")("1990285")&&e.preloadRouteCode(g)},[e,g]);return i(function(){return{preloadCodeOnMount:!0,preventLocalNavigation:!0,url:g}},[g])}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometGlobalPanelGating","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useMemo,k={view:{backgroundColor:"x1jx94hy",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},viewGlobalPanel:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x10h3on",$$css:!0}};function a(a){a=a.onHeaderActionPress;var b=j(function(){return[k.view,d("CometGlobalPanelGating").isGlobalPanelVisible()&&k.viewGlobalPanel]},[]),e=j(function(){return i.jsx(c("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return c("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:c("searchCometTypeaheadSTSMappings"),emptyStateContent:e,getLinkProps:c("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:a,seeAllLabelBuilder:l,xstyle:b})}function l(a){return h._("__JHASH__LChIaXBIwAT__JHASH__",[h._implicitParam("=m1",i.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a)])}))])}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){return function(b){var c=b.inputRef,d=b.onChange,e=b.onPressEntry,f=b.shouldQueryStringUpdateFromSelectedEntryOnClick;f=f===void 0?!1:f;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"]);var g=i(function(a){var b=a.metaData.markers,c=a.subtype;c=c==="recent"&&b.has("entity")||b.has("direct_nav");d(c?"":a.label);e&&e(a)},[d,e]);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:c,onChange:d,onPressEntry:g,shouldQueryStringUpdateFromSelectedEntryOnClick:f}))}}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useMemo;function a(a){return function(b){var e=b.inputRef;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef"]);e=c("useCometTypeaheadInputRefs")(e);var f=e.composedRef,g=e.inputRef;e=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var k=e.dispatchIsOpened,l=i(function(){g.current!=null&&(g.current.focus(),k(!0))},[g,k]);e=j(function(){return[d("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",l)]},[l]);c("useGlobalKeyCommands")(e);return h.jsx(a,babelHelpers["extends"]({},b,{inputRef:f}))}}g["default"]=a}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometGlobalPanelGating","CometTypeaheadErrorFallback.react","FBLogger","QPLUserFlow","QPLUtils","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","emptyFunction","qex","qpl","react","requireDeferred","searchCometGlobalTypeahead.config","unrecoverableViolation","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalSERPRouteUrlBuilder","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometRecentSearchDataSource","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=c("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react");function a(a){var b=a.autoOpen;b=b===void 0?!1:b;var e=a.inputXStyle,f=a.onClose,g=a.onEscape,q=a.onFocus,r=a.onHeaderActionPress,s=a.onPressEntry,t=a.onSelectFreeformQuery,u=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"]);u=c("useCometTypeaheadStateQueryString")(u);var v=u[0];u=u[1];var w=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),x=c("useSearchCometGlobalSERPRouteUrlBuilder")(),y=c("useSearchCometHashtagRouteUrlBuilder")(),z=c("useCometTypeaheadNavigate")({tapPoint:"tap_search_bar"}),A=n(!1),B=c("useSearchCometRecentSearchDataSource")({fetchNullstate:Boolean(c("qex")._("88")),fetchSearchBadge:Boolean(c("qex")._("1272")),filter:"all"}),C=c("useSearchCometGlobalTypeaheadCompositeDataSource")({config:c("searchCometGlobalTypeahead.config"),recentDataSource:B}),D=C.getBootstrapKeywordsDataSource();if(D==null)throw c("unrecoverableViolation")("Bootstrap datasource is missing","search");B=c("useSearchCometTypeaheadBootstrapValidation")({bootstrapDatasource:D});var E=B.validate,F=j(function(a){var b=a.reason,e=a.sessionID;a=a.shownEntries;E(a);b==="success"?c("QPLUserFlow").endSuccess(c("qpl")._(195636649,"5429"),{instanceKey:d("QPLUtils").deriveInstanceKey(e)}):b==="abandon"&&c("QPLUserFlow").endCancel(c("qpl")._(195636649,"5429"),{instanceKey:d("QPLUtils").deriveInstanceKey(e)})},[E]);B=k(d("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext);var G=B.logger,H=B.onSessionStart,I=B.setSessionEndCallback;B=B.traceProvider;var J=G;B=B;var K=c("useSearchCometTypeaheadLoggingProvider")({context:"search_global",onSessionEnd:F});G=c("useCometSearchTypeaheadTraceProvider")(G||K);l(function(){I(F)},[I,F]);if(J==null){J=K;o.onReady(function(a){a.bumpEntityKey(354,"typeahead.missing_logger_context","focused")});throw c("FBLogger")("search").mustfix("Typeahead used without logger in context")}if(B==null){B=G;throw c("FBLogger")("search").mustfix("Typeahead used without traceProvider in context")}var L=c("useSearchCometTypeaheadRecentDataSourceContextDecorator")(C,!1);K=m(function(){return[L,{decorate:c("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")}].filter(Boolean)},[L]);l(function(){C.bootstrap()},[C]);G=j(function(){var a;a=(a=c("qex")._("869"))!=null?a:!1;a&&!A.current&&D.bootstrap();A.current=!0;H();q&&q()},[D,H,q]);var M=j(function(a){var b,c=a.metaData;c=c==null?void 0:c.markers;var d=c!=null&&c.has("entity");c=c!=null&&c.has("direct_nav");b=w({entry:a,queryString:v,typeaheadSessionID:(b=J)==null?void 0:b.getSessionID()});b=p(a,b,d,c);z(b);s==null?void 0:s(a)},[J,z,s,v,w]),N=j(function(a){var b=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(a);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&b!=null){b=y({entryPointAction:"SEARCH_BOX",exploreEntryPoint:v===""?3:4,hashtag:b,typeaheadSessionID:(b=J)==null?void 0:b.getSessionID()})}else{var c;b=x({entryPointAction:"SEARCH_BOX",query:a,typeaheadSessionID:(c=J)==null?void 0:c.getSessionID()})}z(b);t==null?void 0:t(a)},[y,J,z,t,v,x]),O=j(function(){C.clearQueryCache(),f&&f()},[C,f]),P=c("useStable")(function(){var a;return((a=c("withSearchCometTypeaheadSERPWarmCallDecorator"))!=null?a:c("emptyFunction").thatReturnsArgument)(c("withSearchCometTypeaheadTraceEndReasonDecorator")(c("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(c("withSearchCometTypeaheadBaseNavigationDecorator")(c("BaseTypeahead.react")))))}),Q=h._("__JHASH___9EIWdQL4U5__JHASH__"),R=v==="";R=R?"grid":"listbox";return i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return i.jsx(c("CometTypeaheadErrorFallback.react"),{})},children:i.jsx(P,babelHelpers["extends"]({},a,{autoOpen:b,dataSource:C,decorators:K,inputEndContent:a.inputEndContent,inputExtraProps:{hideIconOnFocus:!d("CometGlobalPanelGating").isGlobalPanelVisible(),size:"large",xstyle:e},inputStartContent:a.inputStartContent,inputStrategyRenderer:c("SearchCometGlobalTypeaheadInputStrategy.react"),label:h._("__JHASH__oTSOcwn1bTU__JHASH__"),layoutStrategyRenderer:c("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:J,onChange:u,onClose:O,onEscape:g,onFocus:G,onPressEntry:M,onSelectFreeformQuery:N,placeholder:Q,queryString:v,testid:void 0,traceProvider:B,viewRole:R,viewStrategyRenderer:c("useSearchCometGlobalTypeaheadViewStrategy")({onHeaderActionPress:r})}))})}a.displayName=a.name+" [from "+f.id+"]";function p(a,b,c,d){var e=a.rawData,f;if(e!=null&&a.subtype==="recent"&&c){f=e==null?void 0:(c=e.profile)==null?void 0:c.url}if(e!=null&&(a.subtype==="keyword"||a.subtype==="bootstrap"||a.subtype==="recent")&&d){f=e==null?void 0:(c=e.structuredInfo)==null?void 0:(a=c.direct_nav_result)==null?void 0:a.link_url}return(d=f)!=null?d:b}g["default"]=a}),98);
__d("GlobalVideoPortsManager",["addToMap","emptyFunction","gkx","removeFromMap"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(c("gkx")("1594")){var d=a.get(b);d!=null&&(d.portablePlaceContainer=null)}return c("removeFromMap")(a,b)}a=c("emptyFunction");function i(a){return a.unlinkedAtTimestampMs!==null}var j=1e4;b=function(){function a(a){var b=this;this.$1=function(c){var d=function(a){return c(b.$2(a))};a(d)}}var b=a.prototype;b.addOrUpdatePlace=function(a){var b=this,d=a.coreVideoPlayerMetaData,e=a.fullscreenController,f=a.implementations,g=a.injectCoreVideoStatesRef,j=a.isFullscreen,k=a.portablePlaceContainer,l=a.portablePlaceID,m=a.portablePlaceMetaData,n=a.portableVideoID,o=a.renderComponents,p=a.renderPlaceholder,q=a.trackingDataEncrypted,r=a.trackingNodes,s=a.viewportMarginsForViewability;this.$1(function(a){var t,u=b.getPortableVideoState(a,n),v=(t=a.places.get(l))!=null?t:null;t=v!=null&&!i(v)?v.sequenceNumber:a.placesSequenceNumberNext;var w=t===a.placesSequenceNumberNext?a.placesSequenceNumberNext+1:a.placesSequenceNumberNext,x=m||{},y=a.places;if(n!=null){var z=b.getPlacesBorrowingThisVideo(y,n);z.forEach(function(a){i(a)&&a.portablePlaceID!==(v==null?void 0:v.portablePlaceID)&&(y=h(y,a.portablePlaceID))})}y=c("addToMap")(y,l,babelHelpers["extends"]({},v,{coreVideoPlayerMetaData:d,currentVideoID:n,fullscreenController:e,implementations:f,injectCoreVideoStatesRef:g,isFullscreen:j,portablePlaceContainer:k,portablePlaceID:l,portablePlaceMetaData:x,renderComponents:o,renderPlaceholder:(z=p)!=null?z:null,sequenceNumber:t,trackingDataEncrypted:q,trackingNodes:r,unlinkedAtTimestampMs:null,viewportMarginsForViewability:s}));x=v!==null&&n===null?v.currentVideoID:null;z=a.videos;if(x!==null){t=b.getPlacesBorrowingThisVideo(y,x);t=0===t.length;t&&(z=c("removeFromMap")(a.videos,x))}if(n!==null){t=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:u,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:y,videoID:n});x=t.nextPreviousPlaceMetaData;z=c("addToMap")(z,n,u?babelHelpers["extends"]({},u,{portableVideoID:n,previousPlaceMetaData:x}):{portableVideoID:n,preferredPlaceID:null,previousPlaceMetaData:x})}return y===a.places&&w===a.placesSequenceNumberNext&&z===a.videos?a:babelHelpers["extends"]({},a,{places:y,placesSequenceNumberNext:w,videos:z})})};b.removePlace=function(a){var b=this,d=a.portablePlaceID,e=Date.now();this.$1(function(a){var f;f=(f=a.places.get(d))!=null?f:null;var g=f!==null?f.currentVideoID:null;if(f===null)return a;var i=a.places,j=g!==null?b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(i,g)).filter(function(a){return a.portablePlaceID!==d}):[];g!==null&&j.length===0?i=c("addToMap")(i,d,babelHelpers["extends"]({},f,{unlinkedAtTimestampMs:e})):i=h(i,d);j=a.videos;if(g!==null){f=b.getPlacesBorrowingThisVideo(i,g);f=0===f.length;if(f)j=c("removeFromMap")(j,g);else{f=b.getPortableVideoState(a,g);var k=b.updatePreviousPlaceMetaDataInfoForVideo({existingVideoState:f,places:a.places,setPreferredPlaceForVideo:!1,updatedPlaces:i,videoID:g}),l=k.nextPreviousPlaceMetaData;k=k.shouldUpdatePreviousPlaceMetaDataForVideo;f!=null&&k&&(j=c("addToMap")(j,g,babelHelpers["extends"]({},f,{portableVideoID:g,previousPlaceMetaData:l})))}}return i===a.places&&j===a.videos?a:babelHelpers["extends"]({},a,{places:i,videos:j})})};b.setPreferredPlaceForVideo=function(a){var b=this,d=a.portablePlaceID,e=a.portableVideoID;this.$1(function(a){var f=b.getPortableVideoState(a,e),g=d!=null?a.places.get(d):null,h=b.updatePreviousPlaceMetaDataInfoForVideo({existingPlaceStateForSetPreferredPlaceForVideo:g,existingVideoState:f,places:a.places,preferredPlaceID:d,setPreferredPlaceForVideo:!0,updatedPlaces:a.places,videoID:e});h=h.nextPreviousPlaceMetaData;f=f!=null?c("addToMap")(a.videos,e,babelHelpers["extends"]({},f,{preferredPlaceID:g!=null&&d!=null?d:null,previousPlaceMetaData:h})):a.videos;return f===a.videos?a:babelHelpers["extends"]({},a,{videos:f})})};b.getPlacesBorrowingThisVideo=function(a,b){var c=[];a.forEach(function(a){a.currentVideoID===b&&c.push(a)});return c};b.skipUnlinkedPlaces=function(a){return a.filter(function(a){return!i(a)})};b.selectCurrentPlaceFromThesePlaces=function(a,b){var c;a=a.slice().sort(function(a,b){return a.sequenceNumber-b.sequenceNumber});c=(c=a.find(function(a){return a.portablePlaceID===b}))!=null?c:null;a=a.length>0?a[a.length-1]:null;return(c=(c=c)!=null?c:a)!=null?c:null};b.getCurrentPlaceStateForVideo=function(a,b){var c=this.getPortableVideoState(a,b);if(c!=null&&b!=null){a=this.selectCurrentPlaceFromThesePlaces(this.skipUnlinkedPlaces(this.getPlacesBorrowingThisVideo(a.places,b)),c.preferredPlaceID);return(b=a)!=null?b:null}else return null};b.getPortableVideoState=function(a,b){if(b!=null){a=a.videos.get(b);return(b=a)!=null?b:null}return null};b.updatePreviousPlaceMetaDataInfoForVideo=function(a){var b=this,c=a.existingPlaceStateForSetPreferredPlaceForVideo,d=a.existingVideoState,e=a.places,f=a.preferredPlaceID,g=a.setPreferredPlaceForVideo,h=a.updatedPlaces,i=a.videoID;a=function(a,c){return b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(b.getPlacesBorrowingThisVideo(a,i)),(a=c)!=null?a:null)};var j=a(e,d==null?void 0:d.preferredPlaceID);g?g=c!=null?a(e,f):null:g=a(h,d==null?void 0:d.preferredPlaceID);e=j!=null&&(j==null?void 0:j.portablePlaceID)!==((c=g)==null?void 0:c.portablePlaceID);return{nextPreviousPlaceMetaData:e&&j!=null?j.portablePlaceMetaData:(f=d==null?void 0:d.previousPlaceMetaData)!=null?f:null,shouldUpdatePreviousPlaceMetaDataForVideo:e}};b.collectGarbage=function(){this.$1(function(a){return a})};b.$2=function(a){var b=Date.now(),d=new Set(),e=a.places;a.places.forEach(function(a){a.unlinkedAtTimestampMs!==null&&b-a.unlinkedAtTimestampMs>=j?e=h(e,a.portablePlaceID):a.currentVideoID!==null&&d.add(a.currentVideoID)});var f=a.videos;a.videos.forEach(function(a){d.has(a.portableVideoID)||(f=c("removeFromMap")(f,a.portableVideoID))});return e===a.places&&f===a.videos?a:babelHelpers["extends"]({},a,{places:e,videos:f})};return a}();g.isUnlinkedGlobalVideoPortsPlace=i;g.UNLINKED_PLACE_TIMEOUT_MS=j;g.GlobalVideoPortsManager=b}),98);
__d("GlobalVideoPortsPortalerErrorBoundary.react",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={errorRaw:null},c.suppressReactDefaultErrorLogging=!0,b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromError=function(a){return{errorRaw:a}};var c=b.prototype;c.componentDidCatch=function(a,b){b=this.props.onError;b!=null&&b(a)};c.render=function(){var a=this.props,b=a.children;a=a.fallback;var c=this.state.errorRaw;return c!=null?typeof a==="function"?a(b):a:b};return b}(a.PureComponent);g["default"]=b}),98);
__d("GlobalVideoPortsPortaler.react",["CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsPortalerErrorBoundary.react","GlobalVideoPortsRenderers.react","ReactDOMComet","emptyFunction","equalsSet","gkx","react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef,k=e.useState;function a(a,b,d,e,f){var g=j(null);i(function(){var h,i=g.current;h=new Set((h=a.map(function(a){return a.portablePlaceID}))!=null?h:[]);if(i==null||!c("equalsSet")(i,h)){g.current=h;i=b.current;h=d.current;i!=null&&e(i);h!=null&&f(h)}})}var l=c("gkx")("52")?a:c("emptyFunction");function b(a){var b=a.globalVideoPortsManager,e=a.globalVideoPortsState,f=a.thisVideoID;a=k(function(){return d("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})});var g=a[0],i=j(null),m=c("useUnsafeRef_DEPRECATED")(null),n=(a=e.videos.get(f))!=null?a:null,o=b.getPlacesBorrowingThisVideo(e.places,f);a=o.length<=0;e=a?null:b.selectCurrentPlaceFromThesePlaces(o,n?n.preferredPlaceID:null);var p=a?null:b.selectCurrentPlaceFromThesePlaces(b.skipUnlinkedPlaces(o),n?n.preferredPlaceID:null);b=function(a){m.current=a,o.forEach(function(b){b=b.injectCoreVideoStatesRef.current;b&&b(i.current,a)})};var q=function(){return null},r=function(a){i.current=a,o.forEach(function(a){a=a.injectCoreVideoStatesRef.current;a&&a(i.current,m.current)})};l(o,m,i,b,r);return a?null:h.jsxs(h.Fragment,{children:[d("ReactDOMComet").createPortal(e?h.jsx(c("GlobalVideoPortsPortalerErrorBoundary.react"),{description:"GlobalVideoPortsPortaler",fallback:q,onError:r,children:h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlayerRenderer,{coreVideoPlayerMetaData:e.coreVideoPlayerMetaData,currentPlaceID:e.portablePlaceID,currentVideoID:f,fullscreenController:e.fullscreenController,implementations:e.implementations,isFullscreen:e.isFullscreen,onCoreVideoStatesChanged:b,previousPlaceMetaData:(a=n==null?void 0:n.previousPlaceMetaData)!=null?a:null,trackingDataEncrypted:e.trackingDataEncrypted,trackingNodes:e.trackingNodes,viewportMarginsForViewability:e.viewportMarginsForViewability})}):null,g),o.map(function(a){var b;return d("ReactDOMComet").createPortal(a.portablePlaceID===(p==null?void 0:p.portablePlaceID)?h.jsx(d("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:g}):h.jsx(d("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:(b=p==null?void 0:p.portablePlaceID)!=null?b:null,currentVideoID:f,previousPlaceMetaData:(b=n==null?void 0:n.previousPlaceMetaData)!=null?b:null,renderPlaceholder:a.renderPlaceholder,thisPlaceID:a.portablePlaceID,videoPixelsAspectRatio:(b=a.coreVideoPlayerMetaData.videoPixelsAspectRatio)!=null?b:null}),a.portablePlaceContainer)})]})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),98);
__d("GlobalVideoPortsImpl.react",["CometErrorBoundary.react","GlobalVideoPortsContexts","GlobalVideoPortsManager","GlobalVideoPortsPortaler.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.setGlobalVideoPortsManager;i(function(){var a=function(a){return new(d("GlobalVideoPortsManager").GlobalVideoPortsManager)(a)};b(a)},[b]);var e=[],f=d("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),g=d("GlobalVideoPortsContexts").useGlobalVideoPortsState();f&&g&&g.videos.forEach(function(a,b){e.push(h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("GlobalVideoPortsPortaler.react"),{globalVideoPortsManager:f,globalVideoPortsState:g,thisVideoID:b})},b))});return h.jsx(h.Fragment,{children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("maybeRemoveElement",["gkx","queueRemovableDOMElements"],(function(a,b,c,d,e,f,g){"use strict";function h(a){c("gkx")("3538")&&a.remove()}function a(a){if(a!=null){var b=document.querySelectorAll('link[rel="preload"][as="script"][href="'+a.src+'"]');b.forEach(h);h(a)}}function b(a){h(a)}function e(){var a=[].concat(d("queueRemovableDOMElements").getCurrentQueue());d("queueRemovableDOMElements").clearQueue();a.forEach(h)}g.maybeRemoveScriptLoadingElement=a;g.maybeRemoveServerJSScriptElement=b;g.maybeRemoveElementInit=e}),98);/*FB_PKG_DELIM*/
__d("getCometComposerMentionsSearchForLexical",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.anchor;if(a.type!=="text")return null;var b=a.getNode();if(!b.isSimpleText())return null;a=a.offset;return b.getTextContent().slice(0,a)}function a(a){var b=null;a.getEditorState().read(function(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a))return;b=h(a)});return b}g["default"]=a}),98);
__d("createCometMentionsNameMatchStrategy",[],(function(a,b,c,d,e,f){"use strict";b="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";var g="\\b[A-Z][^\\s"+b+"]",h="\\b[a-z][^\\s"+b+"]";function a(a){var b=a.commonWordsBlocklist,c=a.minMatchLength;a=a.nameCase;var d=a==="capitalized"?g:h,e=new RegExp("(^|[^#])((?:"+d+"{"+1+",})$)");return{findMentionableString:function(a){a=e.exec(a);if(a===null)return null;var d=a[1],f=a[2];if(b.includes(f))return null;return f!=null&&f.length>=c?{leadOffset:a.index+d.length,matchingString:f,replaceableString:f}:null},name:"NameMentionStrategy("+c.toString()+", "+a+")"}}f["default"]=a}),66);
__d("DocumentMentionsRegex",[],(function(a,b,c,d,e,f){"use strict";a="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;";b="\\b[A-Z][^\\s"+a+"]";c={PUNCTUATION:a,NAME:b};d=c;f["default"]=d}),66);
__d("createCometMentionMatchStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f,g){"use strict";var h="(?:\\.[ |$]| |["+c("DocumentMentionsRegex").PUNCTUATION+"]|)",i=75;function j(a,b){b="[^"+a+b+"\\s]";var c=new RegExp("(^|\\s|\\()(["+a+"]((?:"+b+h+"){0,"+i+"}))$"),d=50;a=new RegExp("(^|\\s|\\()(["+a+"]((?:"+b+"){0,"+d+"}))$");return{regex:c,regexAlias:a}}function a(a){var b=a.minMatchLength,d=a.name,e=a.triggers;a=a.disallowedChars;a=a===void 0?c("DocumentMentionsRegex").PUNCTUATION:a;e=j(e,a);var f=e.regex,g=e.regexAlias;return{findMentionableString:function(a){var c=f.exec(a);c===null&&(c=g.exec(a));if(c!==null){a=c[1];var d=c[3];if(d.length>=b)return{leadOffset:c.index+a.length,matchingString:d,replaceableString:c[2]}}return null},name:d}}g["default"]=a}),98);
__d("createCometAtSignComposerMentionsMatchStrategy",["createCometMentionMatchStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h=["@","\\uff20"].join("");function a(a){a=a.minMatchLength;return c("createCometMentionMatchStrategy")({minMatchLength:a,name:"AtSignComposerMentionStrategy("+a.toString()+")",triggers:h})}g["default"]=a}),98);
__d("CometTypeaheadViewItem.react",["CometPressable.react","CometRow.react","CometRowItem.react","emptyFunction","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback,j={root:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",marginTop:"xdj266r",marginBottom:"xat24cr",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},k={contentRoot:{alignItems:"x6s0dn4",cursor:"x1ypdohk",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},contentRootActive:{backgroundColor:"x1wpzbip",$$css:!0},contentRootDisabled:{bottom:"x1ey2m1c",cursor:"x1h6gzvc",end:"xds687c",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},contentRootEmphasized:{backgroundColor:"xlhe6ec",$$css:!0},contentRootHover:{":hover_backgroundColor":"xi2jdih",$$css:!0},itemIcon:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},pressable:{width:"xh8yej3",$$css:!0},root:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.children,d=a.cursorDisabled_SEARCH_ONLY;d=d===void 0?!1:d;var e=a.entry,f=a.isActive,g=a.isEmphasized;g=g===void 0?!1:g;var l=a.isDisabled;l=l===void 0?!1:l;var m=a.itemEndContent,n=a.itemStartContent,o=a.linkProps;a.onHighlightEntry;var p=a.onPressEntry,q=a.onPressEntryIn,r=a.overlayDisabled_SEARCH_ONLY;r=r===void 0?!1:r;var s=a.role,t=a.testid;t=a.xstyle;t=t===void 0?j.root:t;a=a.debugElement;var u=i(function(a){p&&p(e,a)},[e,p]),v=i(function(a){q&&q(e,a)},[e,q]),w=s==="row"?"gridcell":"none";return h.jsxs("li",{"aria-selected":f,className:"xh8yej3","data-testid":void 0,id:e.key,role:s,children:[a,h.jsxs("div",{className:c("stylex")([k.contentRoot,!r&&k.contentRootHover,f&&k.contentRootActive,g&&k.contentRootEmphasized,t]),role:w,children:[h.jsx(c("CometPressable.react"),{cursorDisabled:d,disabled:l,display:"block",expanding:!0,focusable:!1,label:e.label,linkProps:o,onPress:l?c("emptyFunction"):u,onPressIn:l?c("emptyFunction"):v,overlayDisabled:!0,role:"none",xstyle:k.pressable,children:h.jsxs(c("CometRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[n!=null?h.jsx(c("CometRowItem.react"),{children:h.jsx("div",{className:"x14yjl9h xudhj91 x18nykt9 xww2gxu",children:n})}):null,h.jsx(c("CometRowItem.react"),{expanding:!0,children:b}),m!=null?h.jsx(c("CometRowItem.react"),{children:m}):null]})}),h.jsx("div",{className:""+(l?" x1ey2m1c x1h6gzvc xds687c x10l6tqk x17qophe x13vifvy":"")})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSearchMentionsBaseViewItem.react",["CometTypeaheadViewItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.onPressEntryIn;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["onPressEntryIn","queryString"]);var d=function(a,c){c.preventDefault(),b&&b(a,c)};return h.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},a,{onPressEntryIn:d}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FeedComposerCometMentionsViewItem.react",["fbt","ix","CometProfilePhoto.react","CometProfileVerificationBadge.react","CometSearchMentionsBaseViewItem.react","TetraIcon.react","TetraText.react","fbicon","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={container:{paddingStart:"x1t2a60a",$$css:!0},invitedName:{alignItems:"x6s0dn4",maxWidth:"x11t6kkg",$$css:!0},invitedVerifiedName:{alignItems:"x6s0dn4",maxWidth:"xw5ewwj",$$css:!0},name:{alignItems:"x6s0dn4",display:"x78zum5",$$css:!0},nameBadge:{height:"x1kpxq89",$$css:!0},nameDivider:{width:"x51ohtg",$$css:!0},photo:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",maxWidth:"x1gfrnbc",minWidth:"x18ip3f8",$$css:!0},subText:{marginBottom:"x12nagc",$$css:!0},text:{flexGrow:"x1iyjqo2",marginStart:"x16n37ib",overflowX:"x6ikm8r",overflowY:"x10wlt62",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},textDivider:{height:"xdk7pt",$$css:!0},textHeadline:{display:"x78zum5",marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0}};function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var e=b.rawData,f=!1,g=!1,l=null,m="circle";if(e.type==="MENTION_SEARCH_RESULT"){var n;f=Boolean(e.isExternal);g=e.isVerified;l=e.subtext;m=(n=e.iconShape)!=null?n:"circle"}n=b.label;var o=a.addOn,p=k.name;o!=null&&(p=g?k.invitedVerifiedName:k.invitedName);e=e.type!=="SEE_ALL_ENTRY"&&e.type!=="MENTION_TYPE_RESET"?e.photoURI:null;if(e==null){c("recoverableViolation")("No profile picture found for mentions entry","comet_composer");return null}m=j.jsx(c("CometProfilePhoto.react"),{shape:m,size:40,source:{uri:e}});return j.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,testid:void 0,children:j.jsxs("div",{className:"x6s0dn4 x78zum5 x1gfrnbc x18ip3f8",children:[j.jsx("div",{className:"x1vqgdyp x100vrsf",children:m}),j.jsxs("div",{className:"x1iyjqo2 x16n37ib x6ikm8r x10wlt62 xlyipyv xuxw1ft",children:[j.jsxs("div",{className:"x78zum5 x1gslohp x12nagc",children:[j.jsx("div",{className:c("stylex")(p),children:j.jsx(c("TetraText.react"),{numberOfLines:1,type:"headlineEmphasized4",children:n})}),g&&j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"x51ohtg"}),j.jsx("div",{className:"x1kpxq89",children:j.jsx(c("CometProfileVerificationBadge.react"),{profileID:b.key,size:"small"})}),j.jsx("div",{className:"x51ohtg"})]}),f?j.jsx("span",{className:"x1t2a60a",children:j.jsx(c("TetraIcon.react"),{alt:h._("__JHASH__U217aVJMGxG__JHASH__"),color:"primary",icon:d("fbicon")._(i("785426"),12)})}):null]}),l!=null&&j.jsxs("div",{className:"x12nagc",children:[j.jsx("div",{className:"xdk7pt"}),j.jsx(c("TetraText.react"),{numberOfLines:1,type:"meta3",children:l})]})]}),j.jsx("div",{children:o})]})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometTypeaheadKeyboardNavigationUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){if(a.length===0){c(null);return}var d=b!=null?a.findIndex(function(a){return a.key===b})+1:0;d===a.length&&(d=0);c(a[d])}function b(a,b,c){if(a.length===0){c(null);return}var d=b!=null?a.findIndex(function(a){return a.key===b})-1:a.length-1;d===-1&&(d=a.length-1);c(a[d])}f.moveDown=a;f.moveUp=b}),66);
__d("cometTypeaheadODSLogFetchCacheEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchCacheEvent");function a(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=1);if(!b)return;h.onReady(function(b){b.bumpEntityKey(354,a,"fetched-cache",c)})}g["default"]=a}),98);
__d("cometTypeaheadODSLogFetchNetworkEvent",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometTypeaheadODSLogFetchNetworkEvent");function a(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=1);if(!b)return;h.onReady(function(b){b.bumpEntityKey(354,a,"fetched-network",c)})}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverCache",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a){var b=a.dataSource;return h(function(a){var c=a.onResolvePayload;a=a.requestParams;var d=a.perfTraceAPI;a=b.fetchCache(a);d&&d.addMarkerPoint("cachedResponse","AppTiming");c(a);return a},[b])}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolverNetwork",["promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=a.dataSource;a=k(!1);var d=a[0],e=a[1],f=j(0),g=j(!1);i(function(){g.current=!1;return function(){g.current=!0}},[]);a=h(function(a){var d=a.onResolvePayload;a=a.requestParams;f.current++;var h=f.current,i=a.perfTraceAPI;e(!0);c("promiseDone")(b.fetchNetwork(a).then(function(a){!g.current&&h===f.current&&(d(a),i&&i.addMarkerPoint("networkResponse","AppTiming"))})["finally"](function(){!g.current&&h===f.current&&(f.current=0,e(!1))}))},[b]);return[{isLoading:d},a]}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetchResolver",["baseTypeaheadFlattenEntries","cometTypeaheadODSLogFetchCacheEvent","cometTypeaheadODSLogFetchNetworkEvent","react","recoverableViolation","useBaseTypeaheadDataSourceFetchResolverCache","useBaseTypeaheadDataSourceFetchResolverNetwork","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=8;function a(a,b){var d=a.dataSource,e=a.dataSourceFetchConfigParams;e=e===void 0?{}:e;var f=e.renderLimit,g=f===void 0?j:f;f=e.shouldDebounceNetwork;var k=f===void 0?!0:f;f=e.requestFlow;var l=a.onResolvePayload,m=i(f),n=c("useBaseTypeaheadDataSourceFetchResolverCache")({dataSource:d});e=c("useBaseTypeaheadDataSourceFetchResolverNetwork")({dataSource:d});a=e[0].isLoading;var o=e[1],p=c("useDebouncedComet")(o);function q(){var a=!1;function e(b,d){var e=d.isTraceComplete;d=d.source;try{a||l(b,{isTraceComplete:e,source:d})}catch(b){a||c("recoverableViolation")("Failed to resolve fetched payload","search")}}function f(a){var b=a.requestParams;a=a.source;var f=b.requestFlow;f!=null&&(m.current=f);if(typeof d.fetchCache==="function"&&["all","cache"].includes(a)){f=n({onResolvePayload:function(a){var b=a.entries;b=c("baseTypeaheadFlattenEntries")(b).length;e(a,{isTraceComplete:b>=g,source:"cache"});c("cometTypeaheadODSLogFetchCacheEvent")&&c("cometTypeaheadODSLogFetchCacheEvent")("comet.ta.fetch",!0,1)},requestParams:b});f=f;f=f.entries;f=c("baseTypeaheadFlattenEntries")(f).length;if(f>=g)return}if(typeof d.fetchNetwork==="function"&&["all","network"].includes(a)){f={onResolvePayload:function(a){e(a,{isTraceComplete:!0,source:a.entries.length>0?"network":"network-no-results"}),c("cometTypeaheadODSLogFetchNetworkEvent")&&c("cometTypeaheadODSLogFetchNetworkEvent")("comet.ta.fetch",!0,1)},requestParams:babelHelpers["extends"]({},b,{requestFlow:m.current})};Boolean(k)?p(f):o(f)}}b!=null&&f(b);return function(){a=!0}}h(q,[b]);return[{isLoading:a}]}g["default"]=a}),98);
__d("useBaseTypeaheadDataSourceFetch",["react","recoverableViolation","useBaseTypeaheadDataSourceFetchResolver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useState;function a(a){var b=i(null),d=b[0],e=b[1];b=c("useBaseTypeaheadDataSourceFetchResolver")(a,d);a=b[0].isLoading;var f=h(function(a,b){b===void 0&&(b="all"),e({requestParams:a,source:b})},[]);b=h(function(a){a=a||{};var b=a.requestFlow;a=a.source;if(d==null){c("recoverableViolation")("Refetch cannot be called with undefined `fetchParams`","search");return}var e=d.requestParams,g=e.loggingEventTrace;e=babelHelpers.objectWithoutPropertiesLoose(e,["loggingEventTrace"]);g=babelHelpers["extends"]({loggingEventTrace:babelHelpers["extends"]({},g,{sequenceID:String(Date.now())}),requestFlow:b},e);f(g,a)},[f,d]);return[{isLoading:a,source:(a=d==null?void 0:d.source)!=null?a:"all"},f,b]}g["default"]=a}),98);
__d("CometMentions.react",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","gkx","react","useBaseTypeaheadDataSourceFetch"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useImperativeHandle,l=b.useRef,m=b.useState,n=c("gkx")("4226");function a(a,b){var e=a.context,f=a.dataSource,g=a.editorHasFocus,p=a.inputElement,q=a.layoutStrategyRenderer,r=a.loggingProvider,s=a.onAriaChange,t=a.onEntriesUpdated,u=a.onHighlightEntry,v=a.onSelectedEntry,w=a.onVisibilityChange,x=a.position;x=x===void 0?"above":x;var y=a.queryString,z=a.viewStrategyRenderer;a=babelHelpers.objectWithoutPropertiesLoose(a,["context","dataSource","editorHasFocus","inputElement","layoutStrategyRenderer","loggingProvider","onAriaChange","onEntriesUpdated","onHighlightEntry","onSelectedEntry","onVisibilityChange","position","queryString","viewStrategyRenderer"]);var A=m([]),B=A[0],C=A[1],D=l(null);A=m(null);var E=A[0],F=A[1],G=l(y),H=l(B),I=l(null),J=l(!0),K=l(null);A=m(!1);var L=A[0],M=A[1];j(function(){if(n)return;H.current=B;G.current=y},[B,y]);j(function(){return function(){r.isSessionActive()&&r.maybeEndSession(n?y:G.current,c("baseTypeaheadFlattenEntries")(H.current))}},[]);var N=i(function(){var a=J.current&&H.current.length>0;a!==K.current&&(w(a),a?r.startSession(y):r.isSessionActive()&&r.maybeEndSession(y,c("baseTypeaheadFlattenEntries")(B)),M(a))},[B,w,r,y]),O=i(function(a){u&&u(a),F(a),D.current=a},[u]);k(b,function(){return{getViewRef:function(){return I},hasSelection:function(){return o(c("baseTypeaheadFlattenEntries")(n?H.current:B),E)},moveDown:function(){d("cometTypeaheadKeyboardNavigationUtils").moveDown(c("baseTypeaheadFlattenEntries")(n?H.current:B),E!=null?E.key:null,O)},moveUp:function(){d("cometTypeaheadKeyboardNavigationUtils").moveUp(c("baseTypeaheadFlattenEntries")(n?H.current:B),E!=null?E.key:null,O)},select:function(){var a=c("baseTypeaheadFlattenEntries")(n?H.current:B);v&&E!=null&&o(a,E)&&(r.isSessionActive()&&r.maybeEndSession(y,a,E),v(E))}}},[B,E,O,v,r,y]);A=c("useBaseTypeaheadDataSourceFetch")({dataSource:f,onResolvePayload:i(function(a){a=a.entries;if(n){var b;H.current=a;N();var d=c("baseTypeaheadFlattenEntries")(a),e=d[0];b=D==null?void 0:(b=D.current)==null?void 0:b.key;e!=null&&!d.map(function(a){return a.key}).includes(b)&&(F(e),D.current=e)}else C(a);t&&t(a.length>0)},[t,N])});A[0];var P=A[1];j(function(){P({query:y})},[P,y,f]);b=i(function(a){var b=c("baseTypeaheadFlattenEntries")(n?H.current:B);v&&o(b,a)&&(r.isSessionActive()&&r.maybeEndSession(y,b,a),v(a))},[v,B,r,y]);j(function(){var a=c("baseTypeaheadFlattenEntries")(B);!o(a,E)&&a.length>0&&O(a[0])},[E,O,B]);j(function(){if(!n)return;function a(a,b){a=a.parentElement;while(a!=null&&a!==b)a=a.parentElement;return a===b}var b=function(b){b=b.target;if(!(b instanceof HTMLElement))return;var c=I.current;c=c!==null&&(b===c||a(b,c));b=p!==null&&(b===p||a(b,p));J.current=c||b;N()};document.addEventListener("click",b);return function(){return document.removeEventListener("click",b)}},[p,N]);var Q=l(!1);A=i(function(a){if(n)return;var b=Q.current;b!==a&&(Q.current=a,w(a),a?r.startSession(y):r.isSessionActive()&&r.maybeEndSession(y,c("baseTypeaheadFlattenEntries")(B)))},[B,w,r,y]);if(n){if(!L)return null}else{if(!g||B.length===0){A(!1);return null}A(!0)}return h.jsx(q,{ariaProps:{role:"listbox"},context:e,entries:n?H.current:B,highlightedEntry:E,isLoading:!1,onAriaChange:s,onBlur:a.onBlur,onHighlightEntry:O,onPressEntry:b,onPressEntryIn:b,position:x,queryString:y,viewRef:I,viewStrategyRenderer:z})}a.displayName=a.name+" [from "+f.id+"]";function o(a,b){if(b==null)return!1;var c=b.key;return a.find(function(a){return a.key===c})!=null}e=h.forwardRef(a);g["default"]=e}),98);
__d("mlcFocusSubscription",["Lexical","LexicalUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{initialValueFn:function(){return a.getRootElement()===document.activeElement},subscribe:function(b){return d("LexicalUtils").mergeRegister(a.registerCommand(d("Lexical").FOCUS_COMMAND,function(){b(!0);return!1},d("Lexical").COMMAND_PRIORITY_LOW),a.registerCommand(d("Lexical").BLUR_COMMAND,function(){b(!1);return!1},d("Lexical").COMMAND_PRIORITY_LOW))}}}g["default"]=a}),98);
__d("useCometMentionsBootstrapForLexical",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a,b){var c=i(!1);h(function(){if(c.current)return;var e=a.getRootElement()===document.activeElement;if(e){b();c.current=!0;return}var f=a.registerCommand(d("Lexical").FOCUS_COMMAND,function(){b();c.current=!0;f();return!1},d("Lexical").COMMAND_PRIORITY_LOW);return f},[b,a,c])}g["default"]=a}),98);
__d("MentionsSessionEndWithoutClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("445");b=d("FalcoLoggerInternal").create("mentions_session_end_without_click",a);e=b;g["default"]=e}),98);
__d("MentionsSessionStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("446");b=d("FalcoLoggerInternal").create("mentions_session_start",a);e=b;g["default"]=e}),98);
__d("MentionsSuggestionClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("447");b=d("FalcoLoggerInternal").create("mentions_suggestion_clicked",a);e=b;g["default"]=e}),98);
__d("CometMentionsLoggingProvider",["MentionsSessionEndWithoutClickFalcoEvent","MentionsSessionStartFalcoEvent","MentionsSuggestionClickedFalcoEvent","guid","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!1,this.$3=null,this.$1=a}var b=a.prototype;b.getSessionID=function(){this.$3==null&&c("recoverableViolation")("Mentions logging sessionID does not exist.","search");return this.$3};b.isSessionActive=function(){return this.$2};b.startSession=function(a){var b=this;if(a==null)return;var d=c("guid")();this.$3=d;this.$2=!0;c("MentionsSessionStartFalcoEvent").log(function(){return babelHelpers["extends"]({},b.$1,{session_id:d,typed_query:a})})};b.maybeEndSession=function(a,b,d){if(a==null)return;var e=b!=null?JSON.stringify(b.map(function(a){return{id:a.key}})):null,f=babelHelpers["extends"]({},this.$1,{serialized_candidate_suggestions:e,session_id:this.getSessionID(),typed_query:a});if(d!=null){var g=d.key,h=(e=b==null?void 0:b.findIndex(function(a){return a.key===g}))!=null?e:null,i=isNaN(parseInt(d.key,10))?"0":d.key;c("MentionsSuggestionClickedFalcoEvent").log(function(){return babelHelpers["extends"]({},f,{selected_position:String(h),selected_result_display_text:d.label,selected_result_id:i,selected_result_id_string:d.key})})}else c("MentionsSessionEndWithoutClickFalcoEvent").log(function(){return f});this.$3=null;this.$2=!1};return a}();g["default"]=a}),98);
__d("useCometMentionsLoggingProvider",["CometMentionsLoggingProvider","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo,i={context_id:null,context_type:"unknown",surface:null,typeahead_type:null};function a(a){a===void 0&&(a=i);return h(function(){return new(c("CometMentionsLoggingProvider"))(a)},[a])}g["default"]=a}),98);
__d("useCometMentionsResolutionForLexical",["getCometComposerMentionsSearchForLexical","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.startTransition,i=b.useEffect,j=b.useState;function k(a,b){var c=window.getSelection();if(c===null||!c.isCollapsed||a===null)return!1;var d=c.anchorNode;a=a.leadOffset;c=c.anchorOffset;try{b.setStart(d,a),b.setEnd(d,c)}catch(a){return!1}return!0}function a(a,b){var d=j(null),e=d[0],f=d[1];i(function(){var d=document.createRange(),e=null,g=null,i=null,j=function(){var j=d,l=c("getCometComposerMentionsSearchForLexical")(a);if(l===e||j===null)return;e=l;l=b(l);var m=l.dataSource,n=l.searchResult;if(m===g&&n===i)return;l=k(n,j);g=m;i=n;!l||m===null||n===null?h(function(){return f(null)}):h(function(){f({dataSource:m,range:j,searchResult:n})})},l=a.registerUpdateListener(j);j();return function(){d=null,l()}},[b,a]);return e}g["default"]=a}),98);
__d("CometMentionsForLexical.react",["CometLexicalContentEditableCommands","CometMentions.react","FBLogger","Lexical","LexicalText","LexicalUtils","emptyFunction","getCometComposerMentionsSearchForLexical","mlcFocusSubscription","react","recoverableViolation","useCometLexicalSubscription","useCometMentionsBootstrapForLexical","useCometMentionsLoggingProvider","useCometMentionsResolutionForLexical","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState;function a(a){var b=a.createNodeStrategy,e=a.dataSourceResolverConfig,f=e.bootstrap,g=e.resolver,m=a.editor;e=a.layoutStrategyRenderer;var o=a.mentionsHandlerForSelectedEntry,r=a.mentionsLoggerContext,s=a.position;s=s===void 0?"below":s;a=a.viewStrategyRenderer;var t=c("useCometMentionsResolutionForLexical")(m,g),u=c("useUnsafeRef_DEPRECATED")(!1),v=n(m),w=v[0],x=v[1],y=l(null),z=q(m);v=k(function(){return c("mlcFocusSubscription")(m)},[m]);v=c("useCometLexicalSubscription")(v);c("useCometMentionsBootstrapForLexical")(m,f);j(function(){return m.registerCommand(d("Lexical").BLUR_COMMAND,function(){z();return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[m,z]);f=i(function(){z()},[z]);j(function(){var a=[{handler:function(a){if(a.hasSelection()){a.select();return!0}return!1},type:d("Lexical").KEY_ENTER_COMMAND},{handler:function(a){if(a.hasSelection()){a.select();return!0}return!1},type:d("Lexical").KEY_TAB_COMMAND},{handler:function(a){a.moveUp();return!0},type:d("Lexical").KEY_ARROW_UP_COMMAND},{handler:function(a){a.moveDown();return!0},type:d("Lexical").KEY_ARROW_DOWN_COMMAND},{handler:function(){z();x();return!0},type:d("Lexical").KEY_ESCAPE_COMMAND}];return d("LexicalUtils").mergeRegister.apply(void 0,a.map(function(a){var b=a.handler;a=a.type;return m.registerCommand(a,function(a){var c=y.current,d=u.current;if(c===null||!d||w)return!1;if(b(c)){d=a;d.preventDefault();d.stopPropagation();return!0}return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL)}))},[x,m,z,w]);var A=i(function(a){u.current=a},[]),B=i(function(a){if(a)return;z()},[z]),C=i(function(a){var d=c("getCometComposerMentionsSearchForLexical")(m);if(d==null){c("FBLogger")("search").warn("Race condition where the user selected a mention but theres no text in the editor");return}var e=g(d);e=e.searchResult;if(e==null){c("recoverableViolation")("onPressEntry was called and no search result was found for the query "+d,"CometComposer");return}z();d=o==null?void 0:o(a);if(d!=null&&!d.shouldMentionSelectedEntry)return;p(m,b,a,e);x()},[b,g,x,m,z,o]);r=c("useCometMentionsLoggingProvider")(r);if(t===null||w){z();u.current=!1;return null}return h.jsx(c("CometMentions.react"),{context:t.range,dataSource:t.dataSource,editorHasFocus:v,inputElement:m.getRootElement(),layoutStrategyRenderer:e,loggingProvider:r,onAriaChange:z,onBlur:f,onEntriesUpdated:B,onFocus:c("emptyFunction"),onSelectedEntry:C,onVisibilityChange:A,position:s,queryString:t.searchResult.matchingString,ref:y,viewStrategyRenderer:a})}a.displayName=a.name+" [from "+f.id+"]";function n(a){var b=m(!1),c=b[0],e=b[1];j(function(){if(c){var b=a.getEditorState().read(d("LexicalText").$rootTextContent);return a.registerTextContentListener(function(a){b!==null&&a!==b&&e(!1),b=a})}},[a,c]);return k(function(){return[c,function(){return e(!0)}]},[c])}function o(a,b,c){c=c;for(var d=c;d<=b.length;d++)a.substr(-d)===b.substr(0,d)&&(c=d);return c}function p(a,b,c,e){a.update(function(){var a=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(a)||!a.isCollapsed())return;a=a.anchor;if(a.type!=="text")return;var f=a.getNode();if(!f.isSimpleText())return;a=a.offset;var g=f.getTextContent().slice(0,a),h=c.label,i=e.replaceableString.length;g=o(g,h,i);h=a-g;if(h<0)return;b({anchorNode:f,endOffset:a,selectedEntry:c,startOffset:h})})}function q(a){var b=l(void 0),c=l(void 0);return i(function(e,f){var g=b.current,h=c.current;(g!==e||h!==f)&&(b.current=e,c.current=f,a.dispatchCommand(d("CometLexicalContentEditableCommands").COMET_LEXICAL_ARIA_COMMAND,{activeDescendantID:e,controlsID:f}))},[a])}g["default"]=a}),98);
__d("cometMentionsDataEntryText",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return(b=a.handle)!=null?b:a.label}f["default"]=a}),66);
__d("useCometMentionsDataSourceResolverConfig",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useLayoutEffect,j=b.useMemo;function a(a,b){var c=h(function(){a.forEach(function(a){a=a.dataSource;a.bootstrap()})},[a]);i(function(){if(!b)return;c()},[b,c]);return j(function(){var b=new Map();return{bootstrap:c,resolver:function(c){var d={dataSource:null,searchResult:null};if(c==null)return d;var e=b.get(c);if(e!=null)return e;for(e=0;e<a.length;e++){var f=a[e],g=f.dataSource;f=f.matchStrategy;f=f.findMentionableString(c);if(f!=null){g={dataSource:g,searchResult:f};b.set(c,g);return g}}b.set(c,d);return d}}},[a,c])}g["default"]=a}),98);
__d("CometMentionsViewListStrategy.react",["CometCompositeStructureContext","TetraText.react","getItemRoleFromCompositeRole","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.ariaProps,d=a.entries;a.extraViewProps;var e=a.highlightedEntry;a.isLoading;a.onAbandonTypeahead_DO_NOT_USE;var f=a.viewItemStrategyRenderer,g=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","entries","extraViewProps","highlightedEntry","isLoading","onAbandonTypeahead_DO_NOT_USE","viewItemStrategyRenderer"]),j=b.role;a=i(function(){if(j!=null)return{role:j};else return{}},[j]);var k=c("getItemRoleFromCompositeRole")(j);return h.jsx("ul",babelHelpers["extends"]({},b,{className:"x78zum5 xdt5ytf x1iyjqo2","data-testid":void 0,children:h.jsx(c("CometCompositeStructureContext").Provider,{value:a,children:d.map(function(a){if(a.type==="section"){var b=a.entries,d=a.key,i=a.label;return b.length===0?null:h.jsxs("li",{children:[h.jsx("div",{className:"x889kno x1iji9kk x1a8lsjc x1sln4lm",children:h.jsx("label",{htmlFor:d,children:h.jsx(c("TetraText.react"),{color:"primary",type:"entityHeaderMeta2",children:i})})}),h.jsx("ul",{id:d,children:b.map(function(a){return h.createElement(f,babelHelpers["extends"]({},g,{entry:a,isActive:a.key===(e==null?void 0:e.key),key:a.key,role:k}))})})]},"section-"+d)}else return h.createElement(f,babelHelpers["extends"]({},g,{entry:a,isActive:a.key===(e==null?void 0:e.key),key:a.key,role:k}))})})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometTypeaheadProgressGlimmer.react",["CometProgressRingIndeterminate.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx("div",{className:"x6s0dn4 x78zum5 x1iyjqo2 xdd8jsf xl56j7k",children:h.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometMentionsViewListStrategy",["CometMentionsViewListStrategy.react","CometTypeaheadProgressGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.viewItemStrategyRenderer;return i(function(a){var d=a.isLoading;a=babelHelpers.objectWithoutPropertiesLoose(a,["isLoading"]);return h.jsxs(h.Fragment,{children:[h.jsx(c("CometMentionsViewListStrategy.react"),babelHelpers["extends"]({},a,{isLoading:!1,viewItemStrategyRenderer:b})),d&&h.jsx(c("CometTypeaheadProgressGlimmer.react"),{})]})},[b])}g["default"]=a}),98);
__d("cometBaseMentionsLexicalCreateNodeStrategy",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){var d=b.anchorNode,e=b.endOffset,f=b.selectedEntry;b=b.startOffset;if(b===0){var g=d.splitText(e);g=g[0]}else{d=d.splitText(b,e);g=d[1]}if(g==null){c("FBLogger")("search").mustfix("createMentionNodeFromSearchResult failed to find correct offsets. Found offsets: "+b+", "+e+".");return}d=a(f);g.replace(d);d.selectNext(0,0)}}g["default"]=a}),98);
__d("CometMediaViewerMentionsTypeaheadEmptyState.react",["fbt","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){return i.jsx("div",{className:"x6s0dn4 x78zum5 xc9qbxq xl56j7k",children:i.jsx(c("TetraText.react"),{color:"tertiary",type:"body2",children:h._("__JHASH__OS47R71wjM1__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometInternalTypeaheadFetchContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({fetch:c("emptyFunction"),isLoading:!1,refetch:c("emptyFunction"),source:"all"});g["default"]=b}),98);
__d("useCometInternalTypeaheadFetch",["CometInternalTypeaheadFetchContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(){return h(c("CometInternalTypeaheadFetchContext"))}g["default"]=a}),98);
__d("useCometTypeaheadViewLabel",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react").useMemo;function a(a){var b=a.activeEntries;return i(function(){var a=b.length;return a===0?h._("__JHASH__n-kQyB08R28__JHASH__"):h._("__JHASH__71Zs7ul5B_o__JHASH__",[h._plural(a,"number")])},[b])}g["default"]=a}),98);
__d("useCometTypeaheadLayoutContextualStrategyARIAProps",["react","useCometInternalTypeaheadFetch","useCometTypeaheadViewLabel","useCometUniqueID"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=a.activeEntries,d=a.helperText,e=a.highlightedEntry,f=a.inputLabel,g=f===void 0?"":f,i=a.isOpened,j=a.viewRole,k=c("useCometUniqueID")();f=c("useCometInternalTypeaheadFetch")();var l=f.isLoading,m=c("useCometUniqueID")(),n=c("useCometTypeaheadViewLabel")({activeEntries:b});return h(function(){var a=e!=null?{"aria-activedescendant":e.key}:{},c=i?{"aria-controls":k}:null,f=d!=null&&String(d).length>0?{"aria-describedby":m}:null,h={"aria-busy":l,"aria-label":n,id:k,role:j};return{ariaDescribedByProps:{id:m},ariaInputProps:babelHelpers["extends"]({},a,c,f,{"aria-autocomplete":"list","aria-expanded":b.length>0&&i,"aria-label":g,role:"combobox"}),ariaViewProps:h}},[b.length,m,d,e,g,l,i,k,j,n])}g["default"]=a}),98);
__d("useBaseMentionsLayoutStrategyARIAProps.react",["baseTypeaheadFlattenEntries","react","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=a.entries,d=a.highlightedEntry,e=a.onAriaChange;a=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:c("baseTypeaheadFlattenEntries")(b),helperText:"",highlightedEntry:d,inputLabel:"",isOpened:!0,viewRole:"listbox"});var f=a.ariaInputProps;b=a.ariaViewProps;h(function(){return e(f["aria-activedescendant"],f["aria-controls"])},[f,e]);return b}g["default"]=a}),98);
__d("CometSearchTypeaheadBaseLayoutMentionsStrategy.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","react","useBaseMentionsLayoutStrategyARIAProps.react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.isLoading,d=a.onAriaChange,e=a.viewStrategyRenderer;a=babelHelpers.objectWithoutPropertiesLoose(a,["isLoading","onAriaChange","viewStrategyRenderer"]);d=c("useBaseMentionsLayoutStrategyARIAProps.react")({entries:a.entries,highlightedEntry:a.highlightedEntry,onAriaChange:d});return h.jsxs("div",{children:[h.jsx(e,babelHelpers["extends"]({},a,{ariaProps:d,isLoading:!1})),!b&&a.entries.length===0?h.jsx(c("CometMediaViewerMentionsTypeaheadEmptyState.react"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMentionsLayoutStrategy.react",["CometContextualLayer.react","CometPopover.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.ariaProps,d=a.context,e=a.onBlur,f=a.position,g=a.viewRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","context","onBlur","position","viewRef"]);var i=c("CometSearchTypeaheadBaseLayoutMentionsStrategy.react");return h.jsx(c("CometContextualLayer.react"),{align:"start",context_DEPRECATED:d,position:f,children:h.jsx(c("CometPopover.react"),{onBlur:e,ref:g,role:"listbox",children:h.jsx(i,babelHelpers["extends"]({ariaProps:b,isLoading:!1},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseDataEntryLabelKeyBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.label.trimLeft().toLowerCase()}f["default"]=a}),66);
__d("BaseTypeaheadDataCacheProvider",["BaseDataEntryLabelKeyBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.cache,d=a.matchBuilder,e=a.mergeBuilder;a=a.keyBuilder;a=a===void 0?c("BaseDataEntryLabelKeyBuilder"):a;this.$1=b;this.$2=d;this.$3=e;this.$4=a}var b=a.prototype;b.add=function(a){var b=this;a.forEach(function(a){var c=b.$4(a),d=b.$1.get(c);b.$1.set(c,d!=null&&b.$3!=null?b.$3(a,d):a)})};b.clear=function(){this.$1.clear()};b.remove=function(a){a=this.$4(a);this.$1.remove(a)};b.match=function(a){var b=this.$2({query:a});return this.$1.values().map(function(a){return a.type==="section"?babelHelpers["extends"]({},a):babelHelpers["extends"]({},a)}).filter(function(a){if(a.type==="section"){a.entries=a.entries.filter(b);return!0}else return b(a)})};b.values=function(){return this.$1.values()};return a}();g["default"]=a}),98);
__d("BaseTypeaheadInMemoryMapDataCache",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.clear=function(){this.$1.clear()};b.get=function(a){return this.$1.get(a)};b.has=function(a){return this.$1.has(a)};b.remove=function(a){this.$1["delete"](a)};b.set=function(a,b){this.$1.set(a,b)};b.values=function(){return Array.from(this.$1.values())};return a}();f["default"]=a}),66);
__d("baseTypeaheadContainsMatchBuilder",["escapeRegex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.query;var b=new RegExp(""+c("escapeRegex")(a),"i");return function(a){return b.test((a=a.label)!=null?a:"")}}g["default"]=a}),98);
__d("baseTypeaheadStartsWithMatchBuilder",["escapeRegex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.query;var b=new RegExp("^"+c("escapeRegex")(a),"i");return function(a){return b.test((a=a.label)!=null?a:"")}}g["default"]=a}),98);
__d("baseTypeaheadPrefixWithDocumentContainsMatchBuilder",["baseTypeaheadContainsMatchBuilder","baseTypeaheadStartsWithMatchBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.query;return function(a){return a.key.includes("diff:")||a.key.includes("task:")||a.key.includes("gdocs:")||a.key.includes("quip:")||a.key.includes("notes:")||a.key.includes("wiki:")?c("baseTypeaheadContainsMatchBuilder")({query:b})(a):c("baseTypeaheadStartsWithMatchBuilder")({query:b})(a)}}g["default"]=a}),98);
__d("TokenizeUtil",["nullthrows"],(function(a,b,c,d,e,f,g){var h=/[ ]+/g,i=/[^ ]+/g;f=new RegExp("[^ "+l()+"]+|"+a(),"g");var j=new RegExp(a(),"g"),k=1e3;function l(){return".,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f\uff3b-\uff40\uff5b-\uff65\u2e2e\u061f\u066a-\u066c\u061b\u060c\u060d\ufd3e\ufd3f\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e\xa1-\xb1\xb4-\xb8\xba\xbb\xbf"}function a(){return"["+l()+"]"}var m={},n={a:"\u0430 \xe0 \xe1 \xe2 \xe3 \xe4 \xe5 \u0101",b:"\u0431",c:"\u0446 \xe7 \u010d",d:"\u0434 \xf0 \u010f \u0111",e:"\u044d \u0435 \xe8 \xe9 \xea \xeb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \xec \xed \xee \xef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \xf1 \u0148 \u0149 \u014b \u0146",o:"\u043e \xf8 \xf6 \xf5 \xf4 \xf3 \xf2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \xfe",u:"\u0443 \u044e \xfc \xfb \xfa \xf9 \u016f \u016b",v:"\u0432",y:"\u044b \xff \xfd",z:"\u0437 \u017e",ae:"\xe6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\xdf",ya:"\u044f"};for(var o in n){var p=n[o].split(" ");for(var q=0;q<p.length;q++)m[p[q]]=o}function b(a){return a.replace(j," ")}function r(a){a=a.toLowerCase();var b="",c;for(var d=a.length;d--;)c=a.charAt(d),b=(m[c]||c)+b;return b.replace(h," ")}function s(a,b){b===void 0&&(b=i);var c=[],d=b.exec(a);while(d){var e=d[0];c.push(e);d=b.exec(a)}return c}function d(a,b){b===void 0&&(b=i);var c={},d=0;return function(e,f){if(!Object.prototype.hasOwnProperty.call(c,e)){d>=k&&(c={},d=0);var g=r(e),h=a(g);c[e]={value:e,flatValue:g,tokens:s(h,b),isPrefixQuery:!!h&&h[h.length-1]!=" "};d++}f!=null&&f!==!1&&c[e].sortedTokens===void 0&&(c[e].sortedTokens=c[e].tokens.slice(),c[e].sortedTokens.sort(function(a,b){return b.length-a.length}));return c[e]}}var t=d(b),u=d(function(a){return a},f);function e(a,b,d){var e=a=="query"||a=="query_punc",f=a=="aligned",g=a=="query_punc"?u:t;b=g(b,a=="prefix");var h=a=="prefix"?c("nullthrows")(b.sortedTokens):b.tokens,i=g(d).tokens,j={},k=b.isPrefixQuery&&(e||f)?h.length-1:null;g=function(b,c){for(var d=0;d<i.length;++d){var g=i[d];if(!j[d]&&(g==b||((e||f)&&c===k||a=="prefix")&&g.indexOf(b)===0))return j[d]=!0;if(f&&!j[d])return!1}return!1};return Boolean(h.length&&h.every(g))}p={flatten:r,parse:t,parseIncludingPunctuations:u,getPunctuation:a,makeParse:d,isExactMatch:e.bind(null,"exact"),isQueryMatch:e.bind(null,"query"),isQueryMatchIncludingPunctuations:e.bind(null,"query_punc"),isAlignedMatch:e.bind(null,"aligned"),isPrefixMatch:e.bind(null,"prefix"),tokenize:s};q=p;g["default"]=q}),98);
__d("baseTypeaheadQueryMatchBuilder",["TokenizeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.query;return function(a){return c("TokenizeUtil").isQueryMatch(b,a.label)}}g["default"]=a}),98);
__d("CometTypeaheadGraphQLBootstrapDataSource",["BaseTypeaheadDataCacheProvider","BaseTypeaheadInMemoryMapDataCache","baseTypeaheadContainsMatchBuilder","baseTypeaheadPrefixWithDocumentContainsMatchBuilder","baseTypeaheadQueryMatchBuilder","baseTypeaheadStartsWithMatchBuilder","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={prefix:c("baseTypeaheadStartsWithMatchBuilder"),prefix_with_document_substring:c("baseTypeaheadPrefixWithDocumentContainsMatchBuilder"),substring:c("baseTypeaheadContainsMatchBuilder"),token:c("baseTypeaheadQueryMatchBuilder")};a=function(){function a(a){var b=a.bootstrapDataProvider,d=a.matchStrategy;d=d===void 0?"prefix":d;a=a.normalize;this.$2=!1;this.$1=new(c("BaseTypeaheadDataCacheProvider"))({cache:new(c("BaseTypeaheadInMemoryMapDataCache"))(),matchBuilder:h[d]});this.$3=a;this.$4=b}var b=a.prototype;b.isBootstrapped=function(){return this.$2};b.bootstrap=function(){var a=this;c("promiseDone")(this.$4.fetch({query:""}).then(function(b){b=b.response;return a.$3(b)}).then(function(b){a.$1.add(b,null)}).then(function(){return a.$2=!0}))};b.fetchCache=function(a){var b=a.query;b=this.$1.match(b);return{entries:b,params:a}};return a}();g["default"]=a}),98);
__d("XPlatReactRelayErrorHandling",["CometRelayErrorHandling"],(function(a,b,c,d,e,f){"use strict";a=importNamespace("CometRelayErrorHandling").markErrorAsHandled;f.markErrorAsHandled=a}),66);
__d("BaseTypeaheadDataProvider",["CometRelay","Promise","XPlatReactRelayErrorHandling"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.onError,c=a.options,d=a.query,e=a.queryVariablesBuilder;a=a.relayEnvironment;this.$1=b;this.$2=d;this.$3=e;this.$4=a;this.$5=c}var c=a.prototype;c.fetch=function(a){var c=this,e=this.$3.build(),f=e(a);return new(b("Promise"))(function(a,b){var e,g=!1;d("CometRelay").fetchQuery(c.$4,c.$2,f,{fetchPolicy:(e=c.$5)==null?void 0:e.fetchPolicy}).subscribe({error:function(a){d("XPlatReactRelayErrorHandling").markErrorAsHandled(a),c.$1!=null&&c.$1(a),b(a)},next:function(b){g||(g=!0,a({requestQueryVariables:f,response:b}))}})})};return a}();g["default"]=a}),98);
__d("BaseTypeaheadDataProviderQueryVariablesBuilder",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=null,this.$2=null,this.$3=a}var b=a.prototype;b.build=function(){return this.$3(this.$1,this.$2)};b.setComputedVariables=function(a){this.$2=a;return this};b.setDefaultVariables=function(a){this.$1=a;return this};return a}();f["default"]=a}),66);
__d("searchBaseTypeaheadTakeNEntriesFromSectionedEntries",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(b===0)return[];b=g(a,b);var c=b.entryIndex;b=b.entryUnionIndex;if(b===void 0)return a;a=a.slice(0,b+1);if(c!==void 0&&b!==void 0){b=a[b];b.type==="section"&&(b.entries=b.entries.slice(0,c+1))}return a}function g(a,b){b=b;for(var c=0;c<a.length;c++){var d=a[c];if(d.type!=="section"){b--;if(b===0)return{entryUnionIndex:c}}else if(b<=d.entries.length)return{entryIndex:b-1,entryUnionIndex:c};else b-=d.entries.length}return{}}f["default"]=a}),66);
__d("BaseTypeaheadPayloadDecoratorAddLimit",["searchBaseTypeaheadTakeNEntriesFromSectionedEntries"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){var d=b.entries;return babelHelpers["extends"]({},b,{entries:c("searchBaseTypeaheadTakeNEntriesFromSectionedEntries")(d,a)})}}g["default"]=a}),98);
__d("useCustomEqualityMemo",["react","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a,b){var d=c("useUnsafeRef_DEPRECATED")(a),e=b(d.current,a)?d.current:a;h(function(){d.current=e},[e]);return e}g["default"]=a}),98);
__d("useDeepEqualMemo",["areEqual","useCustomEqualityMemo"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useCustomEqualityMemo")(a,c("areEqual"))}g["default"]=a}),98);
__d("useCometTypeaheadCompositeBootstrapDataSource",["BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadPayloadDecoratorAddLimit","CometRelay","CometTypeaheadGraphQLBootstrapDataSource","react","useDeepEqualMemo"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=a.fetchPolicy,e=a.gqlQuery,f=a.limit,g=a.matchStrategy,i=a.normalize,j=a.queryVariables,k=h(function(){return c("BaseTypeaheadPayloadDecoratorAddLimit")(f)},[f]),l=d("CometRelay").useRelayEnvironment();a=c("useDeepEqualMemo")(j);var m=h(function(){var a=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(function(){return function(){return j}});a=new(c("BaseTypeaheadDataProvider"))({options:{fetchPolicy:b},query:e,queryVariablesBuilder:a,relayEnvironment:l});return new(c("CometTypeaheadGraphQLBootstrapDataSource"))({bootstrapDataProvider:a,matchStrategy:g,normalize:i})},[a,l]);return h(function(){return{bootstrap:function(){return m.bootstrap()},fetchCache:function(a){return k(m.fetchCache(a))}}},[m,k])}g["default"]=a}),98);
__d("getUpgradedCometEmojiComposerHandler",["CometLexicalEmojiNode","EmojiRenderer","FBEmojiResource","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=a.registerNodeTransform(d("Lexical").TextNode,function(a){if(!a.isSimpleText())return;var e=a.getTextContent(),f=a,g=0;d("EmojiRenderer").parse(e).forEach(function(e){var h=e.emoji,i=e.length;e=e.offset;var j=h.join("");h=c("FBEmojiResource").fromCodepoints(h);if(h==null)return;h=h.getImageURL(b);if(h==null)return;var k=j;j=d("CometLexicalEmojiNode").$createEmojiNode(j,k,h,b);k=e-g;h=k+i;if(k===0){e=f.splitText(h);a=e[0];f=e[1]}else{i=f.splitText(k,h);a=i[1];f=i[2]}g+=h;a.replace(j);j})});return function(){e()}}g["default"]=a}),98);
__d("getHashtagRegexStringChars",[],(function(a,b,c,d,e,f){"use strict";function a(){var a="\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff",b="\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc",c=String.fromCharCode;c="\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff"+c(173824)+"-"+c(177983)+c(177984)+"-"+c(178207)+c(194560)+"-"+c(195103)+"\u3003\u3005\u303b";a=a+b+c;b="A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u0241\u0250-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03f5\u03f7-\u0481\u048a-\u04ce\u04d0-\u04f9\u0500-\u050f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u076d\u0780-\u07a5\u07b1\u0904-\u0939\u093d\u0950\u0958-\u0961\u097d\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029-\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u1a00-\u1a16\u1d00-\u1dbf\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213c-\u213f\u2145-\u2149\u2c00-\u2c2e\u2c30-\u2c5e\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fbb\ua000-\ua48c\ua800-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";c="\u0300-\u036f\u0483-\u0486\u0591-\u05b9\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u0615\u064b-\u065e\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u0901-\u0903\u093c\u093e-\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d82-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2-\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f3f\u0f71-\u0f84\u0f86-\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102c-\u1032\u1036-\u1039\u1056-\u1059\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8-\u19c9\u1a17-\u1a1b\u1dc0-\u1dc3\u20d0-\u20dc\u20e1\u20e5-\u20eb\u302a-\u302f\u3099-\u309a\ua802\ua806\ua80b\ua823-\ua827\ufb1e\ufe00-\ufe0f\ufe20-\ufe23";var d="0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\uff10-\uff19";b=b+c+a;c=d+"_";a=b+c;d="#\\uFF03";return{alpha:b,alphanumeric:a,hashChars:d}}f["default"]=a}),66);
__d("getHashtagRegexString",["getHashtagRegexStringChars"],(function(a,b,c,d,e,f){function a(){var a=b("getHashtagRegexStringChars")(),c=a.alpha,d=a.alphanumeric;a=a.hashChars;c="["+c+"]";var e="["+d+"]";d="^|$|[^&/"+d+"]";a="["+a+"]";d="("+d+")("+a+")("+e+"*"+c+e+"*)";return d}f["default"]=a}),66);
__d("getUpgradedCometHashtagComposerHandler",["FBLogger","LexicalHashtag","LexicalText","LexicalUtils","getHashtagRegexString"],(function(a,b,c,d,e,f,g){"use strict";var h=new RegExp(c("getHashtagRegexString")(),"i");function a(a){if(!a.hasNodes([d("LexicalHashtag").HashtagNode]))throw c("FBLogger")("outline_ufi").mustfixThrow("HashtagPlugin: HashtagNode not registered on editor");var b=function(a){return d("LexicalHashtag").$createHashtagNode(a.getTextContent())},e=function(a){a=h.exec(a);if(a===null)return null;var b=a[3].length+1;a=a.index+a[1].length;b=a+b;return{end:b,start:a}};return d("LexicalUtils").mergeRegister.apply(void 0,d("LexicalText").registerLexicalTextEntity(a,e,d("LexicalHashtag").HashtagNode,b))}g["default"]=a}),98);
__d("MLCHealthLoggerEvent",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DAILY_INTERACTION_WITH_SURFACE:"daily_interaction_with_surface",COMMIT_CREATE:"commit_create",COMMIT_EDIT:"commit_edit"});c=a;f["default"]=c}),66);
__d("MlcHealthBizappEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2646");b=d("FalcoLoggerInternal").create("mlc_health_bizapp_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthCareerProfileEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3833");b=d("FalcoLoggerInternal").create("mlc_health_career_profile_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookAndWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2647");b=d("FalcoLoggerInternal").create("mlc_health_facebook_and_workplace_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2648");b=d("FalcoLoggerInternal").create("mlc_health_facebook_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInstagramEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3766");b=d("FalcoLoggerInternal").create("mlc_health_instagram_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInternalToolsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2649");b=d("FalcoLoggerInternal").create("mlc_health_internal_tools_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthMessagingLightswitchEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2650");b=d("FalcoLoggerInternal").create("mlc_health_messaging_lightswitch_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2651");b=d("FalcoLoggerInternal").create("mlc_health_workplace_event",a);e=b;g["default"]=e}),98);
__d("MLCHealthInstrumentationPlugin__INTERNAL.react",["FBLogger","Lexical","LexicalComposerContext","LexicalUtils","MLCInstrumentationCommands","MlcHealthBizappEventFalcoEvent","MlcHealthCareerProfileEventFalcoEvent","MlcHealthFacebookAndWorkplaceEventFalcoEvent","MlcHealthFacebookEventFalcoEvent","MlcHealthInstagramEventFalcoEvent","MlcHealthInternalToolsEventFalcoEvent","MlcHealthMessagingLightswitchEventFalcoEvent","MlcHealthWorkplaceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useLayoutEffect,i=new Set();function j(a){switch(a){case"facebook":return c("MlcHealthFacebookEventFalcoEvent");case"workplace":return c("MlcHealthWorkplaceEventFalcoEvent");case"facebook_and_workplace":return c("MlcHealthFacebookAndWorkplaceEventFalcoEvent");case"internal_tools":return c("MlcHealthInternalToolsEventFalcoEvent");case"messaging_lightswitch":return c("MlcHealthMessagingLightswitchEventFalcoEvent");case"bizapp":return c("MlcHealthBizappEventFalcoEvent");case"instagram":return c("MlcHealthInstagramEventFalcoEvent");case"career_profile":return c("MlcHealthCareerProfileEventFalcoEvent");default:a}throw c("FBLogger")("lexical").mustfixThrow("Policy product not handled by exhaustive switch-case?")}function k(a,b,c){j(a).log(function(){return{event:c,surface:b}})}function a(a){var b=a.editor__DEPRECATED,c=a.policyProduct,e=a.surface,f;if(b)f=b;else{a=d("LexicalComposerContext").useLexicalComposerContext();f=a[0]}h(function(){var a=function(){};i.has(e)||(a=f.registerUpdateListener(function(b){var d=b.dirtyLeaves;b=b.tags;if(i.has(e)){a();return}if(d.size===0||b.has("history-merge")||!f.isEditable())return;i.add(e);k(c,e,"daily_interaction_with_surface");a()}));return d("LexicalUtils").mergeRegister(a,f.registerCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,function(a){a==="create"?k(c,e,"commit_create"):k(c,e,"commit_edit");return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL))},[f,c,e]);return null}g["default"]=a}),98);
__d("MLCInteractionInstrumentationPlugin__INTERNAL.react",["cr:3286","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return b("cr:3286")&&h.jsx(b("cr:3286"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MLCTypingPerformancePlugin__INTERNAL.react",["LexicalComposerContext","LexicalText","cr:2012305","cr:308","cr:3287","cr:5452","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useLayoutEffect,j=b("cr:2012305")||b("cr:308");e=(c=b("cr:5452"))!=null?c:{};var k=e.getTextLengthBucket;function a(a){if(j===null)return null;b("cr:3287")&&b("cr:3287")();return h.jsx(l,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";function l(a){var b=a.editor__DEPRECATED,c=a.format__DEPRECATED,e=a.surface;a=a.typingPerformanceID;var f=a===void 0?"":a,g;if(b)g=b;else{a=d("LexicalComposerContext").useLexicalComposerContext();g=a[0]}i(function(){var a=babelHelpers["extends"]({},k==null?null:{textLengthBucket:k(g.getEditorState().read(d("LexicalText").$rootTextContent).length)}),b;h();function h(){b==null?void 0:b();if(j===null)return;var d=null,h=g.registerRootListener(function(b){if(b===d)return;d!==null&&j.unregisterTypingPerf(d);if(b!==null){var g;j.trackTypingPerf(b,e,d,babelHelpers["extends"]({},a,{editor:"LexicalEditor",format:(g=c)!=null?g:"",typingPerformanceID:f}))}d=b});b=function(){h(),d!==null&&j.unregisterTypingPerf(d)}}var i=k==null?null:g.registerTextContentListener(function(b){b=k(b.length);if(b===a.textLengthBucket)return;a.textLengthBucket=b;h()});return function(){b==null?void 0:b(),i==null?void 0:i()}},[f,g,c,e]);return null}g["default"]=a}),98);
__d("MLCInstrumentationPlugin__INTERNAL.react",["MLCHealthInstrumentationPlugin__INTERNAL.react","MLCInteractionInstrumentationPlugin__INTERNAL.react","MLCTypingPerformancePlugin__INTERNAL.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b="facebook";b;function a(a){return h.jsxs(h.Fragment,{children:[h.jsx(c("MLCTypingPerformancePlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),h.jsx(c("MLCHealthInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),h.jsx(c("MLCInteractionInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g,h){"use strict";var i=36,j=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof c("FbtResultBase")},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||h(0,3714,a,b)},checkMergeObjectArgs:function(a,b){k.checkMergeObjectArg(a),k.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!j(a)&&!Array.isArray(a)||h(0,3715,a)},checkMergeIntoObjectArg:function(a){(!j(a)||typeof a==="function")&&!Array.isArray(a)||h(0,3716,a)},checkMergeLevel:function(a){a<i||h(0,3717)},checkArrayStrategy:function(a){a==null||a in k.ArrayStrategies||h(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};a=k;g["default"]=a}),98);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){a=c("mergeHelpers").normalizeMergeArg(a);b=c("mergeHelpers").normalizeMergeArg(b);c("mergeHelpers").checkMergeObjectArgs(a,b);c("mergeHelpers").checkArrayStrategy(d);var e={};c("mergeDeepInto")(e,a,d);c("mergeDeepInto")(e,b,d);return e}g["default"]=a}),98);
__d("BaseTypeaheadNetworkDataSource",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.fetchNetwork=function(a){var b=this;return this.$1.fetch(a).then(function(c){var d=c.requestQueryVariables;c=c.response;return{entries:b.$2(c,d),params:a}})};return a}();f["default"]=a}),66);
__d("BaseTypeaheadNetworkCacheDataSource",["BaseTypeaheadNetworkDataSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){d=d.normalizeFunc;this.$1=new(c("BaseTypeaheadNetworkDataSource"))(a,d);this.$2=b}var b=a.prototype;b.fetchCache=function(a){var b=a.query;b=this.$2.match(b);return{entries:b,params:a}};b.fetchNetwork=function(a){var b=this,c=a.query;return this.$1.fetchNetwork(a).then(function(d){d=d.entries;d!=null&&b.$2.add(d,c);return{entries:b.$2.match(c),params:a}})};return a}();g["default"]=a}),98);
__d("baseTypeaheadLabelSuffixBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.label.trimLeft().toLowerCase();return b==null||!a.startsWith(b)?"":a.slice(b.length)}f["default"]=a}),66);
__d("baseTypeaheadFetchPayloadDecorate",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b===void 0&&(b=[]);var c=a;b.forEach(function(a){c=a(c)});return c}f["default"]=a}),66);
__d("BaseCacheEntryLabelKeyBuilder",["BaseDataEntryLabelKeyBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("BaseDataEntryLabelKeyBuilder")(a.entry)}g["default"]=a}),98);
__d("baseTypeaheadDedupEntriesBuilder",["baseTypeaheadFlattenEntries"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,d){var e=new Set(c("baseTypeaheadFlattenEntries")(b).map(function(b){return a(b)})),f=new Map();for(var g of b){if(g.type!=="section")continue;f.set(g.key,g)}g=d.map(function(b){if(b.type==="section"){var c=b.entries.filter(function(b){return!e.has(a(b))});if(c.length===0)return null;var d=f.get(b.key);if(d!=null){d.entries=[].concat(d.entries,c);return null}else{b.entries=c;return b}}else return e.has(a(b))?null:b}).filter(Boolean);return[].concat(b,g)}}g["default"]=a}),98);
__d("BaseTypeaheadQueryDataCacheProvider",["BaseCacheEntryLabelKeyBuilder","BaseTypeaheadInMemoryMapDataCache","baseTypeaheadDedupEntriesBuilder","baseTypeaheadLabelSuffixBuilder","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a=a===void 0?{}:a;var b=a.dedupe;a=a.suffixBuilder;this.$1=new(c("BaseTypeaheadInMemoryMapDataCache"))();this.$2=(b=b)!=null?b:c("baseTypeaheadDedupEntriesBuilder")(c("BaseCacheEntryLabelKeyBuilder"));this.$3=(b=a)!=null?b:c("baseTypeaheadLabelSuffixBuilder")}var b=a.prototype;b.add=function(a,b){b===void 0&&(b="");b=((b=b)!=null?b:"").trimLeft().toLowerCase();a=this.$4(a,b);this.$1.set(b,a)};b.clear=function(){this.$1.clear()};b.match=function(a){a=a.trimLeft().toLowerCase();if(a===""){var b;return((b=this.$1.get(a))!=null?b:[]).map(function(a){a=a.entry;return a})}b=[];for(var c=1;c<=a.length;c++){var d=a.substring(0,c),e=a.substring(c,a.length);d=this.$5(d,e);b=this.$2(b,d)}return b.map(function(a){a=a.entry;return a})};b.remove=function(a){c("recoverableViolation")("'remove' is not implemented for BaseTypeaheadQueryDataCacheProvider","search")};b.$5=function(a,b){a=(a=this.$1.get(a))!=null?a:[];return a.map(function(a){return!a.suffix.startsWith(b)&&a.suffix!==b.trim()?null:a}).filter(Boolean)};b.$4=function(a,b){var c=this;return a.map(function(a){return{entry:a,suffix:c.$3(a,b)}})};b.values=function(){c("recoverableViolation")("'entries' is not implemented for BaseTypeaheadQueryDataCacheProvider","search");return[]};return a}();g["default"]=a}),98);
__d("BaseDataEntryKeyBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.key;return a.trimLeft().toLowerCase()}f["default"]=a}),66);
__d("BaseCacheEntryKeyBuilder",["BaseDataEntryKeyBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("BaseDataEntryKeyBuilder")(a.entry)}g["default"]=a}),98);
__d("CometTypeaheadCompositeDataSource",["BaseDataEntryKeyBuilder","Promise","baseTypeaheadDedupEntriesBuilder","baseTypeaheadFlattenEntries"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.bootstrapDataSource,c=a.limit,d=a.networkDataSource;a=a.nullstateDataSource;this.$1=!1;this.$2=b;this.$3=c;this.$4=d;this.$5=a}var d=a.prototype;d.bootstrap=function(){if(this.$1)return;this.$2!=null&&this.$2.bootstrap();this.$5!=null&&this.$5.fetchNetwork({query:""});this.$1=!0};d.fetchCache=function(a){var b=a.query;if(this.$5!=null&&b==="")return this.$5.fetchCache(a);if(b==="")return{entries:[],params:a};if(this.$2==null)return this.$4!=null?this.$4.fetchCache(a):{entries:[],params:a};b=this.$2.fetchCache(a);var d=b.entries,e=c("baseTypeaheadFlattenEntries")(d).length;if(e>=this.$3||this.$4==null)return b;e=this.$4.fetchCache(a);b=e.entries;a=e.params;e=c("baseTypeaheadDedupEntriesBuilder")(c("BaseDataEntryKeyBuilder"))((e=d)!=null?e:[],(d=b)!=null?d:[]);return{entries:e,params:a}};d.fetchNetwork=function(a){var d=a.query;if(this.$5!=null&&d==="")return this.$5.fetchNetwork(a);if(d==="")return b("Promise").resolve({entries:[],params:a});d=this.$2;if(d==null&&this.$4==null)return b("Promise").resolve({entries:[],params:a});if(d==null)return this.$4!=null?this.$4.fetchNetwork(a):b("Promise").resolve({entries:[],params:a});var e=d.fetchCache(a);return this.$4==null?b("Promise").resolve(e):this.$4.fetchNetwork(a).then(function(a){var b=e.entries,d=a.entries;a=a.params;d=c("baseTypeaheadDedupEntriesBuilder")(c("BaseDataEntryKeyBuilder"))((b=b)!=null?b:[],(b=d)!=null?b:[]);return{entries:d,params:a}})};return a}();g["default"]=a}),98);
__d("cometTypeaheadCreateOrGetCachedCompositeDataSource",["CometTypeaheadCompositeDataSource"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function a(a){var b=a.cacheKey_SEARCH_ONLY;a=babelHelpers.objectWithoutPropertiesLoose(a,["cacheKey_SEARCH_ONLY"]);b=i(b);var d=h.get(b);if(d!=null)return d;d=new(c("CometTypeaheadCompositeDataSource"))(a);h.set(b,d);return d}function i(a){switch(a.type){case"group_rules_mentions_intentful_datasource_cache_key":case"groups_mentions_intentful_datasource_cache_key":case"groups_mentions_non_intentful_datasource_cache_key":return a.type+"-"+a.groupID;case"feed_mentions_intentful_datasource_cache_key":return a.enableTypeSelection.toString()+"-"+a.type+"-"+a.mentionTypes.join(",");case"workplace_chat_composer_mentions_datasource_cache_key":return a.participants.toString()+"-"+a.type+"-"+a.threadID+"}";default:return String(a.type)}}g["default"]=a}),98);
__d("useCometTypeaheadCompositeDataSource",["BaseTypeaheadPayloadDecoratorAddLimit","CometTypeaheadCompositeDataSource","baseTypeaheadFetchPayloadDecorate","cometTypeaheadCreateOrGetCachedCompositeDataSource","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useMemo;function a(a){var b=a.bootstrapDataSource,d=a.cacheKey_SEARCH_ONLY,e=a.limit,f=a.networkDataSource,g=a.nullstateDataSource,j=a.payloadDecorators,k=h(function(a){return c("baseTypeaheadFetchPayloadDecorate")(a,[].concat((a=j)!=null?a:[],[c("BaseTypeaheadPayloadDecoratorAddLimit")(e)]))},[e,j]),l=i(function(){return{bootstrapDataSource:b,limit:e,networkDataSource:f,nullstateDataSource:g}},[b,e,f,g]),m=i(function(){return d!=null?c("cometTypeaheadCreateOrGetCachedCompositeDataSource")(babelHelpers["extends"]({},l,{cacheKey_SEARCH_ONLY:d})):new(c("CometTypeaheadCompositeDataSource"))(l)},[d,l]);return i(function(){return{bootstrap:function(){return m.bootstrap()},fetchCache:function(a){return k(m.fetchCache(a))},fetchNetwork:function(a){return m.fetchNetwork(a).then(function(a){return k(a)})}}},[m,k])}g["default"]=a}),98);
__d("CometTypeaheadGraphQLDataSource",["BaseCacheEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadNetworkCacheDataSource","BaseTypeaheadQueryDataCacheProvider","baseTypeaheadDedupEntriesBuilder","baseTypeaheadLabelSuffixBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.gqlQuery,d=a.normalize,e=a.options,f=a.queryVariablesBuilderFunction;a=a.relayEnvironment;var g=function(){return f};g=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(g);e=new(c("BaseTypeaheadDataProvider"))({options:e,query:b,queryVariablesBuilder:g,relayEnvironment:a});b=new(c("BaseTypeaheadQueryDataCacheProvider"))({dedupe:c("baseTypeaheadDedupEntriesBuilder")(c("BaseCacheEntryKeyBuilder")),suffixBuilder:c("baseTypeaheadLabelSuffixBuilder")});this.$1=new(c("BaseTypeaheadNetworkCacheDataSource"))(e,b,{normalizeFunc:d})}var b=a.prototype;b.fetchCache=function(a){return this.$1.fetchCache(a)};b.fetchNetwork=function(a){return this.$1.fetchNetwork(a)};return a}();g["default"]=a}),98);
__d("useCometTypeaheadGraphQLDataSource",["BaseTypeaheadPayloadDecoratorAddLimit","CometRelay","CometTypeaheadGraphQLDataSource","react","useDeepEqualMemo"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=a.gqlQuery,e=a.limit,f=a.normalize,g=a.options,i=a.queryVariablesBuilderFunction,j=h(function(){return c("BaseTypeaheadPayloadDecoratorAddLimit")(e)},[e]),k=d("CometRelay").useRelayEnvironment();a=c("useDeepEqualMemo")(i({query:""}));var l=h(function(){return new(c("CometTypeaheadGraphQLDataSource"))({gqlQuery:b,normalize:f,options:g,queryVariablesBuilderFunction:i,relayEnvironment:k})},[a,k]);return h(function(){return{fetchCache:function(a){return j(l.fetchCache(a))},fetchNetwork:function(a){return l.fetchNetwork(a).then(function(a){return j(a)})}}},[l,j])}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometPoliticalInfosheetDialogSelector_verifiedVoiceContext.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometPoliticalInfosheetDialogSelector_verifiedVoiceContext",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_rendering_for_ad_impression",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometPoliticalInfosheetReshareDialog_verifiedVoiceContext"}],type:"VerifiedVoiceContext",abstractKey:null};e.exports=a}),null);
__d("CometPoliticalInfosheetDialogV2Query_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5696579060390441"}),null);
__d("CometPoliticalInfosheetDialogV2Query$Parameters",["CometPoliticalInfosheetDialogV2Query_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometPoliticalInfosheetDialogV2Query_facebookRelayOperation"),metadata:{},name:"CometPoliticalInfosheetDialogV2Query",operationKind:"query",text:null}};e.exports=a}),null);
__d("StoryLocationTransparencyDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5214471888614795"}),null);
__d("StoryLocationTransparencyDialogQuery$Parameters",["StoryLocationTransparencyDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("StoryLocationTransparencyDialogQuery_facebookRelayOperation"),metadata:{},name:"StoryLocationTransparencyDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("InstreamAdsPoliticalAdLabel_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamAdsPoliticalAdLabel_story",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feed_object_identifier",storageKey:null},{alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VerifiedVoiceContext",kind:"LinkedField",name:"verified_voice_context",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ad_account_disclaimer_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"funding_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"br_tax_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometPoliticalInfosheetDialogSelector_verifiedVoiceContext"}],storageKey:null}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayerImpl_adBreaks",selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"mid_rolls",plural:!0,selections:[a,b,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"pre_roll",plural:!1,selections:[a,b],storageKey:null}],type:"InstreamVideoAdBreaks",abstractKey:null}}();e.exports=a}),null);
__d("PMVCometInterruptionsCounterResetMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8148148415210504"}),null);
__d("PMVCometInterruptionsCounterResetMutation.graphql",["PMVCometInterruptionsCounterResetMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,kind:"ScalarField",name:"pmv_comet_interruptions_counter_reset",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PMVCometInterruptionsCounterResetMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"PMVCometInterruptionsCounterResetMutation",selections:a},params:{id:b("PMVCometInterruptionsCounterResetMutation_facebookRelayOperation"),metadata:{},name:"PMVCometInterruptionsCounterResetMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useInstreamAdsFetcherQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6257909997599074"}),null);
__d("useInstreamAdsFetcherQuery.graphql",["useInstreamAdsFetcherQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"adTriggerSource"},c={defaultValue:null,kind:"LocalArgument",name:"first"},d={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},e={defaultValue:null,kind:"LocalArgument",name:"insertionPointOrigin"},f={defaultValue:null,kind:"LocalArgument",name:"instreamPlacement"},g={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdBreakIndex"},h={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},i={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},j={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},k={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},l={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},m={defaultValue:null,kind:"LocalArgument",name:"requestedAdFormat"},n={defaultValue:null,kind:"LocalArgument",name:"scale"},o={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},p={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},q=[{kind:"Variable",name:"ad_trigger_source",variableName:"adTriggerSource"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"insertion_point_origin",variableName:"insertionPointOrigin"},{kind:"Variable",name:"instream_placement",variableName:"instreamPlacement"},{kind:"Variable",name:"instream_video_ad_break_index",variableName:"instreamVideoAdBreakIndex"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"requested_ad_format",variableName:"requestedAdFormat"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"},{kind:"Variable",name:"trace_policy",variableName:"tracePolicy"}],r={alias:null,args:null,concreteType:"SponsoredData",kind:"LinkedField",name:"sponsored_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_token",storageKey:null}],storageKey:null},s=[{kind:"Variable",name:"location",variableName:"renderLocation"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u={args:null,documentName:"useInstreamAdsFetcherQuery",fragmentName:"InstreamAdsStory_story",fragmentPropName:"story",kind:"ModuleImport"},v={alias:null,args:null,kind:"ScalarField",name:"query_refetch_interval_s",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"should_show_ad_pod",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},y=[x];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h,i,j,k,l,m,n,o,p],kind:"Fragment",metadata:null,name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:q,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:s,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[t],storageKey:null}],storageKey:null},u],storageKey:null}],storageKey:null},v,w],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[m,c,d,h,g,f,p,k,j,i,l,o,e,n,a],kind:"Operation",name:"useInstreamAdsFetcherQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:q,concreteType:"InstreamVideoAdsConnection",kind:"LinkedField",name:"instream_video_ads",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:s,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[t,{kind:"InlineFragment",selections:y,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:y,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:y,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:y,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:y,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},x,u],storageKey:null}],storageKey:null},v,w],storageKey:null}],storageKey:null}]},params:{id:b("useInstreamAdsFetcherQuery_facebookRelayOperation"),metadata:{},name:"useInstreamAdsFetcherQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useInstreamAdsHaloFetcherQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4414963831939027"}),null);
__d("useInstreamAdsHaloFetcherQuery.graphql",["useInstreamAdsHaloFetcherQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"hostVideoId"},c={defaultValue:null,kind:"LocalArgument",name:"instreamVideoAdType"},d={defaultValue:null,kind:"LocalArgument",name:"isSponsorHostVideo"},e={defaultValue:null,kind:"LocalArgument",name:"playerFormat"},f={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},g={defaultValue:null,kind:"LocalArgument",name:"storyIdentifier"},h={defaultValue:null,kind:"LocalArgument",name:"tracePolicy"},i={alias:null,args:null,kind:"ScalarField",name:"ad_format",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"instream_placement",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"insertion_point_origin",storageKey:null};i=[{alias:null,args:[{fields:[{kind:"Variable",name:"comet_video_player_trace_policy",variableName:"tracePolicy"},{kind:"Variable",name:"host_video_id",variableName:"hostVideoId"},{kind:"Variable",name:"instream_video_ad_type",variableName:"instreamVideoAdType"},{kind:"Variable",name:"is_sponsored_host_video",variableName:"isSponsorHostVideo"},{kind:"Variable",name:"player_format",variableName:"playerFormat"},{kind:"Variable",name:"player_sub_origin",variableName:"playerSubOrigin"},{kind:"Variable",name:"story_identifier",variableName:"storyIdentifier"}],kind:"ObjectValue",name:"params"}],concreteType:"Scrubber",kind:"LinkedField",name:"scrubber",plural:!1,selections:[{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"instream_video_ad_breaks",plural:!0,selections:[i,j,{alias:null,args:null,kind:"ScalarField",name:"time_offset_in_ms",storageKey:null},k,l],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreak",kind:"LinkedField",name:"post_roll_ad_break",plural:!1,selections:[i,j,k,l],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"useInstreamAdsHaloFetcherQuery",selections:i,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,f,e,h,c,g,d],kind:"Operation",name:"useInstreamAdsHaloFetcherQuery",selections:i},params:{id:b("useInstreamAdsHaloFetcherQuery_facebookRelayOperation"),metadata:{},name:"useInstreamAdsHaloFetcherQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometProgressRingSvg.react",["CometProgressRingUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useMemo,j=b.useRef,k=2;function a(a){var b=a.color,c=a.isHidden,e=a.size,f=j(null),g=j(null),l=j(null);a=d("CometProgressRingUtils").getRingColor(b);var m=a.backgroundColor,n=a.foregroundColor,o=(e-k)*Math.PI;b=i(function(){return h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy",height:e,ref:f,viewBox:"0 0 "+e+" "+e,width:e,children:h.jsx("circle",{cx:e/2,cy:e/2,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:(e-k)/2,stroke:m,strokeLinecap:"round",strokeWidth:k})}),h.jsx("div",{className:"x1ey2m1c xds687c x6ikm8r x10wlt62 x10l6tqk xtzzx4i x13vifvy",children:h.jsx("svg",{className:"x1ey2m1c x9f619 xds687c x10l6tqk x1ytbgms x13vifvy x1jpgh95",height:e,ref:g,viewBox:"0 0 "+e+" "+e,width:e,children:h.jsx("circle",{cx:e/2,cy:e/2,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:(e-k)/2,stroke:n,strokeDasharray:o/2,strokeDashoffset:3*o/4,strokeWidth:k,style:{visibility:c?"hidden":void 0}})})}),h.jsx("div",{className:"x1ey2m1c x8cgc45 x6ikm8r x10wlt62 x10l6tqk x17qophe x13vifvy",children:h.jsx("svg",{className:"x1ey2m1c x9f619 x14l5gr7 x10l6tqk x17qophe x13vifvy x1jpgh95",height:e,ref:l,viewBox:"0 0 "+e+" "+e,width:e,children:h.jsx("circle",{cx:e/2,cy:e/2,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:(e-k)/2,stroke:n,strokeDasharray:o/2,strokeDashoffset:o/4,strokeWidth:k,style:{visibility:c?"hidden":void 0}})})})]})},[e,m,n,o,c]);return{backgroundRef:f,leftCircleRef:l,progressRing:b,rightCircleRef:g}}g["default"]=a}),98);
__d("CometProgressRing.react",["BaseLoadingStateElement.react","CometProgressRingUtils","performanceNavigationStart","react","recoverableViolation","useCometProgressRingSvg.react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m=b.useState,n={rootDiv:{position:"x1n2onr6",$$css:!0}},o=d("CometProgressRingUtils").getCubicBezierPercentageFunc(.45,0,.25,.85);function a(a){var b=a.beginningPercentage,d=a.color,e=a.duration,f=a.explicitStartTime,g=a.onComplete,r=a.pause,s=a.percentage,t=a.size,u=a.type;u!=="default"&&s!=null&&c("recoverableViolation")("percentage should only be applied to default type","comet_ui");var v=l(null),w=l(null);a=m(!0);var x=a[0],y=a[1];a=p(u,s,b);b=a.completedPercentage;var z=a.finalPercentage;a=a.startPercentage;var A=l(a),B=l(z),C=l(b);a=c("useCometProgressRingSvg.react")({color:d,isHidden:x,size:t});var D=a.backgroundRef,E=a.leftCircleRef;z=a.progressRing;var F=a.rightCircleRef,G=i(function(a){var b=F.current,d=E.current;if(b==null||d==null)return;if(!(b instanceof SVGSVGElement)||!(d instanceof SVGSVGElement))return;if((u==="default"||u==="count-down")&&r===!0)return;w.current==null&&(w.current=f!=null?f-c("performanceNavigationStart")():a);if(u==="estimated")if(C.current>75)C.current+=.3*Math.pow((100-C.current)/50,2);else{var h=(a-w.current)/e/1e3;h=o(h);C.current=h*75}else if(u==="default"&&C.current<B.current){h=(a-w.current)/1e3/e*100;C.current=Math.min(h,100)}else if(u==="count-down"&&C.current>B.current){h=(a-w.current)/1e3/e*100;C.current=A.current-h;C.current=Math.max(C.current,0)}a=Math.max(0,Math.min(100,C.current))/100*360;b.style.transform="rotate("+Math.min(a,180)+"deg)";d.style.transform="rotate("+Math.max(a-180,0)+"deg)";q(u,C.current,s)?(window.cancelAnimationFrame(v.current),b.style.opacity="0",d.style.opacity="0",w.current=null,v.current=null,D.current instanceof SVGSVGElement&&(D.current.style.opacity="0"),g&&g()):v.current=window.requestAnimationFrame(G)},[D,e,f,E,g,r,s,F,u]);k(function(){x&&y(!x)},[x]);j(function(){if(window.requestAnimationFrame!=null){v.current=window.requestAnimationFrame(G);return function(){v.current!=null&&(w.current=null,window.cancelAnimationFrame(v.current),v.current=null)}}},[t,G]);return h.jsx(c("BaseLoadingStateElement.react"),{style:{height:t,width:t},xstyle:n.rootDiv,children:z})}a.displayName=a.name+" [from "+f.id+"]";function p(a,b,c){switch(a){case"default":return{completedPercentage:(a=c)!=null?a:0,finalPercentage:(a=b)!=null?a:100,startPercentage:(b=c)!=null?b:0};case"count-down":return{completedPercentage:100,finalPercentage:0,startPercentage:100};case"estimated":return{completedPercentage:0,finalPercentage:75,startPercentage:0};default:return{completedPercentage:0,finalPercentage:0,startPercentage:0}}}function q(a,b,c){return a==="count-down"?b<=0||b>100:b>=((a=c)!=null?a:100)}g["default"]=a}),98);
__d("CometPoliticalInfosheetDialogV2.entrypoint",["CometPoliticalInfosheetDialogV2Query$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.ad_id,d=a.feed_object_id;a=a.story_id;return{queries:{politicalInfosheetQueryReference:{parameters:c("CometPoliticalInfosheetDialogV2Query$Parameters"),variables:{ad_id:b,feed_object_id:d,story_id:a}}}}},root:c("JSResourceForInteraction")("CometPoliticalInfosheetDialogV2.react").__setRef("CometPoliticalInfosheetDialogV2.entrypoint")};g["default"]=a}),98);
__d("CometPoliticalInfosheetDialogSelector.react",["CometEntryPointDialogTrigger.react","CometLazyDialogTrigger.react","CometPoliticalInfosheetDialogSelector_verifiedVoiceContext.graphql","CometPoliticalInfosheetDialogV2.entrypoint","CometRelay","JSResourceForInteraction","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useRef,k=c("JSResourceForInteraction")("CometPoliticalInfosheetReshareDialog.react").__setRef("CometPoliticalInfosheetDialogSelector.react");function a(a){var e=a.adID,f=a.dialogTriggerFunc,g=a.feedObjectID,l=a.storyID;a=a.verifiedVoiceContext;var m=j(null);a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometPoliticalInfosheetDialogSelector_verifiedVoiceContext.graphql"),a);var n=(a==null?void 0:a.is_rendering_for_ad_impression)===!1;if(!n)return i.jsx(c("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:c("CometPoliticalInfosheetDialogV2.entrypoint"),otherProps:{adID:e,onClose:c("emptyFunction"),storyID:l},preloadParams:{ad_id:e,feed_object_id:g,story_id:l},children:function(a){return f(a)}});else return i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{adID:e,isReshared:!0,onClose:c("emptyFunction"),verifiedVoiceContext:a},dialogResource:k,children:function(a){return f(a,m)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoryLocationTransparencyDialog.entrypoint",["JSResourceForInteraction","StoryLocationTransparencyDialogQuery$Parameters","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{storyLocationTransparencyDialogQueryReference:{parameters:c("StoryLocationTransparencyDialogQuery$Parameters"),variables:{scale:d("WebPixelRatio").get(),storyID:a.storyID}}}}},root:c("JSResourceForInteraction")("StoryLocationTransparencyDialog.react").__setRef("StoryLocationTransparencyDialog.entrypoint")};g["default"]=a}),98);
__d("VideoPlayerDebugInstreamAdsAPI",["cr:1484071","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";d=(a=b("cr:1484071"))!=null?a:{useVideoPlayerDebugAPI:c("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:c("emptyFunction"),useVideoPlayerDebugInfo:c("emptyFunction").thatReturns(null)};g["default"]=d}),98);
__d("InstreamAdsConfig",["PMVInterruptionsWWWSitevarConfig","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=15e3,j=5e3,k=200,l=200,m=3e3,n=5e3,o=6e4,p=2e3,q=300,r=6e4,s=6e4,t=1e3,u=3e3,v=16,w=15,x=5,y=200,z=96,A=93,B=92,C=97,D="unified_scheduler",E="is_live_preroll";function a(){return 4e3}function b(){var a;return(a=c("qex")._("1663"))!=null?a:u}function d(){var a;return(a=c("qex")._("1664"))!=null?a:t}function e(){var a;return(a=c("qex")._("1665"))!=null?a:p}function f(){return c("gkx")("1803216")?o:3e5}function F(){return i}function G(){return j}function H(){return k}function I(){return h}function J(){return q}function K(){return l}function L(){if(!c("gkx")("3117")){var a;return(a=c("qex")._("1669"))!=null?a:m}return c("gkx")("3784")?n:m}function M(){return c("PMVInterruptionsWWWSitevarConfig").pmv_pre_roll_fetch_timeout_ms}function N(){var a;return(a=c("qex")._("1670"))!=null?a:r}function O(){var a;return(a=c("qex")._("1671"))!=null?a:s}g.DEFAULT_LONGER_AD_DURATION=v;g.DEFAULT_AD_COMPLETION_DURATION=w;g.DEFAULT_SKIPPABLE_TIME_THRESHOLD=x;g.DEFAULT_FETCH_TIME_INTERVAL_MS=y;g.UNIFIED_SCHEDULER_AD_INDEX=z;g.FULLSCREEN_AD_INDEX=A;g.CLICK_TO_PLAY_AD_INDEX=B;g.IS_LIVE_PREROLL_INDEX=C;g.UNIFIED_SCHEDULER_TIGGER_SOURCE=D;g.IS_LIVE_PREROLL_TRIGGER_SOURCE=E;g.getNonPmvMaxFetchTimeMS=a;g.getIsLivePrerollMaxFetchTimeMS=b;g.getHaloStartFetchTimeMS=d;g.getNonLiveBeginningTransitionTimeMS=e;g.getNonLiveMidrollGapRuleMS=f;g.getPostRollPreFetchTimeMs=F;g.getPostRollPreFetchEndTimeMs=G;g.getPreFetchTimeDeltaMs=H;g.getPreFetchTimeMs=I;g.getRecheckStartMs=J;g.getStartDeltaMs=K;g.getStartingIndicatorMs=L;g.getPMVInterruptionsPreRollFetchTimeMs=M;g.getUnifiedSchedulerStartDelayMs=N;g.getUnifiedSchedulerFrequencyMs=O}),98);
__d("InstreamAdsExtraFieldsContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext,i=b.createContext(null);function a(){return h(i)}g.InstreamAdsExtraFieldsContext=i;g.useInstreamAdsExtraFieldsContext=a}),98);
__d("InstreamAdsPrerollTransitionScreen.react",["CometLoadingAnimation.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){return h.jsx("div",{className:"x6s0dn4 xal61yo x1ey2m1c x9f619 x78zum5 xds687c xdt5ytf xl56j7k x10l6tqk x17qophe x13vifvy",children:h.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:h.jsx(c("CometLoadingAnimation.react"),{size:36})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsPalmStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext,i=b.createContext("INIT");function a(){return h(i)}g.InstreamAdsPalmStateContext=i;g.useInstreamAdsPalmStateContext=a}),98);
__d("InstreamPalmStateManagerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext;c={setCurrentInsertion:function(){},setExtraFields:function(){},setHideAdBehavior:function(){},setIsEmpty:function(){},setState:function(){}};var i=b.createContext(c);function a(){return h(i)}g.InstreamPalmStateManagerContext=i;g.useInstreamPalmStateManager=a}),98);
__d("useInstreamAdsStoryPlaybackControl",["InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=a.freezeTokenRef,c=a.organicController,e=a.previousPlaceDescription,f=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),g=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),j=d("VideoPlayerHooks").useEnded(),k=d("VideoPlayerHooks").useController(),l=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext();h(function(){switch(f){case"START":c.pause("commercial_break");i(b,c);break;case"START_AD":var a=c.getCurrentState(),d=a.muted;a=a.volume;k.setMuted(d,"commercial_break");k.setVolume(a);c.pause("commercial_break");i(b,c);break;case"PLAY_NI_VIDEO":c.pause("commercial_break");d=c.getCurrentState();a=d.muted;d=d.volume;k.setMuted(a,"commercial_break");k.setVolume(d);i(b,c);break;case"PLAY_LONGER_AD":c.pause("commercial_break");a=c.getCurrentState();d=a.muted;a=a.volume;k.setMuted(d,"commercial_break");k.setVolume(a);i(b,c);break}switch(e){case"tahoe":i(b,c,function(){c.setMuted(!0,"tahoe_transition_phase_initiated")});k.setMuted(!0,"tahoe_transition_phase_initiated");return;case"watch_and_scroll":i(b,c,function(){c.setMuted(!0,"watch_and_scroll_transition_phase_initiated")});k.setMuted(!0,"watch_and_scroll_transition_phase_initiated");return}},[f,c,k,b,e]);h(function(){if(j){var a;((a=l==null?void 0:l.isAdPod)!=null?a:!1)&&(l==null?void 0:l.adPodIndex)===0?(g.setExtraFields(Object.assign(l||{},{adPodIndex:1})),g.setState("START")):g.setState("END");g.setExtraFields(Object.assign(l||{},{adPlaytime:0,watchTillEnd:j}))}},[j,l,g]);h(function(){var a=function(){k.pause("user_initiated")},b=function(){g.setState("END")};g.setHideAdBehavior({onClose:b,onOpen:a})},[k,g])}function i(a,b,c){if(c)a.current&&(b.unfreeze(a.current),a.current=null),c(),i(a,b);else{a.current=(c=a.current)!=null?c:b.freeze()}}g["default"]=a}),98);
__d("InstreamAdsTransitionScreen.react",["fbt","react","useInstreamAdsStoryPlaybackControl"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.freezeTokenRef;a=a.organicController;c("useInstreamAdsStoryPlaybackControl")({freezeTokenRef:b,organicController:a});b=h._("__JHASH__KSKbQr-YdZV__JHASH__");return i.jsx("div",{className:"xal61yo x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy",children:i.jsx("div",{className:"x191j7n5 x14ctfv x1nxh6w3 x10l6tqk x16q8cke",children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsDisplay.react",["CometRelay","InstreamAdsExtraFieldsContext","InstreamAdsPrerollTransitionScreen.react","InstreamAdsTransitionScreen.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("gkx")("1803216");function a(a){var b=a.NIAdStory,e=a.adPorableVideoID,f=a.freezeTokenRef,g=a.instreamAdsStory,j=a.palmState,k=a.playerFormat,l=a.setAdPortableVideoID,m=a.subOrigin;a=a.videoAdStory;var n=d("VideoPlayerHooks").useController(),o=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),p=-1;(o==null?void 0:o.isAdPod)===!0&&((o==null?void 0:o.adPodIndex)===1?p=1:p=0);o=p===1;var q=function(a){a!==e[0]&&l([a,e[1]])},r=function(a){a!==e[1]&&l([e[0],a])};if(j==="START"||j==="FETCH_PRE_ROLL"||j==="START_AD")return h.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:h.jsxs("div",{className:"x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy x1rozsjd",children:[j==="START"?h.jsx(c("InstreamAdsTransitionScreen.react"),{freezeTokenRef:f,organicController:n}):null,j==="FETCH_PRE_ROLL"?h.jsx(c("InstreamAdsPrerollTransitionScreen.react"),{}):null,j==="START_AD"&&g?h.jsx(d("CometRelay").MatchContainer,{match:o?g[1]:g[0],props:{freezeTokenRef:f,onPortableVideoIdChange:o?r:q,organicController:n,playerFormat:k,portableVideoID:o?e[1]:e[0],position:p,story:o?g[1]:g[0],subOrigin:m}}):null]})});if(i&&b!==null)return h.jsx("div",{className:j==="PLAY_NI_VIDEO"?"x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy x1rozsjd":null,children:h.jsx(d("CometRelay").MatchContainer,{match:b,props:{freezeTokenRef:f,isNIAd:!0,onPortableVideoIdChange:q,organicController:n,playerFormat:k,portableVideoID:e[0],story:b,subOrigin:m}})});return j==="PLAY_LONGER_AD"?h.jsx("div",{className:"x1ey2m1c x9f619 xds687c x10l6tqk x17qophe x13vifvy x1rozsjd",children:h.jsx(d("CometRelay").MatchContainer,{match:a,props:{freezeTokenRef:f,isNIAd:!1,onPortableVideoIdChange:q,organicController:n,playerFormat:k,portableVideoID:e[0],story:a,subOrigin:m}})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsPoliticalAdLabel.react",["fbt","CometLink.react","CometMiddot.react","CometPoliticalInfosheetDialogSelector.react","CometRelay","InstreamAdsPoliticalAdLabel_story.graphql","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=function(a,b,d){var e;return j.jsxs(j.Fragment,{children:[(a==null||a==="PAID_FOR_BY")&&h._("__JHASH__x9r4JO74n0h__JHASH__",[h._param("funding_source",b)]),a==="PROPAGANDA_ELEITORAL_BR"&&j.jsxs(j.Fragment,{children:[h._("__JHASH___QN_KCKIhUm__JHASH__"),j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}),(e=d!=null&&(d==null?void 0:d.length)>0)!=null?e:j.jsxs(j.Fragment,{children:[h._("__JHASH__7pgr4bATq4M__JHASH__",[h._param("CPF_or_CNPJ_ID",d)]),j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"})]}),b]}),a==="PUBLISHED_BY"&&h._("__JHASH__diLS5B27aaA__JHASH__",[h._param("publisher",b)])]})};function a(a){var e,f,g=d("CometRelay").useFragment(i!==void 0?i:i=b("InstreamAdsPoliticalAdLabel_story.graphql"),a.story),h=g.verified_voice_context;if(!c("gkx")("2623")||h==null||((e=g.sponsored_data)==null?void 0:e.ad_id)==null||g.feed_object_identifier==null||g.id==null)return null;e=function(a,b){return j.jsx(c("CometLink.react"),{onClick:a,ref:b,children:k(h.ad_account_disclaimer_label,h.funding_source,h.br_tax_id)})};f=j.jsx(c("CometPoliticalInfosheetDialogSelector.react"),{adID:(f=g.sponsored_data)==null?void 0:f.ad_id,dialogTriggerFunc:e,feedObjectID:g.feed_object_identifier,storyID:g.id,verifiedVoiceContext:h});return j.jsxs(j.Fragment,{children:[a.withLeadingDot&&j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}),f]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PlayButtonItemOverlay.react",["CometImage.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx("div",{className:"x10l6tqk x1n0ejz7 x4o5f7y",children:h.jsx(c("CometImage.react"),{height:36,src:"/images/video/play_72dp.png",width:36})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsFeedNIContextCardImpl.react",["fbt","ix","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometEntryPointDialogTrigger.react","CometImage.react","CometLink.react","CometMiddot.react","CometPoliticalInfosheetDialogSelector.react","CometPressable.react","CometProfilePhoto.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","InstreamAdsHideAdBehaviorContext","InstreamAdsPoliticalAdLabel.react","PlayButtonItemOverlay.react","StoryLocationTransparencyDialog.entrypoint","TetraCircleButton.react","TetraText.react","TetraTextPairing.react","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","fbicon","gkx","react","useDebouncedValue"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={body:{marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},bottomMenu:{bottom:"xqo3gd",position:"x10l6tqk",$$css:!0},container:{marginEnd:"xykv574",marginStart:"xbmpl8g",paddingBottom:"xsag5q8",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",paddingTop:"xyamay9",$$css:!0},dismiss:{marginStart:"x1i64zmx",marginTop:"xifccgj",$$css:!0},divider:{marginEnd:"xfs2ol5",marginStart:"x12mruv9",$$css:!0},feedDismiss:{marginTop:"x1ok221b",$$css:!0},feedMediaBorderContainer:{height:"xjp8j0k",$$css:!0},feedNiVideoContainer:{height:"xjp8j0k",width:"x13oubkp",$$css:!0},feedRoot:{backgroundColor:"xmjcpbm",height:"xjp8j0k",$$css:!0},fullScreenBody:{marginBottom:"xat24cr",marginTop:"x1rdy4ex",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},fullScreenFirstRow:{marginBottom:"xyorhqc",$$css:!0},fullScreenHeader:{position:"x10l6tqk",start:"x8zc4e7",$$css:!0},fullscreenItem:{paddingEnd:"xsyo7zv",paddingStart:"x1ye3gou",$$css:!0},fullScreenMediaBorderContainer:{height:"xjp8j0k",$$css:!0},fullScreenNiVideoContainer:{height:"xjp8j0k",width:"x13oubkp",$$css:!0},fullScreenRoot:{backgroundColor:"xrmyhay",height:"xjp8j0k",$$css:!0},hasBody:{boxSizing:"x9f619",fontSize:"x1lkfr7t",marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",maxHeight:"xly2ba0",paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},headerContainer:{paddingBottom:"xsag5q8",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",paddingTop:"xz9dl7a",$$css:!0},headerItem:{marginStart:"x1i64zmx",$$css:!0},imageContainer:{marginStart:"x1hk0nng",marginTop:"xwya9rg",$$css:!0},item:{marginTop:"x1gslohp",paddingEnd:"xsyo7zv",paddingStart:"x1ye3gou",$$css:!0},mediaBorderContainer:{borderBottomStartRadius:"x9jhf4c",borderTopStartRadius:"x1lq5wgf",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},meta:{marginTop:"x1anpbxc",$$css:!0},multipleLinesHeight:{minHeight:"xgujvf1",$$css:!0},niImageStyle:{maxWidth:"x193iq5w",objectFit:"xl1xv1r",objectPosition:"x1fmkh0f",transform:"x18871es",$$css:!0},niVideoContainer:{borderBottomStartRadius:"x9jhf4c",borderTopStartRadius:"x1lq5wgf",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},niVideoPressable:{display:"x1lliihq",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},overlay:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},pressable:{display:"x1lliihq",$$css:!0},profilePic:{marginEnd:"xq8finb",$$css:!0},root:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",marginBottom:"x1yztbdb",marginEnd:"xktsk01",marginStart:"x1d52u69",position:"x1n2onr6",":hover_textDecoration":"x1lku1pv",$$css:!0},sponsoredText:{marginTop:"x1xmf6yo",$$css:!0},textPairingBody:{display:"x1lliihq",paddingBottom:"x1120s5i",$$css:!0},videoContainer:{marginStart:"x1hk0nng",marginTop:"xwya9rg",$$css:!0}},l=c("gkx")("3476"),m=[c("CometEmoticonTransform")({size:18}),c("CometEmojiTransform")({size:18})],n=[c("CometEmoticonTransform")(),c("CometEmojiTransform")()];function a(a){var b=a.contextCardHideAdBehavior,e=a.instreamAdsContextCardData,f=a.isFullScreen;a=a.onDismiss;var g={url:e==null?void 0:e.adUrl};if(!e)return null;var p=(e==null?void 0:e.brandName)!=null?e.brandName.toString().trim():"",q=(e==null?void 0:e.description)!=null?e.description.toString().trim():"",r=(e==null?void 0:e.source)!=null?e.source.toString():null,s=(e==null?void 0:e.title)!=null?e.title.toString().trim():"",t=e.trackingCode,u=e.viewabilityLogger,v=e.adId,w=e.feedObjectID,x=e.storyId,y=e.verifiedVoiceContext,z=e.scmeLabel,A=l&&e.scmeLabel!=null,B=e.politicalAdLabel,C=!A&&y!=null,D=function(a,b){return j.jsx(c("CometLink.react"),{color:"secondary",onClick:a,ref:b,weight:"bold",children:z})};v=v!=null&&w!=null&&x!=null&&y!=null?j.jsx(c("CometPoliticalInfosheetDialogSelector.react"),{adID:v,dialogTriggerFunc:D,feedObjectID:w,storyID:x,verifiedVoiceContext:y}):x!=null?j.jsx(c("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:c("StoryLocationTransparencyDialog.entrypoint"),otherProps:{},preloadParams:{storyID:x},children:function(a){return j.jsx(c("CometLink.react"),{color:"secondary",onClick:a,weight:"bold",children:z})}}):null;D=j.jsxs(j.Fragment,{children:[j.jsxs(c("BaseRow.react"),{verticalAlign:"center",xstyle:k.headerContainer,children:[j.jsx(c("BaseRowItem.react"),{children:j.jsxs(c("BaseRow.react"),{verticalAlign:"center",children:[e.profilePicURI!=null&&e.profilePicURI.length>0?j.jsx(c("BaseRowItem.react"),{xstyle:k.profilePic,children:j.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:40,source:{uri:e.profilePicURI}})}):null,j.jsxs(c("BaseRowItem.react"),{children:[j.jsx(c("TetraText.react"),{color:"primary",type:"bodyLink3",children:p}),j.jsx("div",{className:"x1xmf6yo",children:j.jsxs(c("TetraText.react"),{color:"secondary",type:"meta4",children:[h._("__JHASH__9rhuPc7-Of2__JHASH__"),A?j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}):null,A?v:null,C&&B!=null?j.jsx(c("InstreamAdsPoliticalAdLabel.react"),{story:B,withLeadingDot:!0}):null]})})]})]})}),j.jsx(c("BaseRowItem.react"),{children:j.jsxs(c("BaseRow.react"),{verticalAlign:f?"center":"stretch",children:[j.jsx(c("BaseRowItem.react"),{xstyle:k.headerItem,children:j.jsx("div",{children:j.jsx(d("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:b,children:e.menuButton})})}),j.jsx(c("BaseRowItem.react"),{xstyle:k.headerItem,children:j.jsx("div",{className:"x1ok221b",children:j.jsx(c("TetraCircleButton.react"),{color:"secondary",icon:d("fbicon")._(i("478232"),16),label:"Button for dismissing the context card",onPress:a,size:24,type:"deemphasized"})})})]})})]}),j.jsx("div",{className:"x1lq5wgf xgqcy7u x30kzoy x9jhf4c x9f619 x1yztbdb xktsk01 x1d52u69 x1n2onr6 x1lku1pv xmjcpbm xjp8j0k",children:j.jsxs(c("BaseRow.react"),{verticalAlign:f?"center":"stretch",xstyle:k.container,children:[e.isClickToPlayVideo===!0?null:j.jsx(c("BaseRowItem.react"),{xstyle:k.imageContainer,children:j.jsx("div",{className:"x9jhf4c x1lq5wgf x6ikm8r x10wlt62 xjp8j0k",children:e.adImageURI!=null&&e.adImageURI.length>0?j.jsx(c("CometImage.react"),{height:96,src:e.adImageURI,width:96,xstyle:k.niImageStyle}):null})}),e.isClickToPlayVideo===!0?j.jsx(c("BaseRowItem.react"),{xstyle:k.videoContainer,children:j.jsx("div",{className:"x9jhf4c x1lq5wgf x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:e.clickToPlayVideo?j.jsx(c("VideoPlayerRelay.react"),{adClientToken:e.clientToken,canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"inline",video:e.clickToPlayVideo,children:j.jsx(c("VideoPlayerSurface.react"),{children:j.jsx(o,{callback:e.callback})})}):null})}):null,j.jsxs(c("BaseRowItem.react"),{expanding:!0,useDeprecatedStyles:!0,xstyle:k.item,children:[j.jsx("div",{className:"x6ikm8r x10wlt62"+((q!=null?" x4vbgl9 x1rdy4ex xjkvuk6 x1iorvi4 x9f619 x1lkfr7t xly2ba0":" x4vbgl9 x1rdy4ex xjkvuk6 x1iorvi4")+(q!=null&&q.length>0&&s!=null&&s.length>0?" xgujvf1":""+(q!=null?"":""))),children:j.jsx(c("TetraTextPairing.react"),{body:q!=null&&q.length>0?j.jsx("span",{"data-testid":void 0,children:j.jsx(c("CometTextWithEntities.react"),{text:q,transforms:n})}):null,bodyColor:"secondary",bodyLineLimit:1,headline:j.jsx("span",{className:"x1lliihq x1120s5i",children:j.jsx(c("CometTextWithEntities.react"),{text:s,transforms:m})}),headlineColor:"primary",headlineLineLimit:2,level:3})}),r!=null&&r.length>0?j.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:j.jsx(c("TetraText.react"),{color:"secondary",numberOfLines:1,type:"body3",children:r})}):null]})]})})]});w=j.jsx("div",{className:"x1lq5wgf xgqcy7u x30kzoy x9jhf4c x9f619 x1yztbdb xktsk01 x1d52u69 x1n2onr6 x1lku1pv xrmyhay xjp8j0k",children:j.jsxs(c("BaseRow.react"),{xstyle:k.container,children:[e.isClickToPlayVideo===!0?null:j.jsx(c("BaseRowItem.react"),{xstyle:k.imageContainer,children:j.jsx("div",{className:"x9jhf4c x1lq5wgf x6ikm8r x10wlt62 xjp8j0k",children:e.adImageURI!=null&&e.adImageURI.length>0?j.jsx(c("CometImage.react"),{height:96,src:e.adImageURI,width:96,xstyle:k.niImageStyle}):null})}),e.isClickToPlayVideo===!0?j.jsx(c("BaseRowItem.react"),{xstyle:k.videoContainer,children:j.jsx("div",{className:"x9jhf4c x1lq5wgf x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:e.clickToPlayVideo?j.jsx(c("VideoPlayerRelay.react"),{adClientToken:e.clientToken,canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"inline",video:e.clickToPlayVideo,children:j.jsx(c("VideoPlayerSurface.react"),{children:j.jsx(o,{callback:e.callback})})}):null})}):null,j.jsxs(c("BaseRowItem.react"),{expanding:!0,xstyle:k.fullscreenItem,children:[j.jsxs(c("BaseRow.react"),{verticalAlign:f?"center":"stretch",xstyle:k.fullScreenFirstRow,children:[e.profilePicURI!=null&&e.profilePicURI.length>0?j.jsx(c("BaseRowItem.react"),{xstyle:k.profilePic,children:j.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:16,source:{uri:e.profilePicURI}})}):null,j.jsx("div",{className:"x10l6tqk x8zc4e7",children:j.jsx(c("BaseRowItem.react"),{children:j.jsxs(c("TetraText.react"),{color:"secondaryOnMedia",type:"body3",children:[r,j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}),h._("__JHASH__9rhuPc7-Of2__JHASH__")]})})})]}),j.jsx("div",{className:"xat24cr x1rdy4ex xjkvuk6 x1iorvi4 x6ikm8r x10wlt62"+(q!=null?" x9f619 x1lkfr7t xly2ba0":""),children:j.jsx(c("TetraText.react"),{color:"primaryOnMedia",numberOfLines:1,type:"bodyLink2",children:s})}),q!=null&&q.length>0?j.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:j.jsx(c("TetraText.react"),{color:"secondaryOnMedia",numberOfLines:1,type:"body3",children:q})}):null]}),j.jsxs(c("BaseRowItem.react"),{children:[j.jsx("div",{className:"x1i64zmx xifccgj",children:j.jsx(c("TetraCircleButton.react"),{color:"tertiary",icon:d("fbicon")._(i("478232"),16),label:"Button for dismissing the context card",onPress:a,size:24,type:"deemphasized"})}),j.jsx("div",{className:"xqo3gd x10l6tqk",children:j.jsx(d("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:b,children:e.menuButton})})]})]})});return e.adUrl!=null?j.jsx(c("CometTrackingCodeContext").Provider,{value:t,children:j.jsx("div",{ref:u,children:j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:15,children:j.jsx(c("CometPressable.react"),{display:"inline",label:s,linkProps:g,overlayDisabled:!0,xstyle:k.pressable,children:f?w:D})})})}):null}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=a.callback,e=d("VideoPlayerHooks").useController();a=d("VideoPlayerHooks").usePaused();var f=d("VideoPlayerHooks").usePlaying();f=c("useDebouncedValue")(f,5);a=a&&!f;f=function(){e.getCurrentState().paused&&(e.play("user_initiated"),e.setMuted(!0,null))};var g=function(){e.getCurrentState().playing&&(e.pause("product_initiated"),e.seek(0))},h=function(){b&&b("PLAY_NI_VIDEO")};return j.jsx(c("CometPressable.react"),{onPress:h,xstyle:k.niVideoPressable,children:j.jsx("div",{className:"x5yr21d x10l6tqk xh8yej3",onMouseEnter:f,onMouseLeave:g,children:a?j.jsx(c("PlayButtonItemOverlay.react"),{}):null})})}o.displayName=o.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsFeedVideoContextCardImpl.react",["fbt","ix","BaseRow.react","BaseRowItem.react","CometEmojiTransform","CometEmoticonTransform","CometEntryPointDialogTrigger.react","CometLink.react","CometMiddot.react","CometPoliticalInfosheetDialogSelector.react","CometPressable.react","CometProfilePhoto.react","CometTextWithEntities.react","CometTrackingCodeContext","CometTrackingNodeProvider.react","InstreamAdsConfig","InstreamAdsHideAdBehaviorContext","InstreamAdsPoliticalAdLabel.react","PlayButtonItemOverlay.react","StoryLocationTransparencyDialog.entrypoint","TetraCircleButton.react","TetraText.react","TetraTextPairing.react","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","fbicon","gkx","react","useDebouncedValue"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={adProgressText:{color:"x14ctfv",fontSize:"x1pg5gke",marginTop:"x9otpla",position:"x10l6tqk",start:"xq7jlbq",top:"xwa60dl",whiteSpace:"xuxw1ft",$$css:!0},body:{marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},bottomMenu:{marginTop:"x1anpbxc",position:"x10l6tqk",$$css:!0},container:{height:"x1peatla",marginEnd:"xykv574",marginStart:"xbmpl8g",marginTop:"xw7yly9",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",paddingTop:"x7sb2j6",$$css:!0},ctaButtonContainer:{marginTop:"x1ok221b",$$css:!0},dismiss:{marginStart:"x1mnrxsn",marginTop:"xafmxuu",$$css:!0},divider:{marginEnd:"xfs2ol5",marginStart:"x12mruv9",$$css:!0},feedNiVideoContainer:{height:"xjp8j0k",width:"x13oubkp",$$css:!0},feedRoot:{backgroundColor:"xmjcpbm",$$css:!0},fullScreenRoot:{backgroundColor:"xrmyhay",$$css:!0},hasBody:{boxSizing:"x9f619",fontSize:"x1lkfr7t",marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",maxHeight:"xly2ba0",paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},item:{paddingEnd:"xsyo7zv",paddingStart:"x1ye3gou",$$css:!0},meta:{marginTop:"x1anpbxc",$$css:!0},multipleLinesHeight:{minHeight:"xgujvf1",$$css:!0},niVideoContainer:{borderBottomStartRadius:"x9jhf4c",borderTopStartRadius:"x1lq5wgf",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},niVideoPressable:{display:"x1lliihq",height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},overlay:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},pressable:{display:"x1lliihq",$$css:!0},progressContainer:{backgroundColor:"xal61yo",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",bottom:"xqo3gd",end:"xlr8s2x",filter:"x1txq2hj",height:"x1qx5ct2",position:"x10l6tqk",width:"x1n7h9c3",$$css:!0},root:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",height:"xjp8j0k",marginTop:"xw7yly9",marginEnd:"xktsk01",marginBottom:"x1yztbdb",marginStart:"x1d52u69",position:"x1n2onr6",":hover_textDecoration":"x1lku1pv",$$css:!0},snapshotDesc:{paddingEnd:"xsyo7zv",paddingStart:"x1ye3gou",$$css:!0},textPairingBody:{display:"x1lliihq",paddingBottom:"x1120s5i",$$css:!0},timelineBackground:{backgroundColor:"xobhos8",height:"xqu0tyb",width:"xh8yej3",$$css:!0},timelineCompleted:{backgroundColor:"x1wbbese",height:"xqu0tyb",$$css:!0},timelineContainer:{bottom:"x1ey2m1c",position:"x10l6tqk",width:"xh8yej3",$$css:!0},videoContainer:{marginStart:"x1hk0nng",marginTop:"x1gslohp",$$css:!0},watchTabContainer:{height:"x1peatla",marginEnd:"xykv574",marginStart:"xbmpl8g",paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",paddingTop:"xyamay9",$$css:!0},watchTabPressable:{display:"x1lliihq",paddingTop:"xyamay9",$$css:!0},watchTabRoot:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",height:"xjp8j0k",marginEnd:"xktsk01",marginStart:"x1d52u69",paddingTop:"x1y1aw1k",position:"x1n2onr6",":hover_textDecoration":"x1lku1pv",$$css:!0}},l=c("gkx")("3476"),m=[c("CometEmoticonTransform")({size:18}),c("CometEmojiTransform")({size:18})],n=[c("CometEmoticonTransform")(),c("CometEmojiTransform")()],o=function(a){if(a!=null)return" "+Math.floor(a/60).toString()+":"+(Math.floor(a%60)<10?"0":"")+Math.floor(a%60).toString();else return""};function a(a){var b=a.adDuration,e=a.adPlaytime,f=a.contextCardHideAdBehavior,g=a.instreamAdsContextCardData,q=a.isAdsPlaying,r=a.isFullScreen,s=a.isWatchTab,t=a.onDismiss,u=a.onPlayFullLength;a=a.showPlayFullBtn;var v={url:g==null?void 0:g.adUrl};if(!g)return null;var w=g.isThirdPartyDealAd,x=(g==null?void 0:g.brandName)!=null?g.brandName.toString().trim():"",y=(g==null?void 0:g.source)!=null?g.source.toString():null,z=g.title,A=g.trackingCode,B=g.adId,C=g.feedObjectID,D=g.storyId,E=g.verifiedVoiceContext,F=g.scmeLabel,G=l&&g.scmeLabel!=null,H=g.politicalAdLabel,I=!G&&!q&&E!=null,J=0;e!=null&&b!==null&&b!==void 0&&b>0&&(J=e/b*100);var K=!q&&b!==null&&b!==void 0&&b>d("InstreamAdsConfig").DEFAULT_LONGER_AD_DURATION,L=function(a,b){return j.jsx(c("CometLink.react"),{color:"secondary",onClick:a,ref:b,weight:"bold",children:F})};B=B!=null&&C!=null&&D!=null&&E!=null?j.jsx(c("CometPoliticalInfosheetDialogSelector.react"),{adID:B,dialogTriggerFunc:L,feedObjectID:C,storyID:D,verifiedVoiceContext:E}):D!=null?j.jsx(c("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:c("StoryLocationTransparencyDialog.entrypoint"),otherProps:{},preloadParams:{storyID:D},children:function(a){return j.jsx(c("CometLink.react"),{color:"secondary",onClick:a,weight:"bold",children:F})}}):null;L=j.jsx("div",{className:""+((s===!0?" x1lq5wgf xgqcy7u x30kzoy x9jhf4c x9f619 xjp8j0k xktsk01 x1d52u69 x1y1aw1k x1n2onr6 x1lku1pv":" x1lq5wgf xgqcy7u x30kzoy x9jhf4c x9f619 xjp8j0k xktsk01 x1d52u69  x1n2onr6 x1lku1pv xw7yly9 x1yztbdb")+(r?" xrmyhay":""+(r?""+(s===!0?"":""):" xmjcpbm"))),children:j.jsxs(c("BaseRow.react"),{verticalAlign:"center",xstyle:s===!0?k.watchTabContainer:k.container,children:[K?j.jsx(c("BaseRowItem.react"),{xstyle:k.videoContainer,children:j.jsx("div",{className:"x9jhf4c x1lq5wgf x6ikm8r x10wlt62 xjp8j0k x13oubkp",children:g.clickToPlayVideo?j.jsx(c("VideoPlayerRelay.react"),{adClientToken:g.clientToken,canAutoplay:"do_not_autoplay",portalingEnabled:!1,subOrigin:"inline",video:g.clickToPlayVideo,children:j.jsx(c("VideoPlayerSurface.react"),{children:j.jsx(p,{adCompletedPercentage:J,adPlaytime:e,callback:g.callback})})}):null})}):null,!K&&g.profilePicURI!==null&&g.profilePicURI!==void 0&&g.profilePicURI.length>0?j.jsx(c("BaseRowItem.react"),{children:j.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:48,source:{uri:g.profilePicURI}})}):null,j.jsxs(c("BaseRowItem.react"),{expanding:!0,useDeprecatedStyles:!0,xstyle:K?k.snapshotDesc:k.item,children:[j.jsx("div",{className:"x6ikm8r x10wlt62"+((z!=null?" x4vbgl9 x1rdy4ex xjkvuk6 x1iorvi4 x9f619 x1lkfr7t xly2ba0":" x4vbgl9 x1rdy4ex xjkvuk6 x1iorvi4")+(z!=null&&z.length>0&&x!=null&&x.length>0?" xgujvf1":""+(z!=null?"":""))),children:j.jsx(c("TetraTextPairing.react"),{body:G&&a===!0?B:z!=null&&z.length>0?j.jsx("span",{"data-testid":void 0,children:j.jsx(c("CometTextWithEntities.react"),{text:z,transforms:n})}):null,bodyColor:r?"secondaryOnMedia":"secondary",bodyLineLimit:1,headline:j.jsx("span",{className:"x1lliihq x1120s5i",children:I&&H!=null?j.jsx(c("InstreamAdsPoliticalAdLabel.react"),{story:H,withLeadingDot:!1}):j.jsx(c("CometTextWithEntities.react"),{text:x.toString(),transforms:m})}),headlineColor:r?"white":"primary",headlineLineLimit:2,level:3})}),a===!0?j.jsx("div",{className:"x1anpbxc",children:u?j.jsx(c("CometPressable.react"),{display:"inline",onPress:u,children:j.jsxs(c("TetraText.react"),{color:r?"secondaryOnMedia":"secondary",numberOfLines:1,type:"body3",children:[h._("__JHASH__s8lLaDeCkPN__JHASH__"),o(b)]})}):null}):y!=null&&y.length>0?j.jsx("div",{className:"x1anpbxc","data-testid":void 0,children:j.jsxs(c("TetraText.react"),{color:r?"secondaryOnMedia":"secondary",numberOfLines:2,type:"body3",children:[q?null:h._("__JHASH__uwb8pd99De5__JHASH__"),G?j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}):null,G?B:null,q?null:j.jsx(c("CometMiddot.react"),{className:"xfs2ol5 x12mruv9"}),y]})}):null]}),j.jsx(c("BaseRowItem.react"),{children:r&&q?j.jsx("div",{className:"x1ok221b",children:g.ctaButton}):null}),j.jsxs(c("BaseRowItem.react"),{children:[q?null:j.jsx("div",{className:"x1mnrxsn xafmxuu",children:j.jsx(c("TetraCircleButton.react"),{color:"tertiary",icon:d("fbicon")._(i("478233"),20),label:"Button for dismissing the context card",onPress:t,size:24,type:"deemphasized"})}),j.jsx("div",{className:q?null:"x1anpbxc x10l6tqk",children:j.jsx(d("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:f,children:g.menuButton})})]})]})});return g.adUrl!=null&&w===!1?j.jsx(c("CometTrackingCodeContext").Provider,{value:A,children:j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:15,children:j.jsx(c("CometPressable.react"),{display:"inline",label:x,linkProps:v,overlayDisabled:!0,xstyle:s===!0?k.watchTabPressable:k.pressable,children:L})})}):null}a.displayName=a.name+" [from "+f.id+"]";function p(a){var b=a.adCompletedPercentage,e=a.adPlaytime,f=a.callback,g=d("VideoPlayerHooks").useController();a=d("VideoPlayerHooks").usePaused();var h=d("VideoPlayerHooks").usePlaying();h=c("useDebouncedValue")(h,5);a=a&&!h;h=function(){g.getCurrentState().paused&&(g.play("user_initiated"),g.setMuted(!0,null))};var i=function(){g.getCurrentState().playing&&(g.pause("product_initiated"),g.seek(0))},l=function(){f&&f("PLAY_LONGER_AD")};return j.jsxs(c("CometPressable.react"),{onPress:l,xstyle:k.niVideoPressable,children:[j.jsx("div",{className:"x5yr21d x10l6tqk xh8yej3",onMouseEnter:h,onMouseLeave:i,children:a?j.jsx(c("PlayButtonItemOverlay.react"),{}):null}),e!=null&&e>=1?j.jsx("div",{className:"xal61yo x1lcm9me x1yr5g0i xrt01vj x10y3i5r xqo3gd xlr8s2x x1txq2hj x1qx5ct2 x10l6tqk x1n7h9c3",children:j.jsx("div",{className:"x14ctfv x1pg5gke x9otpla x10l6tqk xq7jlbq xwa60dl xuxw1ft",children:o(e)})}):null,j.jsx("div",{className:"x1ey2m1c x10l6tqk xh8yej3",children:j.jsx("div",{className:"xobhos8 xqu0tyb xh8yej3",children:j.jsx("div",{className:"x1wbbese xqu0tyb",style:{width:b+"%"}})})})]})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsFeedContextCardSurface.react",["CometVideoPlayerInstreamAdsFeedContextCardContext","InstreamAdsExtraFieldsContext","InstreamAdsFeedNIContextCardImpl.react","InstreamAdsFeedVideoContextCardImpl.react","InstreamAdsHideAdBehaviorContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerInstreamAdsStateHooks","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");b=d("react");var h=b.useContext,i=b.useEffect,j=b.useRef,k=b.useState;function a(){var a=h(d("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext),b=h(d("CometVideoPlayerInstreamAdsFeedContextCardContext").CometVideoPlayerInstreamAdsFeedContextCardContext),e=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),f=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),g=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFeedContextCardStateValue(),l=k(null),m=l[0],n=l[1],o=j(null),p=j(!1);l=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardState();var q=l[0],r=l[1],s=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext();i(function(){var c={onClose:function(){(a==null?void 0:a.onClose)&&a.onClose(),p.current=!0,o.current=null,(b==null?void 0:b.onNodeChangeFunc)&&b.onNodeChangeFunc(null),r(null)},onOpen:function(){(a==null?void 0:a.onOpen)&&a.onOpen()}};n(c)},[a,b,r]);i(function(){if(m)if(e==="START_AD"||e==="START_NI_AD"||(e==="FETCH"||e==="INIT")&&q!==null||e==="END"&&!p.current){var a=e==="START_AD"||e==="START_NI_AD",d=e==="START_AD"&&(s==null?void 0:s.isTruncated),h=s==null?void 0:s.adDuration,i=s==null?void 0:s.adPlaytime,j=function(){p.current=!0,o.current=null,(b==null?void 0:b.onNodeChangeFunc)&&b.onNodeChangeFunc(null),r(null)},k=function(){f.setExtraFields(Object.assign(s||{},{isTruncated:!1}))},l=(g==null?void 0:g.isNIAd)!==!0?c("InstreamAdsFeedVideoContextCardImpl.react"):c("InstreamAdsFeedNIContextCardImpl.react"),n=l({adDuration:h,adPlaytime:i,contextCardHideAdBehavior:m,instreamAdsContextCardData:g,isAdsPlaying:a,isFullScreen:!1,isWatchTab:b.isWatchTab,onDismiss:j,onPlayFullLength:k,showPlayFullBtn:d});l=l({adDuration:h,adPlaytime:i,contextCardHideAdBehavior:m,instreamAdsContextCardData:g,isAdsPlaying:a,isFullScreen:!0,onDismiss:j,onPlayFullLength:k,showPlayFullBtn:d});p.current=!1;o.current=n;(b==null?void 0:b.onNodeChangeFunc)&&b.onNodeChangeFunc(n);r(l)}else o.current===null&&((b==null?void 0:b.onNodeChangeFunc)&&b.onNodeChangeFunc(null),r(null))},[m,e,g,b,r,s==null?void 0:s.isTruncated,s==null?void 0:s.adDuration,s==null?void 0:s.adClientToken,s==null?void 0:s.isNIAd,s==null?void 0:s.watchTillEnd,f,s]);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("InstreamAdsCurrentInsertionContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext,i=b.createContext(null);function a(){return h(i)}g.InstreamAdsCurrentInsertionContext=i;g.useInstreamAdsCurrentInsertion=a}),98);
__d("InstreamAdsIsEmptyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=d("react").useContext,i=b.createContext(!0);function a(){return h(i)}g.InstreamAdsIsEmptyContext=i;g.useInstreamAdsIsEmptyContext=a}),98);
__d("InstreamAdsStartIndicator.react",["fbt","CometProgressRing.react","DateConsts","InstreamAdsCurrentInsertionContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useEffect,k=b.useRef;function a(){var a,b=k(null),e=k(null),f=k(null),g=d("VideoPlayerHooks").useController(),l=g.getPlayheadPosition();g=d("VideoPlayerHooks").usePaused();var m=d("VideoPlayerInstreamAdsStateHooks").useStartIndicatorBeginningTimeState(),n=m[0],o=m[1];m=d("VideoPlayerInstreamAdsStateHooks").useAdBreaksTimeOffsetBeginningState();var p=m[0],q=m[1];m=(m=d("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion())==null?void 0:m.timeOffsetInMs;var r=((a=m)!=null?a:0)/d("DateConsts").MS_PER_SEC;j(function(){(e==null?void 0:e.current)&&(b==null?void 0:b.current)&&e.current.style.setProperty("width",(b.current.clientWidth+38).toString()+"px")});j(function(){var a;(n===null||l-((a=n)!=null?a:0)>((a=p)!=null?a:0))&&(o(l),q(r))},[l,r,o,n,q,p]);if(m==null||l-((a=n)!=null?a:0)>((m=p)!=null?m:0))return i.jsx(i.Fragment,{});a=r-l;m=n==null?0:(l-n)/(r-n)*100;var s="default",t=16,u=h._("__JHASH__BEvvefAAJAs__JHASH__"),v=function(){f.current&&(f.current.style.visibility="hidden")};return i.jsxs("div",{className:"x4afe7t x10e4vud xu5i820 xa3vuyk x10l6tqk xoie2o3",ref:f,children:[i.jsx("div",{className:"xal61yo x1lcm9me x1yr5g0i xrt01vj x10y3i5r x1ey2m1c x1txq2hj xd7y6wv x10l6tqk x17qophe",ref:e}),i.jsxs("div",{className:"x1ey2m1c xd7y6wv x1hc1fzr x10l6tqk x17qophe",children:[i.jsx("div",{className:"x9otpla x1n2onr6 xr6gfmr xwa60dl",children:i.jsx(c("CometProgressRing.react"),{beginningPercentage:m,color:"light",duration:a,explicitStartTime:Date.now()-m/100*(a*1e3),onComplete:v,pause:g,size:t,type:s})}),i.jsx("div",{className:"x14ctfv x1pg5gke x132q4wb x9otpla x10l6tqk x10ick3y xwa60dl xuxw1ft",ref:b,children:u})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useInstreamAdsFetcher",["CometFeedStoryContext","CometRelay","InstreamAdsConfig","InstreamAdsCurrentInsertionContext","InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerTracePolicyContext","WebPixelRatio","createVideoStateHook","react","useInstreamAdsFetcherQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;c=d("react");var i=c.useEffect,j=c.useRef;e=d("createVideoStateHook").createVideoStateHook();var k=e.stateHook;f=d("createVideoStateHook").createVideoStateHook();var l=f.stateHook;c=d("createVideoStateHook").createVideoStateHook();var m=c.stateHook;e=d("createVideoStateHook").createVideoStateHook();var n=e.valueHook;f=d("createVideoStateHook").createVideoStateHook();var o=f.stateHook;c=d("createVideoStateHook").createVideoStateHook();var p=c.stateHook,q=h!==void 0?h:h=b("useInstreamAdsFetcherQuery.graphql");function r(a){return a==="GenericAttachmentMedia"||a==="PHOTO"}function a(a){var b=a.playerFormat,c=a.subOrigin,e=a.videoFBID,f=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),g=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),h=d("CometRelay").useRelayEnvironment();a=k(null);var s=a[0],t=a[1];a=l(null);var u=a[0],v=a[1];a=m(null);var w=a[0],x=a[1],y=n({current:null}),z=d("InstreamAdsCurrentInsertionContext").useInstreamAdsCurrentInsertion();a=d("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy();var A=a.initialTracePolicy;a=a.routeTracePolicy;var B=(A=A)!=null?A:a,C=d("VideoPlayerHooks").useAdClientToken();A=o([null,null]);a=A[0];var D=A[1];A=p();var E=A[0],F=A[1],G=(A=d("CometFeedStoryContext").useCometFeedStoryContext())==null?void 0:A.storyID,H=d("VideoPlayerHooks").useBroadcastStatus(),I=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),J=j({playerFormat:null});i(function(){J.current.playerFormat=b},[b]);i(function(){(f==="INIT"||f==="END")&&(y.current=null,t(null),D([null,null]))},[y,f,D,t]);i(function(){G!==null&&F(G);if(z==null)return;if(y.current!==null)return;if(H!=="LIVE"&&z.index===d("InstreamAdsConfig").UNIFIED_SCHEDULER_AD_INDEX)return;var a;H==="VOD_READY"?a="VOD":H==="LIVE"?a="LIVE":a="NONLIVE";a=d("CometRelay").fetchQuery(h,q,{adTriggerSource:z.adTriggerSource,first:10,hostVideoId:e,insertionPointOrigin:z.insertionPointOrigin,instreamPlacement:z.instreamPlacement,instreamVideoAdBreakIndex:z.index,instreamVideoAdType:a,isSponsorHostVideo:C!=null,playerFormat:J.current.playerFormat,playerSubOrigin:c,renderLocation:"feed_mobile",requestedAdFormat:z.adFormat,scale:d("WebPixelRatio").get(),storyIdentifier:E,tracePolicy:B});var b=a.subscribe({error:function(a){},next:function(a){var b=a.viewer.instream_video_ads.edges,c=a.viewer.instream_video_ads.query_refetch_interval_s;a=(a=(a=a.viewer)==null?void 0:(a=a.instream_video_ads)==null?void 0:a.should_show_ad_pod)!=null?a:!1;(b.length===0||a&&b.length===1)&&g.setExtraFields(Object.assign(I||{},{unifiedSchedulerRefetchIntervalSec:c}));if((!a&&b.length>0||b.length>1)&&y.current===null){var d,e=b[0].node,f=e.attachments[0].media.__typename;f=r(f);f=z.instreamPlacement==="NON_INTERRUPTIVE"||f;d=(d=z.adFormat)==null?void 0:d.startsWith("SKIPPABLE_VIDEO");var h=null;if(a){var i;b=b[1].node;h=b==null?void 0:(i=b.sponsored_data)==null?void 0:i.client_token;t([e,b]);y.current=[e,b]}else t([e]),y.current=[e];g.setExtraFields(Object.assign(I||{},{adClientToken:(i=e.sponsored_data)==null?void 0:i.client_token,adClientTokenSecond:h,adPodIndex:0,isAdPod:a,isNIAd:f,isSkippableAd:d,unifiedSchedulerRefetchIntervalSec:c}));g.setIsEmpty(!1);f?(x(null),v(e)):(v(null),x(e))}}});return function(){b.unsubscribe(),y.current=null}},[h,g,c,e,z,C,J,B,y,t,E,G,F,H,v,x]);return{NIAdStory:u,adPorableVideoID:a,instreamAdsStory:s,palmState:f,setAdPortableVideoID:D,videoAdStory:w}}g["default"]=a}),98);
__d("PMVCometInterruptionsCounterReset",["CometRelay","PMVCometInterruptionsCounterResetMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("PMVCometInterruptionsCounterResetMutation.graphql");function a(a,b){b={mutation:i,onCompleted:b&&b.onSuccess,onError:b&&b.onFailure,variables:{}};return d("CometRelay").commitMutation(a,b)}g["default"]=a}),98);
__d("PmvInterruptionsEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744185");b=d("FalcoLoggerInternal").create("pmv_interruptions_events",a);e=b;g["default"]=e}),98);
__d("PMVMonetizationUtils",["PMVCometInterruptionsCounterReset","PmvInterruptionsEventsFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("PMVCometInterruptionsCounterReset")(a,{onFailure:function(a){c("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"error on resetting pmv comet interruptions counter",error_message:a.toString(),event:"pmv_comet_interruptions_counter_reset_error"}})},onSuccess:function(a){a.pmv_comet_interruptions_counter_reset===!0?c("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"succeeded resetting pmv comet interruptions counter",event:"pmv_comet_interruptions_counter_reset"}}):c("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"failed resetting pmv comet interruptions counter",event:"pmv_comet_interruptions_counter_reset_error"}})}})}g.PMVCometCounterReset=a}),98);
__d("useInstreamAdsOrganicVideoControl",["CometRelay","InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsPalmStateContext","PMVMonetizationUtils","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","createVideoStateHook","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=c("requireDeferred")("CommercialBreakClickFalcoEvent").__setRef("useInstreamAdsOrganicVideoControl"),k=c("requireDeferred")("CommercialBreakEndFalcoEvent").__setRef("useInstreamAdsOrganicVideoControl");e=d("createVideoStateHook").createVideoStateHook("");var l=e.valueHook;function a(){var a=d("CometRelay").useRelayEnvironment(),b=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),c=d("VideoPlayerHooks").useController(),e=l({current:null}),f=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),g=(f==null?void 0:f.isAdPod)===!0&&(f==null?void 0:f.adPodIndex)===1,m=b==="END"&&g?f==null?void 0:f.adClientTokenSecond:f==null?void 0:f.adClientToken,n=f==null?void 0:f.isNIAd,o=d("VideoPlayerHooks").useIsPremiumMusicVideo(),p=d("VideoPlayerHooks").useIsNCSR(),q=(f==null?void 0:f.isSkippableAd)||b==="END"&&g,r=i(""),s=i(null),t=f==null?void 0:f.watchTillEnd,u=(f==null?void 0:f.adPlaytime)||0,v=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter();h(function(){if((b==="END"||g)&&(n===!0||s.current==="PLAY_LONGER_AD"||r.current!==m||!m)){if(b==="END"){var f=e.current;f&&c.unfreeze(f);e.current=null;if(c.getCurrentState().ended)v(!0);else{f=c.getCurrentState();f=f.paused;f&&c.play("commercial_break")}}if(s.current==="START_AD"&&(t===!0&&u<d("InstreamAdsConfig").DEFAULT_AD_COMPLETION_DURATION||u>=d("InstreamAdsConfig").DEFAULT_AD_COMPLETION_DURATION||q===!0)){var h=t!==!0&&q===!0;k.onReady(function(a){a.log(function(){return{commercial_break_ad_client_token:m,ending_reason:h?"skip_ad":"playback_finished"}})});h&&j.onReady(function(a){a.log(function(){return{ad_break_click_source:"skip_button_click",commercial_break_ad_client_token:m}})});(o||p)&&d("PMVMonetizationUtils").PMVCometCounterReset(a)}r.current=m}s.current=b},[m,a,o,c,b,v,e,t,n,p,u,q,g]);return e}g["default"]=a}),98);
__d("useLiveInstreamAdsScheduler",["InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","gkx","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=200,k=2e4,l=2e4;function a(){var a=d("VideoPlayerInstreamAdsStateHooks").useUnifiedSchedulerLastFetchTimeState(),b=a[0],e=a[1];a=d("VideoPlayerInstreamAdsStateHooks").useWaitingForAdFetchState();var f=a[0],g=a[1],m=i(f),n=d("VideoPlayerHooks").useController(),o=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),p=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),q=d("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),r=i(q),s=d("VideoPlayerHooks").useWatchTime(),t=d("VideoPlayerHooks").useLastPlayedTime(),u=d("VideoPlayerHooks").useIsLive(),v=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),w=i(0),x=d("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS;h(function(){r.current=q},[q]);h(function(){if(!u)return;function a(){if(o==="INIT"){var a={adFormat:null,adTriggerSource:d("InstreamAdsConfig").UNIFIED_SCHEDULER_TIGGER_SOURCE,index:d("InstreamAdsConfig").UNIFIED_SCHEDULER_AD_INDEX,insertionPointOrigin:null,instreamPlacement:"NON_INTERRUPTIVE",timeOffsetInMs:null};p.setCurrentInsertion(a);p.setState("FETCH")}}function f(){if(r.current===!0&&m.current===!0){c("setTimeout")(function(){f()},x);return}if(o==="FETCH"&&r.current===!1){(v==null?void 0:v.isNIAd)===!0&&(p.setState("START_NI_AD"),c("setTimeout")(function(){p.setState("INIT")},j));m.current=!1;g(!1);var a=s+(Date.now()-t);e(a)}}var h=n.subscribe(function(){if(c("gkx")("1638022")){var h;if(t===0)return;var i=s+(Date.now()-t);o==="END"&&p.setState("INIT");w.current=(h=v==null?void 0:v.unifiedSchedulerRefetchIntervalSec)!=null?h:d("InstreamAdsConfig").getUnifiedSchedulerFrequencyMs()/1e3;o==="INIT"&&(i>k&&(i-b>=w.current*1e3&&a()));i>d("InstreamAdsConfig").getUnifiedSchedulerFrequencyMs()&&o==="FETCH"&&m.current===!1&&(m.current=!0,g(!0),f(),c("setTimeout")(function(){o==="FETCH"&&(p.setState("INIT"),m.current===!0&&(e(s+(Date.now()-t)),g(!1),m.current=!1))},l))}});return function(){h.remove()}},[n,p,s,t,b,e,v,f,g,u,q,o])}g["default"]=a}),98);
__d("useLiveInstreamPreRollAdsScheduler",["InstreamAdsConfig","InstreamAdsExtraFieldsContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","gkx","qex","react","requireDeferred","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=c("requireDeferred")("CommercialBreakEndFalcoEvent").__setRef("useLiveInstreamPreRollAdsScheduler"),k=200;function a(a){var b=d("VideoPlayerHooks").useController(),e=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),f=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),g=d("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),l=i(g),m=d("VideoPlayerHooks").useLastPlayedTime(),n=d("VideoPlayerHooks").useIsLive(),o=d("InstreamAdsExtraFieldsContext").useInstreamAdsExtraFieldsContext(),p=i(null),q=i(!1),r=i(!1),s=d("InstreamAdsConfig").getIsLivePrerollMaxFetchTimeMS(),t=d("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS,u=d("VideoPlayerHooks").useWatchTime(),v=d("VideoPlayerInstreamAdsStateHooks").useUnifiedSchedulerLastFetchTimeState();v[0];var w=v[1];h(function(){p.current=o},[o]);h(function(){l.current=g},[g]);h(function(){if(!n)return;if(a.subOrigin!=="topic_live"&&a.subOrigin!=="channel_tab")return;function g(){e!=="FETCH"&&f.setState("END"),r.current=!0}function h(){var a={adFormat:null,adTriggerSource:d("InstreamAdsConfig").UNIFIED_SCHEDULER_TIGGER_SOURCE,index:d("InstreamAdsConfig").IS_LIVE_PREROLL_INDEX,insertionPointOrigin:null,instreamPlacement:"PRE_ROLL",timeOffsetInMs:null};f.setCurrentInsertion(a);f.setState("FETCH")}function i(){if((l.current===!0||p.current===null)&&r.current===!1){c("setTimeout")(function(){i()},t);return}if(l.current===!1&&r.current===!1){var a;((a=p.current)==null?void 0:a.isNIAd)===!0?(f.setState("START_NI_AD"),c("setTimeout")(function(){e!=="FETCH"&&f.setState("END")},k)):((a=p.current)==null?void 0:a.isNIAd)===!1&&f.setState("START_AD");r.current=!0;a=u+(Date.now()-m);w(a)}}function v(){c("setTimeout")(function(){l.current===!0&&r.current===!1&&(j.onReady(function(a){a.log(function(){return{ad_break_index:String(d("InstreamAdsConfig").IS_LIVE_PREROLL_INDEX),ending_reason:"timed_out"}})}),g())},s),i()}function x(){r.current===!1&&q.current===!1&&(q.current=!0,v())}var y=b.subscribe(function(){if(c("gkx")("1638022")){var a=c("qex")._("1673")||!1;a&&(o==null?void 0:o.hasScheduledPrerollOnce)!==!0&&(e==="INIT"&&r.current===!1&&(f.setExtraFields({hasScheduledPrerollOnce:!0}),h()),x())}});return function(){y.remove()}},[b,f,u,m,o,n,g,e,t,s,w,a.playerFormat,a.subOrigin])}g["default"]=a}),98);
__d("useVodInstreamAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","clearTimeout","createVideoStateHook","react","setTimeout","useLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;e=d("createVideoStateHook").createVideoStateHook();var j=e.stateHook,k=200;function a(){var a=m(-1),b=d("VideoPlayerHooks").useController(),e=i(null),f=i(null),g=i(null),j=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),n=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),o=d("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),p=i(o),q=i(null),r=i(null),s=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsValue(),t=c("useLocalStorage")("instream_ads_vod_gap_rule",null),u=t[0],v=t[1];h(function(){p.current=o},[o]);h(function(){n==="START"&&(g.current!==null&&c("clearTimeout")(g.current),g.current=c("setTimeout")(function(){j.setState("START_AD");var a=Date.now();v(a)},d("InstreamAdsConfig").getNonLiveBeginningTransitionTimeMS()));return function(){g.current!==null&&c("clearTimeout")(g.current)}},[n,j,v]);h(function(){function g(){e.current!==null&&c("clearTimeout")(e.current),f.current!==null&&c("clearTimeout")(f.current),e.current=null,f.current=null,a.current=-1}function h(a){var f=b.getPlayheadPosition()*d("DateConsts").MS_PER_SEC,g=s[a];g=g.timeOffsetInMs;if(g==null)return;g=g-f-d("InstreamAdsConfig").getPreFetchTimeMs();if(g>d("InstreamAdsConfig").getPreFetchTimeDeltaMs()){e.current!==null&&c("clearTimeout")(e.current);f=g/2;e.current=c("setTimeout")(function(){h(a)},f);return}p.current!==!1&&j.setState("INIT");g=Date.now();u!==null&&g-u<=d("InstreamAdsConfig").getNonLiveMidrollGapRuleMS()?j.setState("INIT"):(j.setCurrentInsertion(s[a]),j.setState("FETCH"));e.current!==null&&(c("clearTimeout")(e.current),e.current=null)}function i(e){var h=b.getPlayheadPosition()*d("DateConsts").MS_PER_SEC,l=s[e].timeOffsetInMs;if(l==null)return;l=l-h;p.current===!1&&s[e].instreamPlacement==="MID_ROLL"&&j.setState("STARTING_INDICATOR");l=Math.min(l,d("InstreamAdsConfig").getRecheckStartMs());if(l>d("InstreamAdsConfig").getStartDeltaMs()){f.current!==null&&c("clearTimeout")(f.current);f.current=c("setTimeout")(function(){i(e)},l);return}p.current===!1?(s[e].instreamPlacement==="MID_ROLL"?j.setState("START"):s[e].instreamPlacement==="NON_INTERRUPTIVE"&&(j.setState("START_NI_AD"),g(),c("setTimeout")(function(){j.setState("END"),g(),n()},k)),a.current=e):(j.setState("INIT"),g(),n())}function m(a,b){if(a>=s.length)return;var g=s[a];g=g.timeOffsetInMs;if(g==null)return;g=g-b;g/=2;b=g-d("InstreamAdsConfig").getPreFetchTimeMs();if(g<0){n();return}b<=d("InstreamAdsConfig").getPreFetchTimeDeltaMs()?h(a):(e.current!==null&&c("clearTimeout")(e.current),e.current=c("setTimeout")(function(){h(a)},b));g-=d("InstreamAdsConfig").getStartingIndicatorMs();g<=d("InstreamAdsConfig").getStartDeltaMs()?i(a):(f.current!==null&&c("clearTimeout")(f.current),f.current=c("setTimeout")(function(){i(a)},g))}function n(){var c=b.getPlayheadPosition()*d("DateConsts").MS_PER_SEC,e=l(c,s);e===a.current&&(e+=1);m(e,c)}var o=(s==null?void 0:s.length)>0?b.subscribe(function(){var a=b.getCurrentState(),c=a.paused;a=a.playing;a&&a!==q.current?n():c&&c!==r.current&&g();q.current=a;r.current=c}):null;return function(){o&&o.remove(),g()}},[b,a,s,j,u])}function l(a,b){var c=b.length,e=c;for(c=c-1;c>=0;c--){var f=b[c].timeOffsetInMs;if(f!==null&&Number(f)>a+d("InstreamAdsConfig").getStartDeltaMs())e=c;else break}return e}function m(a){a=j({current:a});var b=a[0];a[1];return b}g["default"]=a}),98);
__d("useVodInstreamPostRollAdsScheduler",["DateConsts","InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamPalmStateManagerContext","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(){var a=i(!1),b=d("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),c=i(b),e=d("VideoPlayerHooks").useDuration(),f=d("InstreamAdsPalmStateContext").useInstreamAdsPalmStateContext(),g=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),j=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollValue(),k=i(!1),l=d("VideoPlayerHooks").useController(),m=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollEndedOrSkippedStateSetter();h(function(){c.current=b},[b]);h(function(){function b(){var a=l.getPlayheadPosition()*d("DateConsts").MS_PER_SEC;a=e*d("DateConsts").MS_PER_SEC-a;return a<=d("InstreamAdsConfig").getPostRollPreFetchTimeMs()&&a>=d("InstreamAdsConfig").getPostRollPreFetchEndTimeMs()}function f(){g.setCurrentInsertion(j),g.setState("FETCH_POST_ROLL"),m(!1),a.current=!0}function h(){c.current===!1?g.setState("START_AD"):(g.setState("INIT"),m(!0)),k.current=!0}var i=j!==null?l.subscribe(function(){var c=l.getCurrentState(),d=c.ended;c=c.playing;c&&a.current===!1&&b()&&f();d&&a.current===!0&&k.current===!1&&h()}):null;return function(){i&&i.remove()}},[e,f,g,j,m,l])}g["default"]=a}),98);
__d("useVodInstreamPreRollAdsScheduler",["InstreamAdsConfig","InstreamAdsIsEmptyContext","InstreamPalmStateManagerContext","PmvInterruptionsEventsFalcoEvent","VideoPlayerHooks","react","setTimeout","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a){var b=d("VideoPlayerHooks").useController(),e=i(null),f=d("InstreamPalmStateManagerContext").useInstreamPalmStateManager(),g=d("InstreamAdsIsEmptyContext").useInstreamAdsIsEmptyContext(),j=i(g),k=i(!1),l=i(!1),m=i(0),n=c("useVideoPlayerHasStartedPlayingAtLeastOnce")(),o=a.isPMV?d("InstreamAdsConfig").getPMVInterruptionsPreRollFetchTimeMs():d("InstreamAdsConfig").getNonPmvMaxFetchTimeMS(),p=a.isPMV?1e3:d("InstreamAdsConfig").DEFAULT_FETCH_TIME_INTERVAL_MS;h(function(){j.current=g},[g]);h(function(){function d(){f.setState("INIT");e.current=null;var a=b.getCurrentState();a=a.paused;a&&b.play("commercial_break");k.current=!0}function g(){if(j.current===!0&&k.current===!1){e.current=c("setTimeout")(function(){m.current+=p,g()},p);return}j.current===!1&&k.current===!1&&(f.setState("START_AD"),k.current=!0,a.isPMV&&c("PmvInterruptionsEventsFalcoEvent").log(function(){return{debug_info:"Total Fetch Time: "+m.current+" Max Fetch Time: "+o,event:"show_pmv_interruption",video_id:a.videoFBID}}))}function h(){c("setTimeout")(function(){j.current===!0&&(d(),a.isPMV&&c("PmvInterruptionsEventsFalcoEvent").log(function(){return{event:"fetch_pmv_interruption_time_out",video_id:a.videoFBID}}))},o),f.setState("FETCH_PRE_ROLL"),f.setCurrentInsertion(a.preRoll),g()}var i=b.subscribe(function(){var d=b.getCurrentState(),e=d.paused;d=d.playing;d&&k.current===!1&&a.preRoll!=null&&!n&&b.pause("commercial_break");e&&k.current===!1&&a.preRoll!=null&&l.current===!1&&!n&&(h(),c("PmvInterruptionsEventsFalcoEvent").log(function(){return{event:"pmv_interruption_requested",video_id:a.videoFBID}}),l.current=!0)});return function(){i.remove()}},[b,a.preRoll,f,a.videoFBID,o,n,p,a.isPMV])}g["default"]=a}),98);
__d("InstreamAdsPalmPlayer.react",["CometErrorBoundary.react","InstreamAdsCurrentInsertionContext","InstreamAdsDisplay.react","InstreamAdsExtraFieldsContext","InstreamAdsFeedContextCardSurface.react","InstreamAdsHideAdBehaviorContext","InstreamAdsIsEmptyContext","InstreamAdsPalmStateContext","InstreamAdsStartIndicator.react","InstreamPalmStateManagerContext","VideoPlayerDebugInstreamAdsAPI","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","cr:1341999","gkx","react","requireDeferred","useInstreamAdsFetcher","useInstreamAdsOrganicVideoControl","useLiveInstreamAdsScheduler","useLiveInstreamPreRollAdsScheduler","useVodInstreamAdsScheduler","useVodInstreamPostRollAdsScheduler","useVodInstreamPreRollAdsScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useEffect,j=e.useRef,k=c("requireDeferred")("CommercialBreakStartingIndicatorFalcoEvent").__setRef("InstreamAdsPalmPlayer.react"),l=c("gkx")("1891505");e=40;var m={location:"bottom",size:e};function a(a){var e=a.midRolls,f=a.playerFormat,g=a.preRoll,j=a.subOrigin;a=a.videoFBID;var k=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsFullScreenContextCardStateValue(),p=d("VideoPlayerHooks").useVideoPlayerCaptionsReservationActions(),q=p.release,r=p.reserve;p=k!==null;i(function(){l&&(f==="tahoe"||f==="full_screen")&&k!==null?r(m):q(m)},[p,f,r,q]);return h.jsx(c("CometErrorBoundary.react"),{children:h.jsxs(n,{children:[b("cr:1341999")&&h.jsx(b("cr:1341999"),{}),l&&(f==="tahoe"||f==="full_screen")?h.jsx("div",{className:"x1qqjqyx x10l6tqk xuerkxl xbwjon8",children:k}):null,c("InstreamAdsFeedContextCardSurface.react")?h.jsx(c("InstreamAdsFeedContextCardSurface.react"),{}):null,h.jsx(o,{midRolls:e,playerFormat:f,preRoll:g,subOrigin:j,videoFBID:a})]})})}a.displayName=a.name+" [from "+f.id+"]";function n(a){a=a.children;var b=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsState(),c=b[0];b=b[1];var e=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsEmptyState(),f=e[0],g=e[1];e=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsCurrentInsertionState();var l=e[0],m=e[1];e=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsExtraFieldsState();var n=e[0];e=e[1];var o=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsHideAdBehaviorState(),p=o[0];o=o[1];e=j({setCurrentInsertion:m,setExtraFields:e,setHideAdBehavior:o,setIsEmpty:g,setState:b});var q=n==null?void 0:n.adClientToken,r=(n==null?void 0:n.isAdPod)===!0?n==null?void 0:n.adClientTokenSecond:null;i(function(){function a(){m(null),g(!0)}(c==="INIT"||c==="END"||c==="START_NI_AD")&&a()},[m,g,c]);i(function(){c==="STARTING_INDICATOR"&&(k.onReady(function(a){a.log(function(){return{commercial_break_ad_client_token:q}})}),r!==null&&k.onReady(function(a){a.log(function(){return{commercial_break_ad_client_token:r}})}))},[c,q,r]);return h.jsx(d("InstreamAdsExtraFieldsContext").InstreamAdsExtraFieldsContext.Provider,{value:n,children:h.jsx(d("InstreamAdsPalmStateContext").InstreamAdsPalmStateContext.Provider,{value:c,children:h.jsx(d("InstreamAdsIsEmptyContext").InstreamAdsIsEmptyContext.Provider,{value:f,children:h.jsx(d("InstreamPalmStateManagerContext").InstreamPalmStateManagerContext.Provider,{value:e.current,children:h.jsx(d("InstreamAdsCurrentInsertionContext").InstreamAdsCurrentInsertionContext.Provider,{value:l,children:h.jsx(d("InstreamAdsHideAdBehaviorContext").InstreamAdsHideAdBehaviorContext.Provider,{value:p,children:a})})})})})})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.midRolls,e=a.playerFormat,f=a.preRoll,g=a.subOrigin;a=a.videoFBID;var i=d("VideoPlayerHooks").useIsPremiumMusicVideo();c("useVodInstreamPreRollAdsScheduler")({isPMV:i,preRoll:f,videoFBID:a});c("useVodInstreamPostRollAdsScheduler")();c("useVodInstreamAdsScheduler")();c("useLiveInstreamPreRollAdsScheduler")({playerFormat:e,subOrigin:g});c("useLiveInstreamAdsScheduler")();i=c("useInstreamAdsOrganicVideoControl")();f=c("useInstreamAdsFetcher")({playerFormat:e,subOrigin:g,videoFBID:a});a=f.NIAdStory;var j=f.adPorableVideoID,k=f.instreamAdsStory,l=f.palmState,m=f.setAdPortableVideoID;f=f.videoAdStory;c("VideoPlayerDebugInstreamAdsAPI").useVideoPlayerDebugAPIDefinition({midRolls:b,organicVideoFreezeTokenRef:i});return h.jsxs(h.Fragment,{children:[l==="STARTING_INDICATOR"&&h.jsx(c("InstreamAdsStartIndicator.react"),{}),h.jsx(c("InstreamAdsDisplay.react"),{NIAdStory:a,adPorableVideoID:j,freezeTokenRef:i,instreamAdsStory:k,palmState:l,playerFormat:e,setAdPortableVideoID:m,subOrigin:g,videoAdStory:f})]})}g["default"]=a}),98);
__d("useInstreamAdsHaloFetcher",["CometFeedStoryContext","CometRelay","InstreamAdsConfig","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerTracePolicyContext","createVideoStateHook","gkx","react","useInstreamAdsHaloFetcherQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useEffect,j=e.useRef,k=e.useState;f=d("createVideoStateHook").createVideoStateHook();var l=f.stateHook,m=h!==void 0?h:h=b("useInstreamAdsHaloFetcherQuery.graphql");function a(a,b,e,f,g){var h=d("VideoPlayerHooks").useAdClientToken(),n=d("CometRelay").useRelayEnvironment(),o=d("VideoPlayerTracePolicyContext").useVideoPlayerTracePolicy(),p=o.initialTracePolicy;o=o.routeTracePolicy;var q=(p=p)!=null?p:o;p=k(!1);var r=p[0],s=p[1];o=k();p=o[0];var t=o[1];o=k(!1);var u=o[0],v=o[1];o=k();var w=o[0],x=o[1];o=k(!a);var y=o[0],z=o[1],A=d("VideoPlayerHooks").usePaused(),B=j(n),C=d("VideoPlayerHooks").useCurrentTimeThrottled(500),D=j(e),E=j(f),F=j(g);a=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState();var G=a[0];o=a[1];a=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState();var H=a[0];a=a[1];var I=l(),J=I[0],K=I[1],L=(I=d("CometFeedStoryContext").useCometFeedStoryContext())==null?void 0:I.storyID,M=d("VideoPlayerHooks").useBroadcastStatus(),N=d("InstreamAdsConfig").getHaloStartFetchTimeMS();i(function(){B.current=n},[n]);i(function(){var a;C*1e3>((a=b)!=null?a:0)&&v(!0)},[C,b]);i(function(){D.current=e},[e]);i(function(){E.current=f},[f]);i(function(){F.current=g},[g]);i(function(){L!==null&&K(L)},[J,L,K]);i(function(){C*1e3<=N&&z(!0)},[C,N]);i(function(){if(!y||G.length>0||r||A||H||!u)return;var a=d("CometRelay").fetchQuery(B.current,m,{hostVideoId:F.current,instreamVideoAdType:M==="VOD_READY"?"VOD":"NONLIVE",isSponsorHostVideo:h!=null,playerFormat:D.current,playerSubOrigin:E.current,storyIdentifier:J,tracePolicy:q}),b=a.subscribe({error:function(a){s(!0)},next:function(a){var b=a.scrubber.instream_video_ad_breaks;a=a.scrubber.post_roll_ad_break;b&&b.length>0&&t(b.map(function(a){return{adFormat:a.ad_format,index:a.index,insertionPointOrigin:a.insertion_point_origin,instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms}}));a&&x({adFormat:a.ad_format,index:a.index,insertionPointOrigin:a.insertion_point_origin,instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms});s(!0)}});return function(){b.unsubscribe()}},[h,G,y,o,a,J,r,A,H,q,M,u]);I=c("gkx")("1858564");I&&(p&&p.length>1&&(p[0].instreamPlacement="NON_INTERRUPTIVE",p[1].instreamPlacement="MID_ROLL"));o=c("gkx")("2046");o&&(p&&p.length>0&&(p[0].instreamPlacement="MID_ROLL",p[0].adFormat="SKIPPABLE_VIDEO_AD_POD"));return{midRolls:p||[],postRoll:w,preRoll:null}}g["default"]=a}),98);
__d("InstreamVideoAdBreaksPlayerImpl.react",["CometRelay","InstreamAdsPalmPlayer.react","InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql","VideoPlayerInstreamAdsStateHooks","gkx","react","useInstreamAdsHaloFetcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useMemo,l=c("gkx")("1908702"),m=["entry_point","inline_end_screen"],n=102;function a(a){var b=o(a.instreamVideoAdBreaksComet,a.playerFormat,a.subOrigin),e=b.preRoll!==null,f=c("useInstreamAdsHaloFetcher")(e,(e=a.instreamExtraConfig)==null?void 0:e.instreamHaloDelayTimeSeconds,a.playerFormat,a.subOrigin,a.videoFBID);e=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsMidRollsState();var g=e[0],h=e[1];e=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsPostRollState();var k=e[0],l=e[1];j(function(){var a;g.length<=0&&(f==null?void 0:f.midRolls)&&((a=f.midRolls)==null?void 0:a.length)>0&&h(f.midRolls)},[f,g,h]);j(function(){k===null&&(f==null?void 0:f.postRoll)&&f.postRoll!==null&&l(f.postRoll)},[f,k,l]);return i.jsx(c("InstreamAdsPalmPlayer.react"),{midRolls:(f==null?void 0:f.midRolls)||[],playerFormat:a.playerFormat,preRoll:b.preRoll,subOrigin:a.subOrigin,videoFBID:a.videoFBID})}a.displayName=a.name+" [from "+f.id+"]";function o(a,c,e){var f=d("CometRelay").useFragment(h!==void 0?h:h=b("InstreamVideoAdBreaksPlayerImpl_adBreaks.graphql"),a);a=k(function(){return f.mid_rolls.map(function(a){return{adFormat:null,index:a.index,insertionPointOrigin:"VIDEO",instreamPlacement:a.instream_placement,timeOffsetInMs:a.time_offset_in_ms}}).filter(function(a){return a.instreamPlacement==="MID_ROLL"}).sort(function(a,b){return Number(a.timeOffsetInMs)-Number(b.timeOffsetInMs)})},[f.mid_rolls]);var g=null;c==="tahoe"&&f.pre_roll!=null?g={adFormat:null,index:f.pre_roll.index,instreamPlacement:f.pre_roll.instream_placement,timeOffsetInMs:null}:l&&m.includes(e)&&(g={adFormat:null,index:n,insertionPointOrigin:"VIDEO",instreamPlacement:"PRE_ROLL",timeOffsetInMs:null});return{midRolls:a,postRoll:null,preRoll:g}}g["default"]=a}),98);
__d("CommercialBreakEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743431");b=d("FalcoLoggerInternal").create("commercial_break_end",a);e=b;g["default"]=e}),98);
__d("CommercialBreakClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1993619");b=d("FalcoLoggerInternal").create("commercial_break_click",a);e=b;g["default"]=e}),98);
__d("CommercialBreakStartingIndicatorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743432");b=d("FalcoLoggerInternal").create("commercial_break_starting_indicator",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.seq([function(a){return b.fe(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(c){return b.db.table(115).add({statusId:[0,0],timestampMs:b.i64.of_float(Date.now()),errorShouldBeShown:a[0]})}])},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.seq([function(a){return c.fe(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return c.db.table(114).add({statusId:void 0,timestampMs:c.i64.of_float(Date.now()),internetConnectionState:a[0]})},function(d){return c.sp(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],[0,1]))}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("MDSColumnContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);g["default"]=b}),98);
__d("MDSColumnItem.react",["BaseView.react","CometErrorBoundary.react","CometPlaceholder.react","MDSColumnContext","UserAgent","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={divider:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",":first-child_display":"xh99ass",$$css:!0},dividerMargin:{":first-child:empty + *_marginTop":"xb939ph",$$css:!0},expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},marginFirstChild:{":first-child_marginTop":"x14l7nz5",$$css:!0},marginLastChild:{":last-child_marginBottom":"xzboxd6",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},k={center:{alignItems:"x6s0dn4",$$css:!0},end:{alignItems:"xuk3077",$$css:!0},start:{alignItems:"x1cy8zhl",$$css:!0}},l={4:{paddingStart:"x1e558r4",paddingEnd:"x150jy0e",$$css:!0},8:{paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",$$css:!0},12:{paddingStart:"x1ye3gou",paddingEnd:"xn6708d",$$css:!0},16:{paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",$$css:!0},20:{paddingStart:"x5ib6vp",paddingEnd:"xc73u3c",$$css:!0}},m={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0},40:{paddingTop:"x13zrc24",$$css:!0}},n={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0}},o={4:{marginTop:"xr9ek0c",marginBottom:"xjpr12u",$$css:!0},8:{marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0},12:{marginTop:"x1k70j0n",marginBottom:"xzueoph",$$css:!0},16:{marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",$$css:!0},20:{marginTop:"x1anpbxc",marginBottom:"xyorhqc",$$css:!0},24:{marginTop:"x14vqqas",marginBottom:"xod5an3",$$css:!0},32:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",$$css:!0},40:{marginTop:"x1sy10c2",marginBottom:"xieb3on",$$css:!0}},p={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}},q={4:{marginStart:"xsgj6o6",marginEnd:"xw3qccf",$$css:!0},8:{marginStart:"x1i64zmx",marginEnd:"x1emribx",$$css:!0},12:{marginStart:"x16n37ib",marginEnd:"xq8finb",$$css:!0},16:{marginStart:"x1d52u69",marginEnd:"xktsk01",$$css:!0},20:{marginStart:"xmn8rco",marginEnd:"x1h5jrl4",$$css:!0}},r=c("UserAgent").isBrowser("IE >= 11");function a(a,b){var d,e,f,g;d=(d=i(c("MDSColumnContext")))!=null?d:{};var t=a.align;e=t===void 0?(e=d.align)!=null?e:"stretch":t;t=a.children;var u=a.expanding;u=u===void 0?!1:u;var v=a.fallback,w=a.paddingHorizontal;f=w===void 0?(f=d.paddingHorizontal)!=null?f:0:w;w=a.paddingTop;var x=a.paddingVertical;x=x===void 0?0:x;var y=a.placeholder,z=a.verticalAlign;z=z===void 0?"top":z;var A=babelHelpers.objectWithoutPropertiesLoose(a,["align","children","expanding","fallback","paddingHorizontal","paddingTop","paddingVertical","placeholder","verticalAlign"]),B=c("stylex").compose(a.xstyle);g=h.jsxs(h.Fragment,{children:[d.hasDividers===!0&&h.jsx(c("BaseView.react"),{role:"separator",xstyle:[j.divider,q[(g=d.paddingHorizontal)!=null?g:0],d.spacing!=null&&j.dividerMargin]}),h.jsx(c("BaseView.react"),babelHelpers["extends"]({},A,{ref:b,xstyle:[j.root,u&&[j.expanding,r&&j.expandingIE11],e!=="stretch"&&k[e],z!=="top"&&p[z],l[f],n[x],w!=null&&m[w],d.spacing!=null&&[o[d.spacing],B.marginBottom==null&&j.marginLastChild,B.marginTop==null&&j.marginFirstChild],a.xstyle],children:h.jsx(c("MDSColumnContext").Provider,{value:null,children:t})}))]});if(v!==void 0){a.fallback;var C=babelHelpers.objectWithoutPropertiesLoose(a,["fallback"]);v===null?g=h.jsx(c("CometErrorBoundary.react"),{children:g}):g=h.jsx(c("CometErrorBoundary.react"),{fallback:function(a,c){return h.jsx(s,babelHelpers["extends"]({},C,{ref:b,children:typeof v==="function"?v(a,c):v}))},children:g})}if(y!==void 0){a.placeholder;A=babelHelpers.objectWithoutPropertiesLoose(a,["placeholder"]);g=h.jsx(c("CometPlaceholder.react"),{fallback:y!=null?h.jsx(s,babelHelpers["extends"]({},A,{ref:b,children:y})):null,children:g})}return g}a.displayName=a.name+" [from "+f.id+"]";var s=h.forwardRef(a);b=s;g["default"]=b}),98);
__d("MDSRowContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);g["default"]=b}),98);
__d("MDSRowItem.react",["BaseRowItem.react","CometErrorBoundary.react","CometPlaceholder.react","MDSRowContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j={4:{paddingEnd:"xg83lxy",paddingStart:"x1h0ha7o",$$css:!0},8:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4",$$css:!0},12:{paddingEnd:"xsyo7zv",paddingStart:"x16hj40l",$$css:!0},16:{paddingEnd:"x1sxyh0",paddingStart:"xurb0ha",$$css:!0},24:{paddingEnd:"xn6708d",paddingStart:"x1ye3gou",$$css:!0},32:{paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",$$css:!0}},k={4:{paddingBottom:"x1120s5i",paddingTop:"x1nn3v0j",$$css:!0},8:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},12:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},16:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},24:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",$$css:!0},32:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9",$$css:!0}};function a(a,b){var d;d=(d=i(c("MDSRowContext")))!=null?d:{};var e=d.spacingHorizontal;d=d.spacingVertical;var f=a.fallback,g=a.placeholder,m=babelHelpers.objectWithoutPropertiesLoose(a,["fallback","placeholder"]);if(g!==void 0){a.placeholder;var n=babelHelpers.objectWithoutPropertiesLoose(a,["placeholder"]);return h.jsx(c("CometPlaceholder.react"),{fallback:g!=null?h.jsx(l,babelHelpers["extends"]({},n,{ref:b,children:g})):null,children:h.jsx(l,babelHelpers["extends"]({},n,{ref:b}))})}if(f!==void 0){a.fallback;var o=babelHelpers.objectWithoutPropertiesLoose(a,["fallback"]);return f===null?h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(l,babelHelpers["extends"]({},o,{ref:b}))}):h.jsx(c("CometErrorBoundary.react"),{fallback:function(a,c){return h.jsx(l,babelHelpers["extends"]({},o,{ref:b,children:typeof f==="function"?f(a,c):f}))},children:h.jsx(l,babelHelpers["extends"]({},o,{ref:b}))})}return h.jsx(c("BaseRowItem.react"),babelHelpers["extends"]({},m,{ref:b,useDeprecatedStyles:m.useDeprecatedStyles,xstyle:[j[e],k[d],m.xstyle],children:h.jsx(c("MDSRowContext").Provider,{value:null,children:m.children})}))}a.displayName=a.name+" [from "+f.id+"]";var l=h.forwardRef(a);b=l;g["default"]=b}),98);
__d("MDSRow.react",["BaseRow.react","MDSColumnContext","MDSColumnItem.react","MDSRowContext","MDSRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useMemo,k={4:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4",$$css:!0},8:{paddingEnd:"x1sxyh0",paddingStart:"xurb0ha",$$css:!0},10:{paddingEnd:"x1iji9kk",paddingStart:"x1sln4lm",$$css:!0},12:{paddingEnd:"xn6708d",paddingStart:"x1ye3gou",$$css:!0},16:{paddingEnd:"x1pi30zi",paddingStart:"x1swvt13",$$css:!0}},l={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},10:{paddingTop:"x889kno",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}},m={4:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},8:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},10:{paddingBottom:"x1a8lsjc",paddingTop:"x889kno",$$css:!0},12:{paddingBottom:"xsag5q8",paddingTop:"xz9dl7a",$$css:!0},16:{paddingBottom:"x1l90r2v",paddingTop:"xyamay9",$$css:!0}},n={4:{marginEnd:"xwrv7xz",marginStart:"x8182xy",$$css:!0},8:{marginEnd:"xcud41i",marginStart:"x139jcc6",$$css:!0},10:{marginEnd:"x6zhf5e",marginStart:"xrzrlj5",$$css:!0},12:{marginEnd:"xykv574",marginStart:"xbmpl8g",$$css:!0},16:{marginEnd:"x1n0m28w",marginStart:"xp7jhwk",$$css:!0},24:{marginEnd:"x12rz0ws",marginStart:"x16hk5td",$$css:!0},32:{marginEnd:"x19f6ikt",marginStart:"x169t7cy",$$css:!0}},o={4:{marginBottom:"xmgb6t1",marginTop:"x1kgmq87",$$css:!0},8:{marginBottom:"x4vbgl9",marginTop:"x1rdy4ex",$$css:!0},10:{marginBottom:"xz62fqu",marginTop:"x16ldp7u",$$css:!0},12:{marginBottom:"x4cne27",marginTop:"xifccgj",$$css:!0},16:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},24:{marginBottom:"xh3wvx0",marginTop:"x7wgvq7",$$css:!0},32:{marginBottom:"x1oo3vh0",marginTop:"xwya9rg",$$css:!0}};function a(a,b){var d=i(c("MDSColumnContext")),e=i(c("MDSRowContext")),f=(d==null?void 0:d.paddingHorizontal)!=null?0:12,g=(d==null?void 0:d.spacing)!=null?0:16,p=a.children,q=a.paddingHorizontal;f=q===void 0?f:q;q=a.paddingVertical;q=q===void 0?0:q;var r=a.paddingTop;g=r===void 0?a.paddingVertical==null?g:null:r;r=a.spacing;r=r===void 0?12:r;var s=a.spacingHorizontal,t=s===void 0?r:s;s=a.spacingVertical;var u=s===void 0?r:s;r=a.xstyle;s=babelHelpers.objectWithoutPropertiesLoose(a,["children","paddingHorizontal","paddingVertical","paddingTop","spacing","spacingHorizontal","spacingVertical","xstyle"]);a=j(function(){return{spacingHorizontal:t,spacingVertical:u}},[t,u]);b=h.jsx(c("BaseRow.react"),babelHelpers["extends"]({},s,{ref:b,xstyle:[k[f],m[q],g!=null&&l[g],n[t],o[u],r],children:h.jsx(c("MDSRowContext").Provider,{value:a,children:p})}));if(e!=null)return h.jsx(c("MDSRowItem.react"),{expanding:s.expanding,children:b});return d!=null?h.jsx(c("MDSColumnItem.react"),{expanding:s.expanding,children:b}):b}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);d=e;g["default"]=d}),98);
__d("MDSTextTypography",["UserAgent","cr:2011"],(function(a,b,c,d,e,f,g){"use strict";b("cr:2011");var h={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x1n0sxbx",$$css:!0},"default":{fontFamily:"x10flsy6",$$css:!0},segoe:{fontFamily:"x1xmvt09",$$css:!0}},i={body1:{fontFamily:h["default"],fontSize:20,fontWeight:"normal",lineHeight:24,offsets:[4,5]},body2:{fontFamily:h["default"],fontSize:17,fontWeight:"normal",lineHeight:20,offsets:[3,5]},body3:{fontFamily:h["default"],fontSize:15,fontWeight:"normal",lineHeight:20,offsets:[4,5]},body4:{fontFamily:h["default"],fontSize:13,fontWeight:"normal",lineHeight:16,offsets:[3,4]},bodyLink1:{fontFamily:h["default"],fontSize:20,fontWeight:"semibold",lineHeight:24,offsets:[4,5]},bodyLink2:{fontFamily:h["default"],fontSize:17,fontWeight:"semibold",lineHeight:20,offsets:[3,5]},bodyLink3:{fontFamily:h["default"],fontSize:15,fontWeight:"semibold",lineHeight:20,offsets:[4,5]},bodyLink4:{fontFamily:h["default"],fontSize:13,fontWeight:"semibold",lineHeight:16,offsets:[3,4]},button1:{fontFamily:h["default"],fontSize:17,fontWeight:"semibold",lineHeight:20,offsets:[3,5]},button2:{fontFamily:h["default"],fontSize:15,fontWeight:"semibold",lineHeight:20,offsets:[4,5]},entityHeaderHeadline1:{fontFamily:h["default"],fontSize:32,fontWeight:"bold",lineHeight:38,offsets:[7,8]},entityHeaderHeadline2:{fontFamily:h["default"],fontSize:28,fontWeight:"bold",lineHeight:32,offsets:[5,7]},entityHeaderMeta1:{defaultColor:"secondary",fontFamily:h["default"],fontSize:15,fontWeight:"bold",lineHeight:20,offsets:[4,5]},entityHeaderMeta2:{defaultColor:"secondary",fontFamily:h["default"],fontSize:15,fontWeight:"bold",lineHeight:20,offsets:[4,5]},entityHeaderMeta3:{defaultColor:"primary",fontFamily:h["default"],fontSize:13,fontWeight:"bold",lineHeight:18,offsets:[4,3]},headline3:{fontFamily:h["default"],fontSize:17,fontWeight:"medium",lineHeight:20,offsets:[3,5]},headline4:{fontFamily:h["default"],fontSize:15,fontWeight:"medium",lineHeight:20,offsets:[4,5]},headlineEmphasized1:{fontFamily:h["default"],fontSize:24,fontWeight:"bold",lineHeight:28,offsets:[5,6]},headlineEmphasized2:{fontFamily:h["default"],fontSize:20,fontWeight:"bold",lineHeight:24,offsets:[4,5]},headlineEmphasized3:{fontFamily:h["default"],fontSize:17,fontWeight:"semibold",lineHeight:20,offsets:[3,4]},headlineEmphasized4:{fontFamily:h["default"],fontSize:15,fontWeight:"semibold",lineHeight:20,offsets:[4,5]},headlineEmphasized5:{fontFamily:h["default"],fontSize:15,fontWeight:"medium",lineHeight:18,offsets:[3,4]},meta1:{defaultColor:"secondary",fontFamily:h["default"],fontSize:13,fontWeight:"semibold",lineHeight:16,offsets:[3,4]},meta2:{defaultColor:"secondary",fontFamily:h["default"],fontSize:13,fontWeight:"semibold",lineHeight:16,offsets:[3,4]},meta3:{defaultColor:"secondary",fontFamily:h["default"],fontSize:13,fontWeight:"normal",lineHeight:16,offsets:[3,4]},meta4:{defaultColor:"secondary",fontFamily:h["default"],fontSize:12,fontWeight:"normal",lineHeight:16,offsets:[3,4]}},j=[["body1",[5,5]],["body2",[4,4]],["body3",[4,4]],["body4",[4,3]],["bodyLink1",[5,5]],["bodyLink2",[4,4]],["bodyLink3",[4,4]],["bodyLink4",[4,3]],["button1",[4,4]],["button2",[4,4]],["entityHeaderHeadline1",[8,7]],["entityHeaderHeadline2",[6,6]],["entityHeaderMeta1",[4,4]],["entityHeaderMeta2",[4,4]],["entityHeaderMeta3",[4,3]],["headline3",[4,4]],["headline4",[4,4]],["headlineEmphasized1",[6,5]],["headlineEmphasized2",[5,5]],["headlineEmphasized3",[4,4]],["headlineEmphasized4",[4,4]],["headlineEmphasized5",[4,3]],["meta1",[4,3]],["meta2",[4,3]],["meta3",[4,3]],["meta4",[3,3]]],k=[["body1",[5,5]],["body2",[4,4]],["body3",[5,4]],["body4",[4,3]],["bodyLink1",[6,4]],["bodyLink2",[4,3]],["bodyLink3",[5,4]],["bodyLink4",[4,3]],["button1",[4,3]],["button2",[5,4]],["entityHeaderHeadline1",[8,7]],["entityHeaderHeadline2",[7,5]],["entityHeaderMeta1",[5,4]],["entityHeaderMeta2",[5,4]],["entityHeaderMeta3",[4,3]],["headline3",[5,3]],["headline4",[5,4]],["headlineEmphasized1",[6,5]],["headlineEmphasized2",[6,4]],["headlineEmphasized3",[4,3]],["headlineEmphasized4",[5,4]],["headlineEmphasized5",[4,3]],["meta1",[4,3]],["meta2",[4,3]],["meta3",[4,3]],["meta4",[4,3]]],l=[["body1",[6,4,1]],["body2",[5,3,1]],["body3",[5,4]],["body4",[4,3,1]],["bodyLink1",[6,4,1]],["bodyLink2",[5,3,1]],["bodyLink3",[5,4]],["bodyLink4",[4,3,1]],["button1",[5,3,1]],["button2",[5,4]],["entityHeaderHeadline1",[10,6,2]],["entityHeaderHeadline2",[8,5,3]],["entityHeaderMeta1",[5,4,1]],["entityHeaderMeta2",[5,4,1]],["entityHeaderMeta3",[4,3]],["headline3",[5,3,1]],["headline4",[5,4]],["headlineEmphasized1",[7,4,2]],["headlineEmphasized2",[6,4,2]],["headlineEmphasized3",[5,3,1]],["headlineEmphasized4",[5,4]],["headlineEmphasized5",[5,3,1]],["meta1",[4,3,1]],["meta2",[4,3,1]],["meta3",[4,3,1]],["meta4",[4,3]]];function m(){if(c("UserAgent").isPlatform("Windows >= 6"))return{fontFamily:h.segoe,offsets:l};return c("UserAgent").isPlatform("Mac OS X >= 10.11")&&!c("UserAgent").isBrowser("Firefox < 55")||c("UserAgent").isPlatform("iOS >= 9")?{fontFamily:h.apple,offsets:c("UserAgent").isEngine("Gecko")?k:j}:null}function a(){var a=m();if(a!=null){var b=a.fontFamily;a=a.offsets;a=new Map(a);var c=babelHelpers["extends"]({},i);a.forEach(function(a,d){c[d]=babelHelpers["extends"]({},c[d],{fontFamily:b,offsets:a})});return c}return i}d=a();g["default"]=d}),98);
__d("MDSTextV1.react",["BaseHeading.react","CometDensityModeContext","CometLineClamp.react","CometTextContext","CometTextLangContext","MDSTextTypography","cr:2099","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useContext,j=e.useMemo;e=(d=b("cr:2099"))!=null?d:{useTranslationKeyForTextParent:function(){}};var k=e.useTranslationKeyForTextParent,l={base:{maxWidth:"x193iq5w",minWidth:"xeuugli",wordBreak:"x13faqbe",wordWrap:"x1vvkbs",$$css:!0},block:{display:"x1lliihq","::after_content":"x1s928wv","::after_display":"xhkezso","::after_height":"x1gmr53x","::before_content":"x1cpjm7i","::before_display":"x1fgarty","::before_height":"x1943h6x",$$css:!0},heading:{maxWidth:"x193iq5w",minWidth:"xeuugli",$$css:!0}},m={center:{textAlign:"x2b8uid",$$css:!0},end:{textAlign:"xp4054r",$$css:!0},start:{textAlign:"x1yc453h",$$css:!0}},n={blueLink:{color:"x1fey0fg",$$css:!0},disabled:{color:"x1dntmbh",$$css:!0},disabledButton:{color:"x1x80s81",$$css:!0},highlight:{color:"x1qq9wsj",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},placeholder:{color:"x12scifz",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primary:{color:"xzsf02u",$$css:!0},primaryButton:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButton:{color:"x1mvi0mv",$$css:!0},primaryOnMedia:{color:"x17z8epw",$$css:!0},secondary:{color:"xi81zsa",$$css:!0},secondaryButton:{color:"x1dem4cn",$$css:!0},secondaryOnMedia:{color:"xkxfvhb",$$css:!0},tertiary:{color:"x12scifz",$$css:!0},white:{color:"x14ctfv",$$css:!0}},o={12:{fontSize:"x1pg5gke",lineHeight:"xvq8zen",$$css:!0},13:{fontSize:"x1nxh6w3",lineHeight:"x1sibtaa",$$css:!0},15:{fontSize:"x6prxxf",lineHeight:"xvq8zen",$$css:!0},17:{fontSize:"x1lkfr7t",lineHeight:"x1lbecb7",$$css:!0},20:{fontSize:"x1603h9y",lineHeight:"x1u7k74",$$css:!0},24:{fontSize:"xngnso2",lineHeight:"x1qb5hxa",$$css:!0},28:{fontSize:"x1q74xe4",lineHeight:"xyesn5m",$$css:!0},32:{fontSize:"x579bpy",lineHeight:"xjkpybl",$$css:!0}},p={12:{fontSize:"x1pg5gke",lineHeight:"xvq8zen",$$css:!0},13:{fontSize:"x1pg5gke",lineHeight:"x1sibtaa",$$css:!0},15:{fontSize:"x1f6kntn",lineHeight:"xvq8zen",$$css:!0},17:{fontSize:"x1jchvi3",lineHeight:"x1lbecb7",$$css:!0},20:{fontSize:"x1603h9y",lineHeight:"x1u7k74",$$css:!0},24:{fontSize:"xngnso2",lineHeight:"x1qb5hxa",$$css:!0},28:{fontSize:"x1q74xe4",lineHeight:"xyesn5m",$$css:!0},32:{fontSize:"x579bpy",lineHeight:"xjkpybl",$$css:!0}},q={bold:{fontWeight:"x1xlr1w8",$$css:!0},medium:{fontWeight:"xk50ysn",$$css:!0},normal:{fontWeight:"x1fcty0u",$$css:!0},semibold:{fontWeight:"x1s688f",$$css:!0}},r={1:{"::before_marginTop":"x1ckan80",$$css:!0},2:{"::before_marginTop":"x1s3etm8",$$css:!0},3:{"::before_marginTop":"x1tu3fi",$$css:!0},4:{"::before_marginTop":"x4zkp8e",$$css:!0},5:{"::before_marginTop":"xudqn12",$$css:!0},6:{"::before_marginTop":"xtoi2st",$$css:!0},7:{"::before_marginTop":"x14z4hjw",$$css:!0},8:{"::before_marginTop":"x1ill7wo",$$css:!0},9:{"::before_marginTop":"xhau9xz",$$css:!0},10:{"::before_marginTop":"x14qwyeo",$$css:!0}},s={1:{"::after_marginBottom":"xo8pqpo",$$css:!0},2:{"::after_marginBottom":"xlf94lp",$$css:!0},3:{"::after_marginBottom":"x676frb",$$css:!0},4:{"::after_marginBottom":"x3x7a5m",$$css:!0},5:{"::after_marginBottom":"x41vudc",$$css:!0},6:{"::after_marginBottom":"xw06pyt",$$css:!0},7:{"::after_marginBottom":"x1g2y4wz",$$css:!0},8:{"::after_marginBottom":"x1x48ksl",$$css:!0},9:{"::after_marginBottom":"x1guzi96",$$css:!0},10:{"::after_marginBottom":"x1y9wsrc",$$css:!0}},t={1:{paddingBottom:"x1j85h84",$$css:!0},2:{paddingBottom:"x1120s5i",$$css:!0},3:{paddingBottom:"xg8j3zb",$$css:!0}},u={disabled:"disabledButton",highlight:"primaryDeemphasizedButton",secondary:"secondaryButton",white:"primaryButton"};function v(a,b){return b?(b=u[a])!=null?b:a:a}function w(a,b){return b==="headlineEmphasized5"||b==="entityHeaderMeta3"?null:{color:a,type:b}}function a(a,b){var d=a.align;d=d===void 0?"auto":d;var e=a.children,f=a.color,g=a.dir;g=g===void 0?"auto":g;var u=a.id,x=a.isSemanticHeading;x=x===void 0?!1:x;var y=a.numberOfLines,z=a.testid,A=a.type;z=i(c("CometTextContext"));a=i(c("CometDensityModeContext"));a=a[0];var B=i(c("CometTextLangContext")),C=c("MDSTextTypography")[A],D=C.defaultColor;D=D===void 0?"primary":D;var E=C.fontFamily,F=C.fontSize,G=C.fontWeight;G=G===void 0?"normal":G;C=C.offsets;C=C===void 0?[0,0]:C;var H=C.length===3?C[2]:0,I=v((f=f)!=null?f:D,A==="button1"||A==="button2");f=j(function(){return w(I,A)},[I,A]);D=z!==null;z=k();f=h.jsx(c("CometTextContext").Provider,{value:f,children:h.jsx("span",{className:c("stylex")(l.base,E,!D&&l.block,!D&&r[C[0]],!D&&s[y!=null?C[1]+H:C[1]],a?p[F]:o[F],q[G],n[I],d!=="auto"&&m[d]),"data-testid":void 0,dir:D?void 0:g,id:u,lang:B,ref:b,children:y!=null?h.jsx(c("CometLineClamp.react"),{lines:y,xstyle:H!==0&&t[H],children:e}):e},z)});return x?h.jsx(c("BaseHeading.react"),{isPrimaryHeading:x,xstyle:l.heading,children:f}):f}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);b.displayName="MDSText";d=b;g["default"]=d}),98);
__d("MWText.react",["MDSText.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MDSText.react")}),98);
__d("MWTooltip.react",["cr:11872"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:11872")}),98);
__d("MAWTimeUtils",["I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return d("I64").of_float(a*1e3)}function a(a){return a>d("WATimeUtils").MAX_INT?d("I64").of_float(a):h(a)}g.toTimestamp=h;g.millisTimeToTimestamp=a}),98);
__d("MWChatConfirmTabCloseDialog.bs",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__BpxPpP9rp8f__JHASH__"),confirm:h._("__JHASH__CqytfJoYvSJ__JHASH__"),title:h._("__JHASH__56tk0437PKy__JHASH__")};g.content=a}),98);
__d("JSMap.bs",["bs_belt_Option","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){return c("bs_belt_Option").getExn(c("bs_caml_option").nullable_to_opt((a.has(b)?a:a.set(b,c("bs_curry")._1(d))).get(b)))}g.getOrMake=a}),98);
__d("MWChatEphemeralMediaTemporarySeenState.bs",["JSMap.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=new Map();function a(a,b){a=d("JSMap.bs").getOrMake(i,a,function(){return new Set()});a.add(b)}function b(a,b){a=i.get(a);if(a==null)return!1;else return a.has(b)}function j(a){i["delete"](a)}function c(a){h.useEffect(function(){return function(){return j(a)}},[a])}e=a;f=b;a=j;b=c;g.markSeenThisSession=e;g.isSeenThisSession=f;g.endSession=a;g.useEndSessionOnDismount=b}),98);
__d("MWV2ComposerHasContentContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.createContext({hasContentRef:void 0,shouldClearDraftMessageRef:void 0});function a(a){a=a.children;var b=h.useRef(!1),c=h.useRef(!1),d=h.useMemo(function(){return{hasContentRef:b,shouldClearDraftMessageRef:c}},[b,c]);return h.createElement(i.Provider,{children:a,value:d})}function b(){return h.useContext(i)}c=a;g.useContext=b;g.make=c}),98);
__d("UseMWV2CloseTab",["I64","MWChatConfirmTabCloseDialog.bs","MWChatEphemeralMediaTemporarySeenState.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWV2ComposerHasContentContext.bs","react","useCometConfirmationDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a,b){var e=d("MWChatStateV2.bs").useDispatch(),f=c("useCometConfirmationDialog")(),g=d("MWV2ComposerHasContentContext.bs").useContext(),i=g.shouldClearDraftMessageRef,j=g.hasContentRef;return h(function(){var c=function(){a!==void 0&&d("MWChatEphemeralMediaTemporarySeenState.bs").endSession(d("I64").to_string(a.threadKey)),e(d("MWChatStateActions.bs").closeTab(Date.now(),b.tabId))};if(a!==void 0&&(j==null?void 0:j.current)===!0)return f(d("MWChatConfirmTabCloseDialog.bs").content,function(){i!==void 0&&(i.current=!0),c()},function(){i!==void 0&&(i.current=!1)});c()},[a,b,e,f,j,i])}g.useHook=a}),98);
__d("WALoggerDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("WALogger").__setRef("WALoggerDeferred");function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){return b.DEV.apply(b,[a].concat(c))})})}function b(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){return b.DEV_XMPP.apply(b,[a].concat(c))})})}function d(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){return b.LOG.apply(b,[a].concat(c))})})}function e(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){return b.WARN.apply(b,[a].concat(c))})})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.load().then(function(b){return b.whenReady().then(function(){return b.ERROR.apply(b,[a].concat(c))})})}g.DEV=a;g.DEV_XMPP=b;g.LOG=d;g.WARN=e;g.ERROR=f}),98);
__d("MWChatFocusComposerContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.createContext({focusComposer:void 0,setFocusComposer:function(){}});function a(a){a=a.children;var b=h.useRef(),c=b.current,d=h.useMemo(function(){return{focusComposer:c,setFocusComposer:function(a){b.current=a}}},[c]);return h.createElement(i.Provider,{children:a,value:d})}b=a;g.context=i;g.provider=b}),98);
__d("MercuryFilters.bs",[],(function(a,b,c,d,e,f){"use strict";var g="draft",h="folders",i="recent",j="unread";function a(a){return[j,g]}function b(a){return a===j||a===g||a===h||a===i?!0:!1}c="all";d="groups";e="named";var k="unnamed",l="WORK_UNSYNCED_CHAT";f.all=c;f.draft=g;f.folders=h;f.recent=i;f.unread=j;f.groups=d;f.named=e;f.unnamed=k;f.unsyncedChat=l;f.getSupportedFilters=a;f.isSupportedFilter=b}),null);
__d("bs_js_json",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){var b=typeof a;if(b==="string")return{TAG:0,_0:a};else if(b==="number")return{TAG:1,_0:a};else if(b==="boolean")if(a===!0)return 1;else return 0;else if(a===null)return 2;else if(Array.isArray(a))return{TAG:3,_0:a};else return{TAG:2,_0:a}}function c(a,b){switch(b){case 0:return typeof a==="string";case 1:return typeof a==="number";case 2:if(a!==null&&typeof a==="object")return!Array.isArray(a);else return!1;case 3:return Array.isArray(a);case 4:return typeof a==="boolean";case 5:return a===null}}function d(a){if(typeof a==="string")return a}function e(a){if(typeof a==="number")return a}function g(a){if(typeof a==="object"&&!Array.isArray(a)&&a!==null)return b("bs_caml_option").some(a)}function h(a){if(Array.isArray(a))return a}function i(a){if(typeof a==="boolean")return a}function j(a){if(a===null)return null}var k=function(a){a=[a];var b=[{kind:0,i:0,parent:a}];while(b.length!==0){var c=b[b.length-1];c.kind===0?(c.val=c.parent[c.i],++c.i===c.parent.length&&b.pop()):b.pop();var d=c.val;if(typeof d==="object")if(Array.isArray(d)&&d.length!==0)b.push({kind:0,i:0,parent:d,val:void 0});else for(var e in d){if(e==="RE_PRIVATE_NONE"){c.kind===0?c.parent[c.i-1]=void 0:c.parent[c.i]=void 0;continue}b.push({kind:1,i:e,parent:d,val:d[e]})}}return a[0]};function l(a){return function(a){a=JSON.stringify(a,function(a,b){return b===void 0?{RE_PRIVATE_NONE:!0}:b});if(a===void 0)throw new TypeError("output is undefined");return a}(a)}function m(a){return k(JSON.parse(a))}f.classify=a;f.test=c;f.decodeString=d;f.decodeNumber=e;f.decodeObject=g;f.decodeArray=h;f.decodeBoolean=i;f.decodeNull=j;f.deserializeUnsafe=m;f.serializeExn=l}),null);
__d("useGroupThreadViewParams",["useCometRouterState","useTopMostRouteCometEntityKey"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useTopMostRouteCometEntityKey")(),b=c("useCometRouterState")();b=b==null?void 0:b.main.route.params;a=(a==null?void 0:a.entity_type)==="group"&&(a==null?void 0:a.section)==="CHATS";if(!a)return null;a=b==null?void 0:b.thread_id;b=b==null?void 0:b.idorvanity;if(a==null||b==null)return null;return typeof a==="string"&&typeof b==="string"?{groupId:b,threadKey:a}:null}g["default"]=a}),98);
__d("MWInboxURIState.bs",["CometRouteParams","CurrentEnvironment","I64","MAWGating","MWCMIsAnyCMThread","MWLSThread.bs","MercuryFilters.bs","MercuryIDs","MessengerURIConstants","URI","bs_belt_Option","bs_caml_exceptions","bs_caml_format","bs_caml_option","bs_curry","bs_js_json","bs_js_null_undefined","cr:3904","cr:3905","gkx","qex","react","useCurrentRoute","useGroupThreadViewParams"],(function(a,b,c,d,e,f,g){"use strict";d("react");f={};var h=c("bs_caml_exceptions").create("MWInboxURIState.NonMessengerState"),i="/?$";function j(a){a=a.match(new RegExp(c("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"));return c("bs_belt_Option").map(a===null?void 0:c("bs_caml_option").some(a),function(a){return decodeURIComponent(a[1])})}function k(a){a=a.match(new RegExp(c("MessengerURIConstants").FOLDERS_PATH+("/([^/]+)"+(c("MessengerURIConstants").THREAD_PREFIX+"([^/]+)/?$"))));return c("bs_belt_Option").map(a===null?void 0:c("bs_caml_option").some(a),function(a){return decodeURIComponent(a[1])})}var l=c("qex")._("1507")===!0,m=c("CurrentEnvironment").instagramdotcom?c("MessengerURIConstants").INSTAGRAM_DIRECT_PATH:c("CurrentEnvironment").facebookdotcom?c("MessengerURIConstants").FACEBOOK_PREFIX:"";function n(a){a=new(c("URI"))(a.url);var b=a.getPath();a=a.getQueryData();var e=c("gkx")("1300945"),f=new RegExp("^"+(m+"(/|$)")),g=c("bs_belt_Option").isSome(a.story_id);if(c("CurrentEnvironment").facebookdotcom&&!(f.test(b)||e&&b==="/"&&!g))throw{Error:new Error(),RE_EXN_ID:h};e=b.replace(f,"/");g=a.filter;b=a.fbid;f=a.qa;var n=a.sa,o=a.t,p=a.threadIDs;a=a.id;try{p=c("bs_belt_Option").map(p,function(a){return JSON.parse(a)});p!==void 0&&c("bs_belt_Option").map(c("bs_js_json").decodeArray(c("bs_caml_option").valFromOption(p)),function(a){return a.reduce(function(a,b){b=c("bs_js_json").decodeString(b);if(d("MercuryIDs").isValidThreadID(c("bs_js_null_undefined").fromOption(c("bs_belt_Option").map(b,function(a){return a}))))return a.concat([b]);else return a},[])})}catch(a){}if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").PEOPLE_PATH)))))p={_0:void 0,TAG:1};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").PAYMENT_PATH)))))p={_0:void 0,TAG:2};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").SEARCH_PATH)))))if(l)if(f!==void 0)p={_0:void 0,TAG:4};else if(n!==void 0&&o!==void 0){f=c("bs_caml_option").valFromOption(o);p=f==="friend"||f==="non_friend"?{_0:void 0,TAG:5}:f==="page"?{_0:void 0,TAG:6}:f==="thread"?{_0:void 0,TAG:7}:{_0:void 0,TAG:3}}else p={_0:void 0,TAG:3};else p={_0:void 0,TAG:3};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").TEAMWORK_GROUP_VIEW)))))p={_0:void 0,TAG:7};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").TEAMWORK_CHAT_VIEW)))))p={_0:void 0,TAG:5};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").TEAMWORK_UNREAD_VIEW)))))p={_0:void 0,TAG:8};else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").TEAMWORK_ANNOUNCEMENT_GROUP_VIEW)))))p={_0:void 0,TAG:9};else if(e==="/read/")p={_0:b!==void 0?{_0:c("bs_caml_format").caml_int64_of_string(b),TAG:3}:void 0,TAG:10};else{if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+(c("MessengerURIConstants").COMPOSE_SUBPATH+i))))))n=[{_0:"E2EEToggleOff",TAG:0},void 0,void 0];else if(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+(c("MessengerURIConstants").PAYMENT_PATH+c("MessengerURIConstants").PAYMENT_PAY_PATH))))))n=a!==void 0?[{_0:void 0,TAG:1},a,void 0]:[{_0:void 0,TAG:2},void 0,void 0];else{o=j(e);try{f=c("bs_belt_Option").map(o,c("bs_caml_format").caml_int64_of_string)}catch(a){f=void 0}b=f!==void 0?[{_0:f,TAG:3},o]:[void 0,void 0];a=k(e);n=[b[0],b[1],a]}p={_0:n[0],TAG:10}}c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").FILTERED_REQUESTS_PATH))))||(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").ARCHIVED_PATH))))||(c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").MESSAGE_REQUESTS_PATH))))||c("bs_belt_Option").isSome(c("bs_caml_option").null_to_opt(e.match(new RegExp("^"+c("MessengerURIConstants").FOLDERS_PATH))))));c("bs_belt_Option").mapWithDefault(g,!1,d("MercuryFilters.bs").isSupportedFilter)&&c("bs_belt_Option").getExn(g);return p}var o=b("cr:3904")==null?void 0:c("bs_caml_option").some(b("cr:3904"));function p(a){if(!d("MAWGating").isOccamadillo())return b("cr:3905")==null?void 0:b("cr:3905").isThreadId(a);else return!1}var q=c("gkx")("1968579")||c("gkx")("6975");function a(a){return new(c("URI"))(a.substring(m.length)).getPath().split("/")}function r(a){try{return a?d("I64").of_string_opt(a):void 0}catch(a){return void 0}}function e(a){var e=c("useCurrentRoute")(),f=c("useGroupThreadViewParams")();a=r(a);var g=d("CometRouteParams").useRouteParams(),i=d("MWLSThread.bs").useThread(a,function(a){return c("MWCMIsAnyCMThread")(a.threadType)});if(f!=null)return{_0:{_0:c("bs_caml_format").caml_int64_of_string(f.threadKey),TAG:3},TAG:10};if(e==null)return{_0:void 0,TAG:0};f=new(c("URI"))(e.url).getPath();if(!f.startsWith(m)&&!f.startsWith(c("MessengerURIConstants").GROUPS_PATH))throw{Error:new Error(),RE_EXN_ID:h};f=e.url.substring(m.length);var j;if(b("cr:3904")==null)j=void 0;else{var k=c("bs_curry")._1(o.getMostRecentSecureThreadKey);j=k!==void 0?k:void 0}k=g.initial_e2ee_toggle_position==="1"||g.initial_e2ee_toggle_position===1||g.initial_e2ee_toggle_position===!0?"E2EEToggleOn":"E2EEToggleOff";g=new(c("URI"))(f).getPath().split("/");var l;if(a!=null){if(g.length!==4)f=2;else{var s=g[0];if(s===""){s=g[1];if(s==="e2ee"){s=g[2];if(s==="t"&&j===void 0){if(d("MAWGating").isOccamadillo())return{_0:{_0:a,TAG:4},TAG:10};f=2}else f=2}else f=2}else f=2}if(f===2){if(p(a))return n(e);if(i&&!q)return{_0:void 0,TAG:0};else return{_0:{_0:a,TAG:3},TAG:10}}}else{s=g.length;if(s>=4)return n(e);switch(s){case 0:return n(e);case 1:f=g[0];if(f!=="")return n(e);if(j===void 0)return n(e);l=j;break;case 2:i=g[0];a=g[1];switch(a){case"":if(j===void 0)return n(e);l=j;break;case"new":return{_0:{_0:k,TAG:0},TAG:10};default:if(i!=="")return n(e);s=g[1];if(s!=="t")return n(e);if(j===void 0)return n(e);l=j}break;case 3:f=g[1];if(f!=="t")return n(e);a=g[2];if(a==="")return n(e);try{k=c("bs_caml_format").caml_int64_of_string(a)}catch(a){k=void 0}if(k!==void 0&&!p(k))return{_0:{_0:k,TAG:3},TAG:10};else return{_0:void 0,TAG:0}}}return{_0:{_0:c("bs_caml_format").caml_int64_of_string(l),TAG:4},TAG:10}}var s=k,t=l,u=m,v=n;a=a;e=e;g.MessagingTag=f;g.NonMessengerState=h;g._getFolderID=s;g.isSearchRefactor=t;g.prefix=u;g.parseURI_DEPRECATED=v;g.getRouteTokens=a;g.useState=e}),98);
__d("MWInboxProvider.bs",["MWInboxURIState.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.createContext();function a(a){var b=a.children;a=a.threadKey;a=d("MWInboxURIState.bs").useState(a);return h.jsx(i.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWInboxProviderContext=i;g.MWInboxProvider=a}),98);
__d("MWInboxPassiveContext.bs",["MWInboxProvider.bs","bs_int64","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect,k=b.useMemo;e={isPassive:!1,setIsPassive:c("emptyFunction")};var l=h.createContext(e);function a(a){var b=a.children,e=a.isPassive,f=a.setIsPassive;a=i(d("MWInboxProvider.bs").MWInboxProviderContext);if((a==null?void 0:a.TAG)===10){a=a._0;a=a!==void 0&&a.TAG===3?c("bs_int64").to_string(a._0):""}else a="";j(function(){f(!1)},[f,a]);a=k(function(){return{isPassive:e,setIsPassive:f}},[e,f]);return h.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWInboxPassiveContext=l;g.MWInboxPassiveContextProvider=a}),98);
__d("useMWInboxPassiveContext",["MWInboxPassiveContext.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(){return h(d("MWInboxPassiveContext.bs").MWInboxPassiveContext)}g["default"]=a}),98);
__d("MWChatTabFocusHandler.bs",["CometHideLayerOnEscape.react","FocusWithinHandler.react","MWChatFocusComposerContext.bs","bs_caml_js_exceptions","bs_caml_option","bs_js_exn","gkx","react","stylex","useMWInboxPassiveContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={root:{height:"x5yr21d",":focus_outline":"x1uvtmcs",$$css:!0}};function j(){try{return document.activeElement.getAttribute("data-release-focus-from")==="CLICK"}catch(b){var a=c("bs_caml_js_exceptions").internalToOCamlException(b);if(a.RE_EXN_ID===c("bs_js_exn").$$Error)return!1;throw a}}function a(a){var b=a.onEscape,e=a.onFocus,f=a.onBlur,g=a.xstyle;a=a.children;b=b!==void 0?b:function(){};var k=e!==void 0?e:function(){},l=f!==void 0?f:function(){};e=g!==void 0?c("bs_caml_option").valFromOption(g):!1;var m=h.useRef(null);f=c("useMWInboxPassiveContext")();var n=f.setIsPassive;g=h.useContext(d("MWChatFocusComposerContext.bs").context);var o=g.focusComposer;f=h.useCallback(function(a){a=m.current;if(a!=null&&o!==void 0&&window.getSelection().toString()===""&&(a===document.activeElement||j()))return o()},[m,o]);return h.jsx(c("FocusWithinHandler.react"),{onBlurWithin:function(){return l()},onFocusWithin:function(a){a.target.getAttribute("data-prevent_chattab_focus")==null&&k();var b=m.current;b!=null&&o!==void 0&&b===a.target&&o();if(c("gkx")("6531"))return n(!1)},children:h.jsx(c("CometHideLayerOnEscape.react"),{onHide:b,children:h.jsx("div",{className:c("stylex")(i.root,e),onClick:f,ref:m,tabIndex:-1,children:a})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.getShouldTakeFocusFromActiveElement=j;g.make=b}),98);
__d("MWCMInboxHeaderCommunityGroupName.react",["fbt","CometPagelet.react","I64","LSSuspense","MWCMThreadTypes.react","PresenceStatusContext","Promise","cr:183","gkx","react","useCommunityFolder"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useContext;function k(a){return a}var l=b("cr:183")==null?function(a){return d("I64").neg_one}:b("cr:183").useCMThreadCoPresence;function a(a){var e=a.renderWrapper;a=a.thread;e=e!==void 0?e:k;var f=c("useCommunityFolder")(a),g=j(c("PresenceStatusContext")),m=l(a);if(f!==void 0){var n=a.cannotReplyReason==="broadcast_chat_read_only",o=d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!n?c("gkx")("5555")?h._("__JHASH__2Tijp2ORsFi__JHASH__"):h._("__JHASH__QrGOls5Na3V__JHASH__"):d("MWCMThreadTypes.react").isPrivateThread(a.threadType)?h._("__JHASH__AR0EXhdbXqJ__JHASH__"):null;e=e(d("I64").gt(m,d("I64").zero)&&g.getChatVisibility()?h._("__JHASH__zBhIvI5rTRs__JHASH__",[h._plural(d("I64").to_int32(m),"number")]):d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!n&&c("gkx")("5555")?i.jsxs(i.Fragment,{children:[o," ",o!=null?"\u2022":null," ",f.name]}):i.jsxs(i.Fragment,{children:[f.name," ",o!=null?"\u2022":null," ",o]}))}else e=c("LSSuspense").throwErrorOrPromise(b("Promise").resolve());return i.jsx(d("CometPagelet.react").Placeholder,{className:"x193iq5w",fallback:null,name:"MWCMInboxHeaderCommunityGroupName",children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("logMessengerWebFalcoEvent",["I64","LSMessagingThreadTypeUtil.bs","MessengerWebEventsFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=a.threadKey;a=a.threadType;if(e!=null){var h=d("LSMessagingThreadTypeUtil.bs").isSecure(a),i=d("LSMessagingThreadTypeUtil.bs").isGroup(a),j=d("I64").to_string(g);c("MessengerWebEventsFalcoEvent").log(function(){return{client_timestamp:Date.now().toString(),entry_point:e,event_name:b,has_message_missing:f,is_secured:h,other_user_fbid:i||h?void 0:j,thread_fbid:j}})}}g["default"]=a}),98);
__d("MWChatTextTransform.bs",["CometEmojiTransform","CometEmoticonTransform","bs_curry","cr:2420","gkx"],(function(a,b,c,d,e,f,g){"use strict";d=c("CometEmoticonTransform")();e=c("CometEmojiTransform")();f=c("gkx")("1839834")?[d,e]:[e];var h=f.slice();if(!(b("cr:2420")==null)){b=c("bs_curry")._1(b("cr:2420").unvaultTransform);h.push(b)}function a(a){if(c("gkx")("1839834"))return[c("CometEmoticonTransform")(a),c("CometEmojiTransform")(a)];else return[c("CometEmojiTransform")(a)]}g.emoticonTransform=d;g.emojiTransform=e;g.epdTextTransformsNoVault=f;g.epdTextTransforms=h;g.epdTextTransformsWithOptions=a}),98);
__d("MWChatContactPresenceHook.bs",["AvailableListConstants","PresenceStatusContext","bs_caml_option","bs_curry","bs_int64","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("requireDeferred")("MessengerMQTTPresence.bs").__setRef("MWChatContactPresenceHook.bs");function j(a,b){var d=c("bs_curry")._1(a.getStatus,b),e=d==null?void 0:c("bs_caml_option").some(d);a=c("bs_curry")._1(a.getChatVisibility);if(!(d==null)||!a)return e;else{i.onReady(function(a){return c("bs_curry")._1(a.sendAdditionalBuddyRequest,b)});return}}function k(a){var b=h.useContext(c("PresenceStatusContext")),d=c("bs_int64").to_string(a);a=h.useState(function(){return j(b,d)});var e=a[1];h.useEffect(function(){return c("bs_curry")._1(b.addListener,function(){return c("bs_curry")._1(e,function(){return j(b,d)})})},[b,d,e]);return a[0]}function a(a){a=k(a);if(a===void 0)return!1;a=a.status;if(a==null)return!1;else return a===c("AvailableListConstants").ACTIVE}function b(a){a=k(a);if(a===void 0)return;a=a.last_active_time;if(!(a==null)&&a!==0)return a*1e3}function e(a){var b=h.useContext(c("PresenceStatusContext")),d=h.useMemo(function(){return a.map(function(a){return c("bs_int64").to_string(a)})},[a]);return d.some(function(a){a=j(b,a);if(a===void 0)return!1;a=a.status;if(a==null)return!1;else return a===c("AvailableListConstants").ACTIVE})}g.useHook=k;g.useIsActive=a;g.useLastActiveTimestampMs=b;g.useHasActiveContact=e}),98);
__d("MWThreadListGlimmer.react",["CometGlimmer.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={glimmerBody:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xktia5q",$$css:!0},glimmerHeadline:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x1qx5ct2",marginBottom:"x1e56ztr",width:"x3hqpx7",$$css:!0},glimmerPhoto48:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xsdox4t",marginEnd:"xmo9yow",width:"x1useyqa",$$css:!0},glimmerPhoto56:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xnnlda6",marginEnd:"xmo9yow",width:"x15yg21f",$$css:!0},glimmerRoot:{display:"x78zum5",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",paddingTop:"x1y1aw1k",$$css:!0},glimmerText:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};c("gkx")("571");function j(a){a=a.role;return h.jsxs("div",{className:"x78zum5 xwib8y2 x1swvt13 x1pi30zi x1y1aw1k",role:a,children:[h.jsx(c("CometGlimmer.react"),{index:0,xstyle:i.glimmerPhoto48}),h.jsxs("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xl56j7k",children:[h.jsx(c("CometGlimmer.react"),{index:1,xstyle:i.glimmerHeadline}),h.jsx(c("CometGlimmer.react"),{index:2,xstyle:i.glimmerBody})]})]})}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.numberOfItems;b=b===void 0?1:b;var c=a.role;return h.jsx(h.Fragment,{children:Array(b).fill(!0).map(function(a,b){return h.jsx(j,{role:c},"mw_list_glimmer_"+b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPresenceStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OFFLINE:1,ACTIVE:2});f["default"]=a}),66);
__d("MWPresenceBadge.bs",["CometBadge.react","MWChatContactPresenceHook.bs","MWPActor.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.size;a=a.thread;var e=c("useReStore")(),f=a.threadKey,g=d("MWPActor.bs").useActor();a=d("ReQLSubscription.bs").useArray(h.useMemo(function(){return d("ReQL.bs").map(d("ReQL.bs").filter(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("participants")),{hd:f,tl:0}),function(a){return c("bs_caml").i64_neq(a.contactId,g)}),function(a){return a.contactId})},[e,JSON.stringify(a.threadKey)]));a=d("MWChatContactPresenceHook.bs").useHasActiveContact(a);if(a)return h.jsx(c("CometBadge.react"),{border:"white",color:"green",isProfileBadge:!0,size:b});else return null}b=a;e=b;g.make=e}),98);
__d("MWPPresenceBadge.react",["CometBadge.react","I64","LSIntEnum","LSPresenceStatus","MWPresenceBadge.bs","PresenceContext","ReQL","ReQLSuspense","RelayHooks","gkx","qex","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;function a(a){var b,e=a.size;a=a.thread;return c("gkx")("6543")||c("gkx")("5849")||((b=c("qex")._("274"))!=null?b:!1)?h.jsx(j,{size:e,thread:a}):h.jsx(d("MWPresenceBadge.bs").make,{size:e,thread:a})}a.displayName=a.name+" [from "+f.id+"]";function j(a){var b=d("RelayHooks").useActorID(),e=c("useReStore")(),f=a.size;a=a.thread;var g=a.threadKey;a=i(c("PresenceContext")).chatVisibility;a=d("ReQLSuspense").useFirst(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.table("presence_states").index("statusContactId")).getKeyRange(d("LSIntEnum").ofNumber(c("LSPresenceStatus").ACTIVE)),d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(g).filter(function(a){a=a.contactId;return d("I64").to_string(a)!==b}))},[b,e,g])!=null&&a;return a?h.jsx(c("CometBadge.react"),{border:"white",color:"green",isProfileBadge:!0,size:f}):null}j.displayName=j.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFacepileBadge.react",["CometPlaceholder.react","MWPPresenceBadge.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.size;a=a.thread;return h.jsx(c("CometPlaceholder.react"),{fallback:null,children:h.jsx(c("MWPPresenceBadge.react"),{size:b,thread:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFacepileGetContactsToShow.bs",["LSMediaUrl.bs","LSMessagingThreadTypeUtil.bs","MWPActor.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Array","bs_caml","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){if(a!==void 0&&d("LSMediaUrl.bs").Contact.profilePictureUrl(a)!=="")return a}var j=[];function a(a){return a.sort(function(a,b){return b.rank-a.rank})}function k(a,b,e){var f=function(a){return a.filter(function(a){return c("bs_caml").i64_neq(a.id,e)})},g=b.length,h;if(g>=3){var k=f(c("bs_belt_Array").keepMap(b,i));h=k.length>=2?k:j}else switch(g){case 0:h=j;break;case 1:k=b[0];h=k!==void 0&&d("LSMediaUrl.bs").Contact.profilePictureUrl(k)!==""?[k]:j;break;case 2:g=b[0];if(g!==void 0){k=b[1];if(k!==void 0)if(d("LSMessagingThreadTypeUtil.bs").isOneToOne(a.threadType)){b=f([g,k]);if(b.length!==1)h=j;else{f=b[0];h=d("LSMediaUrl.bs").Contact.profilePictureUrl(f)!==""?[f]:j}}else h=d("LSMediaUrl.bs").Contact.profilePictureUrl(g)!==""&&d("LSMediaUrl.bs").Contact.profilePictureUrl(k)!==""&&d("LSMessagingThreadTypeUtil.bs").isGroup(a.threadType)?[g,k]:j;else h=j}else h=j;break}return h.sort(function(a,b){return b.rank-a.rank}).slice(0,2)}function b(a){var b=d("MWPActor.bs").useActor(),e=c("useReStore")(),f=a.threadKey,g=d("ReQLSubscription.bs").useArray(h.useMemo(function(){return d("ReQL.bs").map(d("ReQL.bs").take(d("ReQL.bs").leftJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("participants")),{hd:f,tl:0}),d("ReQL.bs").fromTableAscending(e.table("contacts"))),3),function(a){return a[1]})},[e,JSON.stringify(f)]));return k(a,g,b)}e=i;f=j;a=a;var l=k;b=b;g.hasProfilePicture=e;g.glimmer=f;g.sortByRank=a;g.getContactsToShow=l;g.useHook=b}),98);
__d("MWPGetThreadTitle.bs",["fbt","CurrentEnvironment","FBLogger","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSContactType.bs","LSMessagingThreadTypeUtil.bs","MWPActor.bs","bs_belt_Option","bs_caml","bs_caml_option","gkx","intlList","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";b=c("gkx")("1341692");var i=(b?h._("__JHASH__fcWzWSmItiU__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__PghB4SzSbNm__JHASH__"):h._("__JHASH__AaE4hJExM0x__JHASH__")).toString();function j(a,b,e,f){a=a!==void 0?c("bs_caml_option").valFromOption(a):c("intlList").CONJUNCTIONS.AND;e.length>8&&c("recoverableViolation")("You are overfetching participants needed to compute a thread title. Please use ->take(MWPGetThreadTitle.amountToFetchForTitle) to limit participants fetched. Length: "+e.length,"messenger_web_product");if(e.length===0)return;if(d("LSMessagingThreadTypeUtil.bs").isOneToOne(b.threadType)){if(e.length===1){b=e[0];b=b[1];if(b!==void 0)return b.name;else return i}b=e.filter(function(a){return c("bs_caml").i64_neq(a[0].contactId,f)});if(b.length===0){c("recoverableViolation")("No participants in thread","messenger_comet");return}b=b[0];var g=c("gkx")("1846003"),j=b[0].nickname;if(j!==void 0&&g)return j;g=b[1];if(g!==void 0)return g.name;else return i}if(e.length===1){j=e[0];b=j[1];if(b!==void 0)return b.name;else return}g=e.filter(function(a){return c("bs_caml").i64_neq(a[0].contactId,f)}).slice(0,7).sort(function(a,b){b=b[1];a=a[1];if(a!==void 0)if(b!==void 0)return b.rank-a.rank;else return 0;else return 0}).map(function(b){var f=b[1];f!==void 0&&c("bs_caml").i64_eq(f.contactType,d("LSContactType.bs").page)&&!c("bs_belt_Option").getWithDefault(d("LSContactBitOffset.bs").has(d("LSContactCapabilityBitOffset.bs").isCommunityBotPage,f),!1)&&!c("bs_belt_Option").getWithDefault(d("LSContactBitOffset.bs").has(d("LSContactCapabilityBitOffset.bs").pagePlatformBot,f),!1)&&c("FBLogger")("messenger_browser_clients").debug("page participant in group");f=c("gkx")("1846003");var a=b[0].nickname;if(a!==void 0&&f)return a;f=b[1];if(f===void 0)return i;a=f.firstName;if(a!==void 0&&e.length>2)return a;else return f.name});e.length>7&&g.push(h._("__JHASH__p-5gRHawKL0__JHASH__"));return c("intlList")(g,a,c("intlList").DELIMITERS.COMMA).toString()}function a(a,b,e){var f=d("MWPActor.bs").useActor(),g=b.threadName;if(g!==void 0)return g;g=j(c("bs_caml_option").some(a),b,e,f);if(g!==void 0)return g;else return""}e=j;f=a;b=8;g.computeThreadTitle=e;g.useThreadTitle=f;g.amountToFetchForTitle=b}),98);
__d("MWV2GetOtherUser.bs",["LSMessagingThreadTypeUtil.bs","MWPActor.bs","bs_caml","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){if(!d("LSMessagingThreadTypeUtil.bs").isOneToOne(a.threadType))return;if(b.length===1){a=b[0];var f=a[1];if(f!==void 0)return[a[0],f];else return}a=b.filter(function(a){return c("bs_caml").i64_neq(a[0].contactId,e)});if(a.length===0){c("recoverableViolation")("No participants in thread","messenger_comet");return}f=a[0];b=f[1];if(b!==void 0)return[f[0],b]}function a(a,b){var c=d("MWPActor.bs").useActor();return h(a,b,c)}b=h;e=a;g.getOtherUser=b;g.useOtherUser=e}),98);
__d("LSThreadTitle.bs",["CometTextWithEntities.react","LSMessagingThreadTypeUtil.bs","MWCMIsAnyCMThread","MWChatTextTransform.bs","MWPActor.bs","MWPGetThreadTitle.bs","MWV2GetOtherUser.bs","ReQL.bs","ReQLSuspense","bs_caml_option","bs_curry","intlList","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){var b=a.actorIDOverride,e=a.thread,f=a.transforms;a=a.wrapOutput;var g=d("MWPActor.bs").useActor(),i=c("useReStore")();b=b!==void 0?b:g;var j=d("ReQLSuspense").useArray(function(){return d("ReQL.bs").take(d("ReQL.bs").leftJoin(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(i.table("participants")),{hd:e.threadKey,tl:0}),d("ReQL.bs").fromTableAscending(i.table("contacts"))),8)},[e.threadKey]);b=d("MWPGetThreadTitle.bs").computeThreadTitle(c("bs_caml_option").some(c("intlList").CONJUNCTIONS.NONE),e,j,b);if(b===void 0)return"";b=h.jsx(c("CometTextWithEntities.react"),{text:b,transforms:f});f=d("MWV2GetOtherUser.bs").getOtherUser(e,j,g);if(a!==void 0&&f!==void 0&&d("LSMessagingThreadTypeUtil.bs").isOneToOne(e.threadType))return c("bs_curry")._2(a,f[1],b);else return b}function a(a){var b=a.transforms,e=a.actorIDOverride,f=a.thread;a=a.wrapOutput;b=b!==void 0?b:d("MWChatTextTransform.bs").epdTextTransforms;var g=f.threadName;if(g!==void 0)return h.jsx(c("CometTextWithEntities.react"),{text:g,transforms:b});if(c("MWCMIsAnyCMThread")(f.threadType))return null;g={thread:f,transforms:b};a!==void 0&&(g.wrapOutput=c("bs_caml_option").valFromOption(a));e!==void 0&&(g.actorIDOverride=c("bs_caml_option").valFromOption(e));return h.jsx(i,babelHelpers["extends"]({},g))}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWIsXacGroupThread.bs",["LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.bs").addXacUsers,a)}b=a;g.check=b}),98);
__d("MWV2HeaderCloseButton.bs",["fbt","CometPressable.react","MWTooltip.react","bs_caml_option","react","useSetAttributeRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=h._("__JHASH__h_m7dC6Kxvx__JHASH__");function a(a){var b=a.label,d=a.color,e=a.onPress;a=a.testid;b=b!==void 0?b:j;var f=c("useSetAttributeRef")("data-prevent_chattab_focus","1");d={"aria-label":b,children:i.jsx("svg",{className:"xvijh9v xhhsvwb x1ty9z65 xgzva0m",height:"24px",viewBox:"0 0 24 24",width:"24px",children:i.jsxs("g",{stroke:d,strokeLinecap:"round",strokeWidth:"2",children:[i.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"}),i.jsx("line",{x1:"6",x2:"18",y1:"18",y2:"6"})]})}),onPress:e,overlayRadius:"50%",ref:f};a!==void 0&&(d.testid=c("bs_caml_option").valFromOption(a));return i.jsx(c("MWTooltip.react"),{align:"middle",position:"above",tooltip:b,children:i.jsx(c("CometPressable.react"),babelHelpers["extends"]({},d))})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=j;d=b;g.defaultLabel=e;g.make=d}),98);
__d("MWV2HeaderContainer.bs",["MDSRow.react","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={divider:{boxShadow:"x7m3og9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopEndRadius:"xgqcy7u",borderTopStartRadius:"x1lq5wgf",display:"x78zum5",flexShrink:"x2lah0s",height:"x10w6t97",justifyContent:"x1qughib",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",position:"x1n2onr6",zIndex:"xhtitgo",$$css:!0}};function a(a){var b=a.startContent,d=a.endContent,e=a.backgroundColor;a=a.divider;b=b!==void 0?c("bs_caml_option").valFromOption(b):null;d=d!==void 0?c("bs_caml_option").valFromOption(d):null;a=a!==void 0?a:!0;var f={};e!==void 0&&(f.backgroundColor=e);return h.jsxs("div",{className:c("stylex")(i.root,a?i.divider:!1),style:f,children:[h.jsx(c("MDSRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:b}),d]})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.make=b}),98);
__d("MWFallbackWithTimeout.react",["FBLogger","react","useTimeout"],(function(a,b,c,d,e,f,g){"use strict";d("react");var h=d("react").useEffect;function a(a){var b=a.children,d=a.message;a=c("useTimeout")(5e3);var e=a.pending;h(function(){e||c("FBLogger")("messenger_web_product","fallback_timeout").warn(d)},[d,e]);return b}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSContactGender.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.unknown=a;f.female=c;f.male=d;f.neuter=e}),null);
__d("LSContactIdType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];f.unknown=a;f.fbid=c;f.smsLocalId=d}),null);
__d("LSContactViewerRelationship.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];f.unknown=a;f.notContact=c;f.contactOfViewer=d;f.facebookFriend=e;f.softContact=b}),null);
__d("LSContactWorkForeignEntityType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.unknown=a;f.foreign=c;f.notForeign=d;f.notForeignLimited=e}),null);
__d("MWV2EnsureThatChatTabExists.bs",["LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSDatabaseType.bs","LSFactory","LSMessagingThreadTypeUtil.bs","LSVerifyContactRowExists","LSVerifyThreadRowExists","Promise","bs_curry","cr:3989","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,e){var f=c("useReStore")();h.useEffect(function(){var g=function(){if(d("LSMessagingThreadTypeUtil.bs").isOneToOne(e))return f.runInTransaction(function(b){return c("LSVerifyContactRowExists")(a,d("LSContactIdType.bs").fbid,void 0,void 0,d("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,d("LSContactBlockedByViewerStatus.bs").unblocked,void 0,!1,d("LSAuthorityLevel.bs").clientPartial,void 0,void 0,d("LSContactWorkForeignEntityType.bs").unknown,d("LSContactGender.bs").unknown,d("LSContactViewerRelationship.bs").unknown,void 0,c("LSFactory")(b))},"readwrite");else return b("Promise").resolve()};c("promiseDone")(g().then(function(){return!(b("cr:3989")==null)&&d("LSMessagingThreadTypeUtil.bs").isSecure(e)?c("bs_curry")._2(b("cr:3989").call,f,a):f.runInTransaction(function(b){return c("LSVerifyThreadRowExists")(a,e,d("LSDatabaseType.bs").mailbox,c("LSFactory")(b))},"readwrite")}))},[f,JSON.stringify(a),JSON.stringify(e)])}g.useHook=a;g.mawVerifyExistingThreadExists=b("cr:3989")}),98);
__d("MWV2IsTabFocusedContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.createContext(!1);function a(a){var b=a.children;a=a.isFocused;return h.createElement(i.Provider,{children:b,value:a})}function b(){return h.useContext(i)}c=a;g.useContext=b;g.make=c}),98);
__d("MWV2TabContainer.bs",["MWChatFocusComposerContext.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTabFocusHandler.bs","UseMWV2CloseTab","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.ariaBusy,e=a.ariaLabel,f=a.children,g=a.domRef,i=a.isFixedHeight;i=i===void 0?!1:i;var j=a.style,k=a.tab,l=a.tabIndex;a=a.thread;var m=d("MWChatStateV2.bs").useDispatch(),n=d("UseMWV2CloseTab").useHook(a,k);return h.jsx(d("MWChatFocusComposerContext.bs").provider,{children:h.jsx(d("MWChatTabFocusHandler.bs").make,{onBlur:function(){return c("bs_curry")._1(m,d("MWChatStateActions.bs").blurTab())},onEscape:function(){return c("bs_curry")._1(n)},onFocus:function(){return c("bs_curry")._1(m,d("MWChatStateActions.bs").focusTab(k.tabId))},children:h.jsx("div",{"aria-busy":b,"aria-label":e,className:"xcrg951 xgqcy7u x1lq5wgf x2c8kfy x78zum5 xdt5ytf x6prxxf xvq8zen x17adc0v xcn1v36 xi55695"+(i?" xt7dq6l":" x1rgmuzj xbbk1sx"),"data-testid":void 0,ref:g,style:j,tabIndex:l,children:f})})})}a.displayName=a.name+" [from "+f.id+"]";b=a;e=b;g.make=e}),98);
__d("MWPColorUtils.bs",["bs_belt_Option","bs_caml_int64","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=c("bs_caml_int64").to_int32(a);var b=(a&16711680)>>>16,d=(a&65280)>>>8;a=a&255;var e=function(a){return a.toString(16).padStart(2,"0")};return"#"+(e(b)+(e(d)+e(a)))}function a(a,b,d){d=a.sort(function(a,b){return c("bs_caml_int64").to_int32(a.gradientIndex)-c("bs_caml_int64").to_int32(b.gradientIndex)|0}).map(function(a){return h(a.color)});a=d.length;if(a!==1){if(a!==0){a=c("bs_belt_Option").isSome(b);var e=[];b!==void 0&&e.push(d[0]+" calc(100vh - "+String(b.totalHeight)+"px + "+String(b.headerHeight)+"px)");for(var f=a?1:0,a=d.length-(a?2:1)|0;f<=a;++f)e.push(d[f]);b!==void 0&&(e.push(d[d.length-1|0]+" calc(100% - "+String(b.footerHeight)+"px)"),e.push(d[d.length-1|0]));f=e.join(", ");return"linear-gradient("+f+")"}c("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}c("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}b=h;d=a;g.int64ToHex=b;g.gradient=d}),98);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSPlatformConnectionStatusProvider",["I64","LSDeleteAllAndInsertConnectivityStatus","LSFactory","LSInternetConnectionState","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.createContext,j=e.useCallback,k=e.useContext,l=e.useEffect,m=e.useMemo,n=e.useState;e={setStatus:function(a){},status:"Connected"};var o=i(e);function a(a){var b=p();l(function(){var c=a.onConnectionStatusChange(b);return function(){c()}},[a,b])}function b(a){var b=a.children,e=a.onConnectionStatusChange,f=c("useReStore")();a=n("Connected");var g=a[0],i=a[1];l(function(){return e(function(a){i(a)})},[e,i]);l(function(){(g==="Connected"||g==="Disconnected")&&c("promiseDone")(f.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatus")(g==="Connected"?d("I64").of_int32(c("LSInternetConnectionState").CONNECTED):d("I64").of_int32(c("LSInternetConnectionState").NOT_CONNECTED),c("LSFactory")(a))},"readwrite"))},[f,g]);var k=j(function(a){return i(a)},[i]);a=m(function(){return{setStatus:k,status:g}},[k,g]);return h.jsx(o.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";function p(){var a=k(o),b=a.setStatus;return m(function(){return function(a){b(a)}},[b])}g.Context=o;g.useSubscribeOnConnectionStatusChange=a;g.Provider=b;g.useStatusChangeHandler=p}),98);
__d("MessengerThreadThemeGradientType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6];f.messageBubbleOutbound=a;f.messageBubbleInbound=c;f.threadviewBackground=d;f.deliveryReceipt=e;f.composerCircleButton=b;f.composerSendButton=g;f.emphasis=h}),null);
__d("MWPThreadTheme.bs",["LSInt64.bs","MWPColorUtils.bs","MessengerThreadThemeGradientType.bs","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_belt_Array","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={accessibilityLabel:"Default Blue",fallbackColor:[-1,4278224127],fbid:[45690,4245347893],isDeprecated:!1,reverseGradiantsForRadial:!1,themeIdx:[0,94]},j=[],k={gradientColors:j,threadTheme:i};i={accessibilityLabel:"Default Blue",fallbackColor:[-1,4278224127],fbid:[45690,4245347893],isDeprecated:!1,reverseGradiantsForRadial:!1,themeIdx:[0,94]};j=j;function a(){}j={gradientColors:j,previewId:void 0,setPreviewId:a,threadTheme:i};var l=h.createContext(j);function m(a,b){var e=c("useReStore")(),f=d("ReQLSubscription.bs").useFirst(h.useMemo(function(){if(a!==void 0)return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("thread_themes")),{hd:a,tl:0});else return d("SortedAsyncIterable.bs").empty()},[e,JSON.stringify(a)])),g=d("ReQLSubscription.bs").useArray(h.useMemo(function(){if(a!==void 0)return d("ReQL.bs").filter(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(e.table("gradient_colors")),{hd:a,tl:0}),function(a){return d("LSInt64.bs").equal(a.type_,d("MessengerThreadThemeGradientType.bs").messageBubbleOutbound)});else return d("SortedAsyncIterable.bs").empty()},[e,JSON.stringify(a)]));return h.useMemo(function(){if(f!==void 0)return{gradientColors:g,threadTheme:f};else return b},[f,g])}function b(a){var b=a.children,c=a.themeFbid;a=a.defaultTheme;a=a!==void 0?a:k;var d=h.useState(function(){}),e=d[0],f=d[1];d=h.useMemo(function(){if(e!==void 0)return e;else return c},[JSON.stringify(c),e]);var g=m(d,a);d=h.useMemo(function(){return{gradientColors:g.gradientColors,previewId:e,setPreviewId:f,threadTheme:g.threadTheme}},[g,f,JSON.stringify(e)]);return h.createElement(l.Provider,{children:b,value:d})}function e(){return h.useContext(l)}function f(){var a=h.useContext(l),b=c("bs_belt_Array").get(a.gradientColors,0);if(b!==void 0)return d("MWPColorUtils.bs").int64ToHex(b.color);else return d("MWPColorUtils.bs").int64ToHex(a.threadTheme.fallbackColor)}function n(){var a=h.useContext(l),b=a.gradientColors;b=c("bs_belt_Array").get(b,b.length-1|0);if(b!==void 0)return d("MWPColorUtils.bs").int64ToHex(b.color);else return d("MWPColorUtils.bs").int64ToHex(a.threadTheme.fallbackColor)}function o(a){return a.gradientColors.length>1}a=b;i=k;b=j;j=l;a=a;e=e;f=f;n=n;o=o;g.mwDefaultTheme=i;g.defaultContextValue=b;g.context=j;g.make=a;g.useHook=e;g.useTop=f;g.useBottom=n;g.isGradient=o}),98);
__d("MqttState.bs",[],(function(a,b,c,d,e,f){"use strict";a="Connected";b="Disconnected";c="Connecting";f.connected=a;f.disconnected=b;f.connecting=c}),66);/*FB_PKG_DELIM*/
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g){a=function(a,b){switch(a){default:return""}};e.exports=a}),null);
__d("LSLocalizedStringsV2",["fbt","bs_caml_int64"],(function(a,b,c,d,e,f,g){a=function(a,c){switch(a){case"2285622730":return g._("__JHASH__bHf-pjjpSrh__JHASH__");case"1919524925":return g._("__JHASH__g2TuGL7kp7W__JHASH__");case"14617150":return g._("__JHASH__KN5FuK9HL68__JHASH__");case"460740012":return g._("__JHASH__PmrYWcLl7s-__JHASH__");case"2353844300":return g._("__JHASH__U3_S6m-Asci__JHASH__");case"2375715979":return g._("__JHASH__wwqS06IKURT__JHASH__");case"3810165735":return g._("__JHASH___xK_oqrbVu3__JHASH__",[g._param("user_name",c(0))]);case"1890485478":return g._("__JHASH__r5f8SC2OUWe__JHASH__");case"1299547062":return g._("__JHASH__UxIyHnrkGvQ__JHASH__");case"3621454483":return g._("__JHASH__6CXDyy4pKod__JHASH__",[g._param("user_name",c(0))]);case"3948960063":return g._("__JHASH__4jXDffqGKxc__JHASH__");case"1249692047":return g._("__JHASH__XuMb0GRtMp2__JHASH__",[g._param("user_name",c(0))]);case"2106510577":return g._("__JHASH__adFbSa44M9G__JHASH__");case"3960370133":return g._("__JHASH__WRQpot61Zha__JHASH__",[g._param("user_name",c(0))]);case"3798396796":return g._("__JHASH__AKC6gu2oXen__JHASH__",[g._param("app_name",c(0))]);case"3388601579":return g._("__JHASH__LLEsQ4Y9-C7__JHASH__",[g._param("user_name",c(0)),g._param("app_name",c(1))]);case"1556712457":return g._("__JHASH__pQsKY3JdghI__JHASH__");case"3601791933":return g._("__JHASH__VzXmY6Nofoo__JHASH__",[g._param("user_name",c(0))]);case"3759817031":return g._("__JHASH__C6rFQy3ZqgT__JHASH__");case"2934729541":return g._("__JHASH__5sq-yY8-PHO__JHASH__",[g._param("user_name",c(0))]);case"392493418":return g._("__JHASH__Y9RNnaq--9C__JHASH__");case"4085467454":return g._("__JHASH__Tf8KEtj2NUW__JHASH__",[g._param("user_name",c(0))]);case"2738683656":return g._("__JHASH__VTdyPQ7H4GZ__JHASH__");case"2996525642":return g._("__JHASH__YPG0HYdjvfW__JHASH__",[g._param("user_name",c(0))]);case"2326868239":return g._("__JHASH__j-o8KFpMPxd__JHASH__");case"1001986796":return g._("__JHASH__zsY9ES-V3Ko__JHASH__",[g._param("user_name",c(0))]);case"2285746939":return g._("__JHASH__8PT2JtdeJx9__JHASH__");case"3759448420":return g._("__JHASH__H7eOZ8S6YOP__JHASH__",[g._param("user_name",c(0))]);case"3719716921":return g._("__JHASH__qiicOieyAHd__JHASH__");case"284944921":return g._("__JHASH__TkSIon2AHjf__JHASH__",[g._param("user_name",c(0))]);case"3322002377":return g._("__JHASH__hs-XIkGvPGM__JHASH__",[g._param("user_name",c(0))]);case"2486550278":return g._("__JHASH__78NZ4EbNix1__JHASH__");case"3557790945":return g._("__JHASH__9P29njYEtVJ__JHASH__");case"3756846086":return g._("__JHASH__HqUxJ78yQEs__JHASH__",[g._param("user_name",c(0))]);case"780378803":return g._("__JHASH__4RDpwDU2bxj__JHASH__");case"3918212613":return g._("__JHASH__sfM4caXMU8x__JHASH__",[g._param("user_name",c(0))]);case"3161890215":return g._("__JHASH__rMpUt8zHstd__JHASH__");case"863428456":return g._("__JHASH__ZqoJBBTdmfd__JHASH__",[g._param("user_name",c(0))]);case"2716405471":return g._("__JHASH__3bEfkOlWqZQ__JHASH__");case"3909474073":return g._("__JHASH__0LAhbzE2305__JHASH__",[g._param("user_name",c(0))]);case"1522141193":return g._("__JHASH__Xv5h5VWZ1z-__JHASH__");case"2804766375":return g._("__JHASH__iwXmJRLI5oQ__JHASH__",[g._param("user_name",c(0))]);case"772459202":return g._("__JHASH__da1hGBDyrc0__JHASH__");case"3546068912":return g._("__JHASH__eB3RT9ZRPNU__JHASH__",[g._param("user_name",c(0))]);case"2459540079":return g._("__JHASH__uVYFUqdjsDk__JHASH__");case"1596311291":return g._("__JHASH__JNmnqH9YpVN__JHASH__",[g._param("user_name",c(0))]);case"2253698324":return g._("__JHASH__cjVmAaYlDK5__JHASH__");case"4269602817":return g._("__JHASH__tgAN3WazCx7__JHASH__",[g._param("user_name",c(0))]);case"1739999037":return g._("__JHASH__LG-CVe6YeL2__JHASH__");case"3373597599":return g._("__JHASH__XSfhGJMwPL8__JHASH__");case"259473449":return g._("__JHASH__qL_GOsBRgrZ__JHASH__",[g._param("user_name",c(0))]);case"1338912959":return g._("__JHASH__LrXrY17Mwwh__JHASH__",[g._param("user_name",c(0))]);case"812940701":return g._("__JHASH__NEO9buPurkr__JHASH__",[g._param("user_name",c(0))]);case"1099878966":return g._("__JHASH__Qho_g3FF8mq__JHASH__",[g._param("user_name",c(0))]);case"3443782102":return g._("__JHASH__Xxt66o3iPYX__JHASH__");case"618905030":return g._("__JHASH__v6KFXcykdOt__JHASH__");case"2470414797":return g._("__JHASH__0oa3QgNUtA3__JHASH__");case"1306024833":return g._("__JHASH__ypexge-6NRA__JHASH__");case"2135145355":return g._("__JHASH__woc-8KLy7zj__JHASH__");case"3603511704":return g._("__JHASH__--XUHiOY0Z1__JHASH__",[g._param("user_name",c(0))]);case"705614308":return g._("__JHASH__vsnRcMCSSFJ__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(0)),"number")]);case"313217698":return g._("__JHASH__rG1E-FG-TxB__JHASH__",[g._plural(b("bs_caml_int64").to_float(c(1)),"number"),g._param("user_name",c(0))]);case"3558654267":return g._("__JHASH___H0KEIF4aGq__JHASH__");case"3422266740":return g._("__JHASH__F5OxWfUB9Dy__JHASH__",[g._param("user_name",c(0))]);case"3307909120":return g._("__JHASH__YRCmoad58uJ__JHASH__");case"845728829":return g._("__JHASH___8aETeHXtHr__JHASH__");case"2022991544":return g._("__JHASH__byni3VHMHc8__JHASH__");case"4285882723":return g._("__JHASH__ga21xjHrnrP__JHASH__");case"3089015955":return g._("__JHASH__Q_LYP_ZLQTd__JHASH__");case"2662271323":return g._("__JHASH__JBe8j08K09-__JHASH__");case"2421884758":return g._("__JHASH__6vTlb2bku1-__JHASH__");case"2676961947":return g._("__JHASH__TK1WqTTq979__JHASH__",[g._param("participant_name",c(0))]);case"3298086032":return g._("__JHASH__AI6Z85qZOTl__JHASH__",[g._param("sender_name",c(0))]);case"3873263038":return g._("__JHASH__1Mq5qyIkjxC__JHASH__",[g._param("sender_name",c(0))]);case"2616853333":return g._("__JHASH__Jm7dkp7Q46M__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"4002265907":return g._("__JHASH__YfSaJhpdv0H__JHASH__");case"2663996736":return g._("__JHASH__rouMYaFboPj__JHASH__",[g._param("participant_name",c(0))]);case"2868699317":return g._("__JHASH__gln0mR6BSos__JHASH__",[g._param("sender_name",c(0))]);case"2688620547":return g._("__JHASH__xBthZSMLrSR__JHASH__",[g._param("sender_name",c(0))]);case"3544071775":return g._("__JHASH__Bfn4BTqFbTw__JHASH__",[g._param("sender_name",c(0)),g._param("reply_source_sender_name",c(1))]);case"2352696798":return g._("__JHASH__4w1HQhVySfH__JHASH__");default:return""}};e.exports=a}),null);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="5759168824192751"}),null);
__d("LSSetThreadImageURL",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1]===""?d:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],isCustomThreadPicture:a[4],shouldRoundThreadPicture:a[5]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSDeleteThenInsertContact",["LSSetThreadImageURL"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.i64.eq(a[23],[0,39423])?d[0]=[0,1]:(c.i64.eq(a[23],[0,14342874])?d[1]=[0,2]:d[1]=f,d[0]=d[1]),c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])&&c.i64.gt(b.authorityLevel,a[21])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(7).put({id:a[0],profilePictureUrl:a[2],profilePictureFallbackUrl:a[3],profilePictureUrlExpirationTimestampMs:a[4],profilePictureLargeUrl:a[5],profilePictureLargeFallbackUrl:a[6],profilePictureLargeUrlExpirationTimestampMs:a[7],name:a[9],secondaryName:a[41],normalizedNameForSearch:a[10],normalizedSearchTerms:a[33],isMessengerUser:a[11],isMemorialized:a[12],isManagedByViewer:a[35],blockedByViewerStatus:a[14],rank:a[17],firstName:a[18],contactType:a[19],contactTypeExact:a[20],authorityLevel:a[21],messengerCallLogThirdPartyId:a[22],profileRingColor:a[23],requiresMultiway:a[24],blockedSinceTimestampMs:a[25],fbUnblockedSinceTimestampMs:a[46],canViewerMessage:a[26],profileRingColorExpirationTimestampMs:a[27],phoneNumber:a[28],emailAddress:a[29],workCompanyId:a[30],workCompanyName:a[31],workJobTitle:a[32],deviceContactId:a[34],workForeignEntityType:a[36],capabilities:a[37],capabilities2:a[38],profileRingState:d[0],contactViewerRelationship:a[39],gender:a[40],contactReachabilityStatusType:a[43],restrictionType:a[44],waConnectStatus:a[45]}):0})},function(d){return c.sp(b("LSSetThreadImageURL"),a[0],a[2],a[3],a[4],!1,!0)}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,b.seq([function(d){return c[0]=e.queueName,b.fe(b.db.table(2).fetch([[[c[0],{lte:a[0]}]],"queueNameTaskId"]),function(a){a.item;return 0})},function(d){return b.fe(b.db.table(2).fetch([[[c[0],{lte:a[0]}]],"queueNameTaskId"]),function(a){return a["delete"]()})}]))})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSTaskExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(e){return b.seq([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(1).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({lastSyncCompletedTimestampMs:b.i64.of_float(Date.now())})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[2]=c.i64.eq(a[2],[-1,4294967295])?[0,0]:a[2],c.islc(c.ftr(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,f)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float([0,1])).next().then(function(e,g){var h=e.done;e=e.value;return h?d[0]=!1:(g=e.item,c.seq([function(e){return d[5]=g.threadKey,d[6]=[0,0],d[7]=g.minTimestampMs,d[8]=g.minMessageId,c.i64.eq(d[2],[0,1])?d[3]=!g.isLoadingAfter:d[3]=!g.isLoadingBefore,d[3]?c.seq([function(e){return c.i64.eq(d[2],[0,1])?d[9]=g.hasMoreAfter:d[9]=g.hasMoreBefore,d[9]?c.seq([function(a){return c.i64.eq(d[2],[0,1])?c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[5],d[7],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq([0,0],d[6])&&c.i64.eq(a.minTimestampMs,d[7])&&a.minMessageId===d[8]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[g.maxTimestampMs,g.maxMessageId],d[10]=a[0],d[11]=a[1],a}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch([[[d[5],d[7],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq([0,0],d[6])&&c.i64.eq(a.minTimestampMs,d[7])&&a.minMessageId===d[8]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[7],d[8]],d[10]=a[0],d[11]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[12]=[0,1]:(e=b.item,d[19]=e.syncGroup,c.i64.neq(d[19],f)?d[18]=d[19]:d[18]=[0,1],d[12]=d[18])})},function(a){return c.sp(b("LSGetCursor"),d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(e){return d[15]=new c.Map(),d[15].set("thread_key",a[0]),d[15].set("direction",d[2]),d[15].set("reference_timestamp_ms",d[10]),d[15].set("reference_message_id",d[11]),d[15].set("sync_group",d[12]),d[15].set("cursor",d[14]),d[16]=d[15].get("thread_key"),d[15],d[17]=c.toJSON(d[15]),c.sp(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[16])),[0,228],d[17],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve()},function(a){return d[4]=!0}]):c.resolve(d[4]=!1)},function(a){return d[0]=d[4]}]))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExistsV2",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[[0,7],[0,8],[0,13],[0,10],[0,11],[0,16]].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[10]=e.authorityLevel,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.ge(d[10],a[4])||c.i64.eq(d[10],[0,20])&&(c.i64.eq(a[1],[0,2])||[[0,23],[0,21],[0,18]].some(function(b){return c.i64.eq(a[1],b)}))?(b=[!1,!1,!1],d[11]=b[0],d[12]=b[1],d[13]=b[2],b):(e=[!0,!1,!0],d[11]=e[0],d[12]=e[1],d[13]=e[2],e),f=[d[11],d[12],d[13]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),b=[d[7],d[8],d[9]],d[3]=b[0],d[4]=b[1],d[5]=b[2],b)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",a[5]),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",a[6]),d[3].set("metadata_only",a[7]),d[3].set("preview_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(e){return d[1]?c.seq([function(b){return d[3]=[64,1083495711],d[4]=[0,0],d[5]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:[0,0],threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3],capabilities2:d[4],capabilities3:d[5],unsendLimitMs:[-1,4294967295]})},function(e){return c.i64.eq(a[1],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[6])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[6],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExists",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExistsV2"),a[0],a[1],a[2],a[3],a[4],!1,a[5],!1)},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExists"),a[0],a[1]==null?[0,1]:a[1],"inbox",[0,0],[0,40],a[2])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("MWChatOpenSecureTabForUserCallback.bs",["bs_curry","cr:614"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e){if(!(b("cr:614")==null))return c("bs_curry")._3(b("cr:614").openChatTab,a,d,e)}g.openChatTab=a}),98);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114],ib=[0,115],jb=[0,116],kb=[0,117],lb=[0,118],mb=[0,119],nb=[0,120],ob=[0,121],pb=[0,122],qb=[0,123],rb=[0,124],sb=[0,125],tb=[0,126],ub=[0,127],vb=[0,128],wb=[0,129],xb=[0,130],yb=[0,131],zb=[0,132],Ab=[0,133],Bb=[0,134],Cb=[0,135],Db=[0,136],Eb=[0,137],Fb=[0,138],Gb=[0,139],Hb=[0,140],Ib=[0,141],Jb=[0,142],Kb=[0,143],Lb=[0,144],Mb=[0,145],Nb=[0,146],Ob=[0,147],Pb=[0,148],Qb=[0,149],Rb=[0,150],Sb=[0,151],Tb=[0,152],Ub=[0,153],Vb=[0,154],Wb=[0,155],Xb=[0,156],Yb=[0,157],Zb=[0,158],$b=[0,159],ac=[0,160],bc=[0,161],cc=[0,162],dc=[0,163],ec=[0,164],fc=[0,165],gc=[0,166],hc=[0,167],ic=[0,168],jc=[0,169],kc=[0,170],lc=[0,171],mc=[0,172],nc=[0,173],oc=[0,174],pc=[0,175],qc=[0,176],rc=[0,177],sc=[0,178],tc=[0,179],uc=[0,180],vc=[0,181],wc=[0,182],xc=[0,183],yc=[0,184],zc=[0,185],Ac=[0,186],Bc=[0,187],Cc=[0,188],Dc=[0,189],Ec=[0,190],Fc=[0,191],Gc=[0,192];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.atcDaemon=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb;f.staticEntryPoint=ib;f.giphyCategory=jb;f.communityMessagingPresence=kb;f.reactionsV2=lb;f.threadSubscription=mb;f.communityMessagingSearch=nb;f.communityMessagingDiscovery=ob;f.communityMessagingTrending=pb;f.widget=qb;f.messengerCallsTab=rb;f.botSuggestions=sb;f.testThree=tb;f.unifiedBusinessInboxIgdMailbox=ub;f.testOmnistoreBatchable=vb;f.contentExplorer=wb;f.unifiedBusinessInboxWaMailbox=xb;f.lsStoriesParticipantSettingsV2=yb;f.lsFeatureLimits=zb;f.lsUniversalUserPrefs=Ab;f.step=Bb;f.workroomsCoPresence=Cb;f.dummyDoNotUse=Db;f.tam=Eb;f.kfc=Fb;f.cmCategoryList=Gb;f.cmChannelList=Hb;f.cmCommunityList=Ib;f.cmFbEvents=Jb;f.cmCategoryListV2=Kb;f.act=Lb;f.familyCenterSupervision=Mb;f.highlightsTab=Nb;f.dogfoodingAssistant=Ob;f.encryptedBackupsEpochStateTrigger=Pb;f.pushToPoll=Qb;f.presenceSettings=Rb;f.pinnedThreads=Sb;f.rtcCallTransferringState=Tb;f.rtcCallEvents=Ub;f.reachabilitySettings=Vb;f.publicChatFbEvents=Wb;f.persistentMenuItems=Xb;f.storiesSettingsV2=Yb;f.selfProfile=Zb;f.notificationSettings=$b;f.threadLimits=ac;f.messengerShoppingCart=bc;f.workplaceStatusRecurring=cc;f.messagingSettings=dc;f.ixtTrigger=ec;f.gdprSettings=fc;f.familyExperiences=gc;f.epdCookieSettings=hc;f.encryptedBackupsStatusTrigger=ic;f.cowatchSessions=jc;f.contactSharingSettings=kc;f.callsTabCallReminders=lc;f.businessSayt=mc;f.businessSavedReplies=nc;f.businessCatalogProducts=oc;f.threadActionSystemStatus=pc;f.biimPageAdminSettings=qc;f.biimOrderUpsell=rc;f.activeStatusSettings=sc;f.workplaceStatusSingleEvents=tc;f.customStatusViewerCount=uc;f.threadLabels=vc;f.secureConsentFrameworkSettings=wc;f.privacyFlowTrigger=xc;f.customStatusLikeReactions=yc;f.colorFilterSettings=zc;f.businessSupportCaseDetails=Ac;f.avatarsData=Bc;f.avatarQuickReactions=Cc;f.avatarGlyphs=Dc;f.autoLoginEligibilityCheck=Ec;f.arEffectPrivacySettings=Fc;f.messagingAdsUpsell=Gc}),null);
__d("LSVec",[],(function(a,b,c,d,e,f){"use strict";var g={tag:{value:"ls-array"}};function h(a){return Object.defineProperties([].concat(a),g)}function a(a){return h(a)}function b(a){return Array.from(a)}c={from:h,make:a,toArray:b};f["default"]=c}),66);
__d("LSDict",["LSVec","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.size=0;var b=new Map(Array.from(a||[]).map(function(a){var b=a[0];a=a[1];return b==null?null:[JSON.stringify(b),a]}).filter(Boolean));this.$1=b;Object.defineProperties(this,{size:{get:function(){return b.size}}})}var b=a.prototype;b.get=function(a){return a==null?void 0:this.$1.get(JSON.stringify(a))};b.set=function(a,b){if(a==null)return this;this.$1.set(JSON.stringify(a),b);return this};b["delete"]=function(a){return a==null?!1:this.$1["delete"](JSON.stringify(a))};b.clear=function(){return this.$1.clear()};b.forEach=function(a){var b=this;this.$1.forEach(function(c,d){return a(c,JSON.parse(d),b)})};b.has=function(a){return a==null?!1:this.$1.has(JSON.stringify(a))};b.entries=function*(){for(var a of this.$1.entries()){var b=a[0],c=a[1];yield [JSON.parse(b),c]}};b.keys=function(){return c("LSVec").from(Array.from(this.$1.keys()).map(function(a){return JSON.parse(a)}))};b.values=function(){return this.$1.values()};a.fromObject=function(b){return new a(Object.entries(b))};a.shapeToRecord=function(a){return Array.from(a.entries()).reduce(function(a,b){var d=b[0];b=b[1];if(typeof d!=="string")throw c("unrecoverableViolation")("Cannot convert dicts with mixed keys to records","messenger_web_product");return babelHelpers["extends"]({},a,(a={},a[d]=b,a))},{})};return a}();g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSDbKeyComparer","LSDict","ReStoreVaulting","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=[];while(a!==0)b.push(a.hd),a=a.tl;return b}function i(a){return a.reduceRight(function(a,b){return{hd:b,tl:a}},0)}function j(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=async function(){var a=await e.next();outer:while(!a.done){var f=async function(f){var g=b[f]||{},j=g.end;g=g.start;var k=h(a.value[0]),l=k.slice(0,f);if(g){var m=d("LSDbKeyComparer").compareValue(k[f],g[0]);if(m*(c==="asc"?1:-1)<g[1]){if(f===k.length-1&&m===0)a=await e.next();else{m=[].concat(l,[g[0]],g[1]&&c==="asc"||!g[1]&&c==="desc"?[d("LSDbKeyComparer").MAX_KEY]:[]);a=await e.next(i(m))}if(a.done)return{v:{done:!0}};k=h(a.value[0]);if(!l.every(function(b,a){return d("LSDbKeyComparer").compareValue(b,k[a])===0}))return"continue|outer"}}if(j&&d("LSDbKeyComparer").compareValue(j[0],k[f])*(c==="asc"?1:-1)<j[1]){a=await e.next(i([].concat(k.slice(0,f),c==="asc"?[d("LSDbKeyComparer").MAX_KEY]:[])));return"continue|outer"}};for(var g=0;g<b.length;g++){var j=await f(g);switch(j){case"continue|outer":continue outer;default:if(typeof j==="object")return j.v}}break}return a},a}return f()}function k(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=k.bind(null,a,b),c.next=async function(){var c=await a.next();while(!c.done&&!await b(c.value.item))c=await a.next();return c},c}function l(a,b,d){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=l.bind(null,a,b,d),e.next=async function(){while(f<b){var e=await a.next();e=e.done;if(e){c("FBLogger")("messenger_web_product").info("not enough iterable values to slice from %d",b);return{done:!0}}f++}if(f<d){f++;return a.next()}return{done:!0}},e}async function a(a,b){var c=await a.next(),d=[];while(!c.done)d.push(c.value),c=await a.next();for(c of d)await b(c)}async function m(a){var b=[],c=await a.next();while(!c.done)b.push(c.value),c=await a.next();return b}function b(a,b,c){c===void 0&&(c=[]);var e={ASC:1,DESC:-1},f=function(a,c){a=a.item;c=c.item;for(var f=0;f<b.length;f++){var g=b[f];g=g[0];var h=a[g];g=c[g];var i;h===void 0&&g===void 0?i=0:h===void 0&&g!==void 0?i=-1:h!==void 0&&g===void 0?i=1:i=d("LSDbKeyComparer").compareValue(h,g);if(i===0)continue;return i*e[b[f][1]]}return 0},g=function(){var b=babelHelpers.wrapAsyncGenerator(function*(){var b=(yield babelHelpers.awaitAsyncGenerator(a.next())),e,g=[];while(!b.done){var h=0;for(var i=c.length-1;i>=0;i--)h={hd:b.value.item[c[i]],tl:h};if(e!==void 0&&d("LSDbKeyComparer").compareKey(e,h)!==0){for(i of g.sort(f))yield i;g=[]}b.done||g.push(b.value);e=h;b=(yield babelHelpers.awaitAsyncGenerator(a.next()))}if(g.length)for(i of g.sort(f))yield i});return function(){return b.apply(this,arguments)}}();return g()}async function e(a){var b=0,d=await a.next();while(!d.done)b++,d=await a.next();return c("bs_caml_int64").of_int32(b)}function f(a,b){return{forEach:async function(d){var e=await m(a);e=e.reduce(function(c,d){d=d.item[b];var a=(c.get(d)||0)+1;return c.set(d,a)},new(c("LSDict"))());for(e of e.entries()){var f,g=e[0],h=e[1];await d((f={},f[b]=g,f.group_count=c("bs_caml_int64").of_int32(h),f))}}}}function n(a,b,c){return{delete:function(){return c.delete(a)},item:b,update:function(d){return c.upsert(a,babelHelpers.extends({},b,d))}}}function o(a,b){return p.apply(this,arguments)}function p(){p=babelHelpers.wrapAsyncGenerator(function*(a,b){var c=(yield babelHelpers.awaitAsyncGenerator(a.next()));while(!c.done)yield c.value,c=(yield babelHelpers.awaitAsyncGenerator(a.next()));c=(yield babelHelpers.awaitAsyncGenerator(b.next()));while(!c.done)yield c.value,c=(yield babelHelpers.awaitAsyncGenerator(b.next()))});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=babelHelpers.wrapAsyncGenerator(function*(a,b,c){var e=(yield babelHelpers.awaitAsyncGenerator(a.next())),f=(yield babelHelpers.awaitAsyncGenerator(b.next()));while(!e.done&&!f.done){var g=d("LSDbKeyComparer").compareKey(e.value[0],f.value[0]);g===0?(yield e.value,e=(yield babelHelpers.awaitAsyncGenerator(a.next())),f=(yield babelHelpers.awaitAsyncGenerator(b.next()))):g*(c==="asc"?1:-1)<0?(yield e.value,e=(yield babelHelpers.awaitAsyncGenerator(a.next()))):(yield f.value,f=(yield babelHelpers.awaitAsyncGenerator(b.next())))}while(!e.done)yield e.value,e=(yield babelHelpers.awaitAsyncGenerator(a.next()));while(!f.done)yield f.value,f=(yield babelHelpers.awaitAsyncGenerator(b.next()))});return r.apply(this,arguments)}function s(a,b,c,e,f,g){var h=new Set(),k=a.length>1,l=a.length===1&&a[0][1]===void 0,m=a.map(function(a){var h=a[0],k=a[1];return h.map(function(a){e.key_lookup===!0&&a.length!==0;e.table_scan===!0&&a.length===0;var h=a.map(function(a){return g(a,b)});a=h.length===(k===void 0?c.primaryKeyIds:c.indexes[k]).length&&h.every(function(a){var b=a.end;a=a.start;return a&&b&&a[0]===b[0]&&a[1]===0&&b[1]===0});if(a){a=function a(){var b,e=!1;return b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,b.next=async function(){if(e)return{done:!0};e=!0;var a=i(h.map(function(a){a=a.start;return a[0]})),b=await (k===void 0?f:f.index(k)).get(a);if(!b)return{done:!0};b=d("ReStoreVaulting").maybeUnvaultDbRow(b,c.name);return{done:!1,value:[a,b]}},b};return a()}return j(k===void 0?f:f.index(k),h,b)})}).flat().reduce(function(c,d){return a.length>1?o(c,d):q(c,d,b)});function p(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=p,a.next=async function(){var a,b,d,e=await m.next();while(!e.done){var g=e.value;b=g[0];d=g[1];a=l?b:c.primaryKeyIds.reduceRight(function(a,b){return{hd:d[b],tl:a}},0);if(k){g=JSON.stringify(a);if(h.has(g)){e=await m.next();continue}h.add(g)}break}return e.done||a===void 0||d===void 0?{done:!0}:{done:!1,value:n(a,d,f)}},a}return p()}g.filter=k;g.slice=l;g.forEach=a;g.toArray=m;g.sortBy=b;g.count=e;g.groupBy=f;g.fetch=s}),98);
__d("LSJson",["LSDict","bs_caml_int64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=512;function i(a,b,e){b===void 0&&(b=0);e===void 0&&(e="");if(b>h)throw c("unrecoverableViolation")("recursion limit exceeded","messenger_comet");if(typeof a==="string"||typeof a==="number")return JSON.stringify(a);else if(typeof a==="boolean")return a?"1":"0";else if(a===void 0)return"null";else if(typeof a==="object")if(Array.isArray(a))return a.tag==="ls-array"?"["+a.map(function(a,c){return i(a,b+1,e+"/"+c.toString())}).join(",")+"]":d("bs_caml_int64").to_string(a);else if(a instanceof c("LSDict"))return"{"+Array.from(a.entries()).map(function(a){var d=a[0];a=a[1];if(typeof d==="string")return JSON.stringify(d)+":"+i(a,b+1,e+"/"+d);else throw c("unrecoverableViolation")("key must be a string","messenger_comet")}).join(",")+"}";throw c("unrecoverableViolation")("type not supported: "+(a===null?"null":typeof a)+", path: "+e,"messenger_comet")}g.stringify=i}),98);
__d("LSLogHistory",["performance"],(function(a,b,c,d,e,f,g){"use strict";var h=[];function a(){return h}function b(){h=[]}function d(a,b){var d;c("performance").timing!=null?d=Math.round(c("performance").timing.navigationStart+c("performance").now()):d=Date.now();h.push([d.toString(),b,"lightspeed_log","lightspeed_log_event",a].join(" | "))}g.getEntries=a;g.clearEntries=b;g.log=d}),98);
__d("LS",["FBLogger","I64","LSDbKeyComparer","LSDict","LSIterationHelpers","LSJson","LSLogHistory","ODS","base64-js","bs_caml","bs_caml_format","bs_caml_int64","cr:3109","emptyFunction","gkx","justknobx","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return a};return a}var l="LS_WEB";function m(a){return a.name.match(/secure_|inbox(?!_)/i)}var n=babelHelpers.extends({},c("bs_caml_int64"),{eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&c("bs_caml").i64_eq(a,b)},from_string:function(a){try{return c("bs_caml_format").caml_int64_of_string(a)}catch(b){throw c("unrecoverableViolation")('Unable to cast "'+a+'" to int64',"messenger_comet")}},ge:c("bs_caml").i64_ge,gt:c("bs_caml").i64_gt,le:c("bs_caml").i64_le,lt:c("bs_caml").i64_lt,max:c("bs_caml").i64_max,min:c("bs_caml").i64_min,neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&c("bs_caml").i64_neq(a,b)},random:function(){var b=a.crypto||a.msCrypto;b=Array.from(b.getRandomValues(new Uint32Array(2)));b[0]>>>=1;return b},to_int32:function(a){return a==null?a:c("bs_caml_int64").to_int32(a)},to_string:function(a){return a==null?a:c("bs_caml_int64").to_string(a)}});function o(a){return c("base64-js").toByteArray(a).buffer}var p={compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ge:function(a,b){return p.compareTo(a,b)>=0},gt:function(a,b){return p.compareTo(a,b)>0},le:function(a,b){return p.compareTo(a,b)<=0},lt:function(a,b){return p.compareTo(a,b)<0},neq:function(a,b){return!p.eq(a,b)},of_string:function(a){if(a==null)return void 0;var b=new TextEncoder();return b.encode(a).buffer},to_string:function(a){if(a==null)return void 0;var b=new TextDecoder();return b.decode(a)}};function q(a){if(a.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return d("I64").asI64([a>>>1^-(b&1),((b>>>1)+(a&1)*2147483648^-(b&1))>>>0])}function r(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!==void 0)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!==void 0)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");e=[a.gte,0]}}return{end:e,start:d}}return{end:[a,0],start:[a,0]}}function s(a,b,c){var e=a.table(b.name);return{add:function(a){return e.add(a)},fetch:function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];return d("LSIterationHelpers").fetch(f.length===0?[[[[]],void 0]]:f,"asc",b,c,e,r)},fetchDesc:function(){for(var a=arguments.length,f=new Array(a),g=0;g<a;g++)f[g]=arguments[g];return d("LSIterationHelpers").fetch(f.length===0?[[[[]],void 0]]:f,"desc",b,c,e,r)},peekNextAutoIncrementId:function(){return e.peekNextAutoIncrementId()},put:function(a){return e.deleteThenInsert(a)}}}function t(a,b,d,e){return{table:function(f){f=d.tableIds[f];if(b===0&&m(f))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return s(a,f,e)}}}function u(a){var b="unknown_sproc";a=a.displayName;var c=/\[from (.*)\]/;c=c.exec(a);c!=null&&(b=c[1]);return b}var v=function(){var a=0;function d(d){var e=d.shouldLog;d=d.sprocName;if(!e||!b("cr:3109"))return;e=++a;b("cr:3109").markerStart(c("qpl")._(25302991,"143"),e);b("cr:3109").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:d}},{instanceKey:e});return e}function e(a,d,e){a=a.shouldLog;if(!a||d==null)return;b("cr:3109")==null?void 0:b("cr:3109").markerEnd(c("qpl")._(25302991,"143"),e,d)}function f(a){return c("gkx")("5983")?Math.random()*c("justknobx")._("951")<1:!1}return{call:d,logSprocDone:e,shouldLogSproc:f}}();function w(a,b,d){b=c("bs_caml_int64").to_string(b);var e=function(a){return!d?"":d[a]||""};return a(b,e).toString()}function x(a,b,d){b=c("bs_caml_int64").to_string(b);var e=function(a){return!d?"":d[a]||""};return a(b,e).toString()}function y(a,b,e,f,g,m,s,z){s===void 0&&(s={});z===void 0&&(z=void 0);var A=t(m,a,b,s),B=[];return{Map:c("LSDict"),blob:o,blobs:p,constructor:{n:q},createArray:function(){return Object.defineProperty([],"tag",{value:"ls-array"})},createArrayWithElements:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return Object.defineProperty(b,"tag",{value:"ls-array"})},ct:d("LSIterationHelpers").count,db:A,fe:d("LSIterationHelpers").forEach,ftr:d("LSIterationHelpers").filter,gb:d("LSIterationHelpers").groupBy,i64:n,islc:d("LSIterationHelpers").slice,like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},localize:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return w.apply(void 0,[f].concat(b))},localizeAsync:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return Promise.resolve(w.apply(void 0,[f].concat(b)))},localizeV2:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return x.apply(void 0,[g].concat(b))},localizeV2Async:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return Promise.resolve(x.apply(void 0,[g].concat(b)))},logger:function(a){if(z)return{debug:z,info:z,mustfix:z,warn:z};var b=c("FBLogger")("messenger_web_product");if(a.startsWith("epoch mismatch")||a.startsWith("cursor mismatch")){a=function(a){d("LSLogHistory").log(a,"error");a=a!=null?a.replace(/[\s,]+/g,"_"):"epoch_or_cursor_mismatch";d("ODS").bumpEntityKey(3185,"lsplatform",a)};return{debug:function(a){return d("LSLogHistory").log(a,"debug")},info:function(a){return d("LSLogHistory").log(a,"log")},mustfix:a,warn:a}}else{c("gkx")("2999")||(b.info=c("emptyFunction"));return b}},loopAsync:function(a,b){function c(d){var e;return n.lt(d,a)?b(d).then(function(){return c(n.add(d,q(k())))}):((e=window.Promise)!=null?e:Promise).resolve()}return c(q(j()))},loopSync:function(a,b){for(var c=q(i());n.lt(c,a);c=n.add(c,q(h())))b(c)},merge:function(){function a(a,b){return d("LSDbKeyComparer").compareValue(a,b)>0?a:b}function b(a,b){return d("LSDbKeyComparer").compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,d){d=r(d,"asc");return{end:c.end&&d.end?b(d.end,c.end):d.end||c.end,start:c.start&&d.start?a(d.start,c.start):d.start||c.start}},{});return babelHelpers.extends({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:q,nop:async function(b){var d;if(typeof b==="string"){d=e[b+".bs"];if(d==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+b,"messenger_web_product");d.load&&(d=await d.load());d=d}else d=b;try{for(var f=arguments.length,g=new Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=arguments[h];return d.apply(void 0,[m,a].concat(g))}catch(a){c("FBLogger")("messenger_web_product").catching(a).addMetadata(l,"NATIVE_OP_ID",b.toString()).warn("Native operation %s failed",b.toString());throw a}},notnull:function(a){if(a===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return a},ntop:async function(b,d){var f;if(typeof d==="string"){f=e[d.toString()];if(f==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+b+" and id: "+d,"messenger_web_product");f.load&&(f=await f.load());f=f.call}else f=d.call;for(var g=arguments.length,h=new Array(g>2?g-2:0),i=2;i<g;i++)h[i-2]=arguments[i];return f.apply(void 0,[m,a].concat(h))},print:function(a){},resolve:function(a){var b;return((b=window.Promise)!=null?b:Promise).resolve(a)},rm:n.of_int32(a),sb:d("LSIterationHelpers").sortBy,seq:function(a){return a.slice(1).reduce(function(a,b){return a.then(b)},a[0]())},slc:function(a,b){return Array.prototype.slice.call(a,b)},sp:async function(d){var h;if(typeof d==="string"){h=e[d];if(h==null)throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+d,"messenger_web_product");h.load&&(h=await h.load())}else h=d;var i=this;switch(a){case 0:i=y(2,b,e,f,g,m,s,z);break;case 2:i=y(1,b,e,f,g,m,s,z);break}var j=u(h),k=v.shouldLogSproc(j),n={shouldLog:k,sprocName:j};B.push(d);var o;try{o=v.call(n);for(var p=arguments.length,q=new Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];var t=await h.apply(void 0,q.concat([i]));v.logSprocDone(n,o,2);return t}catch(a){c("FBLogger")("messenger_web_product").catching(a).addMetadata(l,"SPROC_STACK",B.join("\n")).warn("Sproc %s failed",d);v.logSprocDone(n,o,3);throw a}finally{B.pop()}},ta:d("LSIterationHelpers").toArray,throw:function(a){throw c("unrecoverableViolation")(a,"messenger_comet")},toJSON:function(a){return d("LSJson").stringify(a)}}}y.n=q;g.default=y}),98);
__d("LSStaticDependencies",["LSDeleteThenInsertContact","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSRemoveTask","LSSetRegionHint","LSTaskExists","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertSequenceId","LSVerifyContactRowExists"],(function(a,b,c,d,e,f,g){"use strict";a={deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),removeTask:c("LSRemoveTask"),setRegionHint:c("LSSetRegionHint"),taskExists:c("LSTaskExists"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertSequenceId:c("LSUpsertSequenceId"),verifyContactRowExists:c("LSVerifyContactRowExists")};g.staticCachedModules=a}),98);
__d("LSDynamicDependencies",["Bootloader","LSStaticDependencies","Promise","RelayFBModuleLoader","SiteData","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=babelHelpers["extends"]({},d("LSStaticDependencies").staticCachedModules);function a(a){var c=[];for(a of a){var e=a.name;e!=null&&!(e in h)&&c.push(a)}var f=b("Promise").all(c.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var a=c.name;if(a==null)return;h[a]={load:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield f;return h[a]});function d(){return c.apply(this,arguments)}return d}()};c=(yield d("RelayFBModuleLoader").load(c.value));h[a]=c});return function(b){return a.apply(this,arguments)}}())).then(function(a){});return f}function i(a,b,c){a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,d,e){var f=new Map();for(a of(a=a)!=null?a:[]){a in h||f.set(a,"LS"+j(a))}for(d of(a=d)!=null?a:[]){a=d+".bs";a in h||f.set(a,"LS"+j(d)+".nop")}for(d of(a=e)!=null?a:[]){d in h||f.set(d,"LS"+j(d))}if(f.size===0)return b("Promise").resolve();var g=new(b("Promise"))(function(a){var d={},e=[],j=function(a){var c=a[0];a=a[1];d[a]={be:1,r:[]};e.push(a);h[c]={load:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield g;return h[c]});function d(){return a.apply(this,arguments)}return d}()}};for(var k of f)j(k);c("Bootloader").handlePayload({compMap:d,consistency:{rev:c("SiteData").client_revision}});i(c("Bootloader"),e,function(b){Array.from(f.entries()).forEach(function(a,c){var d=a[0];a[1];h[d]=b[c]}),a()})});return g}g.cachedModules=h;g.downloadRelayDependencies=a;g.downloadBootloaderDependencies=e}),98);
__d("LSFactory",["LS","LSDynamicDependencies","LSLocalizedStrings","LSLocalizedStringsV2","LSMetadata"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LS")(1,d("LSMetadata").metadata,d("LSDynamicDependencies").cachedModules,c("LSLocalizedStrings"),c("LSLocalizedStringsV2"),a)}g["default"]=a}),98);
__d("LSBitOffset.bs",["LSBitFlag.bs","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=c("bs_caml_int64").lsl_(c("bs_caml_int64").one,c("bs_caml_int64").to_int32(a));return d("LSBitFlag.bs").set(a,b)}function b(a,b){a=c("bs_caml_int64").lsl_(c("bs_caml_int64").one,c("bs_caml_int64").to_int32(a));return d("LSBitFlag.bs").clear(a,b)}g.set=a;g.clear=b;g.empty=c("bs_caml_int64").zero}),98);
__d("LSContactBitOffset.bs",["LSBitFlag.bs","LSBitOffset.bs","bs_caml","bs_caml_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=b.capabilities,f=b.capabilities2;if(c("bs_caml").i64_ge(a,[0,64])){if(f===void 0)return;f=c("bs_caml_int64").sub(a,[0,64]);f=c("bs_caml_int64").lsl_(c("bs_caml_int64").one,c("bs_caml_int64").to_int32(f));return d("LSBitFlag.bs").has(f,(f=b.capabilities2)!=null?f:d("LSBitOffset.bs").empty)}if(e==null)return;return d("LSBitFlag.bs").has(c("bs_caml_int64").lsl_(c("bs_caml_int64").one,c("bs_caml_int64").to_int32(a)),(f=b.capabilities)!=null?f:d("LSBitOffset.bs").empty)}g.has=a}),98);
__d("LSContactCapabilityBitOffset.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,64],G=[0,65],H=[0,66],I=[0,67],J=[0,68],K=[0,69],L=[0,70],M=[0,71],N=[0,72],O=[0,73],P=[0,74],Q=[0,75],R=[0,76],S=[0,77],T=[0,78],U=[0,79],V=[0,80],W=[0,81],X=[0,82],Y=[0,83];f.message=a;f.replyMessage=c;f.joinGroup=d;f.block=e;f.see=b;f.seeFacebookProfile=g;f.payment=h;f.camera=i;f.mediaPicker=j;f.sticker=k;f.gif=l;f.audioClips=m;f.sharedMedia=n;f.reactions=o;f.seenHeads=p;f.threadDetails=q;f.rtcVideoCall=r;f.rtcVoiceCall=s;f.threadFeedbackAndReport=t;f.goToSecretConversation=u;f.makeAdmin=v;f.removeFromGroup=w;f.removeAsAdmin=x;f.verified=y;f.disappearingMode=z;f.seeMessage=A;f.pseudoBlock=B;f.pushable=C;f.messageBlockPlaced=D;f.facebookBlockPlaced=E;f.viewerIsUnconnected=F;f.pagePlatformBot=G;f.restrictPlaced=H;f.isXacEligible=I;f.isGroupsXacEligible=J;f.isGroupsXacCallingEligible=K;f.isE2eeOnly=L;f.isEligibleForSafetyNotice=M;f.novi=N;f.isContactShareable=O;f.isHidden=P;f.isThreadCutoverUser=Q;f.hasCutoverThread=R;f.isCommunityBotPage=S;f.isNotSearchable=T;f.canUpsellVoicemail=U;f.defaultE2eeThreads=V;f.incallCaptions=W;f.isInternal=X;f.defaultE2eeThreadOneToOne=Y}),null);
__d("ReQL.bs",["ReQL","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=function a(b){var d=b.NAME;if(d!=="range")if(d==="lessThan")return c("bs_js_dict").fromArray([["lt",b.VAL]]);else if(d==="greaterThan")return c("bs_js_dict").fromArray([["gt",b.VAL]]);else if(d==="greaterThanOrEqual")return c("bs_js_dict").fromArray([["gte",b.VAL]]);else return c("bs_js_dict").fromArray([["lte",b.VAL]]);d=b.VAL;return c("bs_js_dict").fromArray(c("bs_js_dict").entries(a(d[0])).concat(c("bs_js_dict").entries(a(d[1]))))};return a.bounds(d(b))}function b(a,b){if(!b)return c("unrecoverableViolation")("only support 5","messenger_web_product");var d=b.tl;b=b.hd;if(!d)return a.getKeyRange(b);var e=d.tl;d=d.hd;if(!e)return a.getKeyRange(b,d);var f=e.tl;e=e.hd;if(!f)return a.getKeyRange(b,d,e);var g=f.tl;f=f.hd;if(g)if(g.tl)return c("unrecoverableViolation")("only support 5","messenger_web_product");else return a.getKeyRange(b,d,e,f,g.hd);else return a.getKeyRange(b,d,e,f)}function e(a,b){return a.filter(b)}function f(a,b){return a.map(b)}function h(a){return d("ReQL").toArrayAsync(a)}function i(a,b){return d("ReQL").mergeJoin(a,b)}function j(a,b){return d("ReQL").leftJoin(a,b)}function k(a,b){return a.take(b)}function l(a){return d("ReQL").firstAsync(a)}function m(a){return d("ReQL").firstExnAsync(a)}function n(a){return d("ReQL").fromTableAscending(a)}function o(a){return d("ReQL").fromTableDescending(a)}function p(a){return d("ReQL").fromTableAscending(a)}function q(a){return d("ReQL").fromTableDescending(a)}e=e;f=f;h=h;i=i;j=j;a=a;b=b;k=k;l=l;m=m;n=n;o=o;p=p;q=q;g.filter=e;g.map=f;g.toArray=h;g.mergeJoin=i;g.leftJoin=j;g.bounds=a;g.getKeyRange=b;g.take=k;g.first=l;g.firstExn=m;g.fromTableAscending=n;g.fromTableDescending=o;g.fromIndexAscending=p;g.fromIndexDescending=q}),98);
__d("MAWVerifyThreadCutover.bs",["LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","MAWGating","Promise","ReQL.bs","bs_belt_Option","bs_caml_format"],(function(a,b,c,d,e,f,g){"use strict";function h(a,e){if(d("MAWGating").isThreadLevelCutoverEnabled())return a.then(function(a){var f=d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("cutover_threads")),{hd:e,tl:0})).then(c("bs_belt_Option").isSome);a=d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("contacts")),{hd:e,tl:0})).then(function(a){return a});return b("Promise").all([f,a]).then(function(a){var b=c("bs_belt_Option").mapWithDefault(a[1],!1,function(a){return c("bs_belt_Option").getWithDefault(d("LSContactBitOffset.bs").has(d("LSContactCapabilityBitOffset.bs").hasCutoverThread,a),!1)});if(a[0])return!0;else return b})});else return b("Promise").resolve(!1)}function a(a,d){if(d==null)return b("Promise").resolve(!1);else return h(a,c("bs_caml_format").caml_int64_of_string(d))}g.verifyThreadCutover=h;g.verifyThreadCutoverWithStringInput=a}),98);
__d("MWLSPreloadThreadForContact.bs",["LSDatabaseDeferred","LSDatabaseType.bs","LSFactory","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection.bs","LSVerifyThreadRowExists","MAWVerifyThreadCutover.bs","Promise","ReQL.bs","bs_caml_format","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var e=d("LSDatabaseDeferred").db.then(function(e){return e.runInTransaction(function(f){var g=c("bs_caml_format").caml_int64_of_string(a);return d("MAWVerifyThreadCutover.bs").verifyThreadCutover(b("Promise").resolve(e),g).then(function(a){if(a)return;else return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(f.table("messages_ranges_v2__generated")),{hd:g,tl:0})).then(function(a){if(a!==void 0)if(a.minMessageId===a.maxMessageId&&a.minMessageId!=="")return c("LSIssueMessagesRangeQuery")(g,a.minTimestampMs,d("LSMailboxMessagesRangeQueryDirection.bs").before,c("LSFactory")(f));else return;else return c("LSVerifyThreadRowExists")(g,void 0,d("LSDatabaseType.bs").mailbox,c("LSFactory")(f))})})},"readwrite")});c("promiseDone")(e)}function a(){return h}g.verifyThreadExists=h;g.usePreloaderForUser=a}),98);/*FB_PKG_DELIM*/
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],indexes:{queueNameTaskId:["queueName","taskId"]},auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0},{name:"mailbox_task_completion_notification_context",id:232,primary_key:["notificationScopeKey"]},{name:"mailbox_task_completion_api_tasks",id:233,primary_key:["taskId"]}],[{name:"contacts",id:7,primary_key:["id"],indexes:{blockedByViewerStatusId:["blockedByViewerStatus","id"]}},{name:"ig_contact_info",id:176,primary_key:["contactId"]},{name:"work_contact_info",id:210,primary_key:["id"]},{name:"contextual_profile_v1",id:216,primary_key:["ownerId","associatedEntityId"],indexes:{associatedEntityIdAndOwner:["associatedEntityId","ownerId"]}},{name:"fb_transport_contacts",id:240,primary_key:["pk"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"]},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:["lastActivityTimestampMs","threadKey"],parentThreadKeyLastActivityTimestampMs:["parentThreadKey","lastActivityTimestampMs","threadKey"],clientThreadKey:["clientThreadKey","threadKey"],threadTypeLastActivityTimestampMs:["threadType","lastActivityTimestampMs","threadKey"]}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:["offlineThreadingId"],messageDisplayOrder:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],messageId:["messageId"]}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:["threadKey","readWatermarkTimestampMs","contactId"],threadKeyDeliveredWatermarkTimestampMs:["threadKey","deliveredWatermarkTimestampMs","contactId"]}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:["threadKey","timestampMs","messageId","attachmentFbid"],idx_attachments_collapsible_id:["threadKey","collapsibleId","messageId","attachmentFbid"]}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","attachmentIndex"]}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:["threadKey","messageId","attachmentFbid","ctaId"]}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:["ctaId"]}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:["threadKey","ctaId"]}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v3__generated",id:247,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"]},{name:"community_folders",id:162,primary_key:["folderId"]},{name:"community_members",id:170,primary_key:["communityId","contactId","source"],indexes:{communityContactId:["communityId","contactId","source"],communitySource:["communityId","source","name","contactId"]}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"],indexes:{igThreadID:["igThreadId"]}},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:["threadKey","inviterId","inviteeId"]}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:["threadKey","pinnedTimestampMs","messageId"]}},{name:"filtered_messages_ranges_v2__generated",id:211,primary_key:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"]},{name:"taken_down_threads",id:212,primary_key:["threadKey"]},{name:"participant_list_queries",id:219,primary_key:["threadKey"]},{name:"sync_group_threads_ranges",id:220,primary_key:["syncGroup","parentThreadKey"]},{name:"community_chat_message_seen_count",id:221,primary_key:["threadKey","messageId"]},{name:"community_chat_polls",id:223,primary_key:["pollId"]},{name:"community_chat_poll_options",id:224,primary_key:["pollId","optionId"]},{name:"community_chat_poll_votes",id:225,primary_key:["pollId","optionId","contactId"]},{name:"reactions_v2",id:226,primary_key:["threadKey","messageId","reactionFbid","messageTimestamp"],indexes:{optimistic:["threadKey","messageId","reactionFbid"]}},{name:"reactions_v2_details_users",id:227,primary_key:["reactorId","reactionFbid"]},{name:"reactions_v2_details_users_ranges_v2__generated",id:228,primary_key:["reactorId","reactionFbid","minTimestampMs"]},{name:"reaction_v2_types",id:229,primary_key:["reactionFbid","reactionEncodingHexV2"]},{name:"bots",id:230,primary_key:["threadKey","botId"]},{name:"business_comm_items",id:234,primary_key:["threadKey","entId"]},{name:"group_invitations_pending",id:235,primary_key:["linkHash"]},{name:"business_support_notification_settings",id:236,primary_key:["userId"]},{name:"thread_label_mappings",id:237,primary_key:["threadKey","labelId"]},{name:"audio_channel_events",id:238,primary_key:["eventId","roomId"]},{name:"reactions_v2_details",id:239,primary_key:["threadId","messageId","reactorId","reactionFbid"]},{name:"reactions_v2_details_ranges_v2__generated",id:243,primary_key:["threadId","messageId","reactionFbid","minTimestampMs"]},{name:"community_chat_poll_votes_ranges_v2__generated",id:244,primary_key:["pollId","optionId","minTimestampMs"]},{name:"discoverable_chat_participants",id:248,primary_key:["threadId","contactId","source"]},{name:"discoverable_chat_participants_ranges_v2__generated",id:249,primary_key:["threadId","source","minName"]},{name:"roll_calls",id:250,primary_key:["rollCallId","threadKey"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]},{name:"participant_search_queries",id:214,primary_key:["query","threadKey"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:["optimisticClientToken"]}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:["pinnedTimestamp","threadKey"]}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"]},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"],indexes:{eventsInThread:["threadId","eventId"]}},{name:"community_events",id:202,primary_key:["eventId","communityId"]},{name:"avatar_settings",id:209,primary_key:["threadId"]},{name:"thread_labels",id:215,primary_key:["labelId"],indexes:{sortKey:["sortKey"]}},{name:"business_support_case_details",id:222,primary_key:["threadId"]},{name:"rtc_call_events",id:245,primary_key:["pk"],auto_increment:!0}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:["optimisticTransactionId"]}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:["stickerPackId","stickerId"]}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query","type_"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:["threadKey"]}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:["scoreType","contactId"]}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:["ownerId","bucketType"]}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:["optimisticClientId"]}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:["optimisticClientId"]}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:["optimisticClientToken"]}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:["roomId","participantId"]}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:["serverThreadKey"],chat_id:["clientThreadPk"],jid:["jid"]}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"],indexes:{shouldFlushInitTimestampMsTraceId:["shouldFlush","initTimestampMs","traceId"]}},{name:"data_trace_addon",id:154,primary_key:["addonId"],indexes:{traceIdAddonId:["traceId","addonId"]},auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]},{name:"client_thread_proactive_warning_settings",id:241,primary_key:["threadPk"]}],[{name:"presence_states",id:186,primary_key:["contactId"],indexes:{statusContactId:["status","contactId"]}}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:["pendingBackupTaskId"]},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"encrypted_backups_debug_metadata_v2",id:217,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata_v2",id:218,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:["backupId","epochId"]}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:["taskId"]}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]},{name:"encrypted_backups_message_backup_status",id:213,primary_key:["messagePk"]},{name:"encrypted_backups_client_restore_status",id:231,primary_key:["threadId"]},{name:"third_party_id_store",id:242,primary_key:["platform"]}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:["deviceId","supportedVersion"]}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}],[{name:"workrooms_co_presence_states",id:246,primary_key:["userId"],indexes:{userCoPresence:["userId","coPresenceObjectId"]}}]]}),null);
__d("LSIntEnum",["I64"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("I64").of_float(a)}function b(a){return d("I64").to_float(a)}g.ofNumber=a;g.toNumber=b}),98);
__d("BPlusTreeBase",["justknobx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={gte:[!0,0],lt:[!0,1],gt:[!1,0],lte:[!1,1]};function* i(a){var b=(yield* a.readHeader());if(b==null||b.rootId==null||b.headId==null)return;var c=(yield* a.readExn(b.rootId));c=[{node:c,id:b.rootId}];while(c.length>0){b=c.shift();var d=b.id;b=b.node;if(!b.isLeaf)for(b of b.children){var e=(yield* a.read(b));e!=null&&c.push({node:e,id:b})}yield* a.remove(d)}yield* a.removeHeader()}function* j(a,b,c,d){var e=(yield* b.readExn(c)),f=[];e=e;c=c;var g=-1;while(!e.isLeaf)f.push([e,c,g]),g=k(a,e.keys,d,h.gt),g===-1&&(g=e.keys.length),c=e.children[g],e=(yield* b.readExn(c));return[e,c,f,g]}function k(a,b,c,d){var e=0,f=b.length-1;while(e<=f){var g=e+f>>1;(d[0]?a(b[g],c)<0:a(b[g],c)<=0)?e=g+1:f=g-1}g=[e,f][d[1]];return g===b.length?-1:g}function l(a,b,c){if(!b.length)return[0,0];var d=k(a,b,c,h.gte);if(d===-1)return[b.length,0];else if(a(b[d],c)===0)return[d,1];return[d,0]}function m(a,b,c){for(var d=arguments.length,e=new Array(d>3?d-3:0),f=3;f<d;f++)e[f-3]=arguments[f];return[].concat(a.slice(0,b),e,a.slice(b+c))}function* n(a){var b=(yield* a.readHeader());if(b==null){var c=(yield* a.writeNew({isLeaf:!0,children:[],keys:[]}));b={rootId:c,tailId:c,headId:c};yield* a.writeHeader(b)}return b}function* o(a,b,d){var e=(yield* b.readHeader());if(e==null)throw c("unrecoverableViolation")("key not found: "+String(d),"messenger_web_product");b=(yield* j(a,b,e.rootId,d));e=b[0];b=k(a,e.keys,d,h.gte);if(b===-1||a(e.keys[b],d)!==0)throw c("unrecoverableViolation")("key not found: "+String(d),"messenger_web_product");return e.children[b]}function* p(a,b,c,d){var e=(yield* b.readHeader());if(e==null)return d;b=(yield* j(a,b,e.rootId,c));e=b[0];b=k(a,e.keys,c,h.gte);return b===-1||a(e.keys[b],c)!==0?d:e.children[b]}function* q(a,b,c){var d=(yield* b.readHeader());if(d==null)return!1;b=(yield* j(a,b,d.rootId,c));d=b[0];b=k(a,d.keys,c,h.gte);return b!==-1&&a(d.keys[b],c)===0}function* r(a,b,c,d,e){var f=(yield* n(b)),g={},h=(yield* j(a,b,f.rootId,d)),i=h[0],k=h[1];h=h[2];var o=l(a,i.keys,d),p=o[0];o=o[1];for(e=babelHelpers.extends({},i,{children:m(i.children,p,o,e),keys:o===1?i.keys:m(i.keys,p,o,d)}),i=k;e.keys.length>=c;e=o,i=d){p=h.pop()||[{keys:[],children:[i],isLeaf:!1}];o=p[0];d=p[1];k=Math.floor(e.keys.length/2);p=void 0;var q=void 0;e.isLeaf?(p={isLeaf:!0,children:e.children.slice(k),keys:e.keys.slice(k),nextId:e.nextId,prevId:i},q=e.nextId=(yield* b.writeNew(p)),p.nextId?yield* b.write(p.nextId,babelHelpers.extends({},yield* b.readExn(p.nextId),{prevId:q})):g.tailId=q):(p={isLeaf:!1,children:e.children.slice(k+1),keys:e.keys.slice(k+1)},q=(yield* b.writeNew(p)));p=l(a,o.keys,e.keys[k]);p=p[0];o=babelHelpers.extends({},o,{keys:m(o.keys,p,0,e.keys[k]),children:m(o.children,p+1,0,q)});yield* b.write(i,babelHelpers.extends({},e,{keys:e.keys.slice(0,k),children:e.children.slice(0,k+(e.isLeaf?0:1))}))}i==null?g.rootId=(yield* b.writeNew(e)):yield* b.write(i,e);Object.keys(g).length&&(yield* b.writeHeader(babelHelpers.extends({},f,g)))}function* s(a,b,d,e){var f=(yield* n(b)),g={};d=Math.floor(d/2);var i=(yield* j(a,b,f.rootId,e)),l=i[0],o=i[1],p=i[2];i=i[3];var q=k(a,l.keys,e,h.gte);if(q===-1||a(l.keys[q],e)!==0)return!1;a=babelHelpers.extends({},l,{keys:m(l.keys,q,1),children:m(l.children,q,1)});e=o;yield* b.write(e,a);l=i;for(var o,i,q;a.keys.length<d&&p.length;r=[o,i,q],a=r[0],e=r[1],l=r[2],r){q=p.pop();o=q[0];i=q[1];q=q[2];var r=[[{nodeId:o.children[l-1]},{nodeId:e,node:a},l-1],[{nodeId:e,node:a},{nodeId:o.children[l+1]},l]].filter(function(a){var b=a[0];a=a[1];return b.nodeId!==void 0&&a.nodeId!==void 0});for(var s of r){var t=s[0],u=s[1],v=s[2];t.node=t.node||(yield* b.readExn(t.nodeId));u.node=u.node||(yield* b.readExn(u.nodeId));if(t.node.keys.length+u.node.keys.length>=d*2){a.isLeaf?(u.node=babelHelpers.extends({},u.node,{children:[].concat(t.node.children,u.node.children),keys:[].concat(t.node.keys,u.node.keys)}),t.node=babelHelpers.extends({},t.node,{children:u.node.children.splice(0,d),keys:u.node.keys.splice(0,d)}),o=babelHelpers.extends({},o,{keys:m(o.keys,v,1,u.node.keys[0])})):(u.node=babelHelpers.extends({},u.node,{children:[].concat(t.node.children,u.node.children),keys:[].concat(t.node.keys,[o.keys[v]],u.node.keys)}),t.node=babelHelpers.extends({},t.node,{children:u.node.children.splice(0,d+1)}),o=babelHelpers.extends({},o,{keys:m(o.keys,v,1,u.node.keys.splice(d,1)[0])}),t.node.keys=u.node.keys.splice(0,d));yield* b.write(t.nodeId,t.node);yield* b.write(u.nodeId,u.node);yield* b.write(i,o);Object.keys(g).length&&(yield* b.writeHeader(babelHelpers.extends({},f,g)));return!0}}for(v of r){t=v[0];u=v[1];s=v[2];t.node=babelHelpers.extends({},t.node,{children:[].concat(t.node.children,u.node.children)});a.isLeaf?(t.node.keys=[].concat(t.node.keys,u.node.keys),u.node.nextId?yield* b.write(u.node.nextId,babelHelpers.extends({},yield* b.readExn(u.node.nextId),{prevId:t.nodeId})):g.tailId=t.nodeId,t.node.nextId=u.node.nextId):t.node.keys=[].concat(t.node.keys,[o.keys[s]],u.node.keys);o=babelHelpers.extends({},o,{keys:m(o.keys,s,1),children:m(o.children,s+1,1)});c("justknobx")._("672")&&(yield* b.write(i,o));yield* b.write(t.nodeId,t.node);yield* b.remove(u.nodeId);break}}yield* b.write(e,a);s=(yield* b.readExn(f.rootId));if(!s.keys.length&&s.children.length){if(s.isLeaf)throw c("unrecoverableViolation")("cannot be leaf","messenger_web_product");yield* b.remove(f.rootId);g.rootId=s.children[0]}Object.keys(g).length&&(yield* b.writeHeader(babelHelpers.extends({},f,g)));return!0}function t(a,b,d){d=d===void 0?{}:d;var e=d.dir,f=e===void 0?"asc":e,g=babelHelpers.objectWithoutPropertiesLoose(d,["dir"]);function i(){if(f==="asc"){if(Object.prototype.hasOwnProperty.call(g,"gt"))return g.gt;else if(Object.prototype.hasOwnProperty.call(g,"gte"))return g.gte}else if(Object.prototype.hasOwnProperty.call(g,"lt"))return g.lt;else if(Object.prototype.hasOwnProperty.call(g,"lte"))return g.lte}function l(b){if(f==="asc")return Object.prototype.hasOwnProperty.call(g,"gt")?k(a,b.keys,g.gt,h.gt):Object.prototype.hasOwnProperty.call(g,"gte")?k(a,b.keys,g.gte,h.gte):0;else return Object.prototype.hasOwnProperty.call(g,"lt")?k(a,b.keys,g.lt,h.lt):Object.prototype.hasOwnProperty.call(g,"lte")?k(a,b.keys,g.lte,h.lte):b.keys.length-1}if(Object.prototype.hasOwnProperty.call(g,"gt")&&Object.prototype.hasOwnProperty.call(g,"gte"))throw c("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");if(Object.prototype.hasOwnProperty.call(g,"lt")&&Object.prototype.hasOwnProperty.call(g,"lte"))throw c("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");var m;return{next:function*(d){var e,n;if(m==null){var o=(yield* b.readHeader());if(o==null)return{done:!0};var p=i();if(p!=null){p=(yield* j(a,b,o.rootId,p));e=p[0];p=p[1]}else if(f==="asc"){var q=[yield* b.readExn(o.headId),o.headId];e=q[0];p=q[1]}else{q=[yield* b.readExn(o.tailId),o.tailId];e=q[0];p=q[1]}o=l(e)}else{q=m;o=q.i;n=q.key;p=q.nodeId;e=(yield* b.read(p));if(d!=null){if(a(d,n)===(f==="asc"?-1:1))throw c("unrecoverableViolation")("key must be ahead of current key","messenger_web_product");if(e==null||a(d,e.keys[0])<0||a(d,e.keys[e.keys.length-1])>0){q=(yield* b.readHeader());if(q==null)return{done:!0};q=(yield* j(a,b,q.rootId,d));e=q[0];p=q[1]}o=k(a,e.keys,d,h[f==="asc"?"gte":"lte"])}else{if(e==null||o<0||o>=e.keys.length||a(e.keys[o],n)!==0){if(e==null||!e.keys.length||a(n,e.keys[0])<0||a(n,e.keys[e.keys.length-1])>0){q=(yield* b.readHeader());if(q==null)return{done:!0};d=(yield* j(a,b,q.rootId,n));e=d[0];p=d[1]}o=k(a,e.keys,n,h[f==="asc"?"lte":"gte"])}o+=f==="asc"?1:-1}}if(o<0||o>=e.keys.length)if(f==="asc"){if(e.nextId===void 0)return{done:!0};p=e.nextId;e=(yield* b.readExn(p));o=0}else{if(e.prevId===void 0)return{done:!0};p=e.prevId;e=(yield* b.readExn(p));o=e.keys.length-1}n=e.keys[o];m={node:e,nodeId:p,key:n,i:o};if(o<0||o>=e.keys.length)return{done:!0};q=f==="asc"?Object.prototype.hasOwnProperty.call(g,"lt")&&a(n,g.lt)>=0||Object.prototype.hasOwnProperty.call(g,"lte")&&a(n,g.lte)>0:Object.prototype.hasOwnProperty.call(g,"gt")&&a(n,g.gt)<=0||Object.prototype.hasOwnProperty.call(g,"gte")&&a(n,g.gte)<0;return q?{done:!0}:{done:!1,value:[e.keys[o],e.children[o]]}}}}function a(a,b,c){b===void 0&&(b=32);return{get:function(b){return o(a,c,b)},getWithDefault:function(b,d){return p(a,c,b,d)},has:function(b){return q(a,c,b)},set:function(d,e){return r(a,c,b,d,e)},delete:function(d){return s(a,c,b,d)},entries:function(b){return t(a,c,b)},clear:function(){return i(c)}}}g.default=a}),98);
__d("BPlusTree",["BPlusTreeBase","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a={},b=void 0,d=0;return{read:function*(b){return a[b]},readExn:function*(b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b];else throw c("unrecoverableViolation")("expected key","messenger_web_product")},readHeader:function*(){return b},remove:function*(b){delete a[b]},removeHeader:function*(){b=void 0},write:function*(b,c){a[b]=c},writeHeader:function*(a){b=a},writeNew:function*(b){a[d++]=b;return d-1}}}function i(a){var b=a.next();while(!b.done)b=a.next(b.value);return b.value}function a(a,b){b===void 0&&(b=16);var d=c("BPlusTreeBase")(a,b,h()),e;return e={clear:function(){return i(d.clear())},delete:function(a){return i(d.delete(a))},entries:function(a){function b(){var c,e=d.entries(a);return c={next:function(a){return i(e.next(a))}},c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=b,c}return b()},get:function(a){return i(d.get(a))},getWithDefault:function(a,b){return i(d.getWithDefault(a,b))},has:function(a){return i(d.has(a))},set:function(a,b){i(d.set(a,b));return e}}}g.default=a}),98);
__d("LSDbKeyComparer",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=[[]];function i(a,b){var d=a===h,e=b===h;if(d&&e)return 0;if(d)return 1;if(e)return-1;if(a===void 0)return b===void 0?0:-1;else if(b===void 0)return 1;else if(Array.isArray(a)){if(!Array.isArray(b))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");d=a[0];e=b[0];if(d<e)return-1;if(d>e)return 1;d=a[1];e=b[1];if(d<e)return-1;if(d>e)return 1}else if(typeof a==="string"){if(typeof b!=="string")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="number"){if(typeof b!=="number")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(a instanceof Date){if(!(b instanceof Date))throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(a<b)return-1;if(a>b)return 1}else if(typeof a==="boolean"){if(typeof b!=="boolean")throw c("unrecoverableViolation")("Expected types to be the same","messenger_comet");if(!a&&b)return-1;if(a&&!b)return 1}else throw c("unrecoverableViolation")("Unexpected type","messenger_comet");return 0}function a(a,b){for(a=a,b=b;;a=a.tl,b=b.tl){if(a===0&&b===0)return 0;if(a===0)return-1;if(b===0)return 1;var c=i(a.hd,b.hd);if(c!==0)return c}return 0}g.MAX_KEY=h;g.compareValue=i;g.compareKey=a}),98);
__d("PromiseOrValue",["isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(c("isPromise")(a)&&c("isPromise")(b))return a.then(function(a){return b.then(function(b){return[a,b]})});if(c("isPromise")(a))return a.then(function(a){return[a,b]});return c("isPromise")(b)?b.then(function(b){return[a,b]}):[a,b]}function b(a,b){return c("isPromise")(a)?a.then(b):b(a)}function h(a,b){b=b;while(!0){var d=a(b);if(c("isPromise")(d))return d.then(function(b){return b.action==="break"?b.value:h(a,b.value)});if(d.action==="break")return d.value;b=d.value}throw c("unrecoverableViolation")("just for flow","messenger_web_product")}g.all2=a;g.map=b;g.loop=h}),98);
__d("ReQLBounds",["LSDbKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a?{hd:a.hd,tl:h(a.tl,b)}:b}function i(a){return h(a,{hd:d("LSDbKeyComparer").MAX_KEY,tl:0})}function j(a,b,c){if(a!=null&&b!=null)return d("LSDbKeyComparer").compareKey(a[1],b[1])*c>0?a[0]:b[0];if(a!=null)return a[0];if(b!=null)return b[0]}function a(a,b){return j((a==null?void 0:a.gt)!=null?[{gt:a.gt},i(a.gt)]:(a==null?void 0:a.gte)!=null?[{gte:a.gte},a.gte]:void 0,(b==null?void 0:b.gt)!=null?[{gt:b.gt},i(b.gt)]:(b==null?void 0:b.gte)!=null?[{gte:b.gte},b.gte]:void 0,1)}function b(a,b){return j((a==null?void 0:a.lt)!=null?[{lt:a.lt},a.lt]:(a==null?void 0:a.lte)!=null?[{lte:a.lte},i(a.lte)]:void 0,(b==null?void 0:b.lt)!=null?[{lt:b.lt},b.lt]:(b==null?void 0:b.lte)!=null?[{lte:b.lte},i(b.lte)]:void 0,-1)}function c(a,b,c){a.forEach(function(a){var e=a[0];a=a[1];var f=(e==null?void 0:e.gt)!=null?d("LSDbKeyComparer").compareKey(b,i(e.gt))>=0:(e==null?void 0:e.gte)!=null?d("LSDbKeyComparer").compareKey(b,e.gte)>0:!0;e=(e==null?void 0:e.lt)!=null?d("LSDbKeyComparer").compareKey(b,e.lt)<0:(e==null?void 0:e.lte)!=null?d("LSDbKeyComparer").compareKey(b,i(e.lte))<=0:!0;if(f&&e)return c(a)})}g.getLowerLimit=a;g.getUpperLimit=b;g.forEachMatchingBounds=c}),98);
__d("ReQLGlobalQueryContext",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){a=a.get(g);return a==null?[]:a}function b(a,b){a.set(g,b)}c={contents:void 0};f.getDependencies=a;f.setDependencies=b;f.globalQueryContext=c}),66);
__d("ReQL",["BPlusTree","LSDbKeyComparer","PromiseOrValue","ReQLBounds","ReQLGlobalQueryContext","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={bounds:b,filter:f,getKeyRange:m,map:o,take:s};function i(a,b){return a?{hd:a.hd,tl:i(a.tl,b)}:b}function j(a,b){b=b;a=a;while(b){if(!a)throw c("unrecoverableViolation")("unexpected end of key","messenger_web_product");b=b.tl;a=a.tl}return a}function k(a,b){try{var c=d("ReQLGlobalQueryContext").globalQueryContext.contents,e=d("ReQLGlobalQueryContext").getDependencies(b);d("ReQLGlobalQueryContext").setDependencies(b,[]);d("ReQLGlobalQueryContext").globalQueryContext.contents=b;var f,g;try{f=a(),g=d("ReQLGlobalQueryContext").getDependencies(b)}finally{d("ReQLGlobalQueryContext").setDependencies(b,e),d("ReQLGlobalQueryContext").globalQueryContext.contents=c}return[f,g]}catch(c){if(c instanceof Promise)return c.then(function(){return k(a,b)});throw c}}function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduceRight(function(a,b){return{hd:b,tl:a}},0)}function b(a){var b=this;function c(a,b){if(b==null)return a;var c=d("ReQLBounds").getLowerLimit(b,a);b=d("ReQLBounds").getUpperLimit(b,a);if(c!=null&&b!=null)return babelHelpers.extends({},c,b);if(c!=null)return c;if(b!=null)return b}return Object.setPrototypeOf({direction:b.direction,iterator:function(d,e){return b.iterator(d,c(a,e))},keyLength:b.keyLength,subscribe:function(d,e){return b.subscribe(d,c(a,e))}},h)}var l=Object.setPrototypeOf({direction:"asc",iterator:function(){return{next:function(){return{done:!0}}}},keyLength:0,subscribe:function(){return function(){}}},h);function e(){return l}function f(a){var b=this,c=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(e,f){var g=b.iterator(e,f);return{next:function(b){return d("PromiseOrValue").loop(function(b){return d("PromiseOrValue").map(g.next(b),function(b){if(b.done)return{action:"break",value:b};var e=b.value,f=e[0];e=e[1];if(a(e)){d("ReQLBounds").forEachMatchingBounds(c,f,function(a){a.add(JSON.stringify(f))});return{action:"break",value:b}}d("ReQLBounds").forEachMatchingBounds(c,f,function(a){a.delete(JSON.stringify(f))});return{action:"continue",value:void 0}})},b)}}},keyLength:b.keyLength,subscribe:function(d,e){var f={},g=new Set();c.set(f,[e,g]);var h=b.subscribe(async function(b,c,e){var f=JSON.stringify(b);c.operation==="add"&&a(c.value)?(g.add(f),await d(b,c,e)):c.operation==="put"&&a(c.value)?g.has(f)?await d(b,c,e):(g.add(f),await d(b,{operation:"add",value:c.value},e)):c.operation==="put"&&g.has(f)?(g.delete(f),await d(b,{operation:"delete"},e)):c.operation==="delete"&&g.has(f)&&(g.delete(f),await d(b,c,e))},e);return function(){c.delete(f);return h()}}},h)}function m(){var a=this;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];var f=c.reduceRight(function(a,b){return{hd:b,tl:a}},0);function g(a){return a.gt!=null?{gt:i(f,a.gt)}:{gte:i(f,a.gte)}}function k(a){return a.lt!=null?{lt:i(f,a.lt)}:{lte:i(f,a.lte)}}function l(a){return a==null?{gte:f,lte:f}:babelHelpers.extends({},a.gte!=null||a.gt!=null?g(a):{gte:f},a.lte!=null||a.lt!=null?k(a):{lte:f})}return Object.setPrototypeOf({direction:a.direction,iterator:function(b,c){var e=a.iterator(b,l(c));return{next:function(a){return d("PromiseOrValue").map(e.next(a==null?a:i(f,a)),function(a){return a.done?{done:!0}:{done:!1,value:[j(a.value[0],f),a.value[1]]}})}}},keyLength:a.keyLength-c.length,subscribe:function(b,c){return a.subscribe(function(a,c,d){return b(j(a,f),c,d)},l(c))}},h)}function n(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(e,f){var g=a.iterator(e,f),h=b.iterator(e,f),i=h.next();function j(a){return d("PromiseOrValue").map(i,function(b){var c=b.done?!0:d("LSDbKeyComparer").compareKey(a,b.value[0])<=0;c=c?b:h.next(a);i=c;return c})}return{next:function(a){return d("PromiseOrValue").map(g.next(a),function(a){if(a.done)return{done:!0,value:void 0};var b=a.value;b=b[0];return d("PromiseOrValue").map(j(b),function(b){var e=a.value,f=e[0];e=e[1];if(b.done)return{done:!1,value:[f,[e,void 0]]};b=b.value;var g=b[0];b=b[1];g=d("LSDbKeyComparer").compareKey(f,g);if(g>0)throw c("unrecoverableViolation")("Right iterable should always be equal to or ahead","messenger_web_product");else if(g<0)return{done:!1,value:[f,[e,void 0]]};else return{done:!1,value:[f,[e,b]]}})})}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,d){var e=!0,f=a.subscribe(async function(a,d,f){var g=await b.iterator(f,{gte:a,lte:a}).next();if(!e)return;await c(a,d.operation==="add"?{operation:"add",value:[d.value,(a=g.value)==null?void 0:a[1]]}:d.operation==="put"?{operation:"put",value:[d.value,(a=g.value)==null?void 0:a[1]]}:{operation:"delete"},f)},d),g=b.subscribe(async function(b,d,f){var g=await a.iterator(f,{gte:b,lte:b}).next();if(!e||g.done)return;await c(b,d.operation==="add"?{operation:"add",value:[g.value[1],d.value]}:d.operation==="put"?{operation:"put",value:[g.value[1],d.value]}:{operation:"delete"},f)},d);return function(){e=!1,f(),g()}}},h)}function o(a){var b=this,c=new Map();function e(b,c,d,e,g){var h=JSON.stringify(d),i=b.get(h);i==null&&(i=[],b.set(h,i));i.forEach(function(a){return a()});i.length=0;var j=i;g.forEach(function(g){j.push(g.subscribe(async function(g,h,i){await f(b,c,d,e,i),await c(d,{operation:"put",value:a(e)},i)}))})}function f(b,c,f,g,h){return d("PromiseOrValue").map(k(function(){return a(g)},h),function(a){var d=a[0];a=a[1];e(b,c,f,g,a);return d})}function g(a,b){var c=JSON.stringify(b);if(!a.has(c))return;b=(b=a.get(JSON.stringify(b)))!=null?b:[];b.forEach(function(a){return a()});b.length=0;a.delete(c)}return Object.setPrototypeOf({direction:b.direction,iterator:function(f,g){var h=b.iterator(f,g);return{next:function(b){return d("PromiseOrValue").map(h.next(b),function(g){if(g.done)return g;g=g.value;var b=g[0],h=g[1];return d("PromiseOrValue").map(d("PromiseOrValue").map(k(function(){return a(h)},f),function(a){var f=a[0],g=a[1];d("ReQLBounds").forEachMatchingBounds(c,b,function(a){var c=a[0];a=a[1];return e(c,a,b,h,g)});return f}),function(a){return{done:!1,value:[b,a]}})})}}},keyLength:b.keyLength,subscribe:function(d,e){var h={},i=new Map();c.set(h,[e,[i,d]]);var j=b.subscribe(async function(b,c,e){if(c.operation==="delete")g(i,b),await d(b,c,e);else if(c.operation==="add"){var h=c.value,j=await f(i,d,b,h,e);a(h);await d(b,{operation:"add",value:j},e)}else if(c.operation==="put"){h=c.value;j=await f(i,d,b,h,e);a(h);await d(b,{operation:"put",value:j},e)}},e);return function(){i.forEach(function(a){a.forEach(function(a){return a()})}),c.delete(h),j()}}},h)}function p(a,b){var c=q(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return e.reduce(function(a,b){return q(a,b)},c)}function q(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("union requires iterables to be sorted in the same direction","messenger_web_product");var e=Math.max(a.keyLength,b.keyLength);function f(a,b){return b===0||a===0?0:{hd:a.hd,tl:f(a.tl,b-1)}}function g(a){return a.gt!=null?{gt:f(a.gt,e)}:{gte:f(a.gte,e)}}function j(a){return a.lt!=null?{lt:f(a.lt,e)}:{lte:f(a.lte,e)}}function k(a){return a==null?void 0:babelHelpers.extends({},a.gte!=null||a.gt!=null?g(a):{},a.lte!=null||a.lt!=null?j(a):{})}return Object.setPrototypeOf({direction:a.direction,iterator:function(c,g){var h=a.iterator(c,k(g)),j=b.iterator(c,k(g)),l=h.next(),m=j.next();return{next:function(b){b!==void 0&&(l=h.next(f(b,e)),m=j.next(f(b,e)));return d("PromiseOrValue").map(d("PromiseOrValue").all2(l,m),function(b){var c=b[0];b=b[1];function e(a,b){if(a.done)return{done:!0};a={done:!1,value:[i(a.value[0],{hd:b,tl:0}),a.value[1]]};b?l=h.next():m=j.next();return a}if(c.done)return e(b,!1);if(b.done)return e(c,!0);var f=a.direction==="asc"?[c,b]:[b,c],g=f[0];f=f[1];f=d("LSDbKeyComparer").compareKey((g=g.value)==null?void 0:g[0],(g=f.value)==null?void 0:g[0]);if(f<0)return e(c,!0);else return e(b,!1)})}}},keyLength:e+1,subscribe:function(c,d){var e=a.subscribe(function(a,b,d){return c(i(a,{hd:!0,tl:0}),b,d)},d),f=b.subscribe(function(a,b,d){return c(i(a,{hd:!1,tl:0}),b,d)},d);return function(){e(),f()}}},h)}function r(a,b){if(a.direction!==b.direction)throw c("unrecoverableViolation")("merge join requires iterables to be sorted in the same direction","messenger_web_product");return Object.setPrototypeOf({direction:a.direction,iterator:function(c,e){var f=a.iterator(c,e),g=b.iterator(c,e);function h(a){return d("PromiseOrValue").loop(function(a){var b=a[0];a=a[1];if(b.done||a.done)return{action:"break",value:{done:!0}};var c=b.value,e=c[0];c=c[1];var h=a.value,i=h[0];h=h[1];var j=d("LSDbKeyComparer").compareKey(e,i);if(j>0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(b,g.next(e)),function(a){return{action:"continue",value:a}});else if(j<0)return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(i),a),function(a){return{action:"continue",value:a}});return{action:"break",value:{done:!1,value:[e,[c,h]]}}},a)}return{next:function(a){return d("PromiseOrValue").map(d("PromiseOrValue").all2(f.next(a),g.next(a)),h)}}},keyLength:Math.max(a.keyLength,b.keyLength),subscribe:function(c,d){var e=!0;async function f(a,b,d,f,g){a=await a.iterator(g,{gte:d,lte:d}).next();if(a.done||!e)return;a=a.value[1];b=f.operation==="add"?{operation:"add",value:b(f.value,a)}:f.operation==="put"?{operation:"put",value:b(f.value,a)}:f;await c(d,b,g)}var g=a.subscribe(function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return f.apply(void 0,[b,function(a,b){return[a,b]}].concat(c))},d),h=b.subscribe(function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return f.apply(void 0,[a,function(a,b){return[b,a]}].concat(c))},d);return function(){e=!1,g(),h()}}},h)}function s(a){var b=this,e=new Map();return Object.setPrototypeOf({direction:b.direction,iterator:function(c,f){var g=b.iterator(c,f),h=0;return{next:function(b){if(h>=a)return{done:!0};else return d("PromiseOrValue").map(g.next(b),function(b){b.done||d("ReQLBounds").forEachMatchingBounds(e,b.value[0],function(c){var d=c[0];c=c[1];c.contents<=a&&(d.has(b.value[0])||(c.contents+=1,d.set(b.value[0],void 0)))});h+=1;return b})}}},keyLength:b.keyLength,subscribe:function(f,g){var h={},i=b.direction==="asc"?1:-1,j=c("BPlusTree")(function(a,b){return d("LSDbKeyComparer").compareKey(a,b)*-i}),k={contents:0};e.set(h,[g,[j,k]]);var l=b.subscribe(async function(c,g,l){var m;m=(m=j.entries().next().value)==null?void 0:m[0];var n=m==null?!0:d("LSDbKeyComparer").compareKey(c,m)*i<=0;if(g.operation==="delete"&&n){k.contents>0&&(j.delete(c),await f(c,g,l));var o=await b.iterator(l,m==null?void 0:i===1?{gt:m}:{lt:m}).next();!o.done&&e.has(h)?(j.set(o.value[0],void 0),await f(o.value[0],{operation:"add",value:o.value[1]},l)):k.contents>0&&(k.contents-=1)}else g.operation==="add"&&k.contents<a?(k.contents+=1,j.set(c,void 0),await f(c,g,l)):g.operation==="add"&&n?(m!=null&&(j.delete(m),await f(m,{operation:"delete"},l)),j.set(c,void 0),await f(c,g,l)):g.operation==="put"&&n&&await f(c,g,l)},g);return function(){e.delete(h);return l()}}},h)}function t(a){return Object.setPrototypeOf({direction:"asc",iterator:function(b,c){return a.entries(b,"asc",c)},keyLength:a.keyLength,subscribe:a.subscribe},h)}function u(a){return Object.setPrototypeOf({direction:"desc",iterator:function(b,c){return a.entries(b,"desc",c)},keyLength:a.keyLength,subscribe:a.subscribe},h)}async function v(a){var b=[];a=a.iterator(new WeakMap());var c=await a.next();while(!c.done)b.push(c.value[1]),c=await a.next();return b}async function w(a){a=a.iterator(new WeakMap());a=await a.next();return a.done?void 0:a.value[1]}async function x(a){a=a.iterator(new WeakMap());a=await a.next();if(a.done)throw c("unrecoverableViolation")("expected result","messenger_web_product");return a.value[1]}g.prototype=h;g.key=a;g.empty=e;g.leftJoin=n;g.union=p;g.mergeJoin=r;g.fromTableAscending=t;g.fromTableDescending=u;g.toArrayAsync=v;g.firstAsync=w;g.firstExnAsync=x}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(d of e)if(typeof d!=="string")return null}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b of a)if(typeof b!=="string")return null;return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string",tableName:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"?null:{data:e,indexName:a.indexName,tableName:a.tableName}}function b(a,b){if(a==null)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}function d(a){return{indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName}}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreVaulting",["cr:2075","cr:2151","cr:2203"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:2075")!=null?b("cr:2075").vault(a):a}function c(a){return b("cr:2075")!=null?b("cr:2075").unvault(a):a}function d(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").unvaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}function e(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").vaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}g.maybeVault=a;g.maybeUnvault=c;g.maybeUnvaultDbRow=d;g.maybeVaultDbRow=e}),98);
__d("MessengerWebEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_PARTICIPANTS:"add_participants",BIRTHDAYS:"birthdays",CHAT_HEADS:"chat_heads",CHAT_HEADS_OVERFLOW:"chat_heads_overflow",CHAT_SEARCH:"chat_search",CHAT_WITH_SIDEBAR:"chat_with_sidebar",COMMUNITY_HELP:"community_help",COMPAT:"compat",COOKIE:"cookie",CREATE_GROUP_DIALOG:"create_group_dialog",CRISIS_LISTING_ATTACHMENT:"crisis_listing_attachment",EVENTS_PERMALINK:"events_permalink",FEED_POLL:"feed_poll",FEED_STORY_CTA:"feed_story_cta",FILES_TAB:"files_tab",FRIENDS_TAB:"friends_tab",FUNDRAISER:"fundraiser",FUNDRAISER_SUPPORT_REACTIVE_FAQ:"fundraiser_support:reactive_faq",FUNDRAISER_SUPPORT_REACTIVE_MORE_MENU:"fundraiser_support:reactive_more_menu",FUNDRAISER_SUPPORTERS_LIST:"fundraiser_supporters_list",GRATITUDE:"gratitude",GROUP_CHATS:"group_chats",GROUP_EXPERTS_DISCOVERY_INVITE:"group_experts_discovery_invite",GROUP_MEMBERS_TAB:"group_members_tab",GROUP_QUALITY:"group_quality",GROUP_REMOVE_POST_TOMBSTONE:"group_remove_post_tombstone",GROUP_TAB:"group_tab",GROUP_WELCOME_POST:"group_welcome_post",HOVERCARD:"hovercard",INBOX:"inbox",INBOX_TRAY:"inbox_tray",JEWEL:"jewel",JEWEL_NEW_MESSAGE:"jewel_new_message",JEWEL_SEARCH:"jewel_search",JOBS:"jobs",LINKS_TAB:"links_tab",LOCAL_BUSINESSES_NEARBY:"local_businesses_nearby",LWI_SUPPORT_BUTTON:"lwi_support_button",MARKETPLACE:"marketplace",MEDIA_TAB:"media_tab",MEMORIES_HOME:"memories_home",MENTAL_HEALTH:"mental_health",MENTORSHIP:"mentorship",MESSAGE_RECEIVED:"message_received",MUTUAL_FRIENDS_DIALOG:"mutual_friends_dialog",NEW_MESSAGE_BUTTON:"new_msg_button",OFFER:"offer",P2P_PAYMENTS:"p2p_payments",PAGES_ABOUT:"pages_about",PAGES_ADMIN_INVITE_ITEM:"pages_admin_invite_item",PAGES_COMMENT_COMPOSER:"pages_comment_composer",PAGES_COMMUNITY_FRIENDS_DIALOG:"pages_community_friends_dialog",PAGES_CTA:"pages_cta",PAGES_DISCOVER_SUGGESTED_PAGE:"pages_discover_suggested_page",PAGES_HEADER:"pages_header",PAGES_HOME_FRIENDS_DIALOG:"pages_home_friends_dialog",PAGES_HOVERCARD:"pages_hovercard",PAGES_LIKE_INVITE_ITEM:"pages_like_invite_item",PAGES_POPUP_CHAT:"pages_popup_chat",PAGES_PRIVATE_REPLY:"pages_private_reply",POPUP_CHAT_BOX:"popup_chat_box",PROFILE_SERVICES_MENU:"profile_services_menu",REACTOR_LIST:"reactor_list",RESHARES_DIALOG:"reshares_dialog",RHC_SEARCH:"rhc_search",RHC_SEARCH_ICON:"rhc_search_icon",ROOMS_LOBBY:"rooms_lobby",ROOMS_NULL_STATE:"rooms_null_state",SEARCH:"search",SEARCH_RESULT_PAGE:"search_result_page",SHOP:"shop",SIDEBAR:"sidebar",STORIES_VIEWED_BY_LIST:"stories_viewed_by_list",STORY_AGGREGATED_USERS:"story_aggregated_users",STORY_SEEN_BY_LIST:"story_seen_by_list",THREAD_DETAILS:"thread_details",TIMELINE:"timeline",UICE:"uice",UNKNOWN:"unknown",VOLUNTEERING:"volunteering",WORK_SHIFT_SWAP:"work_shift_swap"});f["default"]=a}),66);
__d("MessengerWebEntryPointsUtil.bs",["MessengerWebEntryPoint"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==="pagesLikeInviteThem")return"pages_like_invite_item";else if(a==="pagesPrivateReply")return"pages_private_reply";else if(a==="inboxActiveContacts"||a==="inboxArchived"||a==="inboxSpam"||a==="inboxFolder"||a==="inboxThreadList"||a==="inboxRecentThreads"||a==="inboxRemainingThreads"||a==="pendingRequests"||a==="inboxRestricted"||a==="archieve"||a==="inboxInThread"||a==="inboxPendingRequests")return"inbox";else if(a==="jobs")return c("MessengerWebEntryPoint").jobs;else if(a==="storySeenByList"||a==="friendsTab")return"story_seen_by_list";else if(a==="chatParticipants")return"add_participants";else if(a==="compat")return"compat";else if(a==="cookie")return"cookie";else if(a==="pagesAdminInviteItem")return"pages_admin_invite_item";else if(a==="groupWelcomePost")return"group_welcome_post";else if(a==="sidebarContactsList"||a==="sidebarGroupsList")return"sidebar";else if(a==="jewelNestedFolder"||a==="jewel")return"jewel";else if(a==="shop")return"shop";else if(a==="pageLikeChaining")return c("MessengerWebEntryPoint").PAGE_LIKE_CHAINING;else if(a==="chatheadsOverflow")return"chat_heads_overflow";else if(a==="feedDynamicHoverCard")return"pages_hovercard";else if(a==="messengerUniversalSearch")return"search_result_page";else if(a==="mentorship")return"mentorship";else if(a==="reactorList")return"reactor_list";else if(a==="feedPoll")return"feed_poll";else if(a==="timeline"||a==="feedOrganicPost")return"timeline";else if(a==="pageResponsivenessCard"||a==="pageAboutCard")return"pages_about";else if(a==="inboxSearch"||a==="sidebarSearch"||a==="search")return"search";else if(a==="storyAggregatedUsers")return"story_aggregated_users";else if(a==="fundraiserMoreMenu")return"fundraiser_support:reactive_more_menu";else if(a==="fundraiserFaq")return"fundraiser_support:reactive_faq";else if(a==="notificationInThreadReply")return"message_received";else if(a==="roomsNullState")return"rooms_null_state";else if(a==="storyViewerSheetRow")return"stories_viewed_by_list";else if(a==="feedOrganicPostNewsfeedPagePostCta")return"pages_cta";else if(a==="chatheadsNewMessage")return"new_msg_button";else if(a==="groupExperts"||a==="groupCommunityFriendsDialog")return"group_experts_discovery_invite";else if(a==="hovercard")return"hovercard";else if(a==="crisisListingAttachment")return"crisis_listing_attachment";else if(a==="mentalHealth")return"mental_health";else if(a==="event")return"events_permalink";else if(a==="jewelSearch")return"jewel_search";else if(a==="pagePopupChat")return"pages_popup_chat";else if(a==="communityHelp")return"community_help";else if(a==="jewelNewMessage")return"jewel_new_message";else if(a==="fundraiser")return"fundraiser";else if(a==="memories")return"memories_home";else if(a==="fundraiserSupportersList")return"fundraiser_supporters_list";else if(a==="groupRemovePost")return"group_remove_post_tombstone";else if(a==="pagesHeader")return"pages_header";else if(a==="groupMembers")return"group_members_tab";else if(a==="chatheads")return"chat_heads";else if(a==="birthday")return"birthdays";else if(a==="localBusinessesNearby")return"local_businesses_nearby";else if(a==="marketplace")return"marketplace";else if(a==="mutualFriendsDialog")return"mutual_friends_dialog";else if(a==="feedOrganicPostViewAndMessage")return"feed_story_cta";else if(a==="profileServicesMenu")return"profile_services_menu";else if(a==="adsCta")return"reshares_dialog";else if(a==="offer")return"offer";else if(a==="payments")return"p2p_payments";else if(a==="groupQuality")return"group_quality";else if(a==="pagesHomeFriendsDialog")return"pages_home_friends_dialog";else if(a==="communityFriendsDialog")return"pages_community_friends_dialog";else if(a==="groupChats")return"group_chats";else if(a==="groupTab")return"group_tab";else if(a==="gratitude")return"gratitude";else return"unknown"}function b(a){switch(a){case"groupTab":case"inboxThreadList":case"jewel":return!0;default:return!1}}g.cast=a;g.getEntryPointShouldOverrideThreadSnippetRemoval=b}),98);
__d("MAWEBSwitch",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1}var b=a.prototype;b.set=function(a){this.$1=a;return this.$1};b.isEnabled=function(){return this.$1};return a}();b=new a();c=b;f["default"]=c}),66);
__d("LSBitFlag.bs",["bs_caml","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("bs_caml").i64_eq(c("bs_caml_int64").and_(b,a),a)}function b(a,b){return c("bs_caml_int64").or_(b,a)}function d(a,b){return c("bs_caml_int64").and_(b,c("bs_int64").lognot(a))}g.has=a;g.set=b;g.clear=d;g.empty=c("bs_caml_int64").zero}),98);
__d("LSPlatformErrorChannel",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h="onLSError",i=new(c("BaseEventEmitter"))();function a(a){i.emit(h,a)}function b(a){var b=i.addListener(h,a);return function(){return b.remove()}}g.emit=a;g.subscribe=b}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],messages:[{indexName:"fk_messages",tableName:"attachments"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("LSMetadata",["LSDbForeignKeys","LSTableSchemas","ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b={},e={},f=-1;for(a of a)for(var g of a){var h;h={autoIncrement:(h=g.auto_increment)!=null?h:!1,cascadeUpdates:(h=c("LSDbForeignKeys")[g.name])!=null?h:[],id:parseInt(g.id,10),indexes:(h=g.indexes)!=null?h:{},name:g.name,primaryKeyIds:g.primary_key};b[h.id]=h;e[h.name]=h;h.id>f&&(f=h.id)}h={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};b[h.id]=h;e[h.name]=h;g={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};b[g.id]=g;e[g.name]=g;return{tableIds:b,tableNames:e}}function a(a){a=h(a);var b=a.tableIds;a=a.tableNames;return{tableIds:b,tableNames:a}}b=a(c("LSTableSchemas"));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("LSMailboxMessagesRangeQueryDirection.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").neg_one;c=b("bs_caml_int64").zero;d=b("bs_caml_int64").one;f.beforeLegacy=a;f.before=c;f.after=d}),null);
__d("bs_js_dict",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(c in a)return b("bs_caml_option").some(a[c])}var g=function(a,b){delete a[b]};function c(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function d(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0;e<c;++e)d[e]=a[b[e]];return d}function e(a){var b={};a=a;while(!0){var c=a;if(!c)return b;var d=c.hd;b[d[0]]=d[1];a=c.tl;continue}}function h(a){var b={},c=a.length;for(var d=0;d<c;++d){var e=a[d];b[e[0]]=e[1]}return b}function i(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0;f<e;++f){var g=d[f];c[g]=a(b[g])}return c}f.get=a;f.unsafeDeleteKey=g;f.entries=c;f.values=d;f.fromList=e;f.fromArray=h;f.map=i}),null);/*FB_PKG_DELIM*/
__d("WAResultOrError",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){function g(a,b){if(b!=null)return{success:!1,error:a,payload:b};else return{success:!1,error:a}}function h(a){return{success:!0,value:a}}function a(a,b){return!a.success?a:h(b(a.value))}function c(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a);return!a.success?a:h(b(a.value))});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!a.success)return a;b=(yield b(a.value));return h(b)});return k.apply(this,arguments)}function d(a,b){return a.success?h(a.value):g(b(a.error),a.payload)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a.success)return h(a.value);b=(yield b(a.error));return g(b,a.payload)});return m.apply(this,arguments)}function e(a,b){return a.success?b(a.value):a}function n(a,c){return a.success?c(a.value):b("Promise").resolve(a)}function o(a){return function(b){return j(b,a)}}function p(a){return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield l(b,a)});return function(a){return c.apply(this,arguments)}}()}f.makeError=g;f.makeResult=h;f.mapResult=a;f.mapAsyncResult=c;f.asyncMapResult=j;f.mapError=d;f.asyncMapError=l;f.chain=e;f.asyncChain=n;f.onResult=o;f.catchError=p}),66);
__d("LocalStorageWrapper",["CurrentUser","WAResultOrError","isQuotaExceededError","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("PersistedQueue").__setRef("LocalStorageWrapper");function i(a){var b=null;try{b=window.localStorage;if(b!=null&&typeof b.setItem==="function"&&typeof b.removeItem==="function"){var c="__test__"+Date.now();b.setItem(c,"");b.removeItem(c)}else return null}catch(c){if(d("isQuotaExceededError").isStorageQuotaExceededError(b,c)===!1){a("Failed to get localstorage");return null}}return b}function a(a){try{a=i(a);return a!=null}catch(a){return!1}}function j(a){try{var b=0,c={};for(var d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;var e=(a[d].length+d.length)*2;b+=e;e/1024>1e3&&(c[d.substr(0,50)]=(e/1024).toFixed(2))}c.total=(b/1024).toFixed(2);return JSON.stringify(c)}catch(a){return"Can't calculate localStorage"}}function b(a,b,c,e,f){if(a==null)return d("WAResultOrError").makeError("null-storage");try{a.setItem(b,c)}catch(i){f!=null&&f(i);if(d("CurrentUser").isEmployee()){var g=j(a);h.onReady(function(a){a=a.isQueueActivateExperiment().toString();e(i+" - Storage quota exceeded while setting "+b+":"+c+", queueActivateExp:"+a+" "+g)})}else e(i+" - Storage quota exceeded while setting "+b+":"+c);return d("WAResultOrError").makeError("quota-exceeded")}return d("WAResultOrError").makeResult()}function e(a,b,c){a==null?c("not storage found"):a.removeItem(b)}function f(a,b,c){if(a==null){c("not storage found");return null}else return a.getItem(b)}g.getStorage=i;g.isLocalStorageAvailable=a;g.setItemGuarded=b;g.removeItemGuarded=e;g.getItemGuarded=f}),98);
__d("MWLocalStorageErrorHandler",["cr:3449","cr:529"],(function(a,b,c,d,e,f,g){"use strict";function a(a){b("cr:529")&&b("cr:3449")&&b("cr:529").emit(new(b("cr:3449").ReStoreLocalStorageQuotaExceed)(a.message))}g.onQuotaExceeded=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]);h=function(){return a};return a}function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("WAArrayBufferUtils",["Promise","WAErr"],(function(a,b,c,d,e,f,g){function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(b("Promise"))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var h=8388607;function f(a,b){a=new Uint8Array(a);if(b>h)throw c("WAErr")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function i(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function j(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return k(a,b)}function k(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=i;g.arrayBuffersEqualUNSAFE=j;g.uint8ArraysEqualUNSAFE=k}),98);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error("no PRNG")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error("bad key size");if(b.length!==ra)throw new Error("bad nonce size")}function Ha(a,b){if(a.length!==wa)throw new Error("bad public key size");if(b.length!==xa)throw new Error("bad secret key size")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error("bad n size");if(b.length!==ua)throw new Error("bad p size");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error("bad n size");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error("bad secret key size");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error("bad secret key size");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error("bad signature size");if(c.length!==Ca)throw new Error("bad public key size");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error("bad secret key size");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error("bad seed size");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!=="undefined"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-1.0.3")()}),null);
__d("MAWVaultMaterials",["FBLogger","WAArrayBufferUtils","randomInt","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h={encryptionKey:null,prefixAndSuffix:null};function i(a){h.prefixAndSuffix=a}function j(){return h.encryptionKey}function k(a){h.encryptionKey=a}function a(){h.encryptionKey=null,h.prefixAndSuffix=null}function l(){return n()!=null&&j()!=null}function m(){var a=1e9,b=9999999999;return c("randomInt")(a,b)+"##"+c("randomInt")(a,b)}function n(){return h.prefixAndSuffix}function o(){if(!l())throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Vault materials are null");return babelHelpers["extends"]({},h)}function b(a){var b=l();c("FBLogger")("messenger_e2ee_web").debug("Setting vault materials -- vaultMaterials=%s, previouslySetup=%s",Boolean(a).toString(),b);if(!b){p((b=a)!=null?b:{encryptionKey:d("tweetnacl").randomBytes(32).buffer,prefixAndSuffix:m()})}return o()}function p(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(b==null||a==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Cannot set null values for encryption key and prefix");k(b);i(a)}function e(){return q(o())}function q(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(a!=null&&b!=null){b=d("WAArrayBufferUtils").arrayBufferToString(b);return JSON.stringify({encryptionKey:b,prefixAndSuffix:a})}else return""}function f(a){if(a==="")return null;else{a=JSON.parse(a);if(a.encryptionKey==null||a.prefixAndSuffix==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Vault materials were not in correct format");var b=d("WAArrayBufferUtils").stringToArrayBuffer(a.encryptionKey);a=a.prefixAndSuffix;return{encryptionKey:b,prefixAndSuffix:a}}}g.TEST_ONLY_clearVaultMaterials=a;g.hasVaultBeenSetup=l;g.getVaultPrefixAndSuffix=n;g.getVaultMaterials=o;g.initializeVaultMaterials=b;g.materialsToString=e;g.fromMaterialsToString=q;g.fromStringToMaterials=f}),98);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=d("MAWLocalStorage").getStorage(),c=function(c){d("MAWLocalStorage").setItemGuarded(b,a,JSON.stringify(c))},e=function(c){window.removeEventListener("storage",c),d("MAWLocalStorage").removeItemGuarded(b,a)},f=function(a){window.addEventListener("storage",a)},g=function(b){return b!=null&&b.key===a&&typeof b.newValue==="string"?JSON.parse(b.newValue):null};return{getMessage:g,onRequestReceived:function(a){var b=function(b){b=g(b);b!=null&&a(b)};f(b);return{release:function(){e(b)}}},sendMessage:c,stopWaitingForReply:e,waitForReply:f}}function i(a){var b=new window.BroadcastChannel(a),c=new Set();b.addEventListener("message",function(a){c.forEach(function(b){b(a)})});var d=function(a){c.add(a)},e=function(a){c["delete"](a)};a=function(a){b.postMessage(JSON.stringify(a))};var f=function(a){return a!=null&&typeof a.data==="string"?JSON.parse(a.data):null};return{getMessage:f,onRequestReceived:function(a){var b=function(b){b=f(b);b!=null&&a(b)};d(b);return{release:function(){e(b)}}},sendMessage:a,stopWaitingForReply:e,waitForReply:d}}function a(a){return window.BroadcastChannel!=null?i(a):h(a)}g.getChannel=a}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var c=this;this.$5=function(a){a=c.$4.getMessage(a);a!=null&&a.a==="sb"&&a.t!==c.tabID()&&a.r===c.tabID()&&a.k!=null&&(c.$2&&c.$2(a.k),c.$4.stopWaitingForReply(c.$5),c.$2=null)};this.$1=a;this.$3=b!=null?b:500;this.$4=d("MWTabCommunicationChannel").getChannel(a)}var e=a.prototype;e.tabID=function(){return c("pageID")};e.$6=function(){var a={a:"r",t:this.tabID()};this.$4.sendMessage(a)};e.listenToRequest=function(a){var b=this,c=function(c){if(c.a==="r"&&c.t!==b.tabID()){c={a:"sb",k:a(),r:c.t,t:b.tabID()};b.$4.sendMessage(c)}};return this.$4.onRequestReceived(c)};e.$7=function(){var a=this;return new(b("Promise"))(function(b){a.$2=b,a.$4.waitForReply(a.$5),a.$6()})};e.request=function(a,d){var e=this,f,g=function(){f!=null&&c("clearTimeout")(f)};return b("Promise").race([this.$7().then(function(b){e.$4.stopWaitingForReply(e.$5);return a(b)}),new(b("Promise"))(function(a){f=c("setTimeout")(function(){a(d()),e.$4.stopWaitingForReply(e.$5)},e.$3)})]).then(function(a){g();return a})};return a}();g.MWTabCommunication=a}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWTabCommunication","Promise"],(function(a,b,c,d,e,f,g){"use strict";e="mw_exchange_vm";var h=new(d("MWTabCommunication").MWTabCommunication)(e);function a(){return h.listenToRequest(d("MAWVaultMaterials").materialsToString)}function c(){if(d("MAWVaultMaterials").hasVaultBeenSetup())return b("Promise").resolve(d("MAWVaultMaterials").getVaultMaterials());else{var a=function(a){return d("MAWVaultMaterials").fromStringToMaterials(a)};return h.request(a,function(){}).then(function(a){return d("MAWVaultMaterials").initializeVaultMaterials(a)})}}g.listenToVaultMaterialsRequest=a;g.setupVaultMaterials=c}),98);